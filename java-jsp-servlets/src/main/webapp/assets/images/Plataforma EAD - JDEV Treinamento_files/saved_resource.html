<!DOCTYPE html>
<!-- saved from url=(0097)https://player-vz-59817ca7-33e.tv.pandavideo.com.br/embed/?v=7f92473a-26d6-4036-b65d-8941ce90ea14 -->
<html style="--plyr-color-main: #4874F1; --plyr-captions-text-color: #FFFFFF; --plyr-captions-background: #000000; --plyr-video-control-color: #7D97F5; --plyr-video-control-color-hover: #7D97F5; --plyr-menu-color: #4a5464; --live-indicator-color: #fc2d2d;"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="stylesheet" href="./css(2)"><meta name="robots" content="noindex"><link rel="stylesheet" crossorigin="anonymous" href="./main(1).css"><script async="" src="./fbevents.js.download"></script><script>!function t(e){var r,i;r=this,i=function(){"use strict";function r(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function i(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,m(i.key),i)}}function a(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function s(t,e,r){return(e=m(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function o(){return o=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},o.apply(this,arguments)}function l(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,h(t,e)}function u(t){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},u(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function c(t,e,r){return c=d()?Reflect.construct.bind():function(t,e,r){var i=[null];i.push.apply(i,e);var n=new(Function.bind.apply(t,i));return r&&h(n,r.prototype),n},c.apply(null,arguments)}function f(t){var e="function"==typeof Map?new Map:void 0;return f=function(t){if(null===t||(r=t,-1===Function.toString.call(r).indexOf("[native code]")))return t;var r;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return c(t,arguments,u(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),h(i,t)},f(t)}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}function v(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(r)return(r=r.call(t)).next.bind(r);if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function m(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,e||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var p={};!function(t,e){var r,i,n,a,s;r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,s={buildAbsoluteURL:function(t,e,r){if(r=r||{},t=t.trim(),!(e=e.trim())){if(!r.alwaysNormalize)return t;var n=s.parseURL(t);if(!n)throw new Error("Error trying to parse base URL.");return n.path=s.normalizePath(n.path),s.buildURLFromParts(n)}var a=s.parseURL(e);if(!a)throw new Error("Error trying to parse relative URL.");if(a.scheme)return r.alwaysNormalize?(a.path=s.normalizePath(a.path),s.buildURLFromParts(a)):e;var o=s.parseURL(t);if(!o)throw new Error("Error trying to parse base URL.");if(!o.netLoc&&o.path&&"/"!==o.path[0]){var l=i.exec(o.path);o.netLoc=l[1],o.path=l[2]}o.netLoc&&!o.path&&(o.path="/");var u={scheme:o.scheme,netLoc:a.netLoc,path:null,params:a.params,query:a.query,fragment:a.fragment};if(!a.netLoc&&(u.netLoc=o.netLoc,"/"!==a.path[0]))if(a.path){var h=o.path,d=h.substring(0,h.lastIndexOf("/")+1)+a.path;u.path=s.normalizePath(d)}else u.path=o.path,a.params||(u.params=o.params,a.query||(u.query=o.query));return null===u.path&&(u.path=r.alwaysNormalize?s.normalizePath(a.path):a.path),s.buildURLFromParts(u)},parseURL:function(t){var e=r.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(n,"");t.length!==(t=t.replace(a,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=s}({get exports(){return p},set exports(t){p=t}});var y=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},T=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t}({}),E=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),S=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown",t}({}),L=function(){},R={trace:L,debug:L,log:L,warn:L,info:L,error:L},A=R;function k(t){var e=self.console[t];return e?e.bind(self.console,"["+t+"] >"):L}function b(t,e){if(self.console&&!0===t||"object"==typeof t){!function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];r.forEach((function(e){A[e]=t[e]?t[e].bind(t):k(e)}))}(t,"debug","log","info","warn","error");try{A.log('Debug logs enabled for "'+e+'" in hls.js version 1.4.0')}catch(t){A=R}}else A=R}var D=A,I=/^(\d+)x(\d+)$/,w=/(.+?)=(".*?"|.*?)(?:,|$)/g,C=function(){function t(e){for(var r in"string"==typeof e&&(e=t.parseAttrList(e)),e)e.hasOwnProperty(r)&&("X-"===r.substring(0,2)&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(r)),this[r]=e[r])}var e=t.prototype;return e.decimalInteger=function(t){var e=parseInt(this[t],10);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.hexadecimalInteger=function(t){if(this[t]){var e=(this[t]||"0x").slice(2);e=(1&e.length?"0":"")+e;for(var r=new Uint8Array(e.length/2),i=0;i<e.length/2;i++)r[i]=parseInt(e.slice(2*i,2*i+2),16);return r}return null},e.hexadecimalIntegerAsNumber=function(t){var e=parseInt(this[t],16);return e>Number.MAX_SAFE_INTEGER?1/0:e},e.decimalFloatingPoint=function(t){return parseFloat(this[t])},e.optionalFloat=function(t,e){var r=this[t];return r?parseFloat(r):e},e.enumeratedString=function(t){return this[t]},e.bool=function(t){return"YES"===this[t]},e.decimalResolution=function(t){var e=I.exec(this[t]);if(null!==e)return{width:parseInt(e[1],10),height:parseInt(e[2],10)}},t.parseAttrList=function(t){var e,r={};for(w.lastIndex=0;null!==(e=w.exec(t));){var i=e[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[e[1].trim()]=i}return r},t}();function _(t){return"SCTE35-OUT"===t||"SCTE35-IN"===t}var P=function(){function t(t,e){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,e){var r=e.attr;for(var i in r)if(Object.prototype.hasOwnProperty.call(t,i)&&t[i]!==r[i]){D.warn('DATERANGE tag attribute: "'+i+'" does not match for tags with ID: "'+t.ID+'"'),this._badValueForSameId=i;break}t=o(new C({}),r,t)}if(this.attr=t,this._startDate=new Date(t["START-DATE"]),"END-DATE"in this.attr){var n=new Date(this.attr["END-DATE"]);y(n.getTime())&&(this._endDate=n)}}return a(t,[{key:"id",get:function(){return this.attr.ID}},{key:"class",get:function(){return this.attr.CLASS}},{key:"startDate",get:function(){return this._startDate}},{key:"endDate",get:function(){if(this._endDate)return this._endDate;var t=this.duration;return null!==t?new Date(this._startDate.getTime()+1e3*t):null}},{key:"duration",get:function(){if("DURATION"in this.attr){var t=this.attr.decimalFloatingPoint("DURATION");if(y(t))return t}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}},{key:"plannedDuration",get:function(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}},{key:"endOnNext",get:function(){return this.attr.bool("END-ON-NEXT")}},{key:"isValid",get:function(){return!!this.id&&!this._badValueForSameId&&y(this.startDate.getTime())&&(null===this.duration||this.duration>=0)&&(!this.endOnNext||!!this.class)}}]),t}(),x=function(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}},F="audio",O="video",M="audiovideo",N=function(){function t(t){var e;this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams=((e={})[F]=null,e[O]=null,e[M]=null,e),this.baseurl=t}return t.prototype.setByteRange=function(t,e){var r=t.split("@",2),i=[];1===r.length?i[0]=e?e.byteRangeEndOffset:0:i[0]=parseInt(r[1]),i[1]=parseInt(r[0])+i[0],this._byteRange=i},a(t,[{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"url",get:function(){return!this._url&&this.baseurl&&this.relurl&&(this._url=p.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""},set:function(t){this._url=t}}]),t}(),U=function(t){function e(e,r){var i;return(i=t.call(this,r)||this)._decryptdata=null,i.rawProgramDateTime=null,i.programDateTime=null,i.tagList=[],i.duration=0,i.sn=0,i.levelkeys=void 0,i.type=void 0,i.loader=null,i.keyLoader=null,i.level=-1,i.cc=0,i.startPTS=void 0,i.endPTS=void 0,i.startDTS=void 0,i.endDTS=void 0,i.start=0,i.deltaPTS=void 0,i.maxStartPTS=void 0,i.minEndPTS=void 0,i.stats=new x,i.urlId=0,i.data=void 0,i.bitrateTest=!1,i.title=null,i.initSegment=null,i.endList=void 0,i.gap=void 0,i.type=e,i}l(e,t);var r=e.prototype;return r.setKeyFormat=function(t){if(this.levelkeys){var e=this.levelkeys[t];e&&!this._decryptdata&&(this._decryptdata=e.getDecryptData(this.sn))}},r.abortRequests=function(){var t,e;null==(t=this.loader)||t.abort(),null==(e=this.keyLoader)||e.abort()},r.setElementaryStreamInfo=function(t,e,r,i,n,a){void 0===a&&(a=!1);var s=this.elementaryStreams,o=s[t];o?(o.startPTS=Math.min(o.startPTS,e),o.endPTS=Math.max(o.endPTS,r),o.startDTS=Math.min(o.startDTS,i),o.endDTS=Math.max(o.endDTS,n)):s[t]={startPTS:e,endPTS:r,startDTS:i,endDTS:n,partial:a}},r.clearElementaryStreamInfo=function(){var t=this.elementaryStreams;t[F]=null,t[O]=null,t[M]=null},a(e,[{key:"decryptdata",get:function(){if(!this.levelkeys&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){var t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{var e=Object.keys(this.levelkeys);if(1===e.length)return this._decryptdata=this.levelkeys[e[0]].getDecryptData(this.sn)}}return this._decryptdata}},{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!y(this.programDateTime))return null;var t=y(this.duration)?this.duration:0;return this.programDateTime+1e3*t}},{key:"encrypted",get:function(){var t;if(null!=(t=this._decryptdata)&&t.encrypted)return!0;if(this.levelkeys){var e=Object.keys(this.levelkeys),r=e.length;if(r>1||1===r&&this.levelkeys[e[0]].encrypted)return!0}return!1}}]),e}(N),B=function(t){function e(e,r,i,n,a){var s;(s=t.call(this,i)||this).fragOffset=0,s.duration=0,s.gap=!1,s.independent=!1,s.relurl=void 0,s.fragment=void 0,s.index=void 0,s.stats=new x,s.duration=e.decimalFloatingPoint("DURATION"),s.gap=e.bool("GAP"),s.independent=e.bool("INDEPENDENT"),s.relurl=e.enumeratedString("URI"),s.fragment=r,s.index=n;var o=e.enumeratedString("BYTERANGE");return o&&s.setByteRange(o,a),a&&(s.fragOffset=a.fragOffset+a.duration),s}return l(e,t),a(e,[{key:"start",get:function(){return this.fragment.start+this.fragOffset}},{key:"end",get:function(){return this.start+this.duration}},{key:"loaded",get:function(){var t=this.elementaryStreams;return!!(t.audio||t.video||t.audiovideo)}}]),e}(N),G=function(){function t(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=t}return t.prototype.reloaded=function(t){if(!t)return this.advanced=!0,void(this.updated=!0);var e=this.lastPartSn-t.lastPartSn,r=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!r||!!e,this.advanced=this.endSN>t.endSN||e>0||0===e&&r>0,this.updated||this.advanced?this.misses=Math.floor(.6*t.misses):this.misses=t.misses+1,this.availabilityDelay=t.availabilityDelay},a(t,[{key:"hasProgramDateTime",get:function(){return!!this.fragments.length&&y(this.fragments[this.fragments.length-1].programDateTime)}},{key:"levelTargetDuration",get:function(){return this.averagetargetduration||this.targetduration||10}},{key:"drift",get:function(){var t=this.driftEndTime-this.driftStartTime;return t>0?1e3*(this.driftEnd-this.driftStart)/t:1}},{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:function(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}},{key:"fragmentEnd",get:function(){var t;return null!=(t=this.fragments)&&t.length?this.fragments[this.fragments.length-1].end:0}},{key:"age",get:function(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}},{key:"lastPartIndex",get:function(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].index:-1}},{key:"lastPartSn",get:function(){var t;return null!=(t=this.partList)&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}]),t}();function K(t){return Uint8Array.from(atob(t),(function(t){return t.charCodeAt(0)}))}function H(t){var e,r,i=t.split(":"),n=null;if("data"===i[0]&&2===i.length){var a=i[1].split(";"),s=a[a.length-1].split(",");if(2===s.length){var o="base64"===s[0],l=s[1];o?(a.splice(-1,1),n=K(l)):(e=V(l).subarray(0,16),(r=new Uint8Array(16)).set(e,16-e.length),n=r)}}return n}function V(t){return Uint8Array.from(unescape(encodeURIComponent(t)),(function(t){return t.charCodeAt(0)}))}var Y={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},W="org.w3.clearkey",j="com.apple.streamingkeydelivery",q="com.microsoft.playready",X="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";function z(t){switch(t){case j:return Y.FAIRPLAY;case q:return Y.PLAYREADY;case X:return Y.WIDEVINE;case W:return Y.CLEARKEY}}var Q="edef8ba979d64acea3c827dcd51d21ed";function $(t){switch(t){case Y.FAIRPLAY:return j;case Y.PLAYREADY:return q;case Y.WIDEVINE:return X;case Y.CLEARKEY:return W}}function J(t){var e=t.drmSystems,r=t.widevineLicenseUrl,i=e?[Y.FAIRPLAY,Y.WIDEVINE,Y.PLAYREADY,Y.CLEARKEY].filter((function(t){return!!e[t]})):[];return!i[Y.WIDEVINE]&&r&&i.push(Y.WIDEVINE),i}var Z="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function tt(t,e,r){return Uint8Array.prototype.slice?t.slice(e,r):new Uint8Array(Array.prototype.slice.call(t,e,r))}var et,rt=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},it=function(t,e){return e+10<=t.length&&51===t[e]&&68===t[e+1]&&73===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},nt=function(t,e){for(var r=e,i=0;rt(t,e);)i+=10,i+=at(t,e+6),it(t,e+10)&&(i+=10),e+=i;if(i>0)return t.subarray(r,r+i)},at=function(t,e){var r=0;return r=(127&t[e])<<21,r|=(127&t[e+1])<<14,r|=(127&t[e+2])<<7,r|=127&t[e+3]},st=function(t,e){return rt(t,e)&&at(t,e+6)+10<=t.length-e},ot=function(t){return t&&"PRIV"===t.key&&"com.apple.streaming.transportStreamTimestamp"===t.info},lt=function(t){var e=String.fromCharCode(t[0],t[1],t[2],t[3]),r=at(t,4);return{type:e,size:r,data:t.subarray(10,10+r)}},ut=function(t){for(var e=0,r=[];rt(t,e);){for(var i=at(t,e+6),n=(e+=10)+i;e+8<n;){var a=lt(t.subarray(e)),s=ht(a);s&&r.push(s),e+=a.size+10}it(t,e)&&(e+=10)}return r},ht=function(t){return"PRIV"===t.type?dt(t):"W"===t.type[0]?ft(t):ct(t)},dt=function(t){if(!(t.size<2)){var e=vt(t.data,!0),r=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:r.buffer}}},ct=function(t){if(!(t.size<2)){if("TXXX"===t.type){var e=1,r=vt(t.data.subarray(e),!0);e+=r.length+1;var i=vt(t.data.subarray(e));return{key:t.type,info:r,data:i}}var n=vt(t.data.subarray(1));return{key:t.type,data:n}}},ft=function(t){if("WXXX"===t.type){if(t.size<2)return;var e=1,r=vt(t.data.subarray(e),!0);e+=r.length+1;var i=vt(t.data.subarray(e));return{key:t.type,info:r,data:i}}var n=vt(t.data);return{key:t.type,data:n}},gt=function(t){if(8===t.data.byteLength){var e=new Uint8Array(t.data),r=1&e[3],i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,r&&(i+=47721858.84),Math.round(i)}},vt=function(t,e){void 0===e&&(e=!1);var r=mt();if(r){var i=r.decode(t);if(e){var n=i.indexOf("\0");return-1!==n?i.substring(0,n):i}return i.replace(/\0/g,"")}for(var a,s,o,l=t.length,u="",h=0;h<l;){if(0===(a=t[h++])&&e)return u;if(0!==a&&3!==a)switch(a>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(a);break;case 12:case 13:s=t[h++],u+=String.fromCharCode((31&a)<<6|63&s);break;case 14:s=t[h++],o=t[h++],u+=String.fromCharCode((15&a)<<12|(63&s)<<6|(63&o)<<0)}}return u};function mt(){return et||void 0===self.TextDecoder||(et=new self.TextDecoder("utf-8")),et}var pt=function(t){for(var e="",r=0;r<t.length;r++){var i=t[r].toString(16);i.length<2&&(i="0"+i),e+=i}return e},yt=Math.pow(2,32)-1,Tt=[].push,Et={video:1,audio:2,id3:3,text:4};function St(t){return String.fromCharCode.apply(null,t)}function Lt(t,e){var r=t[e]<<8|t[e+1];return r<0?65536+r:r}function Rt(t,e){var r=At(t,e);return r<0?4294967296+r:r}function At(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function kt(t,e,r){t[e]=r>>24,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r}function bt(t,e){var r=[];if(!e.length)return r;for(var i=t.byteLength,n=0;n<i;){var a=Rt(t,n),s=a>1?n+a:i;if(St(t.subarray(n+4,n+8))===e[0])if(1===e.length)r.push(t.subarray(n+8,s));else{var o=bt(t.subarray(n+8,s),e.slice(1));o.length&&Tt.apply(r,o)}n=s}return r}function Dt(t){var e=[],r=t[0],i=8,n=Rt(t,i);i+=4,i+=0===r?8:16,i+=2;var a=t.length+0,s=Lt(t,i);i+=2;for(var o=0;o<s;o++){var l=i,u=Rt(t,l);l+=4;var h=2147483647&u;if(1==(2147483648&u)>>>31)return D.warn("SIDX has hierarchical references (not supported)"),null;var d=Rt(t,l);l+=4,e.push({referenceSize:h,subsegmentDuration:d,info:{duration:d/n,start:a,end:a+h-1}}),a+=h,i=l+=4}return{earliestPresentationTime:0,timescale:n,version:r,referencesCount:s,references:e}}function It(t){for(var e=[],r=bt(t,["moov","trak"]),i=0;i<r.length;i++){var n=r[i],a=bt(n,["tkhd"])[0];if(a){var s=a[0],o=0===s?12:20,l=Rt(a,o),u=bt(n,["mdia","mdhd"])[0];if(u){var h=Rt(u,o=0===(s=u[0])?12:20),d=bt(n,["mdia","hdlr"])[0];if(d){var c=St(d.subarray(8,12)),f={soun:F,vide:O}[c];if(f){var g=bt(n,["mdia","minf","stbl","stsd"])[0],v=void 0;g&&(v=St(g.subarray(12,16))),e[l]={timescale:h,type:f},e[f]={timescale:h,id:l,codec:v}}}}}}return bt(t,["moov","mvex","trex"]).forEach((function(t){var r=Rt(t,4),i=e[r];i&&(i.default={duration:Rt(t,12),flags:Rt(t,20)})})),e}function wt(t){var e=bt(t,["schm"])[0];if(e){var r=St(e.subarray(4,8));if("cbcs"===r||"cenc"===r)return bt(t,["schi","tenc"])[0]}return D.error("[eme] missing 'schm' box"),null}function Ct(t){var e=Rt(t,0),r=8;1&e&&(r+=4),4&e&&(r+=4);for(var i=0,n=Rt(t,4),a=0;a<n;a++)256&e&&(i+=Rt(t,r),r+=4),512&e&&(r+=4),1024&e&&(r+=4),2048&e&&(r+=4);return i}function _t(t,e){var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}function Pt(t,e){var r=[],i=e.samples,n=e.timescale,a=e.id,s=!1;return bt(i,["moof"]).map((function(o){var l=o.byteOffset-8;bt(o,["traf"]).map((function(o){var u=bt(o,["tfdt"]).map((function(t){var e=t[0],r=Rt(t,4);return 1===e&&(r*=Math.pow(2,32),r+=Rt(t,8)),r/n}))[0];return void 0!==u&&(t=u),bt(o,["tfhd"]).map((function(u){var h=Rt(u,4),d=16777215&Rt(u,0),c=0,f=0!=(16&d),g=0,v=0!=(32&d),m=8;h===a&&(0!=(1&d)&&(m+=8),0!=(2&d)&&(m+=4),0!=(8&d)&&(c=Rt(u,m),m+=4),f&&(g=Rt(u,m),m+=4),v&&(m+=4),"video"===e.type&&(s=function(t){if(!t)return!1;var e=t.indexOf("."),r=e<0?t:t.substring(0,e);return"hvc1"===r||"hev1"===r||"dvh1"===r||"dvhe"===r}(e.codec)),bt(o,["trun"]).map((function(a){var o=a[0],u=16777215&Rt(a,0),h=0!=(1&u),d=0,f=0!=(4&u),v=0!=(256&u),m=0,p=0!=(512&u),y=0,T=0!=(1024&u),E=0!=(2048&u),S=0,L=Rt(a,4),R=8;h&&(d=Rt(a,R),R+=4),f&&(R+=4);for(var A=d+l,k=0;k<L;k++){if(v?(m=Rt(a,R),R+=4):m=c,p?(y=Rt(a,R),R+=4):y=g,T&&(R+=4),E&&(S=0===o?Rt(a,R):At(a,R),R+=4),e.type===O)for(var b=0;b<y;){var D=Rt(i,A);xt(s,i[A+=4])&&Ft(i.subarray(A,A+D),s?2:1,t+S/n,r),A+=D,b+=D+4}t+=m/n}})))}))}))})),r}function xt(t,e){if(t){var r=e>>1&63;return 39===r||40===r}return 6==(31&e)}function Ft(t,e,r,i){var n=Ot(t),a=0;a+=e;for(var s=0,o=0,l=!1,u=0;a<n.length;){s=0;do{if(a>=n.length)break;s+=u=n[a++]}while(255===u);o=0;do{if(a>=n.length)break;o+=u=n[a++]}while(255===u);var h=n.length-a;if(!l&&4===s&&a<n.length){if(l=!0,181===n[a++]){var d=Lt(n,a);if(a+=2,49===d){var c=Rt(n,a);if(a+=4,1195456820===c){var f=n[a++];if(3===f){var g=n[a++],v=64&g,m=v?2+3*(31&g):0,p=new Uint8Array(m);if(v){p[0]=g;for(var y=1;y<m;y++)p[y]=n[a++]}i.push({type:f,payloadType:s,pts:r,bytes:p})}}}}}else if(5===s&&o<h){if(l=!0,o>16){for(var T=[],E=0;E<16;E++){var S=n[a++].toString(16);T.push(1==S.length?"0"+S:S),3!==E&&5!==E&&7!==E&&9!==E||T.push("-")}for(var L=o-16,R=new Uint8Array(L),A=0;A<L;A++)R[A]=n[a++];i.push({payloadType:s,pts:r,uuid:T.join(""),userData:vt(R),userDataBytes:R})}}else if(o<h)a+=o;else if(o>h)break}}function Ot(t){for(var e=t.byteLength,r=[],i=1;i<e-2;)0===t[i]&&0===t[i+1]&&3===t[i+2]?(r.push(i+2),i+=2):i++;if(0===r.length)return t;var n=e-r.length,a=new Uint8Array(n),s=0;for(i=0;i<n;s++,i++)s===r[0]&&(s++,r.shift()),a[i]=t[s];return a}function Mt(t,e,r){if(16!==t.byteLength)throw new RangeError("Invalid system id");var i,n,a;if(e){i=1,n=new Uint8Array(16*e.length);for(var s=0;s<e.length;s++){var o=e[s];if(16!==o.byteLength)throw new RangeError("Invalid key");n.set(o,16*s)}}else i=0,n=new Uint8Array;i>0?(a=new Uint8Array(4),e.length>0&&new DataView(a.buffer).setUint32(0,e.length,!1)):a=new Uint8Array;var l=new Uint8Array(4);return r&&r.byteLength>0&&new DataView(l.buffer).setUint32(0,r.byteLength,!1),function(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];for(var n=r.length,a=8,s=n;s--;)a+=r[s].byteLength;var o=new Uint8Array(a);for(o[0]=a>>24&255,o[1]=a>>16&255,o[2]=a>>8&255,o[3]=255&a,o.set(t,4),s=0,a=8;s<n;s++)o.set(r[s],a),a+=r[s].byteLength;return o}([112,115,115,104],new Uint8Array([i,0,0,0]),t,a,n,l,r||new Uint8Array)}var Nt={},Ut=function(){function t(t,e,r,i,n){void 0===i&&(i=[1]),void 0===n&&(n=null),this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=t,this.uri=e,this.keyFormat=r,this.keyFormatVersions=i,this.iv=n,this.encrypted=!!t&&"NONE"!==t,this.isCommonEncryption=this.encrypted&&"AES-128"!==t}t.clearKeyUriToKeyIdMap=function(){Nt={}};var e=t.prototype;return e.isSupported=function(){if(this.method){if("AES-128"===this.method||"NONE"===this.method)return!0;if("identity"===this.keyFormat)return"SAMPLE-AES"===this.method;switch(this.keyFormat){case j:case X:case q:case W:return-1!==["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)}}return!1},e.getDecryptData=function(e){if(!this.encrypted||!this.uri)return null;if("AES-128"===this.method&&this.uri&&!this.iv){"number"!=typeof e&&("AES-128"!==this.method||this.iv||D.warn('missing IV for initialization segment with method="'+this.method+'" - compliance issue'),e=0);var r=function(t){for(var e=new Uint8Array(16),r=12;r<16;r++)e[r]=t>>8*(15-r)&255;return e}(e);return new t(this.method,this.uri,"identity",this.keyFormatVersions,r)}var i=H(this.uri);if(i)switch(this.keyFormat){case X:this.pssh=i,i.length>=22&&(this.keyId=i.subarray(i.length-22,i.length-6));break;case q:var n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Mt(n,null,i);var a=new Uint16Array(i.buffer,i.byteOffset,i.byteLength/2),s=String.fromCharCode.apply(null,Array.from(a)),o=s.substring(s.indexOf("<"),s.length),l=(new DOMParser).parseFromString(o,"text/xml").getElementsByTagName("KID")[0];if(l){var u=l.childNodes[0]?l.childNodes[0].nodeValue:l.getAttribute("VALUE");if(u){var h=K(u).subarray(0,16);!function(t){var e=function(t,e,r){var i=t[e];t[e]=t[r],t[r]=i};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}(h),this.keyId=h}}break;default:var d=i.subarray(0,16);if(16!==d.length){var c=new Uint8Array(16);c.set(d,16-d.length),d=c}this.keyId=d}if(!this.keyId||16!==this.keyId.byteLength){var f=Nt[this.uri];if(!f){var g=Object.keys(Nt).length%Number.MAX_SAFE_INTEGER;f=new Uint8Array(16),new DataView(f.buffer,12,4).setUint32(0,g),Nt[this.uri]=f}this.keyId=f}return this},t}(),Bt=/\{\$([a-zA-Z0-9-_]+)\}/g;function Gt(t){return Bt.test(t)}function Kt(t,e,r){if(null!==t.variableList||t.hasVariableRefs)for(var i=r.length;i--;){var n=r[i],a=e[n];a&&(e[n]=Ht(t,a))}}function Ht(t,e){if(null!==t.variableList||t.hasVariableRefs){var r=t.variableList;return e.replace(Bt,(function(e){var i=e.substring(2,e.length-1),n=null==r?void 0:r[i];return void 0===n?(t.playlistParsingError||(t.playlistParsingError=new Error('Missing preceding EXT-X-DEFINE tag for Variable Reference: "'+i+'"')),e):n}))}return e}function Vt(t,e,r){var i,n,a=t.variableList;if(a||(t.variableList=a={}),"QUERYPARAM"in e){i=e.QUERYPARAM;try{var s=new self.URL(r).searchParams;if(!s.has(i))throw new Error('"'+i+'" does not match any query parameter in URI: "'+r+'"');n=s.get(i)}catch(e){t.playlistParsingError||(t.playlistParsingError=new Error("EXT-X-DEFINE QUERYPARAM: "+e.message))}}else i=e.NAME,n=e.VALUE;i in a?t.playlistParsingError||(t.playlistParsingError=new Error('EXT-X-DEFINE duplicate Variable Name declarations: "'+i+'"')):a[i]=n||""}function Yt(t,e,r){var i=e.IMPORT;if(r&&i in r){var n=t.variableList;n||(t.variableList=n={}),n[i]=r[i]}else t.playlistParsingError||(t.playlistParsingError=new Error('EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "'+i+'"'))}var Wt={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}};function jt(t,e){return MediaSource.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}var qt=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Xt=/#EXT-X-MEDIA:(.*)/g,zt=/^#EXT(?:INF|-X-TARGETDURATION):/m,Qt=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),$t=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),Jt=function(){function t(){}return t.findGroup=function(t,e){for(var r=0;r<t.length;r++){var i=t[r];if(i.id===e)return i}},t.convertAVC1ToAVCOTI=function(t){var e=t.split(".");if(e.length>2){var r=e.shift()+".";return r+=parseInt(e.shift()).toString(16),r+=("000"+parseInt(e.shift()).toString(16)).slice(-4)}return t},t.resolve=function(t,e){return p.buildAbsoluteURL(e,t,{alwaysNormalize:!0})},t.isMediaPlaylist=function(t){return zt.test(t)},t.parseMasterPlaylist=function(e,r){var i,n={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:Gt(e)},a=[];for(qt.lastIndex=0;null!=(i=qt.exec(e));)if(i[1]){var s,o=new C(i[1]);Kt(n,o,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);var l=Ht(n,i[2]),u={attrs:o,bitrate:o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),name:o.NAME,url:t.resolve(l,r)},h=o.decimalResolution("RESOLUTION");h&&(u.width=h.width,u.height=h.height),ee((o.CODECS||"").split(/[ ,]+/).filter((function(t){return t})),u),u.videoCodec&&-1!==u.videoCodec.indexOf("avc1")&&(u.videoCodec=t.convertAVC1ToAVCOTI(u.videoCodec)),null!=(s=u.unknownCodecs)&&s.length||a.push(u),n.levels.push(u)}else if(i[3]){var d=i[3],c=i[4];switch(d){case"SESSION-DATA":var f=new C(c);Kt(n,f,["DATA-ID","LANGUAGE","VALUE","URI"]);var g=f["DATA-ID"];g&&(null===n.sessionData&&(n.sessionData={}),n.sessionData[g]=f);break;case"SESSION-KEY":var v=Zt(c,r,n);v.encrypted&&v.isSupported()?(null===n.sessionKeys&&(n.sessionKeys=[]),n.sessionKeys.push(v)):D.warn('[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "'+c+'"');break;case"DEFINE":var m=new C(c);Kt(n,m,["NAME","VALUE","QUERYPARAM"]),Vt(n,m,r);break;case"CONTENT-STEERING":var p=new C(c);Kt(n,p,["SERVER-URI","PATHWAY-ID"]),n.contentSteering={uri:t.resolve(p["SERVER-URI"],r),pathwayId:p["PATHWAY-ID"]||"."};break;case"START":n.startTimeOffset=te(c)}}var y=a.length>0&&a.length<n.levels.length;return n.levels=y?a:n.levels,0===n.levels.length&&(n.playlistParsingError=new Error("no levels found in manifest")),n},t.parseMasterPlaylistMedia=function(e,r,i){var n,a={},s=i.levels,o={AUDIO:s.map((function(t){return{id:t.attrs.AUDIO,audioCodec:t.audioCodec}})),SUBTITLES:s.map((function(t){return{id:t.attrs.SUBTITLES,textCodec:t.textCodec}})),"CLOSED-CAPTIONS":[]},l=0;for(Xt.lastIndex=0;null!==(n=Xt.exec(e));){var u=new C(n[1]),h=u.TYPE;if(h){var d=o[h],c=a[h]||[];a[h]=c,Kt(i,u,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);var f={attrs:u,bitrate:0,id:l++,groupId:u["GROUP-ID"]||"",instreamId:u["INSTREAM-ID"],name:u.NAME||u.LANGUAGE||"",type:h,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:u.LANGUAGE,url:u.URI?t.resolve(u.URI,r):""};if(null!=d&&d.length){var g=t.findGroup(d,f.groupId)||d[0];re(f,g,"audioCodec"),re(f,g,"textCodec")}c.push(f)}}return a},t.parseLevelPlaylist=function(t,e,r,i,n,a){var s,l,u,h=new G(e),d=h.fragments,c=null,f=0,g=0,v=0,m=0,p=null,T=new U(i,e),E=-1,S=!1;for(Qt.lastIndex=0,h.m3u8=t,h.hasVariableRefs=Gt(t);null!==(s=Qt.exec(t));){S&&(S=!1,(T=new U(i,e)).start=v,T.sn=f,T.cc=m,T.level=r,c&&(T.initSegment=c,T.rawProgramDateTime=c.rawProgramDateTime,c.rawProgramDateTime=null));var L=s[1];if(L){T.duration=parseFloat(L);var R=(" "+s[2]).slice(1);T.title=R||null,T.tagList.push(R?["INF",L,R]:["INF",L])}else if(s[3]){if(y(T.duration)){T.start=v,u&&ae(T,u,h),T.sn=f,T.level=r,T.cc=m,T.urlId=n,d.push(T);var A=(" "+s[3]).slice(1);T.relurl=Ht(h,A),ie(T,p),p=T,v+=T.duration,f++,g=0,S=!0}}else if(s[4]){var k=(" "+s[4]).slice(1);p?T.setByteRange(k,p):T.setByteRange(k)}else if(s[5])T.rawProgramDateTime=(" "+s[5]).slice(1),T.tagList.push(["PROGRAM-DATE-TIME",T.rawProgramDateTime]),-1===E&&(E=d.length);else{if(!(s=s[0].match($t))){D.warn("No matches on slow regex match for level playlist!");continue}for(l=1;l<s.length&&void 0===s[l];l++);var b=(" "+s[l]).slice(1),I=(" "+s[l+1]).slice(1),w=s[l+2]?(" "+s[l+2]).slice(1):"";switch(b){case"PLAYLIST-TYPE":h.type=I.toUpperCase();break;case"MEDIA-SEQUENCE":f=h.startSN=parseInt(I);break;case"SKIP":var _=new C(I);Kt(h,_,["RECENTLY-REMOVED-DATERANGES"]);var x=_.decimalInteger("SKIPPED-SEGMENTS");if(y(x)){h.skippedSegments=x;for(var F=x;F--;)d.unshift(null);f+=x}var O=_.enumeratedString("RECENTLY-REMOVED-DATERANGES");O&&(h.recentlyRemovedDateranges=O.split("\t"));break;case"TARGETDURATION":h.targetduration=Math.max(parseInt(I),1);break;case"VERSION":h.version=parseInt(I);break;case"EXTM3U":break;case"ENDLIST":h.live=!1;break;case"#":(I||w)&&T.tagList.push(w?[I,w]:[I]);break;case"DISCONTINUITY":m++,T.tagList.push(["DIS"]);break;case"GAP":T.gap=!0,T.tagList.push([b]);break;case"BITRATE":T.tagList.push([b,I]);break;case"DATERANGE":var M=new C(I);Kt(h,M,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),Kt(h,M,M.clientAttrs);var N=new P(M,h.dateRanges[M.ID]);N.isValid||h.skippedSegments?h.dateRanges[N.id]=N:D.warn('Ignoring invalid DATERANGE tag: "'+I+'"'),T.tagList.push(["EXT-X-DATERANGE",I]);break;case"DEFINE":var K=new C(I);Kt(h,K,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in K?Yt(h,K,a):Vt(h,K,e);break;case"DISCONTINUITY-SEQUENCE":m=parseInt(I);break;case"KEY":var H=Zt(I,e,h);if(H.isSupported()){if("NONE"===H.method){u=void 0;break}u||(u={}),u[H.keyFormat]&&(u=o({},u)),u[H.keyFormat]=H}else D.warn('[Keys] Ignoring invalid EXT-X-KEY tag: "'+I+'"');break;case"START":h.startTimeOffset=te(I);break;case"MAP":var V=new C(I);if(Kt(h,V,["BYTERANGE","URI"]),T.duration){var Y=new U(i,e);ne(Y,V,r,u),c=Y,T.initSegment=c,c.rawProgramDateTime&&!T.rawProgramDateTime&&(T.rawProgramDateTime=c.rawProgramDateTime)}else ne(T,V,r,u),c=T,S=!0;break;case"SERVER-CONTROL":var W=new C(I);h.canBlockReload=W.bool("CAN-BLOCK-RELOAD"),h.canSkipUntil=W.optionalFloat("CAN-SKIP-UNTIL",0),h.canSkipDateRanges=h.canSkipUntil>0&&W.bool("CAN-SKIP-DATERANGES"),h.partHoldBack=W.optionalFloat("PART-HOLD-BACK",0),h.holdBack=W.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var j=new C(I);h.partTarget=j.decimalFloatingPoint("PART-TARGET");break;case"PART":var q=h.partList;q||(q=h.partList=[]);var X=g>0?q[q.length-1]:void 0,z=g++,Q=new C(I);Kt(h,Q,["BYTERANGE","URI"]);var $=new B(Q,T,e,z,X);q.push($),T.duration+=$.duration;break;case"PRELOAD-HINT":var J=new C(I);Kt(h,J,["URI"]),h.preloadHint=J;break;case"RENDITION-REPORT":var Z=new C(I);Kt(h,Z,["URI"]),h.renditionReports=h.renditionReports||[],h.renditionReports.push(Z);break;default:D.warn("line parsed but not handled: "+s)}}}p&&!p.relurl?(d.pop(),v-=p.duration,h.partList&&(h.fragmentHint=p)):h.partList&&(ie(T,p),T.cc=m,h.fragmentHint=T,u&&ae(T,u,h));var tt=d.length,et=d[0],rt=d[tt-1];if((v+=h.skippedSegments*h.targetduration)>0&&tt&&rt){h.averagetargetduration=v/tt;var it=rt.sn;h.endSN="initSegment"!==it?it:0,h.live||(rt.endList=!0),et&&(h.startCC=et.cc)}else h.endSN=0,h.startCC=0;return h.fragmentHint&&(v+=h.fragmentHint.duration),h.totalduration=v,h.endCC=m,E>0&&function(t,e){for(var r=t[e],i=e;i--;){var n=t[i];if(!n)return;n.programDateTime=r.programDateTime-1e3*n.duration,r=n}}(d,E),h},t}();function Zt(t,e,r){var i,n,a=new C(t);Kt(r,a,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);var s=null!=(i=a.METHOD)?i:"",o=a.URI,l=a.hexadecimalInteger("IV"),u=a.KEYFORMATVERSIONS,h=null!=(n=a.KEYFORMAT)?n:"identity";o&&a.IV&&!l&&D.error("Invalid IV: "+a.IV);var d=o?Jt.resolve(o,e):"",c=(u||"1").split("/").map(Number).filter(Number.isFinite);return new Ut(s,d,h,c,l)}function te(t){var e=new C(t).decimalFloatingPoint("TIME-OFFSET");return y(e)?e:null}function ee(t,e){["video","audio","text"].forEach((function(r){var i=t.filter((function(t){return function(t,e){var r=Wt[e];return!!r&&!0===r[t.slice(0,4)]}(t,r)}));if(i.length){var n=i.filter((function(t){return 0===t.lastIndexOf("avc1",0)||0===t.lastIndexOf("mp4a",0)}));e[r+"Codec"]=n.length>0?n[0]:i[0],t=t.filter((function(t){return-1===i.indexOf(t)}))}})),e.unknownCodecs=t}function re(t,e,r){var i=e[r];i&&(t[r]=i)}function ie(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):null!=e&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),y(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function ne(t,e,r,i){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=r,t.sn="initSegment",i&&(t.levelkeys=i),t.initSegment=null}function ae(t,e,r){t.levelkeys=e;var i=r.encryptedFragments;i.length&&i[i.length-1].levelkeys===e||!Object.keys(e).some((function(t){return e[t].isCommonEncryption}))||i.push(t)}var se="manifest",oe="level",le="audioTrack",ue="subtitleTrack",he="main",de="audio",ce="subtitle";function fe(t){switch(t.type){case le:return de;case ue:return ce;default:return he}}function ge(t,e){var r=t.url;return void 0!==r&&0!==r.indexOf("data:")||(r=e.url),r}var ve=function(){function t(t){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=t,this.registerListeners()}var e=t.prototype;return e.startLoad=function(t){},e.stopLoad=function(){this.destroyInternalLoaders()},e.registerListeners=function(){var t=this.hls;t.on(T.MANIFEST_LOADING,this.onManifestLoading,this),t.on(T.LEVEL_LOADING,this.onLevelLoading,this),t.on(T.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(T.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.unregisterListeners=function(){var t=this.hls;t.off(T.MANIFEST_LOADING,this.onManifestLoading,this),t.off(T.LEVEL_LOADING,this.onLevelLoading,this),t.off(T.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(T.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},e.createInternalLoader=function(t){var e=this.hls.config,r=e.pLoader,i=e.loader,n=new(r||i)(e);return this.loaders[t.type]=n,n},e.getInternalLoader=function(t){return this.loaders[t.type]},e.resetInternalLoader=function(t){this.loaders[t]&&delete this.loaders[t]},e.destroyInternalLoaders=function(){for(var t in this.loaders){var e=this.loaders[t];e&&e.destroy(),this.resetInternalLoader(t)}},e.destroy=function(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()},e.onManifestLoading=function(t,e){var r=e.url;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:se,url:r,deliveryDirectives:null})},e.onLevelLoading=function(t,e){var r=e.id,i=e.level,n=e.url,a=e.deliveryDirectives;this.load({id:r,level:i,responseType:"text",type:oe,url:n,deliveryDirectives:a})},e.onAudioTrackLoading=function(t,e){var r=e.id,i=e.groupId,n=e.url,a=e.deliveryDirectives;this.load({id:r,groupId:i,level:null,responseType:"text",type:le,url:n,deliveryDirectives:a})},e.onSubtitleTrackLoading=function(t,e){var r=e.id,i=e.groupId,n=e.url,a=e.deliveryDirectives;this.load({id:r,groupId:i,level:null,responseType:"text",type:ue,url:n,deliveryDirectives:a})},e.load=function(t){var e,r,i,n=this,a=this.hls.config,s=this.getInternalLoader(t);if(s){var l=s.context;if(l&&l.url===t.url)return void D.trace("[playlist-loader]: playlist request ongoing");D.log("[playlist-loader]: aborting previous loader for type: "+t.type),s.abort()}if(r=t.type===se?a.manifestLoadPolicy.default:o({},a.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(t),null!=(e=t.deliveryDirectives)&&e.part&&(t.type===oe&&null!==t.level?i=this.hls.levels[t.level].details:t.type===le&&null!==t.id?i=this.hls.audioTracks[t.id].details:t.type===ue&&null!==t.id&&(i=this.hls.subtitleTracks[t.id].details),i)){var u=i.partTarget,h=i.targetduration;if(u&&h){var d=1e3*Math.max(3*u,.8*h);r=o({},r,{maxTimeToFirstByteMs:Math.min(d,r.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(d,r.maxTimeToFirstByteMs)})}}var c=r.errorRetry||r.timeoutRetry||{},f={loadPolicy:r,timeout:r.maxLoadTimeMs,maxRetry:c.maxNumRetry||0,retryDelay:c.retryDelayMs||0,maxRetryDelay:c.maxRetryDelayMs||0},g={onSuccess:function(t,e,r,i){var a=n.getInternalLoader(r);n.resetInternalLoader(r.type);var s=t.data;0===s.indexOf("#EXTM3U")?(e.parsing.start=performance.now(),Jt.isMediaPlaylist(s)?n.handleTrackOrLevelPlaylist(t,e,r,i||null,a):n.handleMasterPlaylist(t,e,r,i)):n.handleManifestParsingError(t,r,new Error("no EXTM3U delimiter"),i||null,e)},onError:function(t,e,r,i){n.handleNetworkError(e,r,!1,t,i)},onTimeout:function(t,e,r){n.handleNetworkError(e,r,!0,void 0,t)}};s.load(t,f,g)},e.handleMasterPlaylist=function(t,e,r,i){var n=this.hls,a=t.data,s=ge(t,r),o=Jt.parseMasterPlaylist(a,s);if(o.playlistParsingError)this.handleManifestParsingError(t,r,o.playlistParsingError,i,e);else{var l=o.contentSteering,u=o.levels,h=o.sessionData,d=o.sessionKeys,c=o.startTimeOffset,f=o.variableList;this.variableList=f;var g=Jt.parseMasterPlaylistMedia(a,s,o),v=g.AUDIO,m=void 0===v?[]:v,p=g.SUBTITLES,y=g["CLOSED-CAPTIONS"];m.length&&(m.some((function(t){return!t.url}))||!u[0].audioCodec||u[0].attrs.AUDIO||(D.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new C({}),bitrate:0,url:""}))),n.trigger(T.MANIFEST_LOADED,{levels:u,audioTracks:m,subtitles:p,captions:y,contentSteering:l,url:s,stats:e,networkDetails:i,sessionData:h,sessionKeys:d,startTimeOffset:c,variableList:f})}},e.handleTrackOrLevelPlaylist=function(t,e,r,i,n){var a=this.hls,s=r.id,o=r.level,l=r.type,u=ge(t,r),h=y(s)?s:0,d=y(o)?o:h,c=fe(r),f=Jt.parseLevelPlaylist(t.data,u,d,c,h,this.variableList);if(l===se){var g={attrs:new C({}),bitrate:0,details:f,name:"",url:u};a.trigger(T.MANIFEST_LOADED,{levels:[g],audioTracks:[],url:u,stats:e,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}e.parsing.end=performance.now(),r.levelDetails=f,this.handlePlaylistLoaded(f,t,e,r,i,n)},e.handleManifestParsingError=function(t,e,r,i,n){this.hls.trigger(T.ERROR,{type:E.NETWORK_ERROR,details:S.MANIFEST_PARSING_ERROR,fatal:e.type===se,url:t.url,err:r,error:r,reason:r.message,response:t,context:e,networkDetails:i,stats:n})},e.handleNetworkError=function(t,e,r,n,a){void 0===r&&(r=!1);var s="A network "+(r?"timeout":"error"+(n?" (status "+n.code+")":""))+" occurred while loading "+t.type;t.type===oe?s+=": "+t.level+" id: "+t.id:t.type!==le&&t.type!==ue||(s+=" id: "+t.id+' group-id: "'+t.groupId+'"');var o=new Error(s);D.warn("[playlist-loader]: "+s);var l=S.UNKNOWN,u=!1,h=this.getInternalLoader(t);switch(t.type){case se:l=r?S.MANIFEST_LOAD_TIMEOUT:S.MANIFEST_LOAD_ERROR,u=!0;break;case oe:l=r?S.LEVEL_LOAD_TIMEOUT:S.LEVEL_LOAD_ERROR,u=!1;break;case le:l=r?S.AUDIO_TRACK_LOAD_TIMEOUT:S.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case ue:l=r?S.SUBTITLE_TRACK_LOAD_TIMEOUT:S.SUBTITLE_LOAD_ERROR,u=!1}h&&this.resetInternalLoader(t.type);var d={type:E.NETWORK_ERROR,details:l,fatal:u,url:t.url,loader:h,context:t,error:o,networkDetails:e,stats:a};if(n){var c=(null==e?void 0:e.url)||t.url;d.response=i({url:c,data:void 0},n)}this.hls.trigger(T.ERROR,d)},e.handlePlaylistLoaded=function(t,e,r,i,n,a){var s=this.hls,o=i.type,l=i.level,u=i.id,h=i.groupId,d=i.deliveryDirectives,c=ge(e,i),f=fe(i),g="number"==typeof i.level&&f===he?l:void 0;if(t.fragments.length){t.targetduration||(t.playlistParsingError=new Error("Missing Target Duration"));var v=t.playlistParsingError;if(v)s.trigger(T.ERROR,{type:E.NETWORK_ERROR,details:S.LEVEL_PARSING_ERROR,fatal:!1,url:c,error:v,reason:v.message,response:e,context:i,level:g,parent:f,networkDetails:n,stats:r});else switch(t.live&&a&&(a.getCacheAge&&(t.ageHeader=a.getCacheAge()||0),a.getCacheAge&&!isNaN(t.ageHeader)||(t.ageHeader=0)),o){case se:case oe:s.trigger(T.LEVEL_LOADED,{details:t,level:g||0,id:u||0,stats:r,networkDetails:n,deliveryDirectives:d});break;case le:s.trigger(T.AUDIO_TRACK_LOADED,{details:t,id:u||0,groupId:h||"",stats:r,networkDetails:n,deliveryDirectives:d});break;case ue:s.trigger(T.SUBTITLE_TRACK_LOADED,{details:t,id:u||0,groupId:h||"",stats:r,networkDetails:n,deliveryDirectives:d})}}else{var m=new Error("No Segments found in Playlist");s.trigger(T.ERROR,{type:E.NETWORK_ERROR,details:S.LEVEL_EMPTY_ERROR,fatal:!1,url:c,error:m,reason:m.message,response:e,context:i,level:g,parent:f,networkDetails:n,stats:r})}},t}();function me(t,e){var r;try{r=new Event("addtrack")}catch(t){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=t,e.dispatchEvent(r)}function pe(t,e){var r=t.mode;if("disabled"===r&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(r){D.debug("[texttrack-utils]: "+r);var i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,t.addCue(i)}"disabled"===r&&(t.mode=r)}function ye(t){var e=t.mode;if("disabled"===e&&(t.mode="hidden"),t.cues)for(var r=t.cues.length;r--;)t.removeCue(t.cues[r]);"disabled"===e&&(t.mode=e)}function Te(t,e,r,i){var n=t.mode;if("disabled"===n&&(t.mode="hidden"),t.cues&&t.cues.length>0)for(var a=function(t,e,r){var i=[],n=function(t,e){if(e<t[0].startTime)return 0;var r=t.length-1;if(e>t[r].endTime)return-1;for(var i=0,n=r;i<=n;){var a=Math.floor((n+i)/2);if(e<t[a].startTime)n=a-1;else{if(!(e>t[a].startTime&&i<r))return a;i=a+1}}return t[i].startTime-e<e-t[n].startTime?i:n}(t,e);if(n>-1)for(var a=n,s=t.length;a<s;a++){var o=t[a];if(o.startTime>=e&&o.endTime<=r)i.push(o);else if(o.startTime>r)return i}return i}(t.cues,e,r),s=0;s<a.length;s++)i&&!i(a[s])||t.removeCue(a[s]);"disabled"===n&&(t.mode=n)}var Ee="org.id3",Se="com.apple.quicktime.HLS",Le="https://aomedia.org/emsg/ID3";function Re(){if("undefined"!=typeof self)return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}var Ae=function(){var t=Re();try{new t(0,Number.POSITIVE_INFINITY,"")}catch(t){return Number.MAX_VALUE}return Number.POSITIVE_INFINITY}();function ke(t,e){return t.getTime()/1e3-e}var be=function(){function t(t){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=t,this._registerListeners()}var e=t.prototype;return e.destroy=function(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null},e._registerListeners=function(){var t=this.hls;t.on(T.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(T.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(T.MANIFEST_LOADING,this.onManifestLoading,this),t.on(T.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(T.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(T.LEVEL_UPDATED,this.onLevelUpdated,this)},e._unregisterListeners=function(){var t=this.hls;t.off(T.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(T.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(T.MANIFEST_LOADING,this.onManifestLoading,this),t.off(T.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(T.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(T.LEVEL_UPDATED,this.onLevelUpdated,this)},e.onMediaAttached=function(t,e){this.media=e.media},e.onMediaDetaching=function(){this.id3Track&&(ye(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})},e.onManifestLoading=function(){this.dateRangeCuesAppended={}},e.createTrack=function(t){var e=this.getID3Track(t.textTracks);return e.mode="hidden",e},e.getID3Track=function(t){if(this.media){for(var e=0;e<t.length;e++){var r=t[e];if("metadata"===r.kind&&"id3"===r.label)return me(r,this.media),r}return this.media.addTextTrack("metadata","id3")}},e.onFragParsingMetadata=function(t,e){if(this.media){var r=this.hls.config,i=r.enableEmsgMetadataCues,n=r.enableID3MetadataCues;if(i||n){var a=e.samples;this.id3Track||(this.id3Track=this.createTrack(this.media));for(var s=Re(),o=0;o<a.length;o++){var l=a[o].type;if((l!==Le||i)&&n){var u=ut(a[o].data);if(u){var h=a[o].pts,d=h+a[o].duration;d>Ae&&(d=Ae),d-h<=0&&(d=h+.25);for(var c=0;c<u.length;c++){var f=u[c];if(!ot(f)){this.updateId3CueEnds(h);var g=new s(h,d,"");g.value=f,l&&(g.type=l),this.id3Track.addCue(g)}}}}}}}},e.updateId3CueEnds=function(t){var e,r=null==(e=this.id3Track)?void 0:e.cues;if(r)for(var i=r.length;i--;){var n=r[i];n.startTime<t&&n.endTime===Ae&&(n.endTime=t)}},e.onBufferFlushing=function(t,e){var r=e.startOffset,i=e.endOffset,n=e.type,a=this.id3Track,s=this.hls;if(s){var o=s.config,l=o.enableEmsgMetadataCues,u=o.enableID3MetadataCues;a&&(l||u)&&Te(a,r,i,"audio"===n?function(t){return t.type===Ee&&u}:"video"===n?function(t){return t.type===Le&&l}:function(t){return t.type===Ee&&u||t.type===Le&&l})}},e.onLevelUpdated=function(t,e){var r=this,i=e.details;if(this.media&&i.hasProgramDateTime&&this.hls.config.enableDateRangeMetadataCues){var n=this.dateRangeCuesAppended,a=this.id3Track,s=i.dateRanges,o=Object.keys(s);if(a)for(var l=Object.keys(n).filter((function(t){return!o.includes(t)})),u=function(){var t=l[h];Object.keys(n[t].cues).forEach((function(e){a.removeCue(n[t].cues[e])})),delete n[t]},h=l.length;h--;)u();var d=i.fragments[i.fragments.length-1];if(0!==o.length&&y(null==d?void 0:d.programDateTime)){this.id3Track||(this.id3Track=this.createTrack(this.media));for(var c=d.programDateTime/1e3-d.start,f=Re(),g=function(){var t=o[v],e=s[t],i=n[t],a=(null==i?void 0:i.cues)||{},l=(null==i?void 0:i.durationKnown)||!1,u=ke(e.startDate,c),h=Ae,d=e.endDate;if(d)h=ke(d,c),l=!0;else if(e.endOnNext&&!l){var g=o.reduce((function(t,r){var i=s[r];return i.class===e.class&&i.id!==r&&i.startDate>e.startDate&&t.push(i),t}),[]).sort((function(t,e){return t.startDate.getTime()-e.startDate.getTime()}))[0];g&&(h=ke(g.startDate,c),l=!0)}for(var m,p,y=Object.keys(e.attr),T=0;T<y.length;T++){var E=y[T];if("ID"!==(p=E)&&"CLASS"!==p&&"START-DATE"!==p&&"DURATION"!==p&&"END-DATE"!==p&&"END-ON-NEXT"!==p){var S=a[E];if(S)l&&!i.durationKnown&&(S.endTime=h);else{var L=e.attr[E];S=new f(u,h,""),_(E)&&(m=L,L=Uint8Array.from(m.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer),S.value={key:E,data:L},S.type=Se,S.id=t,r.id3Track.addCue(S),a[E]=S}}}n[t]={cues:a,dateRange:e,durationKnown:l}},v=0;v<o.length;v++)g()}}},t}(),De=function(){function t(t){var e=this;this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=function(){return e.timeupdate()},this.hls=t,this.config=t.config,this.registerListeners()}var e=t.prototype;return e.destroy=function(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null},e.registerListeners=function(){this.hls.on(T.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(T.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(T.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(T.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(T.ERROR,this.onError,this)},e.unregisterListeners=function(){this.hls.off(T.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(T.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(T.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(T.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(T.ERROR,this.onError,this)},e.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)},e.onMediaDetaching=function(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)},e.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},e.onLevelUpdated=function(t,e){var r=e.details;this.levelDetails=r,r.advanced&&this.timeupdate(),!r.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)},e.onError=function(t,e){var r;e.details===S.BUFFER_STALLED_ERROR&&(this.stallCount++,null!=(r=this.levelDetails)&&r.live&&D.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))},e.timeupdate=function(){var t=this.media,e=this.levelDetails;if(t&&e){this.currentTime=t.currentTime;var r=this.computeLatency();if(null!==r){this._latency=r;var i=this.config,n=i.lowLatencyMode,a=i.maxLiveSyncPlaybackRate;if(n&&1!==a){var s=this.targetLatency;if(null!==s){var o=r-s,l=o<Math.min(this.maxLatency,s+e.targetduration);if(e.live&&l&&o>.05&&this.forwardBufferLength>1){var u=Math.min(2,Math.max(1,a)),h=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;t.playbackRate=Math.min(u,Math.max(1,h))}else 1!==t.playbackRate&&0!==t.playbackRate&&(t.playbackRate=1)}}}}},e.estimateLiveEdge=function(){var t=this.levelDetails;return null===t?null:t.edge+t.age},e.computeLatency=function(){var t=this.estimateLiveEdge();return null===t?null:t-this.currentTime},a(t,[{key:"latency",get:function(){return this._latency||0}},{key:"maxLatency",get:function(){var t=this.config,e=this.levelDetails;return void 0!==t.liveMaxLatencyDuration?t.liveMaxLatencyDuration:e?t.liveMaxLatencyDurationCount*e.targetduration:0}},{key:"targetLatency",get:function(){var t=this.levelDetails;if(null===t)return null;var e=t.holdBack,r=t.partHoldBack,i=t.targetduration,n=this.config,a=n.liveSyncDuration,s=n.liveSyncDurationCount,o=n.lowLatencyMode,l=this.hls.userConfig,u=o&&r||e;(l.liveSyncDuration||l.liveSyncDurationCount||0===u)&&(u=void 0!==a?a:s*i);var h=i;return u+Math.min(1*this.stallCount,h)}},{key:"liveSyncPosition",get:function(){var t=this.estimateLiveEdge(),e=this.targetLatency,r=this.levelDetails;if(null===t||null===e||null===r)return null;var i=r.edge,n=t-e-this.edgeStalled,a=i-r.totalduration,s=i-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(a,n),s)}},{key:"drift",get:function(){var t=this.levelDetails;return null===t?1:t.drift}},{key:"edgeStalled",get:function(){var t=this.levelDetails;if(null===t)return 0;var e=3*(this.config.lowLatencyMode&&t.partTarget||t.targetduration);return Math.max(t.age-e,0)}},{key:"forwardBufferLength",get:function(){var t=this.media,e=this.levelDetails;if(!t||!e)return 0;var r=t.buffered.length;return(r?t.buffered.end(r-1):e.edge)-this.currentTime}}]),t}(),Ie=["NONE","TYPE-0","TYPE-1",null],we="",Ce="YES",_e="v2",Pe=function(){function t(t,e,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=e,this.skip=r}return t.prototype.addDirectives=function(t){var e=new self.URL(t);return void 0!==this.msn&&e.searchParams.set("_HLS_msn",this.msn.toString()),void 0!==this.part&&e.searchParams.set("_HLS_part",this.part.toString()),this.skip&&e.searchParams.set("_HLS_skip",this.skip),e.href},t}(),xe=function(){function t(t){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[t.url],this._attrs=[t.attrs],this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.unknownCodecs=t.unknownCodecs,this.codecSet=[t.videoCodec,t.audioCodec].filter((function(t){return t})).join(",").replace(/\.[^.,]+/g,"")}return t.prototype.addFallback=function(t){this.url.push(t.url),this._attrs.push(t.attrs)},a(t,[{key:"maxBitrate",get:function(){return Math.max(this.realBitrate,this.bitrate)}},{key:"attrs",get:function(){return this._attrs[this._urlId]}},{key:"pathwayId",get:function(){return this.attrs["PATHWAY-ID"]||"."}},{key:"uri",get:function(){return this.url[this._urlId]||""}},{key:"urlId",get:function(){return this._urlId},set:function(t){var e=t%this.url.length;this._urlId!==e&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=e)}},{key:"audioGroupId",get:function(){var t;return null==(t=this.audioGroupIds)?void 0:t[this.urlId]}},{key:"textGroupId",get:function(){var t;return null==(t=this.textGroupIds)?void 0:t[this.urlId]}}]),t}();function Fe(t,e){var r=e.startPTS;if(y(r)){var i,n=0;e.sn>t.sn?(n=r-t.start,i=t):(n=t.start-r,i=e),i.duration!==n&&(i.duration=n)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function Oe(t,e,r,i,n,a){i-r<=0&&(D.warn("Fragment should have a positive duration",e),i=r+e.duration,a=n+e.duration);var s=r,o=i,l=e.startPTS,u=e.endPTS;if(y(l)){var h=Math.abs(l-r);y(e.deltaPTS)?e.deltaPTS=Math.max(h,e.deltaPTS):e.deltaPTS=h,s=Math.max(r,l),r=Math.min(r,l),n=Math.min(n,e.startDTS),o=Math.min(i,u),i=Math.max(i,u),a=Math.max(a,e.endDTS)}var d=r-e.start;0!==e.start&&(e.start=r),e.duration=i-e.start,e.startPTS=r,e.maxStartPTS=s,e.startDTS=n,e.endPTS=i,e.minEndPTS=o,e.endDTS=a;var c,f=e.sn;if(!t||f<t.startSN||f>t.endSN)return 0;var g=f-t.startSN,v=t.fragments;for(v[g]=e,c=g;c>0;c--)Fe(v[c],v[c-1]);for(c=g;c<v.length-1;c++)Fe(v[c],v[c+1]);return t.fragmentHint&&Fe(v[v.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,d}function Me(t,e){for(var r=null,i=t.fragments,n=i.length-1;n>=0;n--){var a=i[n].initSegment;if(a){r=a;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;var s,l,u,h,d,c=0;if(function(t,e,r){for(var i=e.skippedSegments,n=Math.max(t.startSN,e.startSN)-e.startSN,a=(t.fragmentHint?1:0)+(i?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,s=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,u=n;u<=a;u++){var h=l[s+u],d=o[u];i&&!d&&u<i&&(d=e.fragments[u]=h),h&&d&&r(h,d)}}(t,e,(function(t,i){t.relurl&&(c=t.cc-i.cc),y(t.startPTS)&&y(t.endPTS)&&(i.start=i.startPTS=t.startPTS,i.startDTS=t.startDTS,i.maxStartPTS=t.maxStartPTS,i.endPTS=t.endPTS,i.endDTS=t.endDTS,i.minEndPTS=t.minEndPTS,i.duration=t.endPTS-t.startPTS,i.duration&&(s=i),e.PTSKnown=e.alignedSliding=!0),i.elementaryStreams=t.elementaryStreams,i.loader=t.loader,i.stats=t.stats,i.urlId=t.urlId,t.initSegment&&(i.initSegment=t.initSegment,r=t.initSegment)})),r&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach((function(t){var e;t.initSegment&&t.initSegment.relurl!==(null==(e=r)?void 0:e.relurl)||(t.initSegment=r)})),e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some((function(t){return!t})),e.deltaUpdateFailed){D.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var f=e.skippedSegments;f--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=(l=t.dateRanges,u=e.dateRanges,h=e.recentlyRemovedDateranges,d=o({},l),h&&h.forEach((function(t){delete d[t]})),Object.keys(u).forEach((function(t){var e=new P(u[t].attr,d[t]);e.isValid?d[t]=e:D.warn('Ignoring invalid Playlist Delta Update DATERANGE tag: "'+JSON.stringify(u[t].attr)+'"')})),d));var g=e.fragments;if(c){D.warn("discontinuity sliding from playlist, take drift into account");for(var v=0;v<g.length;v++)g[v].cc+=c}e.skippedSegments&&(e.startCC=e.fragments[0].cc),function(t,e,r){if(t&&e)for(var i=0,n=0,a=t.length;n<=a;n++){var s=t[n],o=e[n+i];s&&o&&s.index===o.index&&s.fragment.sn===o.fragment.sn?r(s,o):i--}}(t.partList,e.partList,(function(t,e){e.elementaryStreams=t.elementaryStreams,e.stats=t.stats})),s?Oe(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS):Ne(t,e),g.length&&(e.totalduration=e.edge-g[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;var m=e.advancedDateTime;if(e.advanced&&m){var p=e.edge;e.driftStart||(e.driftStartTime=m,e.driftStart=p),e.driftEndTime=m,e.driftEnd=p}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function Ne(t,e){var r=e.startSN+e.skippedSegments-t.startSN,i=t.fragments;r<0||r>=i.length||Ue(e,i[r].start)}function Ue(t,e){if(e){for(var r=t.fragments,i=t.skippedSegments;i<r.length;i++)r[i].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function Be(t,e,r){var i;return null!=t&&t.details?Ge(null==(i=t.details)?void 0:i.partList,e,r):null}function Ge(t,e,r){if(t)for(var i=t.length;i--;){var n=t[i];if(n.index===r&&n.fragment.sn===e)return n}return null}function Ke(t){switch(t.details){case S.FRAG_LOAD_TIMEOUT:case S.KEY_LOAD_TIMEOUT:case S.LEVEL_LOAD_TIMEOUT:case S.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function He(t,e){var r=Ke(e);return t.default[(r?"timeout":"error")+"Retry"]}function Ve(t,e){var r="linear"===t.backoff?1:Math.pow(2,e);return Math.min(r*t.retryDelayMs,t.maxRetryDelayMs)}function Ye(t){return i(i({},t),{errorRetry:null,timeoutRetry:null})}function We(t,e,r,i){return!!t&&e<t.maxNumRetry&&(function(t){return 0===t&&!1===navigator.onLine||!!t&&(t<400||t>499)}(i)||!!r)}var je=function(t,e){for(var r=0,i=t.length-1,n=null,a=null;r<=i;){var s=e(a=t[n=(r+i)/2|0]);if(s>0)r=n+1;else{if(!(s<0))return a;i=n-1}}return null};function qe(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var n=null;if(t?n=e[t.sn-e[0].sn+1]||null:0===r&&0===e[0].start&&(n=e[0]),n&&0===Xe(r,i,n))return n;var a=je(e,Xe.bind(null,r,i));return!a||a===t&&n?n:a}function Xe(t,e,r){if(void 0===t&&(t=0),void 0===e&&(e=0),r.start<=t&&r.start+r.duration>t)return 0;var i=Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-i<=t?1:r.start-i>t&&r.start?-1:0}function ze(t,e,r){var i=1e3*Math.min(e,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-i>t}var Qe,$e=3e5,Je=0,Ze=2,tr=5,er=0,rr=1,ir=2,nr=function(){function t(t){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=t,this.log=D.log.bind(D,"[info]:"),this.warn=D.warn.bind(D,"[warning]:"),this.error=D.error.bind(D,"[error]:"),this.registerListeners()}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(T.ERROR,this.onError,this),t.on(T.MANIFEST_LOADING,this.onManifestLoading,this)},e.unregisterListeners=function(){var t=this.hls;t&&(t.off(T.ERROR,this.onError,this),t.off(T.ERROR,this.onErrorOut,this),t.off(T.MANIFEST_LOADING,this.onManifestLoading,this))},e.destroy=function(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}},e.startLoad=function(t){this.playlistError=0},e.stopLoad=function(){},e.getVariantLevelIndex=function(t){return(null==t?void 0:t.type)===he?t.level:this.hls.loadLevel},e.onManifestLoading=function(){this.playlistError=0,this.penalizedRenditions={}},e.onError=function(t,e){var r;if(!e.fatal){var i=this.hls,n=e.context;switch(e.details){case S.FRAG_LOAD_ERROR:case S.FRAG_LOAD_TIMEOUT:case S.KEY_LOAD_ERROR:case S.KEY_LOAD_TIMEOUT:return void(e.errorAction=this.getFragRetryOrSwitchAction(e));case S.FRAG_GAP:case S.FRAG_PARSING_ERROR:case S.FRAG_DECRYPT_ERROR:return e.errorAction=this.getFragRetryOrSwitchAction(e),void(e.errorAction.action=Ze);case S.LEVEL_EMPTY_ERROR:case S.LEVEL_PARSING_ERROR:var a,s,o=e.parent===he?e.level:i.loadLevel;return void(e.details===S.LEVEL_EMPTY_ERROR&&null!=(a=e.context)&&null!=(s=a.levelDetails)&&s.live?e.errorAction=this.getPlaylistRetryOrSwitchAction(e,o):(e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,o)));case S.LEVEL_LOAD_ERROR:case S.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==n?void 0:n.level)&&(e.errorAction=this.getPlaylistRetryOrSwitchAction(e,n.level)));case S.AUDIO_TRACK_LOAD_ERROR:case S.AUDIO_TRACK_LOAD_TIMEOUT:case S.SUBTITLE_LOAD_ERROR:case S.SUBTITLE_TRACK_LOAD_TIMEOUT:if(n){var l=i.levels[i.loadLevel];if(l&&(n.type===le&&n.groupId===l.audioGroupId||n.type===ue&&n.groupId===l.textGroupId))return e.errorAction=this.getPlaylistRetryOrSwitchAction(e,i.loadLevel),e.errorAction.action=Ze,void(e.errorAction.flags=rr)}return;case S.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var u=i.levels[i.loadLevel],h=null==u?void 0:u.attrs["HDCP-LEVEL"];return void(h&&(e.errorAction={action:Ze,flags:ir,hdcpLevel:h}));case S.BUFFER_ADD_CODEC_ERROR:case S.REMUX_ALLOC_ERROR:return void(e.errorAction=this.getLevelSwitchAction(e,null!=(r=e.level)?r:i.loadLevel));case S.INTERNAL_EXCEPTION:case S.BUFFER_APPENDING_ERROR:case S.BUFFER_APPEND_ERROR:case S.BUFFER_FULL_ERROR:case S.LEVEL_SWITCH_ERROR:case S.BUFFER_STALLED_ERROR:case S.BUFFER_SEEK_OVER_HOLE:case S.BUFFER_NUDGE_ON_STALL:return void(e.errorAction={action:Je,flags:er})}if(e.type===E.KEY_SYSTEM_ERROR){var d=this.getVariantLevelIndex(e.frag);return e.levelRetry=!1,void(e.errorAction=this.getLevelSwitchAction(e,d))}}},e.getPlaylistRetryOrSwitchAction=function(t,e){var r,i,n=He(this.hls.config.playlistLoadPolicy,t),a=this.playlistError++,s=null==(r=t.response)?void 0:r.code;return We(n,a,Ke(t),s)?{action:tr,flags:er,retryConfig:n,retryCount:a}:null!=(i=t.context)&&i.deliveryDirectives?{action:Je,flags:er,retryConfig:n||{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},retryCount:a}:this.getLevelSwitchAction(t,e)},e.getFragRetryOrSwitchAction=function(t){var e=this.hls,r=this.getVariantLevelIndex(t.frag),i=e.levels[r],n=e.config,a=n.fragLoadPolicy,s=n.keyLoadPolicy,o=He(t.details.startsWith("key")?s:a,t),l=e.levels.reduce((function(t,e){return t+e.fragmentError}),0);if(i){var u;t.details!==S.FRAG_GAP&&i.fragmentError++;var h=null==(u=t.response)?void 0:u.code;if(We(o,l,Ke(t),h))return{action:tr,flags:er,retryConfig:o,retryCount:l}}var d=this.getLevelSwitchAction(t,r);return o&&(d.retryConfig=o,d.retryCount=l),d},e.getLevelSwitchAction=function(t,e){var r=this.hls;null==e&&(e=r.loadLevel);var i=this.hls.levels[e];if(i&&(i.loadError++,r.autoLevelEnabled)){for(var n,a,s=-1,o=r.levels,l=null==(n=t.frag)?void 0:n.type,u=null!=(a=t.context)?a:{},h=u.type,d=u.groupId,c=o.length;c--;){var f=(c+r.loadLevel)%o.length;if(f!==r.loadLevel&&0===o[f].loadError){var g=o[f];if(t.details===S.FRAG_GAP&&t.frag){var v=o[f].details;if(v){var m=qe(t.frag,v.fragments,t.frag.start);if(null!=m&&m.gap)continue}}else{if(h===le&&d===g.audioGroupId||h===ue&&d===g.textGroupId)continue;if(l===de&&i.audioGroupId===g.audioGroupId||l===ce&&i.textGroupId===g.textGroupId)continue}s=f;break}}if(s>-1&&r.loadLevel!==s)return t.levelRetry=!0,{action:Ze,flags:er,nextAutoLevel:s}}return{action:Ze,flags:rr}},e.onErrorOut=function(t,e){var r;switch(null==(r=e.errorAction)?void 0:r.action){case Je:break;case Ze:this.sendAlternateToPenaltyBox(e),e.errorAction.resolved||e.details===S.FRAG_GAP||(e.fatal=!0)}e.fatal&&this.hls.stopLoad()},e.sendAlternateToPenaltyBox=function(t){var e=this.hls,r=t.errorAction;if(r){var i=r.flags,n=r.hdcpLevel,a=r.nextAutoLevel;switch(i){case er:this.switchLevel(t,a);break;case rr:r.resolved||(r.resolved=this.redundantFailover(t));break;case ir:n&&(e.maxHdcpLevel=Ie[Ie.indexOf(n)-1],r.resolved=!0),this.warn('Restricting playback to HDCP-LEVEL of "'+e.maxHdcpLevel+'" or lower')}r.resolved||this.switchLevel(t,a)}},e.switchLevel=function(t,e){void 0!==e&&t.errorAction&&(this.warn("switching to level "+e+" after "+t.details),this.hls.nextAutoLevel=e,t.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)},e.redundantFailover=function(t){var e=this,r=this.hls,i=this.penalizedRenditions,n=t.parent===he?t.level:r.loadLevel,a=r.levels[n],s=a.url.length,o=t.frag?t.frag.urlId:a.urlId;a.urlId!==o||t.frag&&!a.details||this.penalizeRendition(a,t);for(var l=function(){var l=(o+u)%s,h=i[l];if(!h||function(t,e,r){if(performance.now()-t.lastErrorPerfMs>$e)return!0;var i=t.details;if(e.details===S.FRAG_GAP&&i&&e.frag){var n=e.frag.start,a=qe(null,i.fragments,n);if(a&&!a.gap)return!0}if(r&&t.errors.length<r.errors.length){var s=t.errors[t.errors.length-1];if(i&&s.frag&&e.frag&&Math.abs(s.frag.start-e.frag.start)>3*i.targetduration)return!0}return!1}(h,t,i[o]))return e.warn("Switching to Redundant Stream "+(l+1)+"/"+s+': "'+a.url[l]+'" after '+t.details),e.playlistError=0,r.levels.forEach((function(t){t.urlId=l})),r.nextLoadLevel=n,{v:!0}},u=1;u<s;u++){var h=l();if("object"==typeof h)return h.v}return!1},e.penalizeRendition=function(t,e){var r=this.penalizedRenditions,i=r[t.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};i.lastErrorPerfMs=performance.now(),i.errors.push(e),i.details=t.details,r[t.urlId]=i},t}(),ar=function(){function t(t,e){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=D.log.bind(D,e+":"),this.warn=D.warn.bind(D,e+":"),this.hls=t}var e=t.prototype;return e.destroy=function(){this.clearTimer(),this.hls=this.log=this.warn=null},e.clearTimer=function(){clearTimeout(this.timer),this.timer=-1},e.startLoad=function(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()},e.stopLoad=function(){this.canLoad=!1,this.clearTimer()},e.switchParams=function(t,e){var r=null==e?void 0:e.renditionReports;if(r){for(var i=-1,n=0;n<r.length;n++){var a=r[n],s=void 0;try{s=new self.URL(a.URI,e.url).href}catch(t){D.warn("Could not construct new URL for Rendition Report: "+t),s=a.URI||""}if(s===t){i=n;break}s===t.substring(0,s.length)&&(i=n)}if(-1!==i){var o=r[i],l=parseInt(o["LAST-MSN"])||(null==e?void 0:e.lastPartSn),u=parseInt(o["LAST-PART"])||(null==e?void 0:e.lastPartIndex);if(this.hls.config.lowLatencyMode){var h=Math.min(e.age-e.partTarget,e.targetduration);u>=0&&h>e.partTarget&&(u+=1)}return new Pe(l,u>=0?u:void 0,we)}}},e.loadPlaylist=function(t){-1===this.requestScheduled&&(this.requestScheduled=self.performance.now())},e.shouldLoadPlaylist=function(t){return this.canLoad&&!!t&&!!t.url&&(!t.details||t.details.live)},e.shouldReloadPlaylist=function(t){return-1===this.timer&&-1===this.requestScheduled&&this.shouldLoadPlaylist(t)},e.playlistLoaded=function(t,e,r){var i=this,n=e.details,a=e.stats,s=self.performance.now(),o=a.loading.first?Math.max(0,s-a.loading.first):0;if(n.advancedDateTime=Date.now()-o,n.live||null!=r&&r.live){if(n.reloaded(r),r&&this.log("live playlist "+t+" "+(n.advanced?"REFRESHED "+n.lastPartSn+"-"+n.lastPartIndex:"MISSED")),r&&n.fragments.length>0&&Me(r,n),!this.canLoad||!n.live)return;var l,u=void 0,h=void 0;if(n.canBlockReload&&n.endSN&&n.advanced){var d=this.hls.config.lowLatencyMode,c=n.lastPartSn,f=n.endSN,g=n.lastPartIndex,v=c===f;-1!==g?(u=v?f+1:c,h=v?d?0:g:g+1):u=f+1;var m=n.age,p=m+n.ageHeader,y=Math.min(p-n.partTarget,1.5*n.targetduration);if(y>0){if(r&&y>r.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+r.tuneInGoal+" to: "+y+" with playlist age: "+n.age),y=0;else{var T=Math.floor(y/n.targetduration);u+=T,void 0!==h&&(h+=Math.round(y%n.targetduration/n.partTarget)),this.log("CDN Tune-in age: "+n.ageHeader+"s last advanced "+m.toFixed(2)+"s goal: "+y+" skip sn "+T+" to part "+h)}n.tuneInGoal=y}if(l=this.getDeliveryDirectives(n,e.deliveryDirectives,u,h),d||!v)return void this.loadPlaylist(l)}else n.canBlockReload&&(l=this.getDeliveryDirectives(n,e.deliveryDirectives,u,h));var E=this.hls.mainForwardBufferInfo,S=E?E.end-E.len:0,L=function(t,e){void 0===e&&(e=1/0);var r=1e3*t.targetduration;if(t.updated){var i=t.fragments;if(i.length&&4*r>e){var n=1e3*i[i.length-1].duration;n<r&&(r=n)}}else r/=2;return Math.round(r)}(n,1e3*(n.edge-S));n.updated&&s>this.requestScheduled+L&&(this.requestScheduled=a.loading.start),void 0!==u&&n.canBlockReload?this.requestScheduled=a.loading.first+L-(1e3*n.partTarget||1e3):-1===this.requestScheduled||this.requestScheduled+L<s?this.requestScheduled=s:this.requestScheduled-s<=0&&(this.requestScheduled+=L);var R=this.requestScheduled-s;R=Math.max(0,R),this.log("reload live playlist "+t+" in "+Math.round(R)+" ms"),this.timer=self.setTimeout((function(){return i.loadPlaylist(l)}),R)}else this.clearTimer()},e.getDeliveryDirectives=function(t,e,r,i){var n=function(t,e){var r=t.canSkipUntil,i=t.canSkipDateRanges,n=t.endSN;return r&&(void 0!==e?e-n:0)<r?i?_e:Ce:we}(t,r);return null!=e&&e.skip&&t.deltaUpdateFailed&&(r=e.msn,i=e.part,n=we),new Pe(r,i,n)},e.checkRetry=function(t){var e=this,r=t.details,i=Ke(t),n=t.errorAction,a=n||{},s=a.action,o=a.retryCount,l=void 0===o?0:o,u=a.retryConfig,h=s===tr&&!!n&&!!u;if(h){var d;if(this.requestScheduled=-1,i&&null!=(d=t.context)&&d.deliveryDirectives)this.warn("Retrying playlist loading "+(l+1)+"/"+u.maxNumRetry+' after "'+r+'" without delivery-directives'),this.loadPlaylist();else{var c=Ve(u,l);this.timer=self.setTimeout((function(){return e.loadPlaylist()}),c),this.warn("Retrying playlist loading "+(l+1)+"/"+u.maxNumRetry+' after "'+r+'" in '+c+"ms")}t.levelRetry=!0,n.resolved=!0}return h},t}(),sr=function(t){function e(e,r){var i;return(i=t.call(this,e,"[level-controller]")||this)._levels=[],i._firstLevel=-1,i._startLevel=void 0,i.currentLevel=null,i.currentLevelIndex=-1,i.manualLevelIndex=-1,i.steering=void 0,i.onParsedComplete=void 0,i.steering=r,i._registerListeners(),i}l(e,t);var r=e.prototype;return r._registerListeners=function(){var t=this.hls;t.on(T.MANIFEST_LOADING,this.onManifestLoading,this),t.on(T.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(T.LEVEL_LOADED,this.onLevelLoaded,this),t.on(T.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(T.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(T.FRAG_LOADED,this.onFragLoaded,this),t.on(T.ERROR,this.onError,this)},r._unregisterListeners=function(){var t=this.hls;t.off(T.MANIFEST_LOADING,this.onManifestLoading,this),t.off(T.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(T.LEVEL_LOADED,this.onLevelLoaded,this),t.off(T.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(T.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(T.FRAG_LOADED,this.onFragLoaded,this),t.off(T.ERROR,this.onError,this)},r.destroy=function(){this._unregisterListeners(),this.steering=null,this.resetLevels(),t.prototype.destroy.call(this)},r.startLoad=function(){this._levels.forEach((function(t){t.loadError=0,t.fragmentError=0})),t.prototype.startLoad.call(this)},r.resetLevels=function(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]},r.onManifestLoading=function(t,e){this.resetLevels()},r.onManifestLoaded=function(t,e){var r,i=[],n={};e.levels.forEach((function(t){var e,a=t.attrs;-1!==(null==(e=t.audioCodec)?void 0:e.indexOf("mp4a.40.34"))&&(Qe||(Qe=/chrome|firefox/i.test(navigator.userAgent)),Qe&&(t.audioCodec=void 0));var s=a.AUDIO,o=a.CODECS,l=a["FRAME-RATE"],u=a["PATHWAY-ID"],h=a.RESOLUTION,d=a.SUBTITLES,c=(u||".")+"-"+t.bitrate+"-"+h+"-"+l+"-"+o;(r=n[c])?r.addFallback(t):(r=new xe(t),n[c]=r,i.push(r)),or(r,"audio",s),or(r,"text",d)})),this.filterAndSortMediaOptions(i,e)},r.filterAndSortMediaOptions=function(t,e){var r=this,i=[],n=[],a=!1,s=!1,o=!1,l=t.filter((function(t){var e=t.audioCodec,r=t.videoCodec,i=t.width,n=t.height,l=t.unknownCodecs;return a||(a=!(!i||!n)),s||(s=!!r),o||(o=!!e),!(null!=l&&l.length)&&(!e||jt(e,"audio"))&&(!r||jt(r,"video"))}));if((a||s)&&o&&(l=l.filter((function(t){var e=t.videoCodec,r=t.width,i=t.height;return!!e||!(!r||!i)}))),0!==l.length){e.audioTracks&&lr(i=e.audioTracks.filter((function(t){return!t.audioCodec||jt(t.audioCodec,"audio")}))),e.subtitles&&lr(n=e.subtitles);var u=l.slice(0);l.sort((function(t,e){return t.attrs["HDCP-LEVEL"]!==e.attrs["HDCP-LEVEL"]?(t.attrs["HDCP-LEVEL"]||"")>(e.attrs["HDCP-LEVEL"]||"")?1:-1:t.bitrate!==e.bitrate?t.bitrate-e.bitrate:t.attrs["FRAME-RATE"]!==e.attrs["FRAME-RATE"]?t.attrs.decimalFloatingPoint("FRAME-RATE")-e.attrs.decimalFloatingPoint("FRAME-RATE"):t.attrs.SCORE!==e.attrs.SCORE?t.attrs.decimalFloatingPoint("SCORE")-e.attrs.decimalFloatingPoint("SCORE"):a&&t.height!==e.height?t.height-e.height:0}));var h=u[0];if(this.steering&&(l=this.steering.filterParsedLevels(l)).length!==u.length)for(var d=0;d<u.length;d++)if(u[d].pathwayId===l[0].pathwayId){h=u[d];break}this._levels=l;for(var c=0;c<l.length;c++)if(l[c]===h){this._firstLevel=c,this.log("manifest loaded, "+l.length+" level(s) found, first bitrate: "+h.bitrate);break}var f=o&&!s,g={levels:l,audioTracks:i,subtitleTracks:n,sessionData:e.sessionData,sessionKeys:e.sessionKeys,firstLevel:this._firstLevel,stats:e.stats,audio:o,video:s,altAudio:!f&&i.some((function(t){return!!t.url}))};this.hls.trigger(T.MANIFEST_PARSED,g),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else Promise.resolve().then((function(){if(r.hls){var t=new Error("no level with compatible codecs found in manifest");r.hls.trigger(T.ERROR,{type:E.MEDIA_ERROR,details:S.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:e.url,error:t,reason:t.message})}}))},r.onError=function(t,e){!e.fatal&&e.context&&e.context.type===oe&&e.context.level===this.level&&this.checkRetry(e)},r.onFragLoaded=function(t,e){var r=e.frag;if(void 0!==r&&r.type===he){var i=this._levels[r.level];void 0!==i&&(i.loadError=0)}},r.onLevelLoaded=function(t,e){var r,i,n=e.level,a=e.details,s=this._levels[n];if(!s)return this.warn("Invalid level index "+n),void(null!=(i=e.deliveryDirectives)&&i.skip&&(a.deltaUpdateFailed=!0));n===this.currentLevelIndex?(0===s.fragmentError&&(s.loadError=0),this.playlistLoaded(n,e,s.details)):null!=(r=e.deliveryDirectives)&&r.skip&&(a.deltaUpdateFailed=!0)},r.onAudioTrackSwitched=function(t,e){var r=this.currentLevel;if(r){var i=this.hls.audioTracks[e.id].groupId;if(r.audioGroupIds&&r.audioGroupId!==i){for(var n=-1,a=0;a<r.audioGroupIds.length;a++)if(r.audioGroupIds[a]===i){n=a;break}-1!==n&&n!==r.urlId&&(r.urlId=n,this.canLoad&&this.startLoad())}}},r.loadPlaylist=function(e){t.prototype.loadPlaylist.call(this);var r=this.currentLevelIndex,i=this.currentLevel;if(i&&this.shouldLoadPlaylist(i)){var n=i.urlId,a=i.uri;if(e)try{a=e.addDirectives(a)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}var s=i.attrs["PATHWAY-ID"];this.log("Loading level index "+r+(void 0!==(null==e?void 0:e.msn)?" at sn "+e.msn+" part "+e.part:"")+" with"+(s?" Pathway "+s:"")+" URI "+(n+1)+"/"+i.url.length+" "+a),this.clearTimer(),this.hls.trigger(T.LEVEL_LOADING,{url:a,level:r,id:n,deliveryDirectives:e||null})}},r.removeLevel=function(t,e){var r=this,i=function(t,r){return r!==e},n=this._levels.filter((function(n,a){return a!==t||(n.url.length>1&&void 0!==e?(n.url=n.url.filter(i),n.audioGroupIds&&(n.audioGroupIds=n.audioGroupIds.filter(i)),n.textGroupIds&&(n.textGroupIds=n.textGroupIds.filter(i)),n.urlId=0,!0):(r.steering&&r.steering.removeLevel(n),!1))}));this.hls.trigger(T.LEVELS_UPDATED,{levels:n})},r.onLevelsUpdated=function(t,e){var r=e.levels;r.forEach((function(t,e){var r=t.details;null!=r&&r.fragments&&r.fragments.forEach((function(t){t.level=e}))})),this._levels=r},a(e,[{key:"levels",get:function(){return 0===this._levels.length?null:this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(t){var e=this._levels;if(0!==e.length){if(t<0||t>=e.length){var r=new Error("invalid level idx"),i=t<0;if(this.hls.trigger(T.ERROR,{type:E.OTHER_ERROR,details:S.LEVEL_SWITCH_ERROR,level:t,fatal:i,error:r,reason:r.message}),i)return;t=Math.min(t,e.length-1)}var n=this.currentLevelIndex,a=this.currentLevel,s=a?a.attrs["PATHWAY-ID"]:void 0,l=e[t],u=l.attrs["PATHWAY-ID"];if(this.currentLevelIndex=t,this.currentLevel=l,n!==t||!l.details||!a||s!==u){this.log("Switching to level "+t+(u?" with Pathway "+u:"")+" from level "+n+(s?" with Pathway "+s:""));var h=o({},l,{level:t,maxBitrate:l.maxBitrate,attrs:l.attrs,uri:l.uri,urlId:l.urlId});delete h._attrs,delete h._urlId,this.hls.trigger(T.LEVEL_SWITCHING,h);var d=l.details;if(!d||d.live){var c=this.switchParams(l.uri,null==a?void 0:a.details);this.loadPlaylist(c)}}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(t){this.manualLevelIndex=t,void 0===this._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var t=this.hls.config.startLevel;return void 0!==t?t:this._firstLevel}return this._startLevel},set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(t){this.level=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),e}(ar);function or(t,e,r){r&&("audio"===e?(t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds[t.url.length-1]=r):"text"===e&&(t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds[t.url.length-1]=r))}function lr(t){var e={};t.forEach((function(t){var r=t.groupId||"";t.id=e[r]=e[r]||0,e[r]++}))}var ur="NOT_LOADED",hr="APPENDING",dr="PARTIAL",cr="OK",fr=function(){function t(t){this.mainFragEntity=null,this.activeParts=null,this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=t,this._registerListeners()}var e=t.prototype;return e._registerListeners=function(){var t=this.hls;t.on(T.BUFFER_APPENDED,this.onBufferAppended,this),t.on(T.FRAG_BUFFERED,this.onFragBuffered,this),t.on(T.FRAG_LOADED,this.onFragLoaded,this)},e._unregisterListeners=function(){var t=this.hls;t.off(T.BUFFER_APPENDED,this.onBufferAppended,this),t.off(T.FRAG_BUFFERED,this.onFragBuffered,this),t.off(T.FRAG_LOADED,this.onFragLoaded,this)},e.destroy=function(){this._unregisterListeners(),this.fragments=this.endListFragments=this.timeRanges=this.mainFragEntity=this.activeParts=null},e.getAppendedFrag=function(t,e){if(e===he){var r=this.mainFragEntity,i=this.activeParts;if(r)if(r&&i)for(var n=i.length;n--;){var a=i[n],s=a?a.end:r.appendedPTS;if(a.start<=t&&null!==s&&t<=s)return n>9&&(this.activeParts=i.slice(n-9)),a}else if(r.body.start<=t&&null!==r.appendedPTS&&t<=r.appendedPTS)return r.body}return this.getBufferedFrag(t,e)},e.getBufferedFrag=function(t,e){for(var r=this.fragments,i=Object.keys(r),n=i.length;n--;){var a=r[i[n]];if((null==a?void 0:a.body.type)===e&&a.buffered){var s=a.body;if(s.start<=t&&t<=s.end)return s}}return null},e.detectEvictedFragments=function(t,e,r){var i=this;this.timeRanges&&(this.timeRanges[t]=e),Object.keys(this.fragments).forEach((function(n){var a=i.fragments[n];if(a)if(a.buffered||a.loaded){var s=a.range[t];s&&s.time.some((function(t){var r=!i.isTimeBuffered(t.startPTS,t.endPTS,e);return r&&i.removeFragment(a.body),r}))}else a.body.type===r&&i.removeFragment(a.body)}))},e.detectPartialFragments=function(t){var e=this,r=this.timeRanges,i=t.frag,n=t.part;if(r&&"initSegment"!==i.sn){var a=vr(i),s=this.fragments[a];s&&(Object.keys(r).forEach((function(t){var a=i.elementaryStreams[t];if(a){var o=r[t],l=null!==n||!0===a.partial;s.range[t]=e.getBufferedTimes(i,n,l,o)}})),s.loaded=null,Object.keys(s.range).length?(s.buffered=!0,s.body.endList&&(this.endListFragments[s.body.type]=s)):this.removeFragment(s.body))}},e.fragBuffered=function(t,e){var r=vr(t),i=this.fragments[r];!i&&e&&(i=this.fragments[r]={body:t,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},t.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)},e.getBufferedTimes=function(t,e,r,i){for(var n={time:[],partial:r},a=e?e.start:t.start,s=e?e.end:t.end,o=t.minEndPTS||s,l=t.maxStartPTS||a,u=0;u<i.length;u++){var h=i.start(u)-this.bufferPadding,d=i.end(u)+this.bufferPadding;if(l>=h&&o<=d){n.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(s,i.end(u))});break}if(a<d&&s>h)n.partial=!0,n.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(s,i.end(u))});else if(s<=h)break}return n},e.getPartialFragment=function(t){var e,r,i,n=null,a=0,s=this.bufferPadding,o=this.fragments;return Object.keys(o).forEach((function(l){var u=o[l];u&&gr(u)&&(r=u.body.start-s,i=u.body.end+s,t>=r&&t<=i&&(e=Math.min(t-r,i-t),a<=e&&(n=u.body,a=e)))})),n},e.isEndListAppended=function(t){var e=this.endListFragments[t];return void 0!==e&&(e.buffered||gr(e))},e.getState=function(t){var e=vr(t),r=this.fragments[e];return r?r.buffered?gr(r)?dr:cr:hr:ur},e.isTimeBuffered=function(t,e,r){for(var i,n,a=0;a<r.length;a++){if(i=r.start(a)-this.bufferPadding,n=r.end(a)+this.bufferPadding,t>=i&&e<=n)return!0;if(e<=i)return!1}return!1},e.onFragLoaded=function(t,e){var r=e.frag,i=e.part;if("initSegment"!==r.sn&&!r.bitrateTest&&!i){var n=vr(r);this.fragments[n]={body:r,appendedPTS:null,loaded:e,buffered:!1,range:Object.create(null)}}},e.onBufferAppended=function(t,e){var r=this,i=e.frag,n=e.part,a=e.timeRanges,s=this.mainFragEntity;if(i.type===he){var o=s?s.body:null;if(o!==i){s&&o&&o.sn!==i.sn&&(s.buffered=!0,this.fragments[vr(o)]=s);var l=vr(i);s=this.mainFragEntity=this.fragments[l]||{body:i,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)}}if(n){var u=this.activeParts;u||(this.activeParts=u=[]),u.push(n)}else this.activeParts=null}this.timeRanges=a,Object.keys(a).forEach((function(t){var e=a[t];if(r.detectEvictedFragments(t,e),!n&&s){var o=i.elementaryStreams[t];if(!o)return;for(var l=0;l<e.length;l++){var u=e.end(l);u<=o.endPTS&&u>o.startPTS?s.appendedPTS=Math.max(u,s.appendedPTS||0):s.appendedPTS=o.endPTS}}}))},e.onFragBuffered=function(t,e){this.detectPartialFragments(e)},e.hasFragment=function(t){var e=vr(t);return!!this.fragments[e]},e.removeFragmentsInRange=function(t,e,r,i,n){var a=this;i&&!this.hasGaps||Object.keys(this.fragments).forEach((function(s){var o=a.fragments[s];if(o){var l=o.body;l.type!==r||i&&!l.gap||l.start<e&&l.end>t&&(o.buffered||n)&&a.removeFragment(l)}}))},e.removeFragment=function(t){var e=vr(t);t.stats.loaded=0,t.clearElementaryStreamInfo(),this.mainFragEntity===this.fragments[e]&&(this.mainFragEntity=null),delete this.fragments[e],t.endList&&delete this.endListFragments[t.type]},e.removeAllFragments=function(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.mainFragEntity=null,this.activeParts=null,this.hasGaps=!1},t}();function gr(t){var e,r;return t.buffered&&(t.body.gap||(null==(e=t.range.video)?void 0:e.partial)||(null==(r=t.range.audio)?void 0:r.partial))}function vr(t){return t.type+"_"+t.level+"_"+t.urlId+"_"+t.sn}var mr=Math.pow(2,17),pr=function(){function t(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}var e=t.prototype;return e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e.abort=function(){this.loader&&this.loader.abort()},e.load=function(t,e){var r=this,n=t.url;if(!n)return Promise.reject(new Er({type:E.NETWORK_ERROR,details:S.FRAG_LOAD_ERROR,fatal:!1,frag:t,error:new Error("Fragment does not have a "+(n?"part list":"url")),networkDetails:null}));this.abort();var a=this.config,s=a.fLoader,o=a.loader;return new Promise((function(l,u){if(r.loader&&r.loader.destroy(),t.gap)u(Tr(t));else{var h=r.loader=t.loader=s?new s(a):new o(a),d=yr(t),c=Ye(a.fragLoadPolicy.default),f={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===t.sn?1/0:mr};t.stats=h.stats,h.load(d,f,{onSuccess:function(e,i,n,a){r.resetLoader(t,h);var s=e.data;n.resetIV&&t.decryptdata&&(t.decryptdata.iv=new Uint8Array(s.slice(0,16)),s=s.slice(16)),l({frag:t,part:null,payload:s,networkDetails:a})},onError:function(e,a,s,o){r.resetLoader(t,h),u(new Er({type:E.NETWORK_ERROR,details:S.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:i({url:n,data:void 0},e),error:new Error("HTTP Error "+e.code+" "+e.text),networkDetails:s,stats:o}))},onAbort:function(e,i,n){r.resetLoader(t,h),u(new Er({type:E.NETWORK_ERROR,details:S.INTERNAL_ABORTED,fatal:!1,frag:t,error:new Error("Aborted"),networkDetails:n,stats:e}))},onTimeout:function(e,i,n){r.resetLoader(t,h),u(new Er({type:E.NETWORK_ERROR,details:S.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,error:new Error("Timeout after "+f.timeout+"ms"),networkDetails:n,stats:e}))},onProgress:function(r,i,n,a){e&&e({frag:t,part:null,payload:n,networkDetails:a})}})}}))},e.loadPart=function(t,e,r){var n=this;this.abort();var a=this.config,s=a.fLoader,o=a.loader;return new Promise((function(l,u){if(n.loader&&n.loader.destroy(),t.gap||e.gap)u(Tr(t,e));else{var h=n.loader=t.loader=s?new s(a):new o(a),d=yr(t,e),c=Ye(a.fragLoadPolicy.default),f={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:mr};e.stats=h.stats,h.load(d,f,{onSuccess:function(i,a,s,o){n.resetLoader(t,h),n.updateStatsFromPart(t,e);var u={frag:t,part:e,payload:i.data,networkDetails:o};r(u),l(u)},onError:function(r,a,s,o){n.resetLoader(t,h),u(new Er({type:E.NETWORK_ERROR,details:S.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:e,response:i({url:d.url,data:void 0},r),error:new Error("HTTP Error "+r.code+" "+r.text),networkDetails:s,stats:o}))},onAbort:function(r,i,a){t.stats.aborted=e.stats.aborted,n.resetLoader(t,h),u(new Er({type:E.NETWORK_ERROR,details:S.INTERNAL_ABORTED,fatal:!1,frag:t,part:e,error:new Error("Aborted"),networkDetails:a,stats:r}))},onTimeout:function(r,i,a){n.resetLoader(t,h),u(new Er({type:E.NETWORK_ERROR,details:S.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:e,error:new Error("Timeout after "+f.timeout+"ms"),networkDetails:a,stats:r}))}})}}))},e.updateStatsFromPart=function(t,e){var r=t.stats,i=e.stats,n=i.total;if(r.loaded+=i.loaded,n){var a=Math.round(t.duration/e.duration),s=Math.min(Math.round(r.loaded/n),a),o=(a-s)*Math.round(r.loaded/s);r.total=r.loaded+o}else r.total=Math.max(r.loaded,r.total);var l=r.loading,u=i.loading;l.start?l.first+=u.first-u.start:(l.start=u.start,l.first=u.first),l.end=u.end},e.resetLoader=function(t,e){t.loader=null,this.loader===e&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),e.destroy()},t}();function yr(t,e){void 0===e&&(e=null);var r=e||t,i={frag:t,part:e,responseType:"arraybuffer",url:r.url,headers:{},rangeStart:0,rangeEnd:0},n=r.byteRangeStartOffset,a=r.byteRangeEndOffset;if(y(n)&&y(a)){var s,o=n,l=a;if("initSegment"===t.sn&&"AES-128"===(null==(s=t.decryptdata)?void 0:s.method)){var u=a-n;u%16&&(l=a+(16-u%16)),0!==n&&(i.resetIV=!0,o=n-16)}i.rangeStart=o,i.rangeEnd=l}return i}function Tr(t,e){var r=new Error("GAP "+(t.gap?"tag":"attribute")+" found"),i={type:E.MEDIA_ERROR,details:S.FRAG_GAP,fatal:!1,frag:t,error:r,networkDetails:null};return e&&(i.part=e),(e||t).stats.aborted=!0,new Er(i)}var Er=function(t){function e(e){var r;return(r=t.call(this,e.error.message)||this).data=void 0,r.data=e,r}return l(e,t),e}(f(Error)),Sr=function(){function t(t){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=t}var e=t.prototype;return e.abort=function(){for(var t in this.keyUriToKeyInfo){var e=this.keyUriToKeyInfo[t].loader;e&&e.abort()}},e.detach=function(){for(var t in this.keyUriToKeyInfo){var e=this.keyUriToKeyInfo[t];(e.mediaKeySessionContext||e.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[t]}},e.destroy=function(){for(var t in this.detach(),this.keyUriToKeyInfo){var e=this.keyUriToKeyInfo[t].loader;e&&e.destroy()}this.keyUriToKeyInfo={}},e.createKeyLoadError=function(t,e,r,i,n){return void 0===e&&(e=S.KEY_LOAD_ERROR),new Er({type:E.NETWORK_ERROR,details:e,fatal:!1,frag:t,response:n,error:r,networkDetails:i})},e.loadClear=function(t,e){var r=this;if(this.emeController&&this.config.emeEnabled)for(var i=t.sn,n=t.cc,a=function(){var t=e[s];if(n<=t.cc&&("initSegment"===i||"initSegment"===t.sn||i<t.sn))return r.emeController.selectKeySystemFormat(t).then((function(e){t.setKeyFormat(e)})),"break"},s=0;s<e.length&&"break"!==a();s++);},e.load=function(t){var e=this;return!t.decryptdata&&t.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(t).then((function(r){return e.loadInternal(t,r)})):this.loadInternal(t)},e.loadInternal=function(t,e){var r,i;e&&t.setKeyFormat(e);var n=t.decryptdata;if(!n){var a=new Error(e?"Expected frag.decryptdata to be defined after setting format "+e:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(t,S.KEY_LOAD_ERROR,a))}var s=n.uri;if(!s)return Promise.reject(this.createKeyLoadError(t,S.KEY_LOAD_ERROR,new Error('Invalid key URI: "'+s+'"')));var o,l=this.keyUriToKeyInfo[s];if(null!=(r=l)&&r.decryptdata.key)return n.key=l.decryptdata.key,Promise.resolve({frag:t,keyInfo:l});if(null!=(i=l)&&i.keyLoadPromise)switch(null==(o=l.mediaKeySessionContext)?void 0:o.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return l.keyLoadPromise.then((function(e){return n.key=e.keyInfo.decryptdata.key,{frag:t,keyInfo:l}}))}switch(l=this.keyUriToKeyInfo[s]={decryptdata:n,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},n.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return"identity"===n.keyFormat?this.loadKeyHTTP(l,t):this.loadKeyEME(l,t);case"AES-128":return this.loadKeyHTTP(l,t);default:return Promise.reject(this.createKeyLoadError(t,S.KEY_LOAD_ERROR,new Error('Key supplied with unsupported METHOD: "'+n.method+'"')))}},e.loadKeyEME=function(t,e){var r={frag:e,keyInfo:t};if(this.emeController&&this.config.emeEnabled){var i=this.emeController.loadKey(r);if(i)return(t.keyLoadPromise=i.then((function(e){return t.mediaKeySessionContext=e,r}))).catch((function(e){throw t.keyLoadPromise=null,e}))}return Promise.resolve(r)},e.loadKeyHTTP=function(t,e){var r=this,n=this.config,a=new(0,n.loader)(n);return e.keyLoader=t.loader=a,t.keyLoadPromise=new Promise((function(s,o){var l={keyInfo:t,frag:e,responseType:"arraybuffer",url:t.decryptdata.uri},u=n.keyLoadPolicy.default,h={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:function(t,e,i,n){var a=i.frag,l=i.keyInfo,u=i.url;if(!a.decryptdata||l!==r.keyUriToKeyInfo[u])return o(r.createKeyLoadError(a,S.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),n));l.decryptdata.key=a.decryptdata.key=new Uint8Array(t.data),a.keyLoader=null,l.loader=null,s({frag:a,keyInfo:l})},onError:function(t,n,a,s){r.resetLoader(n),o(r.createKeyLoadError(e,S.KEY_LOAD_ERROR,new Error("HTTP Error "+t.code+" loading key "+t.text),a,i({url:l.url,data:void 0},t)))},onTimeout:function(t,i,n){r.resetLoader(i),o(r.createKeyLoadError(e,S.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),n))},onAbort:function(t,i,n){r.resetLoader(i),o(r.createKeyLoadError(e,S.INTERNAL_ABORTED,new Error("key loading aborted"),n))}};a.load(l,h,d)}))},e.resetLoader=function(t){var e=t.frag,r=t.keyInfo,i=t.url,n=r.loader;e.keyLoader===n&&(e.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[i],n&&n.destroy()},t}(),Lr=function(){function t(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}var e=t.prototype;return e.destroy=function(){this.onHandlerDestroying(),this.onHandlerDestroyed()},e.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},e.onHandlerDestroyed=function(){},e.hasInterval=function(){return!!this._tickInterval},e.hasNextTick=function(){return!!this._tickTimer},e.setInterval=function(t){return!this._tickInterval&&(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,t),!0)},e.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},e.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},e.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)},e.tickImmediate=function(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)},e.doTick=function(){},t}(),Rr={length:0,start:function(){return 0},end:function(){return 0}},Ar=function(){function t(){}return t.isBuffered=function(e,r){try{if(e)for(var i=t.getBuffered(e),n=0;n<i.length;n++)if(r>=i.start(n)&&r<=i.end(n))return!0}catch(t){}return!1},t.bufferInfo=function(e,r,i){try{if(e){var n,a=t.getBuffered(e),s=[];for(n=0;n<a.length;n++)s.push({start:a.start(n),end:a.end(n)});return this.bufferedInfo(s,r,i)}}catch(t){}return{len:0,start:r,end:r,nextStart:void 0}},t.bufferedInfo=function(t,e,r){e=Math.max(0,e),t.sort((function(t,e){var r=t.start-e.start;return r||e.end-t.end}));var i=[];if(r)for(var n=0;n<t.length;n++){var a=i.length;if(a){var s=i[a-1].end;t[n].start-s<r?t[n].end>s&&(i[a-1].end=t[n].end):i.push(t[n])}else i.push(t[n])}else i=t;for(var o,l=0,u=e,h=e,d=0;d<i.length;d++){var c=i[d].start,f=i[d].end;if(e+r>=c&&e<f)u=c,l=(h=f)-e;else if(e+r<c){o=c;break}}return{len:l,start:u||0,end:h||0,nextStart:o}},t.getBuffered=function(t){try{return t.buffered}catch(t){return D.log("failed to get media.buffered",t),Rr}},t}(),kr=function(t,e,r,i,n,a){void 0===i&&(i=0),void 0===n&&(n=-1),void 0===a&&(a=!1),this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing={start:0,executeStart:0,executeEnd:0,end:0},this.buffering={audio:{start:0,executeStart:0,executeEnd:0,end:0},video:{start:0,executeStart:0,executeEnd:0,end:0},audiovideo:{start:0,executeStart:0,executeEnd:0,end:0}},this.level=t,this.sn=e,this.id=r,this.size=i,this.part=n,this.partial=a};function br(t,e){for(var r=null,i=0,n=t.length;i<n;i++){var a=t[i];if(a&&a.cc===e){r=a;break}}return r}function Dr(t,e){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}function Ir(t,e){for(var r=e.fragments,i=0,n=r.length;i<n;i++)Dr(r[i],t);e.fragmentHint&&Dr(e.fragmentHint,t),e.alignedSliding=!0}function wr(t,e,r){e&&(function(t,e,r){if(function(t,e,r){return!(!e.details||!(r.endCC>r.startCC||t&&t.cc<r.startCC))}(t,r,e)){var i=function(t,e,r){var i=t.fragments,n=e.fragments;if(n.length&&i.length){var a=br(i,n[0].cc);if(a&&(!a||a.startPTS))return a;D.log("No frag in previous level to align on")}else D.log("No fragments to align")}(r.details,e);i&&y(i.start)&&(D.log("Adjusting PTS using last level due to CC increase within current level "+e.url),Ir(i.start,e))}}(t,r,e),!r.alignedSliding&&e.details&&function(t,e){if(e.fragments.length&&t.hasProgramDateTime&&e.hasProgramDateTime){var r=e.fragments[0].programDateTime,i=t.fragments[0].programDateTime,n=(i-r)/1e3+e.fragments[0].start;n&&y(n)&&(D.log("Adjusting PTS using programDateTime delta "+(i-r)+"ms, sliding:"+n.toFixed(3)+" "+t.url+" "),Ir(n,t))}}(r,e.details),r.alignedSliding||!e.details||r.skippedSegments||Ne(e.details,r))}function Cr(t,e){if(t.hasProgramDateTime&&e.hasProgramDateTime){var r=t.fragments,i=e.fragments;if(r.length&&i.length){var n=i[Math.round(i.length/2)-1],a=br(r,n.cc)||r[Math.round(r.length/2)-1],s=n.programDateTime,o=a.programDateTime;null!==s&&null!==o&&Ir((o-s)/1e3-(a.start-n.start),t)}}}var _r=function(){function t(t,e){this.subtle=void 0,this.aesIV=void 0,this.subtle=t,this.aesIV=e}return t.prototype.decrypt=function(t,e){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},t}(),Pr=function(){function t(t,e){this.subtle=void 0,this.key=void 0,this.subtle=t,this.key=e}return t.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},t}(),xr=function(){function t(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}var e=t.prototype;return e.uint8ArrayToUint32Array_=function(t){for(var e=new DataView(t),r=new Uint32Array(4),i=0;i<4;i++)r[i]=e.getUint32(4*i);return r},e.initTable=function(){var t=this.sBox,e=this.invSBox,r=this.subMix,i=r[0],n=r[1],a=r[2],s=r[3],o=this.invSubMix,l=o[0],u=o[1],h=o[2],d=o[3],c=new Uint32Array(256),f=0,g=0,v=0;for(v=0;v<256;v++)c[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var m=g^g<<1^g<<2^g<<3^g<<4;m=m>>>8^255&m^99,t[f]=m,e[m]=f;var p=c[f],y=c[p],T=c[y],E=257*c[m]^16843008*m;i[f]=E<<24|E>>>8,n[f]=E<<16|E>>>16,a[f]=E<<8|E>>>24,s[f]=E,E=16843009*T^65537*y^257*p^16843008*f,l[m]=E<<24|E>>>8,u[m]=E<<16|E>>>16,h[m]=E<<8|E>>>24,d[m]=E,f?(f=p^c[c[c[T^p]]],g^=c[c[g]]):f=g=1}},e.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),r=!0,i=0;i<e.length&&r;)r=e[i]===this.key[i],i++;if(!r){this.key=e;var n=this.keySize=e.length;if(4!==n&&6!==n&&8!==n)throw new Error("Invalid aes key size="+n);var a,s,o,l,u=this.ksRows=4*(n+6+1),h=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),c=this.sBox,f=this.rcon,g=this.invSubMix,v=g[0],m=g[1],p=g[2],y=g[3];for(a=0;a<u;a++)a<n?o=h[a]=e[a]:(l=o,a%n==0?(l=c[(l=l<<8|l>>>24)>>>24]<<24|c[l>>>16&255]<<16|c[l>>>8&255]<<8|c[255&l],l^=f[a/n|0]<<24):n>6&&a%n==4&&(l=c[l>>>24]<<24|c[l>>>16&255]<<16|c[l>>>8&255]<<8|c[255&l]),h[a]=o=(h[a-n]^l)>>>0);for(s=0;s<u;s++)a=u-s,l=3&s?h[a]:h[a-4],d[s]=s<4||a<=4?l:v[c[l>>>24]]^m[c[l>>>16&255]]^p[c[l>>>8&255]]^y[c[255&l]],d[s]=d[s]>>>0}},e.networkToHostOrderSwap=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},e.decrypt=function(t,e,r){for(var i,n,a,s,o,l,u,h,d,c,f,g,v,m,p=this.keySize+6,y=this.invKeySchedule,T=this.invSBox,E=this.invSubMix,S=E[0],L=E[1],R=E[2],A=E[3],k=this.uint8ArrayToUint32Array_(r),b=k[0],D=k[1],I=k[2],w=k[3],C=new Int32Array(t),_=new Int32Array(C.length),P=this.networkToHostOrderSwap;e<C.length;){for(d=P(C[e]),c=P(C[e+1]),f=P(C[e+2]),g=P(C[e+3]),o=d^y[0],l=g^y[1],u=f^y[2],h=c^y[3],v=4,m=1;m<p;m++)i=S[o>>>24]^L[l>>16&255]^R[u>>8&255]^A[255&h]^y[v],n=S[l>>>24]^L[u>>16&255]^R[h>>8&255]^A[255&o]^y[v+1],a=S[u>>>24]^L[h>>16&255]^R[o>>8&255]^A[255&l]^y[v+2],s=S[h>>>24]^L[o>>16&255]^R[l>>8&255]^A[255&u]^y[v+3],o=i,l=n,u=a,h=s,v+=4;i=T[o>>>24]<<24^T[l>>16&255]<<16^T[u>>8&255]<<8^T[255&h]^y[v],n=T[l>>>24]<<24^T[u>>16&255]<<16^T[h>>8&255]<<8^T[255&o]^y[v+1],a=T[u>>>24]<<24^T[h>>16&255]<<16^T[o>>8&255]<<8^T[255&l]^y[v+2],s=T[h>>>24]<<24^T[o>>16&255]<<16^T[l>>8&255]<<8^T[255&u]^y[v+3],_[e]=P(i^b),_[e+1]=P(s^D),_[e+2]=P(a^I),_[e+3]=P(n^w),b=d,D=c,I=f,w=g,e+=4}return _.buffer},t}(),Fr=function(){function t(t,e){var r=(void 0===e?{}:e).removePKCS7Padding,i=void 0===r||r;if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=t.enableSoftwareAES,this.removePKCS7Padding=i,i)try{var n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch(t){}null===this.subtle&&(this.useSoftware=!0)}var e=t.prototype;return e.destroy=function(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null},e.isSync=function(){return this.useSoftware},e.flush=function(){var t=this.currentResult,e=this.remainderData;if(!t||e)return this.reset(),null;var r,i,n,a=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?(i=(r=a).byteLength,(n=i&&new DataView(r.buffer).getUint8(i-1))?tt(r,0,i-n):r):a},e.reset=function(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)},e.decrypt=function(t,e,r){var i=this;return this.useSoftware?new Promise((function(n,a){i.softwareDecrypt(new Uint8Array(t),e,r);var s=i.flush();s?n(s.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))})):this.webCryptoDecrypt(new Uint8Array(t),e,r)},e.softwareDecrypt=function(t,e,r){var i=this.currentIV,n=this.currentResult,a=this.remainderData;this.logOnce("JS AES decrypt"),a&&(t=_t(a,t),this.remainderData=null);var s=this.getValidChunk(t);if(!s.length)return null;i&&(r=i);var o=this.softwareDecrypter;o||(o=this.softwareDecrypter=new xr),o.expandKey(e);var l=n;return this.currentResult=o.decrypt(s.buffer,0,r),this.currentIV=tt(s,-16).buffer,l||null},e.webCryptoDecrypt=function(t,e,r){var i=this,n=this.subtle;return this.key===e&&this.fastAesKey||(this.key=e,this.fastAesKey=new Pr(n,e)),this.fastAesKey.expandKey().then((function(e){return n?(i.logOnce("WebCrypto AES decrypt"),new _r(n,new Uint8Array(r)).decrypt(t.buffer,e)):Promise.reject(new Error("web crypto not initialized"))})).catch((function(n){return D.warn("[decrypter]: WebCrypto Error, disable WebCrypto API, "+n.name+": "+n.message),i.onWebCryptoError(t,e,r)}))},e.onWebCryptoError=function(t,e,r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(t,e,r);var i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")},e.getValidChunk=function(t){var e=t,r=t.length-t.length%16;return r!==t.length&&(e=tt(t,0,r),this.remainderData=tt(t,r)),e},e.logOnce=function(t){this.logEnabled&&(D.log("[decrypter]: "+t),this.logEnabled=!1)},t}(),Or=function(t){for(var e="",r=t.length,i=0;i<r;i++)e+="["+t.start(i).toFixed(3)+"-"+t.end(i).toFixed(3)+"]";return e},Mr="STOPPED",Nr="IDLE",Ur="KEY_LOADING",Br="FRAG_LOADING",Gr="FRAG_LOADING_WAITING_RETRY",Kr="WAITING_TRACK",Hr="PARSING",Vr="PARSED",Yr="ENDED",Wr="ERROR",jr="WAITING_INIT_PTS",qr="WAITING_LEVEL",Xr=function(t){function e(e,r,i,n,a){var s;return(s=t.call(this)||this).hls=void 0,s.fragPrevious=null,s.fragCurrent=null,s.fragmentTracker=void 0,s.transmuxer=null,s._state=Mr,s.playlistType=void 0,s.media=null,s.mediaBuffer=null,s.config=void 0,s.bitrateTest=!1,s.lastCurrentTime=0,s.nextLoadPosition=0,s.startPosition=0,s.startTimeOffset=null,s.loadedmetadata=!1,s.retryDate=0,s.levels=null,s.fragmentLoader=void 0,s.keyLoader=void 0,s.levelLastLoaded=null,s.startFragRequested=!1,s.decrypter=void 0,s.initPTS=[],s.onvseeking=null,s.onvended=null,s.logPrefix="",s.log=void 0,s.warn=void 0,s.playlistType=a,s.logPrefix=n,s.log=D.log.bind(D,n+":"),s.warn=D.warn.bind(D,n+":"),s.hls=e,s.fragmentLoader=new pr(e.config),s.keyLoader=i,s.fragmentTracker=r,s.config=e.config,s.decrypter=new Fr(e.config),e.on(T.MANIFEST_LOADED,s.onManifestLoaded,function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(s)),s}l(e,t);var r=e.prototype;return r.doTick=function(){this.onTickEnd()},r.onTickEnd=function(){},r.startLoad=function(t){},r.stopLoad=function(){this.fragmentLoader.abort(),this.keyLoader.abort();var t=this.fragCurrent;null!=t&&t.loader&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Mr},r._streamEnded=function(t,e){if(e.live||t.nextStart||!t.end||!this.media)return!1;var r=e.partList;if(null!=r&&r.length){var i=r[r.length-1];return Ar.isBuffered(this.media,i.start+i.duration/2)}var n=e.fragments[e.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(n)},r.getLevelDetails=function(){var t;if(this.levels&&null!==this.levelLastLoaded)return null==(t=this.levels[this.levelLastLoaded])?void 0:t.details},r.onMediaAttached=function(t,e){var r=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);var i=this.config;this.levels&&i.autoStartLoad&&this.state===Mr&&this.startLoad(i.startPosition)},r.onMediaDetaching=function(){var t=this.media;null!=t&&t.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),t&&this.onvseeking&&this.onvended&&(t.removeEventListener("seeking",this.onvseeking),t.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},r.onMediaSeeking=function(){var t=this.config,e=this.fragCurrent,r=this.media,i=this.mediaBuffer,n=this.state,a=r?r.currentTime:0,s=Ar.bufferInfo(i||r,a,t.maxBufferHole);if(this.log("media seeking to "+(y(a)?a.toFixed(3):a)+", state: "+n),this.state===Yr)this.resetLoadingState();else if(e){var o=t.maxFragLookUpTolerance,l=e.start-o,u=e.start+e.duration+o;if(!s.len||u<s.start||l>s.end){var h=a>u;(a<l||h)&&(h&&e.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),e.abortRequests()),this.resetLoadingState())}}r&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),this.loadedmetadata||s.len||(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()},r.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},r.onManifestLoaded=function(t,e){this.startTimeOffset=e.startTimeOffset,this.initPTS=[]},r.onHandlerDestroying=function(){this.stopLoad(),t.prototype.onHandlerDestroying.call(this)},r.onHandlerDestroyed=function(){this.state=Mr,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,t.prototype.onHandlerDestroyed.call(this)},r.loadFragment=function(t,e,r){this._loadFragForPlayback(t,e,r)},r._loadFragForPlayback=function(t,e,r){var i=this;this._doFragLoad(t,e,r,(function(e){if(i.fragContextChanged(t))return i.warn("Fragment "+t.sn+(e.part?" p: "+e.part.index:"")+" of level "+t.level+" was dropped during download."),void i.fragmentTracker.removeFragment(t);t.stats.chunkCount++,i._handleFragmentLoadProgress(e)})).then((function(e){if(e){var r=i.state;i.fragContextChanged(t)?(r===Br||!i.fragCurrent&&r===Hr)&&(i.fragmentTracker.removeFragment(t),i.state=Nr):("payload"in e&&(i.log("Loaded fragment "+t.sn+" of level "+t.level),i.hls.trigger(T.FRAG_LOADED,e)),i._handleFragmentLoadComplete(e))}})).catch((function(e){i.state!==Mr&&i.state!==Wr&&(i.warn(e),i.resetFragmentLoading(t))}))},r.clearTrackerIfNeeded=function(t){var e;if(this.fragmentTracker.getState(t)===hr){var r=t.type,i=this.getFwdBufferInfo(this.mediaBuffer,r),n=Math.max(t.duration,i?i.len:this.config.maxBufferLength);this.reduceMaxBufferLength(n)&&this.fragmentTracker.removeFragment(t)}else 0===(null==(e=this.mediaBuffer)?void 0:e.buffered.length)&&this.fragmentTracker.removeAllFragments()},r.flushMainBuffer=function(t,e,r){if(void 0===r&&(r=null),t-e){var i={startOffset:t,endOffset:e,type:r};this.hls.trigger(T.BUFFER_FLUSHING,i)}},r._loadInitSegment=function(t,e){var r=this;this._doFragLoad(t,e).then((function(e){if(!e||r.fragContextChanged(t)||!r.levels)throw new Error("init load aborted");return e})).then((function(e){var i=r.hls,n=e.payload,a=t.decryptdata;if(n&&n.byteLength>0&&a&&a.key&&a.iv&&"AES-128"===a.method){var s=self.performance.now();return r.decrypter.decrypt(new Uint8Array(n),a.key.buffer,a.iv.buffer).catch((function(e){throw i.trigger(T.ERROR,{type:E.MEDIA_ERROR,details:S.FRAG_DECRYPT_ERROR,fatal:!1,error:e,reason:e.message,frag:t}),e})).then((function(r){var n=self.performance.now();return i.trigger(T.FRAG_DECRYPTED,{frag:t,payload:r,stats:{tstart:s,tdecrypt:n}}),e.payload=r,e}))}return e})).then((function(i){var n=r.fragCurrent,a=r.hls;if(!r.levels)throw new Error("init load aborted, missing levels");var s=t.stats;r.state=Nr,e.fragmentError=0,t.data=new Uint8Array(i.payload),s.parsing.start=s.buffering.start=self.performance.now(),s.parsing.end=s.buffering.end=self.performance.now(),i.frag===n&&a.trigger(T.FRAG_BUFFERED,{stats:s,frag:n,part:null,id:t.type}),r.tick()})).catch((function(e){r.state!==Mr&&r.state!==Wr&&(r.warn(e),r.resetFragmentLoading(t))}))},r.fragContextChanged=function(t){var e=this.fragCurrent;return!t||!e||t.level!==e.level||t.sn!==e.sn||t.urlId!==e.urlId},r.fragBufferedComplete=function(t,e){var r,i,n,a,s=this.mediaBuffer?this.mediaBuffer:this.media;this.log("Buffered "+t.type+" sn: "+t.sn+(e?" part: "+e.index:"")+" of "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level+" (frag:["+(null!=(r=t.startPTS)?r:NaN).toFixed(3)+"-"+(null!=(i=t.endPTS)?i:NaN).toFixed(3)+"] > buffer:"+(s?Or(Ar.getBuffered(s)):"(detached)")+")"),this.state=Nr,s&&(!this.loadedmetadata&&t.type==he&&s.buffered.length&&(null==(n=this.fragCurrent)?void 0:n.sn)===(null==(a=this.fragPrevious)?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())},r.seekToStartPos=function(){},r._handleFragmentLoadComplete=function(t){var e=this.transmuxer;if(e){var r=t.frag,i=t.part,n=t.partsLoaded,a=!n||0===n.length||n.some((function(t){return!t})),s=new kr(r.level,r.sn,r.stats.chunkCount+1,0,i?i.index:-1,!a);e.flush(s)}},r._handleFragmentLoadProgress=function(t){},r._doFragLoad=function(t,e,r,i){var n,a=this;void 0===r&&(r=null);var s=null==e?void 0:e.details;if(!this.levels||!s)throw new Error("frag load aborted, missing level"+(s?"":" detail")+"s");var o=null;if(!t.encrypted||null!=(n=t.decryptdata)&&n.key?!t.encrypted&&s.encryptedFragments.length&&this.keyLoader.loadClear(t,s.encryptedFragments):(this.log("Loading key for "+t.sn+" of ["+s.startSN+"-"+s.endSN+"], "+("[stream-controller]"===this.logPrefix?"level":"track")+" "+t.level),this.state=Ur,this.fragCurrent=t,o=this.keyLoader.load(t).then((function(t){if(!a.fragContextChanged(t.frag))return a.hls.trigger(T.KEY_LOADED,t),a.state===Ur&&(a.state=Nr),t})),this.hls.trigger(T.KEY_LOADING,{frag:t}),null===this.fragCurrent&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))),r=Math.max(t.start,r||0),this.config.lowLatencyMode){var l=s.partList;if(l&&i){r>t.end&&s.fragmentHint&&(t=s.fragmentHint);var u=this.getNextPart(l,t,r);if(u>-1){var h,d=l[u];return this.log("Loading part sn: "+t.sn+" p: "+d.index+" cc: "+t.cc+" of playlist ["+s.startSN+"-"+s.endSN+"] parts [0-"+u+"-"+(l.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(r.toFixed(3))),this.nextLoadPosition=d.start+d.duration,this.state=Br,h=o?o.then((function(r){return!r||a.fragContextChanged(r.frag)?null:a.doFragPartsLoad(t,d,e,i)})).catch((function(t){return a.handleFragLoadError(t)})):this.doFragPartsLoad(t,d,e,i).catch((function(t){return a.handleFragLoadError(t)})),this.hls.trigger(T.FRAG_LOADING,{frag:t,part:d,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):h}if(!t.url||this.loadedEndOfParts(l,r))return Promise.resolve(null)}}this.log("Loading fragment "+t.sn+" cc: "+t.cc+" "+(s?"of ["+s.startSN+"-"+s.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+t.level+", target: "+parseFloat(r.toFixed(3))),y(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=Br;var c,f=this.config.progressive;return c=f&&o?o.then((function(e){return!e||a.fragContextChanged(null==e?void 0:e.frag)?null:a.fragmentLoader.load(t,i)})).catch((function(t){return a.handleFragLoadError(t)})):Promise.all([this.fragmentLoader.load(t,f?i:void 0),o]).then((function(t){var e=t[0];return!f&&e&&i&&i(e),e})).catch((function(t){return a.handleFragLoadError(t)})),this.hls.trigger(T.FRAG_LOADING,{frag:t,targetBufferTime:r}),null===this.fragCurrent?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):c},r.doFragPartsLoad=function(t,e,r,i){var n=this;return new Promise((function(a,s){var o,l=[],u=null==(o=r.details)?void 0:o.partList;!function e(o){n.fragmentLoader.loadPart(t,o,i).then((function(i){l[o.index]=i;var s=i.part;n.hls.trigger(T.FRAG_LOADED,i);var h=Be(r,t.sn,o.index+1)||Ge(u,t.sn,o.index+1);if(!h)return a({frag:t,part:s,partsLoaded:l});e(h)})).catch(s)}(e)}))},r.handleFragLoadError=function(t){if("data"in t){var e=t.data;t.data&&e.details===S.INTERNAL_ABORTED?this.handleFragLoadAborted(e.frag,e.part):this.hls.trigger(T.ERROR,e)}else this.hls.trigger(T.ERROR,{type:E.OTHER_ERROR,details:S.INTERNAL_EXCEPTION,err:t,error:t,fatal:!0});return null},r._handleTransmuxerFlush=function(t){var e=this.getCurrentContext(t);if(e&&this.state===Hr){var r=e.frag,i=e.part,n=e.level,a=self.performance.now();r.stats.parsing.end=a,i&&(i.stats.parsing.end=a),this.updateLevelTiming(r,i,n,t.partial)}else this.fragCurrent||this.state===Mr||this.state===Wr||(this.state=Nr)},r.getCurrentContext=function(t){var e=this.levels,r=this.fragCurrent,i=t.level,n=t.sn,a=t.part;if(null==e||!e[i])return this.warn("Levels object was unset while buffering fragment "+n+" of level "+i+". The current chunk will not be buffered."),null;var s=e[i],o=a>-1?Be(s,n,a):null,l=o?o.fragment:function(t,e,r){if(null==t||!t.details)return null;var i=t.details,n=i.fragments[e-i.startSN];return n||((n=i.fragmentHint)&&n.sn===e?n:e<i.startSN&&r&&r.sn===e?r:null)}(s,n,r);return l?(r&&r!==l&&(l.stats=r.stats),{frag:l,part:o,level:s}):null},r.bufferFragmentData=function(t,e,r,i){var n;if(t&&this.state===Hr){var a=t.data1,s=t.data2,o=a;if(a&&s&&(o=_t(a,s)),null!=(n=o)&&n.length){var l={type:t.type,frag:e,part:r,chunkMeta:i,parent:e.type,data:o};this.hls.trigger(T.BUFFER_APPENDING,l),t.dropped&&t.independent&&!r&&this.flushBufferGap(e)}}},r.flushBufferGap=function(t){var e=this.media;if(e)if(Ar.isBuffered(e,e.currentTime)){var r=e.currentTime,i=Ar.bufferInfo(e,r,0),n=t.duration,a=Math.min(2*this.config.maxFragLookUpTolerance,.25*n),s=Math.max(Math.min(t.start-a,i.end-a),r+a);t.start-s>a&&this.flushMainBuffer(s,t.start)}else this.flushMainBuffer(0,t.start)},r.getFwdBufferInfo=function(t,e){var r=this.getLoadPosition();return y(r)?this.getFwdBufferInfoAtPos(t,r,e):null},r.getFwdBufferInfoAtPos=function(t,e,r){var i=this.config.maxBufferHole,n=Ar.bufferInfo(t,e,i);if(0===n.len&&void 0!==n.nextStart){var a=this.fragmentTracker.getBufferedFrag(e,r);if(a&&n.nextStart<a.end)return Ar.bufferInfo(t,e,Math.max(n.nextStart,i))}return n},r.getMaxBufferLength=function(t){var e,r=this.config;return e=t?Math.max(8*r.maxBufferSize/t,r.maxBufferLength):r.maxBufferLength,Math.min(e,r.maxMaxBufferLength)},r.reduceMaxBufferLength=function(t){var e=this.config,r=t||e.maxBufferLength;return e.maxMaxBufferLength>=r&&(e.maxMaxBufferLength/=2,this.warn("Reduce max buffer length to "+e.maxMaxBufferLength+"s"),!0)},r.getNextFragment=function(t,e){var r=e.fragments,i=r.length;if(!i)return null;var n,a=this.config,s=r[0].start;if(e.live){var o=a.initialLiveManifestSize;if(i<o)return this.warn("Not enough fragments to start playback (have: "+i+", need: "+o+")"),null;e.PTSKnown||this.startFragRequested||-1!==this.startPosition||(n=this.getInitialLiveFragment(e,r),this.startPosition=n?this.hls.liveSyncPosition||n.start:t)}else t<=s&&(n=r[0]);if(!n){var l=a.lowLatencyMode?e.partEnd:e.fragmentEnd;n=this.getFragmentAtPosition(t,l,e)}return this.mapToInitFragWhenRequired(n)},r.isLoopLoading=function(t,e){var r=this.fragmentTracker.getState(t);return(r===cr||r===dr&&!!t.gap)&&this.nextLoadPosition>e},r.getNextFragmentLoopLoading=function(t,e,r,i,n){var a=t.gap,s=this.getNextFragment(this.nextLoadPosition,e);if(null===s)return s;if(t=s,a&&t&&!t.gap&&r.nextStart){var o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,i);if(null!==o&&r.len+o.len>=n)return this.log('buffer full after gaps in "'+i+'" playlist starting at sn: '+t.sn),null}return t},r.mapToInitFragWhenRequired=function(t){return null==t||!t.initSegment||null!=t&&t.initSegment.data||this.bitrateTest?t:t.initSegment},r.getNextPart=function(t,e,r){for(var i=-1,n=!1,a=!0,s=0,o=t.length;s<o;s++){var l=t[s];if(a=a&&!l.independent,i>-1&&r<l.start)break;var u=l.loaded;u?i=-1:(n||l.independent||a)&&l.fragment===e&&(i=s),n=u}return i},r.loadedEndOfParts=function(t,e){var r=t[t.length-1];return r&&e>r.start&&r.loaded},r.getInitialLiveFragment=function(t,e){var r=this.fragPrevious,i=null;if(r){if(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),i=function(t,e,r){if(null===e||!Array.isArray(t)||!t.length||!y(e))return null;if(e<(t[0].programDateTime||0))return null;if(e>=(t[t.length-1].endProgramDateTime||0))return null;r=r||0;for(var i=0;i<t.length;++i){var n=t[i];if(ze(e,r,n))return n}return null}(e,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){var n=r.sn+1;if(n>=t.startSN&&n<=t.endSN){var a=e[n-t.startSN];r.cc===a.cc&&(i=a,this.log("Live playlist, switching playlist, load frag with next SN: "+i.sn))}i||(i=function(t,e){return je(t,(function(t){return t.cc<e?1:t.cc>e?-1:0}))}(e,r.cc),i&&this.log("Live playlist, switching playlist, load frag with same CC: "+i.sn))}}else{var s=this.hls.liveSyncPosition;null!==s&&(i=this.getFragmentAtPosition(s,this.bitrateTest?t.fragmentEnd:t.edge,t))}return i},r.getFragmentAtPosition=function(t,e,r){var i,n=this.config,a=this.fragPrevious,s=r.fragments,o=r.endSN,l=r.fragmentHint,u=n.maxFragLookUpTolerance,h=!!(n.lowLatencyMode&&r.partList&&l);if(h&&l&&!this.bitrateTest&&(s=s.concat(l),o=l.sn),i=t<e?qe(a,s,t,t>e-u?0:u):s[s.length-1]){var d=i.sn-r.startSN,c=this.fragmentTracker.getState(i);if((c===cr||c===dr&&i.gap)&&(a=i),a&&i.sn===a.sn&&!h&&a&&i.level===a.level){var f=s[d+1];i=i.sn<o&&this.fragmentTracker.getState(f)!==cr?f:null}}return i},r.synchronizeToLiveEdge=function(t){var e=this.config,r=this.media;if(r){var i=this.hls.liveSyncPosition,n=r.currentTime,a=t.fragments[0].start,s=t.edge,o=n>=a-e.maxFragLookUpTolerance&&n<=s;if(null!==i&&r.duration>i&&(n<i||!o)){var l=void 0!==e.liveMaxLatencyDuration?e.liveMaxLatencyDuration:e.liveMaxLatencyDurationCount*t.targetduration;(!o&&r.readyState<4||n<s-l)&&(this.loadedmetadata||(this.nextLoadPosition=i),r.readyState&&(this.warn("Playback: "+n.toFixed(3)+" is located too far from the end of live sliding playlist: "+s+", reset currentTime to : "+i.toFixed(3)),r.currentTime=i))}}},r.alignPlaylists=function(t,e){var r=this.levels,i=this.levelLastLoaded,n=this.fragPrevious,a=null!==i?r[i]:null,s=t.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;var o=t.fragments[0].start,l=!e,u=t.alignedSliding&&y(o);if(l||!u&&!o){wr(n,a,t);var h=t.fragments[0].start;return this.log("Live playlist sliding: "+h.toFixed(2)+" start-sn: "+(e?e.startSN:"na")+"->"+t.startSN+" prev-sn: "+(n?n.sn:"na")+" fragments: "+s),h}return o},r.waitForCdnTuneIn=function(t){return t.live&&t.canBlockReload&&t.partTarget&&t.tuneInGoal>Math.max(t.partHoldBack,3*t.partTarget)},r.setStartPosition=function(t,e){var r=this.startPosition;if(r<e&&(r=-1),-1===r||-1===this.lastCurrentTime){var i=null!==this.startTimeOffset,n=i?this.startTimeOffset:t.startTimeOffset;null!==n&&y(n)?(r=e+n,n<0&&(r+=t.totalduration),r=Math.min(Math.max(e,r),e+t.totalduration),this.log("Start time offset "+n+" found in "+(i?"multivariant":"media")+" playlist, adjust startPosition to "+r),this.startPosition=r):t.live?r=this.hls.liveSyncPosition||e:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r},r.getLoadPosition=function(){var t=this.media,e=0;return this.loadedmetadata&&t?e=t.currentTime:this.nextLoadPosition&&(e=this.nextLoadPosition),e},r.handleFragLoadAborted=function(t,e){this.transmuxer&&"initSegment"!==t.sn&&t.stats.aborted&&(this.warn("Fragment "+t.sn+(e?" part"+e.index:"")+" of level "+t.level+" was aborted"),this.resetFragmentLoading(t))},r.resetFragmentLoading=function(t){this.fragCurrent&&(this.fragContextChanged(t)||this.state===Gr)||(this.state=Nr)},r.onFragmentOrKeyLoadError=function(t,e){if(e.chunkMeta&&!e.frag){var r=this.getCurrentContext(e.chunkMeta);r&&(e.frag=r.frag)}var i=e.frag;if(i&&i.type===t&&this.levels)if(this.fragContextChanged(i)){var n;this.warn("Frag load error must match current frag to retry "+i.url+" > "+(null==(n=this.fragCurrent)?void 0:n.url))}else{var a=e.details===S.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(i,!0);var s=e.errorAction,o=s||{},l=o.action,u=o.retryCount,h=void 0===u?0:u,d=o.retryConfig;if(s&&l===tr&&d){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var c=Ve(d,h);this.warn("Fragment "+i.sn+" of "+t+" "+i.level+" errored with "+e.details+", retrying loading "+(h+1)+"/"+d.maxNumRetry+" in "+c+"ms"),s.resolved=!0,this.retryDate=self.performance.now()+c,this.state=Gr}else d&&s?(this.resetFragmentErrors(t),h<d.maxNumRetry?a||(s.resolved=!0):D.warn(e.details+" reached or exceeded max retry ("+h+")")):this.state=Wr;this.tickImmediate()}},r.reduceLengthAndFlushBuffer=function(t){if(this.state===Hr||this.state===Vr){var e=t.parent,r=this.getFwdBufferInfo(this.mediaBuffer,e),i=r&&r.len>.5;i&&this.reduceMaxBufferLength(r.len);var n=!i;return n&&this.warn("Buffer full error while media.currentTime is not buffered, flush "+e+" buffer"),t.frag&&(this.fragmentTracker.removeFragment(t.frag),this.nextLoadPosition=t.frag.start),this.resetLoadingState(),n}return!1},r.resetFragmentErrors=function(t){t===de&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==Mr&&(this.state=Nr)},r.afterBufferFlushed=function(t,e,r){if(t){var i=Ar.getBuffered(t);this.fragmentTracker.detectEvictedFragments(e,i,r),this.state===Yr&&this.resetLoadingState()}},r.resetLoadingState=function(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=Nr},r.resetStartWhenNotLoaded=function(t){if(!this.loadedmetadata){this.startFragRequested=!1;var e=this.levels?this.levels[t].details:null;null!=e&&e.live?(this.startPosition=-1,this.setStartPosition(e,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}},r.resetWhenMissingContext=function(t){this.warn("The loading context changed while buffering fragment "+t.sn+" of level "+t.level+". This chunk will not be buffered."),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(t.level),this.resetLoadingState()},r.removeUnbufferedFrags=function(t){void 0===t&&(t=0),this.fragmentTracker.removeFragmentsInRange(t,1/0,this.playlistType,!1,!0)},r.updateLevelTiming=function(t,e,r,i){var n,a=this,s=r.details;if(s){if(Object.keys(t.elementaryStreams).reduce((function(e,n){var o=t.elementaryStreams[n];if(o){var l=o.endPTS-o.startPTS;if(l<=0)return a.warn("Could not parse fragment "+t.sn+" "+n+" duration reliably ("+l+")"),e||!1;var u=i?0:Oe(s,t,o.startPTS,o.endPTS,o.startDTS,o.endDTS);return a.hls.trigger(T.LEVEL_PTS_UPDATED,{details:s,level:r,drift:u,type:n,frag:t,start:o.startPTS,end:o.endPTS}),!0}return e}),!1))r.fragmentError=0;else if(null===(null==(n=this.transmuxer)?void 0:n.error)){var o=new Error("Found no media in fragment "+t.sn+" of level "+r.id+" resetting transmuxer to fallback to playlist timing");if(this.warn(o.message),this.hls.trigger(T.ERROR,{type:E.MEDIA_ERROR,details:S.FRAG_PARSING_ERROR,fatal:!1,error:o,frag:t,reason:"Found no media in msn "+t.sn+' of level "'+r.url+'"'}),!this.hls)return;this.resetTransmuxer()}this.state=Vr,this.hls.trigger(T.FRAG_PARSED,{frag:t,part:e})}else this.warn("level.details undefined")},r.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},r.recoverWorkerError=function(t){"demuxerWorker"===t.event&&(this.resetTransmuxer(),this.resetLoadingState())},a(e,[{key:"state",get:function(){return this._state},set:function(t){var e=this._state;e!==t&&(this._state=t,this.log(e+"->"+t))}}]),e}(Lr);function zr(){if("undefined"!=typeof self)return self.MediaSource||self.WebKitMediaSource}function Qr(){return self.SourceBuffer||self.WebKitSourceBuffer}function $r(t,e){return void 0===t&&(t=""),void 0===e&&(e=9e4),{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}var Jr=function(){function t(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}var e=t.prototype;return e.resetInitSegment=function(t,e,r,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}},e.resetTimeStamp=function(t){this.initPTS=t,this.resetContiguity()},e.resetContiguity=function(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0},e.canParse=function(t,e){return!1},e.appendFrame=function(t,e,r){},e.demux=function(t,e){this.cachedData&&(t=_t(this.cachedData,t),this.cachedData=null);var r,i=nt(t,0),n=i?i.length:0,a=this._audioTrack,s=this._id3Track,o=i?function(t){for(var e=ut(t),r=0;r<e.length;r++){var i=e[r];if(ot(i))return gt(i)}}(i):void 0,l=t.length;for((null===this.basePTS||0===this.frameIndex&&y(o))&&(this.basePTS=Zr(o,e,this.initPTS),this.lastPTS=this.basePTS),null===this.lastPTS&&(this.lastPTS=this.basePTS),i&&i.length>0&&s.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Ee,duration:Number.POSITIVE_INFINITY});n<l;){if(this.canParse(t,n)){var u=this.appendFrame(a,t,n);u?(this.frameIndex++,this.lastPTS=u.sample.pts,r=n+=u.length):n=l}else st(t,n)?(i=nt(t,n),s.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Ee,duration:Number.POSITIVE_INFINITY}),r=n+=i.length):n++;if(n===l&&r!==l){var h=tt(t,r);this.cachedData?this.cachedData=_t(this.cachedData,h):this.cachedData=h}}return{audioTrack:a,videoTrack:$r(),id3Track:s,textTrack:$r()}},e.demuxSampleAes=function(t,e,r){return Promise.reject(new Error("["+this+"] This demuxer does not support Sample-AES decryption"))},e.flush=function(t){var e=this.cachedData;return e&&(this.cachedData=null,this.demux(e,0)),{audioTrack:this._audioTrack,videoTrack:$r(),id3Track:this._id3Track,textTrack:$r()}},e.destroy=function(){},t}(),Zr=function(t,e,r){return y(t)?90*t:9e4*e+(r?9e4*r.baseTime/r.timescale:0)};function ti(t,e){return 255===t[e]&&240==(246&t[e+1])}function ei(t,e){return 1&t[e+1]?7:9}function ri(t,e){return(3&t[e+3])<<11|t[e+4]<<3|(224&t[e+5])>>>5}function ii(t,e){return e+1<t.length&&ti(t,e)}function ni(t,e){if(ii(t,e)){var r=ei(t,e);if(e+r>=t.length)return!1;var i=ri(t,e);if(i<=r)return!1;var n=e+i;return n===t.length||ii(t,n)}return!1}function ai(t,e,r,i,n){if(!t.samplerate){var a=function(t,e,r,i){var n,a,s,o,l=navigator.userAgent.toLowerCase(),u=i,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];n=1+((192&e[r+2])>>>6);var d=(60&e[r+2])>>>2;if(!(d>h.length-1))return s=(1&e[r+2])<<2,s|=(192&e[r+3])>>>6,D.log("manifest codec:"+i+", ADTS type:"+n+", samplingIndex:"+d),/firefox/i.test(l)?d>=6?(n=5,o=new Array(4),a=d-3):(n=2,o=new Array(2),a=d):-1!==l.indexOf("android")?(n=2,o=new Array(2),a=d):(n=5,o=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&d>=6?a=d-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(d>=6&&1===s||/vivaldi/i.test(l))||!i&&1===s)&&(n=2,o=new Array(2)),a=d)),o[0]=n<<3,o[0]|=(14&d)>>1,o[1]|=(1&d)<<7,o[1]|=s<<3,5===n&&(o[1]|=(14&a)>>1,o[2]=(1&a)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:h[d],channelCount:s,codec:"mp4a.40."+n,manifestCodec:u};t.trigger(T.ERROR,{type:E.MEDIA_ERROR,details:S.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+d})}(e,r,i,n);if(!a)return;t.config=a.config,t.samplerate=a.samplerate,t.channelCount=a.channelCount,t.codec=a.codec,t.manifestCodec=a.manifestCodec,D.log("parsed codec:"+t.codec+", rate:"+a.samplerate+", channels:"+a.channelCount)}}function si(t){return 9216e4/t}function oi(t,e,r,i,n){var a,s=i+n*si(t.samplerate),o=function(t,e){var r=ei(t,e);if(e+r<=t.length){var i=ri(t,e)-r;if(i>0)return{headerLength:r,frameLength:i}}}(e,r);if(o){var l=o.frameLength,u=o.headerLength,h=u+l,d=Math.max(0,r+h-e.length);d?(a=new Uint8Array(h-u)).set(e.subarray(r+u,e.length),0):a=e.subarray(r+u,r+h);var c={unit:a,pts:s};return d||t.samples.push(c),{sample:c,length:h,missing:d}}var f=e.length-r;return(a=new Uint8Array(f)).set(e.subarray(r,e.length),0),{sample:{unit:a,pts:s},length:f,missing:-1}}var li=function(t){function e(e,r){var i;return(i=t.call(this)||this).observer=void 0,i.config=void 0,i.observer=e,i.config=r,i}l(e,t);var r=e.prototype;return r.resetInitSegment=function(e,r,i,n){t.prototype.resetInitSegment.call(this,e,r,i,n),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:r,duration:n,inputTimeScale:9e4,dropped:0}},e.probe=function(t){if(!t)return!1;for(var e=(nt(t,0)||[]).length,r=t.length;e<r;e++)if(ni(t,e))return D.log("ADTS sync word found !"),!0;return!1},r.canParse=function(t,e){return function(t,e){return function(t,e){return e+5<t.length}(t,e)&&ti(t,e)&&ri(t,e)<=t.length-e}(t,e)},r.appendFrame=function(t,e,r){ai(t,this.observer,e,r,t.manifestCodec);var i=oi(t,e,r,this.basePTS,this.frameIndex);if(i&&0===i.missing)return i},e}(Jr),ui=/\/emsg[-/]ID3/i,hi=function(){function t(t,e){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=e}var e=t.prototype;return e.resetTimeStamp=function(){},e.resetInitSegment=function(t,e,r,i){var n=this.videoTrack=$r("video",1),a=this.audioTrack=$r("audio",1),s=this.txtTrack=$r("text",1);if(this.id3Track=$r("id3",1),this.timeOffset=0,null!=t&&t.byteLength){var o=It(t);if(o.video){var l=o.video,u=l.id,h=l.timescale,d=l.codec;n.id=u,n.timescale=s.timescale=h,n.codec=d}if(o.audio){var c=o.audio,f=c.id,g=c.timescale,v=c.codec;a.id=f,a.timescale=g,a.codec=v}s.id=Et.text,n.sampleDuration=0,n.duration=a.duration=i}},e.resetContiguity=function(){},t.probe=function(t){return bt(t=t.length>16384?t.subarray(0,16384):t,["moof"]).length>0},e.demux=function(t,e){this.timeOffset=e;var r=t,i=this.videoTrack,n=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=_t(this.remainderData,t));var a=function(t){var e={valid:null,remainder:null},r=bt(t,["moof"]);if(!r)return e;if(r.length<2)return e.remainder=t,e;var i=r[r.length-1];return e.valid=tt(t,0,i.byteOffset-8),e.remainder=tt(t,i.byteOffset-8),e}(r);this.remainderData=a.remainder,i.samples=a.valid||new Uint8Array}else i.samples=r;var s=this.extractID3Track(i,e);return n.samples=Pt(e,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:s,textTrack:this.txtTrack}},e.flush=function(){var t=this.timeOffset,e=this.videoTrack,r=this.txtTrack;e.samples=this.remainderData||new Uint8Array,this.remainderData=null;var i=this.extractID3Track(e,this.timeOffset);return r.samples=Pt(t,e),{videoTrack:e,audioTrack:$r(),id3Track:i,textTrack:$r()}},e.extractID3Track=function(t,e){var r=this.id3Track;if(t.samples.length){var i=bt(t.samples,["emsg"]);i&&i.forEach((function(t){var i=function(t){var e=t[0],r="",i="",n=0,a=0,s=0,o=0,l=0,u=0;if(0===e){for(;"\0"!==St(t.subarray(u,u+1));)r+=St(t.subarray(u,u+1)),u+=1;for(r+=St(t.subarray(u,u+1)),u+=1;"\0"!==St(t.subarray(u,u+1));)i+=St(t.subarray(u,u+1)),u+=1;i+=St(t.subarray(u,u+1)),u+=1,n=Rt(t,12),a=Rt(t,16),o=Rt(t,20),l=Rt(t,24),u=28}else if(1===e){n=Rt(t,u+=4);var h=Rt(t,u+=4),d=Rt(t,u+=4);for(u+=4,s=Math.pow(2,32)*h+d,Number.isSafeInteger(s)||(s=Number.MAX_SAFE_INTEGER,D.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=Rt(t,u),l=Rt(t,u+=4),u+=4;"\0"!==St(t.subarray(u,u+1));)r+=St(t.subarray(u,u+1)),u+=1;for(r+=St(t.subarray(u,u+1)),u+=1;"\0"!==St(t.subarray(u,u+1));)i+=St(t.subarray(u,u+1)),u+=1;i+=St(t.subarray(u,u+1)),u+=1}return{schemeIdUri:r,value:i,timeScale:n,presentationTime:s,presentationTimeDelta:a,eventDuration:o,id:l,payload:t.subarray(u,t.byteLength)}}(t);if(ui.test(i.schemeIdUri)){var n=y(i.presentationTime)?i.presentationTime/i.timeScale:e+i.presentationTimeDelta/i.timeScale,a=4294967295===i.eventDuration?Number.POSITIVE_INFINITY:i.eventDuration/i.timeScale;a<=.001&&(a=Number.POSITIVE_INFINITY);var s=i.payload;r.samples.push({data:s,len:s.byteLength,dts:n,pts:n,type:Le,duration:a})}}))}return r},e.demuxSampleAes=function(t,e,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))},e.destroy=function(){},t}(),di=null,ci=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],fi=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],gi=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],vi=[0,1,1,4];function mi(t,e,r,i,n){if(!(r+24>e.length)){var a=pi(e,r);if(a&&r+a.frameLength<=e.length){var s=i+n*(9e4*a.samplesPerFrame/a.sampleRate),o={unit:e.subarray(r,r+a.frameLength),pts:s,dts:s};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(o),{sample:o,length:a.frameLength,missing:0}}}}function pi(t,e){var r=t[e+1]>>3&3,i=t[e+1]>>1&3,n=t[e+2]>>4&15,a=t[e+2]>>2&3;if(1!==r&&0!==n&&15!==n&&3!==a){var s=t[e+2]>>1&1,o=t[e+3]>>6,l=1e3*ci[14*(3===r?3-i:3===i?3:4)+n-1],u=fi[3*(3===r?0:2===r?1:2)+a],h=3===o?1:2,d=gi[r][i],c=vi[i],f=8*d*c,g=Math.floor(d*l/u+s)*c;if(null===di){var v=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);di=v?parseInt(v[1]):0}return!!di&&di<=87&&2===i&&l>=224e3&&0===o&&(t[e+3]=128|t[e+3]),{sampleRate:u,channelCount:h,frameLength:g,samplesPerFrame:f}}}function yi(t,e){return 255===t[e]&&224==(224&t[e+1])&&0!=(6&t[e+1])}function Ti(t,e){return e+1<t.length&&yi(t,e)}function Ei(t,e){if(e+1<t.length&&yi(t,e)){var r=pi(t,e),i=4;null!=r&&r.frameLength&&(i=r.frameLength);var n=e+i;return n===t.length||Ti(t,n)}return!1}var Si=function(){function t(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}var e=t.prototype;return e.loadWord=function(){var t=this.data,e=this.bytesAvailable,r=t.byteLength-e,i=new Uint8Array(4),n=Math.min(4,e);if(0===n)throw new Error("no bytes available");i.set(t.subarray(r,r+n)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=8*n,this.bytesAvailable-=n},e.skipBits=function(t){var e;t=Math.min(t,8*this.bytesAvailable+this.bitsAvailable),this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,t-=(e=t>>3)<<3,this.bytesAvailable-=e,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)},e.readBits=function(t){var e=Math.min(this.bitsAvailable,t),r=this.word>>>32-e;if(t>32&&D.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=e,this.bitsAvailable>0)this.word<<=e;else{if(!(this.bytesAvailable>0))throw new Error("no bits available");this.loadWord()}return(e=t-e)>0&&this.bitsAvailable?r<<e|this.readBits(e):r},e.skipLZ=function(){var t;for(t=0;t<this.bitsAvailable;++t)if(0!=(this.word&2147483648>>>t))return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},e.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.skipEG=function(){this.skipBits(1+this.skipLZ())},e.readUEG=function(){var t=this.skipLZ();return this.readBits(t+1)-1},e.readEG=function(){var t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)},e.readBoolean=function(){return 1===this.readBits(1)},e.readUByte=function(){return this.readBits(8)},e.readUShort=function(){return this.readBits(16)},e.readUInt=function(){return this.readBits(32)},e.skipScalingList=function(t){for(var e=8,r=8,i=0;i<t;i++)0!==r&&(r=(e+this.readEG()+256)%256),e=0===r?e:r},e.readSPS=function(){var t,e,r,i=0,n=0,a=0,s=0,o=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),h=this.readBoolean.bind(this),d=this.skipBits.bind(this),c=this.skipEG.bind(this),f=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);o();var v=o();if(l(5),d(3),o(),f(),100===v||110===v||122===v||244===v||44===v||83===v||86===v||118===v||128===v){var m=u();if(3===m&&d(1),f(),f(),d(1),h())for(e=3!==m?8:12,r=0;r<e;r++)h()&&g(r<6?16:64)}f();var p=u();if(0===p)u();else if(1===p)for(d(1),c(),c(),t=u(),r=0;r<t;r++)c();f(),d(1);var y=u(),T=u(),E=l(1);0===E&&d(1),d(1),h()&&(i=u(),n=u(),a=u(),s=u());var S=[1,1];if(h()&&h())switch(o()){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:S=[o()<<8|o(),o()<<8|o()]}return{width:Math.ceil(16*(y+1)-2*i-2*n),height:(2-E)*(T+1)*16-(E?2:4)*(a+s),pixelRatio:S}},e.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},t}(),Li=function(){function t(t,e,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new Fr(e,{removePKCS7Padding:!1})}var e=t.prototype;return e.decryptBuffer=function(t){return this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer)},e.decryptAacSample=function(t,e,r){var i=this,n=t[e].unit;if(!(n.length<=16)){var a=n.subarray(16,n.length-n.length%16),s=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(s).then((function(a){var s=new Uint8Array(a);n.set(s,16),i.decrypter.isSync()||i.decryptAacSamples(t,e+1,r)}))}},e.decryptAacSamples=function(t,e,r){for(;;e++){if(e>=t.length)return void r();if(!(t[e].unit.length<32||(this.decryptAacSample(t,e,r),this.decrypter.isSync())))return}},e.getAvcEncryptedData=function(t){for(var e=16*Math.floor((t.length-48)/160)+16,r=new Int8Array(e),i=0,n=32;n<t.length-16;n+=160,i+=16)r.set(t.subarray(n,n+16),i);return r},e.getAvcDecryptedUnit=function(t,e){for(var r=new Uint8Array(e),i=0,n=32;n<t.length-16;n+=160,i+=16)t.set(r.subarray(i,i+16),n);return t},e.decryptAvcSample=function(t,e,r,i,n){var a=this,s=Ot(n.data),o=this.getAvcEncryptedData(s);this.decryptBuffer(o.buffer).then((function(o){n.data=a.getAvcDecryptedUnit(s,o),a.decrypter.isSync()||a.decryptAvcSamples(t,e,r+1,i)}))},e.decryptAvcSamples=function(t,e,r,i){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;e++,r=0){if(e>=t.length)return void i();for(var n=t[e].units;!(r>=n.length);r++){var a=n[r];if(!(a.data.length<=48||1!==a.type&&5!==a.type||(this.decryptAvcSample(t,e,r,i,a),this.decrypter.isSync())))return}}},t}(),Ri=188,Ai=function(){function t(t,e,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=t,this.config=e,this.typeSupported=r}t.probe=function(e){var r=t.syncOffset(e);return r>0&&D.warn("MPEG2-TS detected but first sync word found @ offset "+r),-1!==r},t.syncOffset=function(t){for(var e=t.length,r=Math.min(940,t.length-Ri)+1,i=0;i<r;){for(var n=!1,a=i;a<e&&71===t[a];a+=Ri)if(n||0!==bi(t,a)||(n=!0),n&&a+Ri>r)return i;i++}return-1},t.createTrack=function(t,e){return{container:"video"===t||"audio"===t?"video/mp2t":void 0,type:t,id:Et[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:"audio"===t?e:void 0}};var e=t.prototype;return e.resetInitSegment=function(e,r,i,n){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=t.createTrack("video"),this._audioTrack=t.createTrack("audio",n),this._id3Track=t.createTrack("id3"),this._txtTrack=t.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=r,this.videoCodec=i,this._duration=n},e.resetTimeStamp=function(){},e.resetContiguity=function(){var t=this._audioTrack,e=this._avcTrack,r=this._id3Track;t&&(t.pesData=null),e&&(e.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null},e.demux=function(e,r,i,n){var a;void 0===i&&(i=!1),void 0===n&&(n=!1),i||(this.sampleAes=null);var s=this._avcTrack,o=this._audioTrack,l=this._id3Track,u=this._txtTrack,h=s.pid,d=s.pesData,c=o.pid,f=l.pid,g=o.pesData,v=l.pesData,m=null,p=this.pmtParsed,y=this._pmtId,L=e.length;if(this.remainderData&&(L=(e=_t(this.remainderData,e)).length,this.remainderData=null),L<Ri&&!n)return this.remainderData=e,{audioTrack:o,videoTrack:s,id3Track:l,textTrack:u};var R=Math.max(0,t.syncOffset(e));(L-=(L-R)%Ri)<e.byteLength&&!n&&(this.remainderData=new Uint8Array(e.buffer,L,e.buffer.byteLength-L));for(var A=0,k=R;k<L;k+=Ri)if(71===e[k]){var b=!!(64&e[k+1]),I=bi(e,k),w=void 0;if((48&e[k+3])>>4>1){if((w=k+5+e[k+4])===k+Ri)continue}else w=k+4;switch(I){case h:b&&(d&&(a=wi(d))&&this.parseAVCPES(s,u,a,!1),d={data:[],size:0}),d&&(d.data.push(e.subarray(w,k+Ri)),d.size+=k+Ri-w);break;case c:if(b){if(g&&(a=wi(g)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,a);break;case"mp3":this.parseMPEGPES(o,a)}g={data:[],size:0}}g&&(g.data.push(e.subarray(w,k+Ri)),g.size+=k+Ri-w);break;case f:b&&(v&&(a=wi(v))&&this.parseID3PES(l,a),v={data:[],size:0}),v&&(v.data.push(e.subarray(w,k+Ri)),v.size+=k+Ri-w);break;case 0:b&&(w+=e[w]+1),y=this._pmtId=Di(e,w);break;case y:b&&(w+=e[w]+1);var C=Ii(e,w,this.typeSupported,i);(h=C.avc)>0&&(s.pid=h),(c=C.audio)>0&&(o.pid=c,o.segmentCodec=C.segmentCodec),(f=C.id3)>0&&(l.pid=f),null===m||p||(D.warn("MPEG-TS PMT found at "+k+" after unknown PID '"+m+"'. Backtracking to sync byte @"+R+" to parse all TS packets."),m=null,k=R-188),p=this.pmtParsed=!0;break;case 17:case 8191:break;default:m=I}}else A++;if(A>0){var _=new Error("Found "+A+" TS packet/s that do not start with 0x47");this.observer.emit(T.ERROR,T.ERROR,{type:E.MEDIA_ERROR,details:S.FRAG_PARSING_ERROR,fatal:!1,error:_,reason:_.message})}s.pesData=d,o.pesData=g,l.pesData=v;var P={audioTrack:o,videoTrack:s,id3Track:l,textTrack:u};return n&&this.extractRemainingSamples(P),P},e.flush=function(){var t,e=this.remainderData;return this.remainderData=null,t=e?this.demux(e,-1,!1,!0):{videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t},e.extractRemainingSamples=function(t){var e,r=t.audioTrack,i=t.videoTrack,n=t.id3Track,a=t.textTrack,s=i.pesData,o=r.pesData,l=n.pesData;if(s&&(e=wi(s))?(this.parseAVCPES(i,a,e,!0),i.pesData=null):i.pesData=s,o&&(e=wi(o))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,e);break;case"mp3":this.parseMPEGPES(r,e)}r.pesData=null}else null!=o&&o.size&&D.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=o;l&&(e=wi(l))?(this.parseID3PES(n,e),n.pesData=null):n.pesData=l},e.demuxSampleAes=function(t,e,r){var i=this.demux(t,r,!0,!this.config.progressive),n=this.sampleAes=new Li(this.observer,this.config,e);return this.decrypt(i,n)},e.decrypt=function(t,e){return new Promise((function(r){var i=t.audioTrack,n=t.videoTrack;i.samples&&"aac"===i.segmentCodec?e.decryptAacSamples(i.samples,0,(function(){n.samples?e.decryptAvcSamples(n.samples,0,0,(function(){r(t)})):r(t)})):n.samples&&e.decryptAvcSamples(n.samples,0,0,(function(){r(t)}))}))},e.destroy=function(){this._duration=0},e.parseAVCPES=function(t,e,r,i){var n,a=this,s=this.parseAVCNALu(t,r.data),o=this.avcSample,l=!1;r.data=null,o&&s.length&&!t.audFound&&(Ci(o,t),o=this.avcSample=ki(!1,r.pts,r.dts,"")),s.forEach((function(i){switch(i.type){case 1:n=!0,o||(o=a.avcSample=ki(!0,r.pts,r.dts,"")),o.frame=!0;var s=i.data;if(l&&s.length>4){var u=new Si(s).readSliceType();2!==u&&4!==u&&7!==u&&9!==u||(o.key=!0)}break;case 5:n=!0,o||(o=a.avcSample=ki(!0,r.pts,r.dts,"")),o.key=!0,o.frame=!0;break;case 6:n=!0,Ft(i.data,1,r.pts,e.samples);break;case 7:if(n=!0,l=!0,!t.sps){var h=i.data,d=new Si(h).readSPS();t.width=d.width,t.height=d.height,t.pixelRatio=d.pixelRatio,t.sps=[h],t.duration=a._duration;for(var c=h.subarray(1,4),f="avc1.",g=0;g<3;g++){var v=c[g].toString(16);v.length<2&&(v="0"+v),f+=v}t.codec=f}break;case 8:n=!0,t.pps||(t.pps=[i.data]);break;case 9:n=!1,t.audFound=!0,o&&Ci(o,t),o=a.avcSample=ki(!1,r.pts,r.dts,"");break;case 12:n=!0;break;default:n=!1,o&&(o.debug+="unknown NAL "+i.type+" ")}o&&n&&o.units.push(i)})),i&&o&&(Ci(o,t),this.avcSample=null)},e.getLastNalUnit=function(t){var e,r,i=this.avcSample;if(i&&0!==i.units.length||(i=t[t.length-1]),null!=(e=i)&&e.units){var n=i.units;r=n[n.length-1]}return r},e.parseAVCNALu=function(t,e){var r,i,n=e.byteLength,a=t.naluState||0,s=a,o=[],l=0,u=-1,h=0;for(-1===a&&(u=0,h=31&e[0],a=0,l=1);l<n;)if(r=e[l++],a)if(1!==a)if(r)if(1===r){if(u>=0){var d={data:e.subarray(u,l-a-1),type:h};o.push(d)}else{var c=this.getLastNalUnit(t.samples);if(c&&(s&&l<=4-s&&c.state&&(c.data=c.data.subarray(0,c.data.byteLength-s)),(i=l-a-1)>0)){var f=new Uint8Array(c.data.byteLength+i);f.set(c.data,0),f.set(e.subarray(0,i),c.data.byteLength),c.data=f,c.state=0}}l<n?(u=l,h=31&e[l],a=0):a=-1}else a=0;else a=3;else a=r?0:2;else a=r?0:1;if(u>=0&&a>=0){var g={data:e.subarray(u,n),type:h,state:a};o.push(g)}if(0===o.length){var v=this.getLastNalUnit(t.samples);if(v){var m=new Uint8Array(v.data.byteLength+e.byteLength);m.set(v.data,0),m.set(e,v.data.byteLength),v.data=m}}return t.naluState=a,o},e.parseAACPES=function(t,e){var r,i,n,a=0,s=this.aacOverFlow,o=e.data;if(s){this.aacOverFlow=null;var l=s.missing,u=s.sample.unit.byteLength;if(-1===l){var h=new Uint8Array(u+o.byteLength);h.set(s.sample.unit,0),h.set(o,u),o=h}else{var d=u-l;s.sample.unit.set(o.subarray(0,l),d),t.samples.push(s.sample),a=s.missing}}for(r=a,i=o.length;r<i-1&&!ii(o,r);r++);if(r!==a){var c,f=r<i-1;c=f?"AAC PES did not start with ADTS header,offset:"+r:"No ADTS header found in AAC PES";var g=new Error(c);if(D.warn("parsing error: "+c),this.observer.emit(T.ERROR,T.ERROR,{type:E.MEDIA_ERROR,details:S.FRAG_PARSING_ERROR,fatal:!1,levelRetry:f,error:g,reason:c}),!f)return}if(ai(t,this.observer,o,r,this.audioCodec),void 0!==e.pts)n=e.pts;else{if(!s)return void D.warn("[tsdemuxer]: AAC PES unknown PTS");var v=si(t.samplerate);n=s.sample.pts+v}for(var m,p=0;r<i;){if(r+=(m=oi(t,o,r,n,p)).length,m.missing){this.aacOverFlow=m;break}for(p++;r<i-1&&!ii(o,r);r++);}},e.parseMPEGPES=function(t,e){var r=e.data,i=r.length,n=0,a=0,s=e.pts;if(void 0!==s)for(;a<i;)if(Ti(r,a)){var o=mi(t,r,a,s,n);if(!o)break;a+=o.length,n++}else a++;else D.warn("[tsdemuxer]: MPEG PES unknown PTS")},e.parseID3PES=function(t,e){if(void 0!==e.pts){var r=o({},e,{type:this._avcTrack?Le:Ee,duration:Number.POSITIVE_INFINITY});t.samples.push(r)}else D.warn("[tsdemuxer]: ID3 PES unknown PTS")},t}();function ki(t,e,r,i){return{key:t,frame:!1,pts:e,dts:r,units:[],debug:i,length:0}}function bi(t,e){return((31&t[e+1])<<8)+t[e+2]}function Di(t,e){return(31&t[e+10])<<8|t[e+11]}function Ii(t,e,r,i){var n={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},a=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<a;){var s=bi(t,e);switch(t[e]){case 207:if(!i){D.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===n.audio&&(n.audio=s);break;case 21:-1===n.id3&&(n.id3=s);break;case 219:if(!i){D.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===n.avc&&(n.avc=s);break;case 3:case 4:!0!==r.mpeg&&!0!==r.mp3?D.log("MPEG audio found, not supported in this browser"):-1===n.audio&&(n.audio=s,n.segmentCodec="mp3");break;case 36:D.warn("Unsupported HEVC stream type found")}e+=5+((15&t[e+3])<<8|t[e+4])}return n}function wi(t){var e,r,i,n,a,s=0,o=t.data;if(!t||0===t.size)return null;for(;o[0].length<19&&o.length>1;){var l=new Uint8Array(o[0].length+o[1].length);l.set(o[0]),l.set(o[1],o[0].length),o[0]=l,o.splice(1,1)}if(1===((e=o[0])[0]<<16)+(e[1]<<8)+e[2]){if((r=(e[4]<<8)+e[5])&&r>t.size-6)return null;var u=e[7];192&u&&(n=536870912*(14&e[9])+4194304*(255&e[10])+16384*(254&e[11])+128*(255&e[12])+(254&e[13])/2,64&u?n-(a=536870912*(14&e[14])+4194304*(255&e[15])+16384*(254&e[16])+128*(255&e[17])+(254&e[18])/2)>54e5&&(D.warn(Math.round((n-a)/9e4)+"s delta between PTS and DTS, align them"),n=a):a=n);var h=(i=e[8])+9;if(t.size<=h)return null;t.size-=h;for(var d=new Uint8Array(t.size),c=0,f=o.length;c<f;c++){var g=(e=o[c]).byteLength;if(h){if(h>g){h-=g;continue}e=e.subarray(h),g-=h,h=0}d.set(e,s),s+=g}return r&&(r-=i+3),{data:d,pts:n,dts:a,len:r}}return null}function Ci(t,e){if(t.units.length&&t.frame){if(void 0===t.pts){var r=e.samples,i=r.length;if(!i)return void e.dropped++;var n=r[i-1];t.pts=n.pts,t.dts=n.dts}e.samples.push(t)}t.debug.length&&D.log(t.pts+"/"+t.dts+":"+t.debug)}var _i=function(t){function e(){return t.apply(this,arguments)||this}l(e,t);var r=e.prototype;return r.resetInitSegment=function(e,r,i,n){t.prototype.resetInitSegment.call(this,e,r,i,n),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:r,duration:n,inputTimeScale:9e4,dropped:0}},e.probe=function(t){if(!t)return!1;for(var e=(nt(t,0)||[]).length,r=t.length;e<r;e++)if(Ei(t,e))return D.log("MPEG Audio sync word found !"),!0;return!1},r.canParse=function(t,e){return function(t,e){return yi(t,e)&&4<=t.length-e}(t,e)},r.appendFrame=function(t,e,r){if(null!==this.basePTS)return mi(t,e,r,this.basePTS,this.frameIndex)},e}(Jr),Pi=function(){function t(){}return t.getSilentFrame=function(t,e){if("mp4a.40.2"===t){if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},t}(),xi=Math.pow(2,32)-1,Fi=function(){function t(){}return t.init=function(){var e;for(e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);t.HDLR_TYPES={video:r,audio:i};var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);t.STTS=t.STSC=t.STCO=a,t.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),t.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),t.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),t.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var s=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);t.FTYP=t.box(t.types.ftyp,s,l,s,o),t.DINF=t.box(t.types.dinf,t.box(t.types.dref,n))},t.box=function(t){for(var e=8,r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];for(var a=i.length,s=a;a--;)e+=i[a].byteLength;var o=new Uint8Array(e);for(o[0]=e>>24&255,o[1]=e>>16&255,o[2]=e>>8&255,o[3]=255&e,o.set(t,4),a=0,e=8;a<s;a++)o.set(i[a],e),e+=i[a].byteLength;return o},t.hdlr=function(e){return t.box(t.types.hdlr,t.HDLR_TYPES[e])},t.mdat=function(e){return t.box(t.types.mdat,e)},t.mdhd=function(e,r){r*=e;var i=Math.floor(r/(xi+1)),n=Math.floor(r%(xi+1));return t.box(t.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,85,196,0,0]))},t.mdia=function(e){return t.box(t.types.mdia,t.mdhd(e.timescale,e.duration),t.hdlr(e.type),t.minf(e))},t.mfhd=function(e){return t.box(t.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,255&e]))},t.minf=function(e){return"audio"===e.type?t.box(t.types.minf,t.box(t.types.smhd,t.SMHD),t.DINF,t.stbl(e)):t.box(t.types.minf,t.box(t.types.vmhd,t.VMHD),t.DINF,t.stbl(e))},t.moof=function(e,r,i){return t.box(t.types.moof,t.mfhd(e),t.traf(i,r))},t.moov=function(e){for(var r=e.length,i=[];r--;)i[r]=t.trak(e[r]);return t.box.apply(null,[t.types.moov,t.mvhd(e[0].timescale,e[0].duration)].concat(i).concat(t.mvex(e)))},t.mvex=function(e){for(var r=e.length,i=[];r--;)i[r]=t.trex(e[r]);return t.box.apply(null,[t.types.mvex].concat(i))},t.mvhd=function(e,r){r*=e;var i=Math.floor(r/(xi+1)),n=Math.floor(r%(xi+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,255&e,i>>24,i>>16&255,i>>8&255,255&i,n>>24,n>>16&255,n>>8&255,255&n,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t.box(t.types.mvhd,a)},t.sdtp=function(e){var r,i,n=e.samples||[],a=new Uint8Array(4+n.length);for(r=0;r<n.length;r++)i=n[r].flags,a[r+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t.box(t.types.sdtp,a)},t.stbl=function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.STTS),t.box(t.types.stsc,t.STSC),t.box(t.types.stsz,t.STSZ),t.box(t.types.stco,t.STCO))},t.avc1=function(e){var r,i,n,a=[],s=[];for(r=0;r<e.sps.length;r++)n=(i=e.sps[r]).byteLength,a.push(n>>>8&255),a.push(255&n),a=a.concat(Array.prototype.slice.call(i));for(r=0;r<e.pps.length;r++)n=(i=e.pps[r]).byteLength,s.push(n>>>8&255),s.push(255&n),s=s.concat(Array.prototype.slice.call(i));var o=t.box(t.types.avcC,new Uint8Array([1,a[3],a[4],a[5],255,224|e.sps.length].concat(a).concat([e.pps.length]).concat(s))),l=e.width,u=e.height,h=e.pixelRatio[0],d=e.pixelRatio[1];return t.box(t.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,t.box(t.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),t.box(t.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,255&h,d>>24,d>>16&255,d>>8&255,255&d])))},t.esds=function(t){var e=t.config.length;return new Uint8Array([0,0,0,0,3,23+e,0,1,0,4,15+e,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([e]).concat(t.config).concat([6,1,2]))},t.mp4a=function(e){var r=e.samplerate;return t.box(t.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),t.box(t.types.esds,t.esds(e)))},t.mp3=function(e){var r=e.samplerate;return t.box(t.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},t.stsd=function(e){return"audio"===e.type?"mp3"===e.segmentCodec&&"mp3"===e.codec?t.box(t.types.stsd,t.STSD,t.mp3(e)):t.box(t.types.stsd,t.STSD,t.mp4a(e)):t.box(t.types.stsd,t.STSD,t.avc1(e))},t.tkhd=function(e){var r=e.id,i=e.duration*e.timescale,n=e.width,a=e.height,s=Math.floor(i/(xi+1)),o=Math.floor(i%(xi+1));return t.box(t.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,o>>24,o>>16&255,o>>8&255,255&o,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,n>>8&255,255&n,0,0,a>>8&255,255&a,0,0]))},t.traf=function(e,r){var i=t.sdtp(e),n=e.id,a=Math.floor(r/(xi+1)),s=Math.floor(r%(xi+1));return t.box(t.types.traf,t.box(t.types.tfhd,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n])),t.box(t.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),t.trun(e,i.length+16+20+8+16+8+8),i)},t.trak=function(e){return e.duration=e.duration||4294967295,t.box(t.types.trak,t.tkhd(e),t.mdia(e))},t.trex=function(e){var r=e.id;return t.box(t.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},t.trun=function(e,r){var i,n,a,s,o,l,u=e.samples||[],h=u.length,d=12+16*h,c=new Uint8Array(d);for(r+=8+d,c.set(["video"===e.type?1:0,0,15,1,h>>>24&255,h>>>16&255,h>>>8&255,255&h,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),i=0;i<h;i++)a=(n=u[i]).duration,s=n.size,o=n.flags,l=n.cts,c.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o.isLeading<<2|o.dependsOn,o.isDependedOn<<6|o.hasRedundancy<<4|o.paddingValue<<1|o.isNonSync,61440&o.degradPrio,15&o.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*i);return t.box(t.types.trun,c)},t.initSegment=function(e){t.types||t.init();var r=t.moov(e),i=new Uint8Array(t.FTYP.byteLength+r.byteLength);return i.set(t.FTYP),i.set(r,t.FTYP.byteLength),i},t}();function Oi(t,e,r,i){void 0===r&&(r=1),void 0===i&&(i=!1);var n=t*e*r;return i?Math.round(n):n}function Mi(t,e){return void 0===e&&(e=!1),Oi(t,1e3,1/9e4,e)}Fi.types=void 0,Fi.HDLR_TYPES=void 0,Fi.STTS=void 0,Fi.STSC=void 0,Fi.STCO=void 0,Fi.STSZ=void 0,Fi.VMHD=void 0,Fi.SMHD=void 0,Fi.STSD=void 0,Fi.FTYP=void 0,Fi.DINF=void 0;var Ni=null,Ui=null,Bi=function(){function t(t,e,r,i){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=t,this.config=e,this.typeSupported=r,this.ISGenerated=!1,null===Ni){var n=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Ni=n?parseInt(n[1]):0}if(null===Ui){var a=navigator.userAgent.match(/Safari\/(\d+)/i);Ui=a?parseInt(a[1]):0}}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){D.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t},e.resetNextTimestamp=function(){D.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1},e.resetInitSegment=function(){D.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1},e.getVideoStartPts=function(t){var e=!1,r=t.reduce((function(t,r){var i=r.pts-t;return i<-4294967296?(e=!0,Gi(t,r.pts)):i>0?t:r.pts}),t[0].pts);return e&&D.debug("PTS rollover detected"),r},e.remux=function(t,e,r,i,n,a,s,o){var l,u,h,d,c,f,g=n,v=n,m=t.pid>-1,p=e.pid>-1,y=e.samples.length,T=t.samples.length>0,E=s&&y>0||y>1;if((!m||T)&&(!p||E)||this.ISGenerated||s){this.ISGenerated||(h=this.generateIS(t,e,n,a));var S,L=this.isVideoContiguous,R=-1;if(E&&(R=function(t){for(var e=0;e<t.length;e++)if(t[e].key)return e;return-1}(e.samples),!L&&this.config.forceKeyFrameOnDiscontinuity))if(f=!0,R>0){D.warn("[mp4-remuxer]: Dropped "+R+" out of "+y+" video samples due to a missing keyframe");var A=this.getVideoStartPts(e.samples);e.samples=e.samples.slice(R),e.dropped+=R,S=v+=(e.samples[0].pts-A)/e.inputTimeScale}else-1===R&&(D.warn("[mp4-remuxer]: No keyframe found out of "+y+" video samples"),f=!1);if(this.ISGenerated){if(T&&E){var k=this.getVideoStartPts(e.samples),b=(Gi(t.samples[0].pts,k)-k)/e.inputTimeScale;g+=Math.max(0,b),v+=Math.max(0,-b)}if(T){if(t.samplerate||(D.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),h=this.generateIS(t,e,n,a)),u=this.remuxAudio(t,g,this.isAudioContiguous,a,p||E||o===de?v:void 0),E){var I=u?u.endPTS-u.startPTS:0;e.inputTimeScale||(D.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),h=this.generateIS(t,e,n,a)),l=this.remuxVideo(e,v,L,I)}}else E&&(l=this.remuxVideo(e,v,L,0));l&&(l.firstKeyFrame=R,l.independent=-1!==R,l.firstKeyFramePTS=S)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(c=Ki(r,n,this._initPTS,this._initDTS)),i.samples.length&&(d=Hi(i,n,this._initPTS))),{audio:u,video:l,initSegment:h,independent:f,text:d,id3:c}},e.generateIS=function(t,e,r,i){var n,a,s,o=t.samples,l=e.samples,u=this.typeSupported,h={},d=this._initPTS,c=!d||i,f="audio/mp4";if(c&&(n=a=1/0),t.config&&o.length&&(t.timescale=t.samplerate,"mp3"===t.segmentCodec&&(u.mpeg?(f="audio/mpeg",t.codec=""):u.mp3&&(t.codec="mp3")),h.audio={id:"audio",container:f,codec:t.codec,initSegment:"mp3"===t.segmentCodec&&u.mpeg?new Uint8Array(0):Fi.initSegment([t]),metadata:{channelCount:t.channelCount}},c&&(s=t.inputTimeScale,d&&s===d.timescale?c=!1:n=a=o[0].pts-Math.round(s*r))),e.sps&&e.pps&&l.length&&(e.timescale=e.inputTimeScale,h.video={id:"main",container:"video/mp4",codec:e.codec,initSegment:Fi.initSegment([e]),metadata:{width:e.width,height:e.height}},c))if(s=e.inputTimeScale,d&&s===d.timescale)c=!1;else{var g=this.getVideoStartPts(l),v=Math.round(s*r);a=Math.min(a,Gi(l[0].dts,g)-v),n=Math.min(n,g-v)}if(Object.keys(h).length)return this.ISGenerated=!0,c?(this._initPTS={baseTime:n,timescale:s},this._initDTS={baseTime:a,timescale:s}):n=s=void 0,{tracks:h,initPTS:n,timescale:s}},e.remuxVideo=function(t,e,r,i){var n,a,s=t.inputTimeScale,l=t.samples,u=[],h=l.length,d=this._initPTS,c=this.nextAvcDts,f=8,g=this.videoSampleDuration,v=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,p=!1;r&&null!==c||(c=e*s-(l[0].pts-Gi(l[0].dts,l[0].pts)));for(var y=d.baseTime*s/d.timescale,L=0;L<h;L++){var R=l[L];R.pts=Gi(R.pts-y,c),R.dts=Gi(R.dts-y,c),R.dts<l[L>0?L-1:L].dts&&(p=!0)}p&&l.sort((function(t,e){var r=t.dts-e.dts,i=t.pts-e.pts;return r||i})),n=l[0].dts;var A=(a=l[l.length-1].dts)-n,k=A?Math.round(A/(h-1)):g||t.inputTimeScale/30;if(r){var b=n-c,I=b>k,w=b<-1;if((I||w)&&(I?D.warn("AVC: "+Mi(b,!0)+" ms ("+b+"dts) hole between fragments detected, filling it"):D.warn("AVC: "+Mi(-b,!0)+" ms ("+b+"dts) overlapping between fragments detected"),!w||c>l[0].pts)){n=c;var C=l[0].pts-b;l[0].dts=n,l[0].pts=C,D.log("Video: First PTS/DTS adjusted: "+Mi(C,!0)+"/"+Mi(n,!0)+", delta: "+Mi(b,!0)+" ms")}}n=Math.max(0,n);for(var _=0,P=0,x=0;x<h;x++){for(var F=l[x],O=F.units,M=O.length,N=0,U=0;U<M;U++)N+=O[U].data.length;P+=N,_+=M,F.length=N,F.dts=Math.max(F.dts,n),v=Math.min(F.pts,v),m=Math.max(F.pts,m)}a=l[h-1].dts;var B,G=P+4*_+8;try{B=new Uint8Array(G)}catch(t){return void this.observer.emit(T.ERROR,T.ERROR,{type:E.MUX_ERROR,details:S.REMUX_ALLOC_ERROR,fatal:!1,error:t,bytes:G,reason:"fail allocating video mdat "+G})}var K=new DataView(B.buffer);K.setUint32(0,G),B.set(Fi.types.mdat,4);for(var H=!1,V=Number.POSITIVE_INFINITY,Y=Number.POSITIVE_INFINITY,W=Number.NEGATIVE_INFINITY,j=Number.NEGATIVE_INFINITY,q=0;q<h;q++){for(var X=l[q],z=X.units,Q=0,$=0,J=z.length;$<J;$++){var Z=z[$],tt=Z.data,et=Z.data.byteLength;K.setUint32(f,et),f+=4,B.set(tt,f),f+=et,Q+=4+et}var rt=void 0;if(q<h-1)g=l[q+1].dts-X.dts,rt=l[q+1].pts-X.pts;else{var it=this.config,nt=q>0?X.dts-l[q-1].dts:k;if(rt=q>0?X.pts-l[q-1].pts:k,it.stretchShortVideoTrack&&null!==this.nextAudioPts){var at=Math.floor(it.maxBufferHole*s),st=(i?v+i*s:this.nextAudioPts)-X.pts;st>at?((g=st-nt)<0?g=nt:H=!0,D.log("[mp4-remuxer]: It is approximately "+st/90+" ms to the next segment; using duration "+g/90+" ms for the last video frame.")):g=nt}else g=nt}var ot=Math.round(X.pts-X.dts);V=Math.min(V,g),W=Math.max(W,g),Y=Math.min(Y,rt),j=Math.max(j,rt),u.push(new Yi(X.key,g,Q,ot))}if(u.length)if(Ni){if(Ni<70){var lt=u[0].flags;lt.dependsOn=2,lt.isNonSync=0}}else if(Ui&&j-Y<W-V&&k/W<.025&&0===u[0].cts){D.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");for(var ut=n,ht=0,dt=u.length;ht<dt;ht++){var ct=ut+u[ht].duration,ft=ut+u[ht].cts;if(ht<dt-1){var gt=ct+u[ht+1].cts;u[ht].duration=gt-ft}else u[ht].duration=ht?u[ht-1].duration:k;u[ht].cts=0,ut=ct}}g=H||!g?k:g,this.nextAvcDts=c=a+g,this.videoSampleDuration=g,this.isVideoContiguous=!0;var vt={data1:Fi.moof(t.sequenceNumber++,n,o({},t,{samples:u})),data2:B,startPTS:v/s,endPTS:(m+g)/s,startDTS:n/s,endDTS:c/s,type:"video",hasAudio:!1,hasVideo:!0,nb:u.length,dropped:t.dropped};return t.samples=[],t.dropped=0,vt},e.remuxAudio=function(t,e,r,i,n){var a=t.inputTimeScale,s=a/(t.samplerate?t.samplerate:a),l="aac"===t.segmentCodec?1024:1152,u=l*s,h=this._initPTS,d="mp3"===t.segmentCodec&&this.typeSupported.mpeg,c=[],f=void 0!==n,g=t.samples,v=d?0:8,m=this.nextAudioPts||-1,p=e*a,y=h.baseTime*a/h.timescale;if(this.isAudioContiguous=r=r||g.length&&m>0&&(i&&Math.abs(p-m)<9e3||Math.abs(Gi(g[0].pts-y,p)-m)<20*u),g.forEach((function(t){t.pts=Gi(t.pts-y,p)})),!r||m<0){if(g=g.filter((function(t){return t.pts>=0})),!g.length)return;m=0===n?0:i&&!f?Math.max(0,p):g[0].pts}if("aac"===t.segmentCodec)for(var L=this.config.maxAudioFramesDrift,R=0,A=m;R<g.length;R++){var k=g[R],b=k.pts,I=b-A,w=Math.abs(1e3*I/a);if(I<=-L*u&&f)0===R&&(D.warn("Audio frame @ "+(b/a).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*I/a)+" ms."),this.nextAudioPts=m=A=b);else if(I>=L*u&&w<1e4&&f){var C=Math.round(I/u);(A=b-C*u)<0&&(C--,A+=u),0===R&&(this.nextAudioPts=m=A),D.warn("[mp4-remuxer]: Injecting "+C+" audio frame @ "+(A/a).toFixed(3)+"s due to "+Math.round(1e3*I/a)+" ms gap.");for(var _=0;_<C;_++){var P=Math.max(A,0),x=Pi.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);x||(D.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),x=k.unit.subarray()),g.splice(R,0,{unit:x,pts:P}),A+=u,R++}}k.pts=A,A+=u}for(var F,O=null,M=null,N=0,U=g.length;U--;)N+=g[U].unit.byteLength;for(var B=0,G=g.length;B<G;B++){var K=g[B],H=K.unit,V=K.pts;if(null!==M)c[B-1].duration=Math.round((V-M)/s);else{if(r&&"aac"===t.segmentCodec&&(V=m),O=V,!(N>0))return;N+=v;try{F=new Uint8Array(N)}catch(t){return void this.observer.emit(T.ERROR,T.ERROR,{type:E.MUX_ERROR,details:S.REMUX_ALLOC_ERROR,fatal:!1,error:t,bytes:N,reason:"fail allocating audio mdat "+N})}d||(new DataView(F.buffer).setUint32(0,N),F.set(Fi.types.mdat,4))}F.set(H,v);var Y=H.byteLength;v+=Y,c.push(new Yi(!0,l,Y,0)),M=V}var W=c.length;if(W){var j=c[c.length-1];this.nextAudioPts=m=M+s*j.duration;var q=d?new Uint8Array(0):Fi.moof(t.sequenceNumber++,O/s,o({},t,{samples:c}));t.samples=[];var X=O/a,z=m/a,Q={data1:q,data2:F,startPTS:X,endPTS:z,startDTS:X,endDTS:z,type:"audio",hasAudio:!0,hasVideo:!1,nb:W};return this.isAudioContiguous=!0,Q}},e.remuxEmptyAudio=function(t,e,r,i){var n=t.inputTimeScale,a=n/(t.samplerate?t.samplerate:n),s=this.nextAudioPts,o=this._initDTS,l=9e4*o.baseTime/o.timescale,u=(null!==s?s:i.startDTS*n)+l,h=i.endDTS*n+l,d=1024*a,c=Math.ceil((h-u)/d),f=Pi.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(D.warn("[mp4-remuxer]: remux empty Audio"),f){for(var g=[],v=0;v<c;v++){var m=u+v*d;g.push({unit:f,pts:m,dts:m})}return t.samples=g,this.remuxAudio(t,e,r,!1)}D.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec")},t}();function Gi(t,e){var r;if(null===e)return t;for(r=e<t?-8589934592:8589934592;Math.abs(t-e)>4294967296;)t+=r;return t}function Ki(t,e,r,i){var n=t.samples.length;if(n){for(var a=t.inputTimeScale,s=0;s<n;s++){var o=t.samples[s];o.pts=Gi(o.pts-9e4*r.baseTime/r.timescale,e*a)/a,o.dts=Gi(o.dts-9e4*i.baseTime/i.timescale,e*a)/a}var l=t.samples;return t.samples=[],{samples:l}}}function Hi(t,e,r){var i=t.samples.length;if(i){for(var n=t.inputTimeScale,a=0;a<i;a++){var s=t.samples[a];s.pts=Gi(s.pts-9e4*r.baseTime/r.timescale,e*n)/n}t.samples.sort((function(t,e){return t.pts-e.pts}));var o=t.samples;return t.samples=[],{samples:o}}}var Vi,Yi=function(t,e,r,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=e,this.size=r,this.cts=i,this.flags=new Wi(t)},Wi=function(t){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=t?2:1,this.isNonSync=t?0:1},ji=function(){function t(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}var e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=function(t){this.initPTS=t,this.lastEndTime=null},e.resetNextTimestamp=function(){this.lastEndTime=null},e.resetInitSegment=function(t,e,r,i){this.audioCodec=e,this.videoCodec=r,this.generateInitSegment(function(t,e){if(!t||!e)return t;var r=e.keyId;return r&&e.isCommonEncryption&&bt(t,["moov","trak"]).forEach((function(t){var e=bt(t,["mdia","minf","stbl","stsd"])[0].subarray(8),i=bt(e,["enca"]),n=i.length>0;n||(i=bt(e,["encv"])),i.forEach((function(t){bt(n?t.subarray(28):t.subarray(78),["sinf"]).forEach((function(t){var e=wt(t);if(e){var i=e.subarray(8,24);i.some((function(t){return 0!==t}))||(D.log("[eme] Patching keyId in 'enc"+(n?"a":"v")+">sinf>>tenc' box: "+pt(i)+" -> "+pt(r)),e.set(r,8))}}))}))})),t}(t,i)),this.emitInitSegment=!0},e.generateInitSegment=function(t){var e=this.audioCodec,r=this.videoCodec;if(null==t||!t.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var i=this.initData=It(t);e||(e=qi(i.audio,F)),r||(r=qi(i.video,O));var n={};i.audio&&i.video?n.audiovideo={container:"video/mp4",codec:e+","+r,initSegment:t,id:"main"}:i.audio?n.audio={container:"audio/mp4",codec:e,initSegment:t,id:"audio"}:i.video?n.video={container:"video/mp4",codec:r,initSegment:t,id:"main"}:D.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=n},e.remux=function(t,e,r,i,n,a){var s,o,l=this.initPTS,u=this.lastEndTime,h={audio:void 0,video:void 0,text:i,id3:r,initSegment:void 0};y(u)||(u=this.lastEndTime=n||0);var d=e.samples;if(null==d||!d.length)return h;var c={initPTS:void 0,timescale:1},f=this.initData;if(null!=(s=f)&&s.length||(this.generateInitSegment(d),f=this.initData),null==(o=f)||!o.length)return D.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),h;this.emitInitSegment&&(c.tracks=this.initTracks,this.emitInitSegment=!1);var g=function(t,e){return bt(e,["moof","traf"]).reduce((function(e,r){var i=bt(r,["tfdt"])[0],n=i[0],a=bt(r,["tfhd"]).reduce((function(e,r){var a=Rt(r,4),s=t[a];if(s){var o=Rt(i,4);if(1===n){if(o===yt)return D.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),e;o*=yt+1,o+=Rt(i,8)}var l=o/(s.timescale||9e4);if(isFinite(l)&&(null===e||l<e))return l}return e}),null);return null!==a&&isFinite(a)&&(null===e||a<e)?a:e}),null)}(f,d),v=null===g?n:g;(function(t,e,r){if(null===t)return!0;var i=e-t.baseTime/t.timescale;return i<0&&Math.abs(i-r)>1}(l,v,n)||c.timescale!==l.timescale&&a)&&(c.initPTS=v-n,this.initPTS=l={baseTime:c.initPTS,timescale:1});var m=function(t,e){for(var r=0,i=0,n=0,a=bt(t,["moof","traf"]),s=0;s<a.length;s++){var o=a[s],l=bt(o,["tfhd"])[0],u=e[Rt(l,4)];if(u){var h=u.default,d=Rt(l,0)|(null==h?void 0:h.flags),c=null==h?void 0:h.duration;8&d&&(c=Rt(l,2&d?12:8));for(var f=u.timescale||9e4,g=bt(o,["trun"]),v=0;v<g.length;v++)!(r=Ct(g[v]))&&c&&(r=c*Rt(g[v],4)),u.type===O?i+=r/f:u.type===F&&(n+=r/f)}}if(0===i&&0===n){for(var m=0,p=bt(t,["sidx"]),y=0;y<p.length;y++){var T=Dt(p[y]);null!=T&&T.references&&(m+=T.references.reduce((function(t,e){return t+e.info.duration||0}),0))}return m}return i||n}(d,f),p=t?v-l.baseTime/l.timescale:u,T=p+m;!function(t,e,r){bt(e,["moof","traf"]).forEach((function(e){bt(e,["tfhd"]).forEach((function(i){var n=Rt(i,4),a=t[n];if(a){var s=a.timescale||9e4;bt(e,["tfdt"]).forEach((function(t){var e=t[0],i=Rt(t,4);if(0===e)i-=r*s,kt(t,4,i=Math.max(i,0));else{i*=Math.pow(2,32),i+=Rt(t,8),i-=r*s,i=Math.max(i,0);var n=Math.floor(i/(yt+1)),a=Math.floor(i%(yt+1));kt(t,4,n),kt(t,8,a)}}))}}))}))}(f,d,l.baseTime/l.timescale),m>0?this.lastEndTime=T:(D.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var E=!!f.audio,S=!!f.video,L="";E&&(L+="audio"),S&&(L+="video");var R={data1:d,startPTS:p,startDTS:p,endPTS:T,endDTS:T,type:L,hasAudio:E,hasVideo:S,nb:1,dropped:0};return h.audio="audio"===R.type?R:void 0,h.video="audio"!==R.type?R:void 0,h.initSegment=c,h.id3=Ki(r,n,l,l),i.samples.length&&(h.text=Hi(i,n,l)),h},t}();function qi(t,e){var r=null==t?void 0:t.codec;return r&&r.length>4?r:"hvc1"===r||"hev1"===r?"hvc1.1.c.L120.90":"av01"===r?"av01.0.04M.08":"avc1"===r||e===O?"avc1.42e01e":"mp4a.40.5"}try{Vi=self.performance.now.bind(self.performance)}catch(t){D.debug("Unable to use Performance API on this environment"),Vi="undefined"!=typeof self&&self.Date.now}var Xi=[{demux:hi,remux:ji},{demux:Ai,remux:Bi},{demux:li,remux:Bi},{demux:_i,remux:Bi}],zi=function(){function t(t,e,r,i,n){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=t,this.typeSupported=e,this.config=r,this.vendor=i,this.id=n}var e=t.prototype;return e.configure=function(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()},e.push=function(t,e,r,i){var n=this,a=r.transmuxing;a.executeStart=Vi();var s=new Uint8Array(t),o=this.currentTransmuxState,l=this.transmuxConfig;i&&(this.currentTransmuxState=i);var u=i||o,h=u.contiguous,d=u.discontinuity,c=u.trackSwitch,f=u.accurateTimeOffset,g=u.timeOffset,v=u.initSegmentChange,m=l.audioCodec,p=l.videoCodec,y=l.defaultInitPts,L=l.duration,R=l.initSegmentData,A=function(t,e){var r=null;return t.byteLength>0&&null!=e&&null!=e.key&&null!==e.iv&&null!=e.method&&(r=e),r}(s,e);if(A&&"AES-128"===A.method){var k=this.getDecrypter();if(!k.isSync())return this.decryptionPromise=k.webCryptoDecrypt(s,A.key.buffer,A.iv.buffer).then((function(t){var e=n.push(t,null,r);return n.decryptionPromise=null,e})),this.decryptionPromise;var b=k.softwareDecrypt(s,A.key.buffer,A.iv.buffer);if(r.part>-1&&(b=k.flush()),!b)return a.executeEnd=Vi(),Qi(r);s=new Uint8Array(b)}var I=this.needsProbing(d,c);if(I){var w=this.configureTransmuxer(s);if(w)return D.warn("[transmuxer] "+w.message),this.observer.emit(T.ERROR,T.ERROR,{type:E.MEDIA_ERROR,details:S.FRAG_PARSING_ERROR,fatal:!1,error:w,reason:w.message}),a.executeEnd=Vi(),Qi(r)}(d||c||v||I)&&this.resetInitSegment(R,m,p,L,e),(d||v||I)&&this.resetInitialTimestamp(y),h||this.resetContiguity();var C=this.transmux(s,A,g,f,r),_=this.currentTransmuxState;return _.contiguous=!0,_.discontinuity=!1,_.trackSwitch=!1,a.executeEnd=Vi(),C},e.flush=function(t){var e=this,r=t.transmuxing;r.executeStart=Vi();var i=this.decrypter,n=this.currentTransmuxState,a=this.decryptionPromise;if(a)return a.then((function(){return e.flush(t)}));var s=[],o=n.timeOffset;if(i){var l=i.flush();l&&s.push(this.push(l,null,t))}var u=this.demuxer,h=this.remuxer;if(!u||!h)return r.executeEnd=Vi(),[Qi(t)];var d=u.flush(o);return $i(d)?d.then((function(r){return e.flushRemux(s,r,t),s})):(this.flushRemux(s,d,t),s)},e.flushRemux=function(t,e,r){var i=e.audioTrack,n=e.videoTrack,a=e.id3Track,s=e.textTrack,o=this.currentTransmuxState,l=o.accurateTimeOffset,u=o.timeOffset;D.log("[transmuxer.ts]: Flushed fragment "+r.sn+(r.part>-1?" p: "+r.part:"")+" of level "+r.level);var h=this.remuxer.remux(i,n,a,s,u,l,!0,this.id);t.push({remuxResult:h,chunkMeta:r}),r.transmuxing.executeEnd=Vi()},e.resetInitialTimestamp=function(t){var e=this.demuxer,r=this.remuxer;e&&r&&(e.resetTimeStamp(t),r.resetTimeStamp(t))},e.resetContiguity=function(){var t=this.demuxer,e=this.remuxer;t&&e&&(t.resetContiguity(),e.resetNextTimestamp())},e.resetInitSegment=function(t,e,r,i,n){var a=this.demuxer,s=this.remuxer;a&&s&&(a.resetInitSegment(t,e,r,i),s.resetInitSegment(t,e,r,n))},e.destroy=function(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)},e.transmux=function(t,e,r,i,n){return e&&"SAMPLE-AES"===e.method?this.transmuxSampleAes(t,e,r,i,n):this.transmuxUnencrypted(t,r,i,n)},e.transmuxUnencrypted=function(t,e,r,i){var n=this.demuxer.demux(t,e,!1,!this.config.progressive),a=n.audioTrack,s=n.videoTrack,o=n.id3Track,l=n.textTrack;return{remuxResult:this.remuxer.remux(a,s,o,l,e,r,!1,this.id),chunkMeta:i}},e.transmuxSampleAes=function(t,e,r,i,n){var a=this;return this.demuxer.demuxSampleAes(t,e,r).then((function(t){return{remuxResult:a.remuxer.remux(t.audioTrack,t.videoTrack,t.id3Track,t.textTrack,r,i,!1,a.id),chunkMeta:n}}))},e.configureTransmuxer=function(t){for(var e,r=this.config,i=this.observer,n=this.typeSupported,a=this.vendor,s=0,o=Xi.length;s<o;s++)if(Xi[s].demux.probe(t)){e=Xi[s];break}if(!e)return new Error("Failed to find demuxer by probing fragment data");var l=this.demuxer,u=this.remuxer,h=e.remux,d=e.demux;u&&u instanceof h||(this.remuxer=new h(i,r,n,a)),l&&l instanceof d||(this.demuxer=new d(i,r,n),this.probe=d.probe)},e.needsProbing=function(t,e){return!this.demuxer||!this.remuxer||t||e},e.getDecrypter=function(){var t=this.decrypter;return t||(t=this.decrypter=new Fr(this.config)),t},t}(),Qi=function(t){return{remuxResult:{},chunkMeta:t}};function $i(t){return"then"in t&&t.then instanceof Function}var Ji=function(t,e,r,i,n){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=e,this.initSegmentData=r,this.duration=i,this.defaultInitPts=n||null},Zi=function(t,e,r,i,n,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=t,this.contiguous=e,this.accurateTimeOffset=r,this.trackSwitch=i,this.timeOffset=n,this.initSegmentChange=a},tn={};!function(t){var e=Object.prototype.hasOwnProperty,r="~";function i(){}function n(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function a(t,e,i,a,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new n(i,a||t,s),l=r?r+e:e;return t._events[l]?t._events[l].fn?t._events[l]=[t._events[l],o]:t._events[l].push(o):(t._events[l]=o,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),o.prototype.eventNames=function(){var t,i,n=[];if(0===this._eventsCount)return n;for(i in t=this._events)e.call(t,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},o.prototype.listeners=function(t){var e=r?r+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,a=i.length,s=new Array(a);n<a;n++)s[n]=i[n].fn;return s},o.prototype.listenerCount=function(t){var e=r?r+t:t,i=this._events[e];return i?i.fn?1:i.length:0},o.prototype.emit=function(t,e,i,n,a,s){var o=r?r+t:t;if(!this._events[o])return!1;var l,u,h=this._events[o],d=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),d){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,n),!0;case 5:return h.fn.call(h.context,e,i,n,a),!0;case 6:return h.fn.call(h.context,e,i,n,a,s),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];h.fn.apply(h.context,l)}else{var c,f=h.length;for(u=0;u<f;u++)switch(h[u].once&&this.removeListener(t,h[u].fn,void 0,!0),d){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,e);break;case 3:h[u].fn.call(h[u].context,e,i);break;case 4:h[u].fn.call(h[u].context,e,i,n);break;default:if(!l)for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];h[u].fn.apply(h[u].context,l)}}return!0},o.prototype.on=function(t,e,r){return a(this,t,e,r,!1)},o.prototype.once=function(t,e,r){return a(this,t,e,r,!0)},o.prototype.removeListener=function(t,e,i,n){var a=r?r+t:t;if(!this._events[a])return this;if(!e)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==e||n&&!o.once||i&&o.context!==i||s(this,a);else{for(var l=0,u=[],h=o.length;l<h;l++)(o[l].fn!==e||n&&!o[l].once||i&&o[l].context!==i)&&u.push(o[l]);u.length?this._events[a]=1===u.length?u[0]:u:s(this,a)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=r?r+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,t.exports=o}({get exports(){return tn},set exports(t){tn=t}});var en=tn;function rn(t,e){if(!((r=e.remuxResult).audio||r.video||r.text||r.id3||r.initSegment))return!1;var r,i=[],n=e.remuxResult,a=n.audio,s=n.video;return a&&nn(i,a),s&&nn(i,s),t.postMessage({event:"transmuxComplete",data:e},i),!0}function nn(t,e){e.data1&&t.push(e.data1.buffer),e.data2&&t.push(e.data2.buffer)}function an(t,e,r){e.reduce((function(e,r){return rn(t,r)||e}),!1)||t.postMessage({event:"transmuxComplete",data:e[0]}),t.postMessage({event:"flush",data:r})}void 0!==e&&e&&function(t){var e=new en,r=function(e,r){t.postMessage({event:e,data:r})};e.on(T.FRAG_DECRYPTED,r),e.on(T.ERROR,r);var i=function(){var t=function(t){var e=function(e){r("workerLog",{logType:t,message:e})};D[t]=e};for(var e in D)t(e)};t.addEventListener("message",(function(n){var a=n.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);t.transmuxer=new zi(e,a.typeSupported,s,a.vendor,a.id),b(s.debug,a.id),i(),r("init",null);break;case"configure":t.transmuxer.configure(a.config);break;case"demux":var o=t.transmuxer.push(a.data,a.decryptdata,a.chunkMeta,a.state);$i(o)?(t.transmuxer.async=!0,o.then((function(e){rn(t,e)})).catch((function(t){r(T.ERROR,{type:E.MEDIA_ERROR,details:S.FRAG_PARSING_ERROR,chunkMeta:a.chunkMeta,fatal:!1,error:t,err:t,reason:"transmuxer-worker push error"})}))):(t.transmuxer.async=!1,rn(t,o));break;case"flush":var l=a.chunkMeta,u=t.transmuxer.flush(l);$i(u)||t.transmuxer.async?($i(u)||(u=Promise.resolve(u)),u.then((function(e){an(t,e,l)})).catch((function(t){r(T.ERROR,{type:E.MEDIA_ERROR,details:S.FRAG_PARSING_ERROR,chunkMeta:a.chunkMeta,fatal:!1,error:t,err:t,reason:"transmuxer-worker flush error"})}))):an(t,u,l)}}))}(self);var sn=zr()||{isTypeSupported:function(){return!1}},on=function(){function e(e,r,i,n){var a=this;this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var s=e.config;this.hls=e,this.id=r,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=i,this.onFlush=n;var o=function(t,e){(e=e||{}).frag=a.frag,e.id=a.id,t===T.ERROR&&(a.error=e.error),a.hls.trigger(t,e)};this.observer=new en,this.observer.on(T.FRAG_DECRYPTED,o),this.observer.on(T.ERROR,o);var l,u,h,d,c={mp4:sn.isTypeSupported("video/mp4"),mpeg:sn.isTypeSupported("audio/mpeg"),mp3:sn.isTypeSupported('audio/mp4; codecs="mp3"')},f=navigator.vendor;if(!this.useWorker||"undefined"==typeof Worker||(s.workerPath,0))this.transmuxer=new zi(this.observer,c,s,f,r);else try{s.workerPath?(D.log("loading Web Worker "+s.workerPath+' for "'+r+'"'),this.workerContext=(h=s.workerPath,d=new self.URL(h,self.location.href).href,{worker:new self.Worker(d),scriptURL:d})):(D.log('injecting Web Worker for "'+r+'"'),this.workerContext=(l=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;("+t.toString()+")(true);"],{type:"text/javascript"}),u=self.URL.createObjectURL(l),{worker:new self.Worker(u),objectURL:u})),this.onwmsg=function(t){return a.onWorkerMessage(t)};var g=this.workerContext.worker;g.addEventListener("message",this.onwmsg),g.onerror=function(t){var e=new Error(t.message+"  ("+t.filename+":"+t.lineno+")");s.enableWorker=!1,D.warn('Error in "'+r+'" Web Worker, fallback to inline'),a.hls.trigger(T.ERROR,{type:E.OTHER_ERROR,details:S.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:e})},g.postMessage({cmd:"init",typeSupported:c,vendor:f,id:r,config:JSON.stringify(s)})}catch(t){D.warn('Error setting up "'+r+'" Web Worker, fallback to inline',t),this.resetWorker(),this.error=null,this.transmuxer=new zi(this.observer,c,s,f,r)}}var r=e.prototype;return r.resetWorker=function(){if(this.workerContext){var t=this.workerContext,e=t.worker,r=t.objectURL;r&&self.URL.revokeObjectURL(r),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}},r.destroy=function(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{var t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}var e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null},r.push=function(t,e,r,i,n,a,s,o,l,u){var h,d,c=this;l.transmuxing.start=self.performance.now();var f=this.transmuxer,g=a?a.start:n.start,v=n.decryptdata,m=this.frag,p=!(m&&n.cc===m.cc),y=!(m&&l.level===m.level),T=m?l.sn-m.sn:-1,E=this.part?l.part-this.part.index:-1,S=0===T&&l.id>1&&l.id===(null==m?void 0:m.stats.chunkCount),L=!y&&(1===T||0===T&&(1===E||S&&E<=0)),R=self.performance.now();(y||T||0===n.stats.parsing.start)&&(n.stats.parsing.start=R),!a||!E&&L||(a.stats.parsing.start=R);var A=!(m&&(null==(h=n.initSegment)?void 0:h.url)===(null==(d=m.initSegment)?void 0:d.url)),k=new Zi(p,L,o,y,g,A);if(!L||p||A){D.log("[transmuxer-interface, "+n.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+p+"\n        trackSwitch: "+y+"\n        contiguous: "+L+"\n        accurateTimeOffset: "+o+"\n        timeOffset: "+g+"\n        initSegmentChange: "+A);var b=new Ji(r,i,e,s,u);this.configureTransmuxer(b)}if(this.frag=n,this.part=a,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:t,decryptdata:v,chunkMeta:l,state:k},t instanceof ArrayBuffer?[t]:[]);else if(f){var I=f.push(t,v,l,k);$i(I)?(f.async=!0,I.then((function(t){c.handleTransmuxComplete(t)})).catch((function(t){c.transmuxerError(t,l,"transmuxer-interface push error")}))):(f.async=!1,this.handleTransmuxComplete(I))}},r.flush=function(t){var e=this;t.transmuxing.start=self.performance.now();var r=this.transmuxer;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:t});else if(r){var i=r.flush(t);$i(i)||r.async?($i(i)||(i=Promise.resolve(i)),i.then((function(r){e.handleFlushResult(r,t)})).catch((function(r){e.transmuxerError(r,t,"transmuxer-interface flush error")}))):this.handleFlushResult(i,t)}},r.transmuxerError=function(t,e,r){this.hls&&(this.error=t,this.hls.trigger(T.ERROR,{type:E.MEDIA_ERROR,details:S.FRAG_PARSING_ERROR,chunkMeta:e,fatal:!1,error:t,err:t,reason:r}))},r.handleFlushResult=function(t,e){var r=this;t.forEach((function(t){r.handleTransmuxComplete(t)})),this.onFlush(e)},r.onWorkerMessage=function(t){var e=t.data,r=this.hls;switch(e.event){case"init":var i,n=null==(i=this.workerContext)?void 0:i.objectURL;n&&self.URL.revokeObjectURL(n);break;case"transmuxComplete":this.handleTransmuxComplete(e.data);break;case"flush":this.onFlush(e.data);break;case"workerLog":D[e.data.logType]&&D[e.data.logType](e.data.message);break;default:e.data=e.data||{},e.data.frag=this.frag,e.data.id=this.id,r.trigger(e.event,e.data)}},r.configureTransmuxer=function(t){var e=this.transmuxer;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:t}):e&&e.configure(t)},r.handleTransmuxComplete=function(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)},e}(),ln=function(){function t(t,e,r,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=t,this.media=e,this.fragmentTracker=r,this.hls=i}var e=t.prototype;return e.destroy=function(){this.media=null,this.hls=this.fragmentTracker=null},e.poll=function(t,e){var r=this.config,i=this.media,n=this.stalled;if(null!==i){var a=i.currentTime,s=i.seeking,o=this.seeking&&!s,l=!this.seeking&&s;if(this.seeking=s,a===t){if(l||o)this.stalled=null;else if(!(i.paused&&!s||i.ended||0===i.playbackRate)&&Ar.getBuffered(i).length){var u=Ar.bufferInfo(i,a,0),h=u.len>0,d=u.nextStart||0;if(h||d){if(s){var c=u.len>2,f=!d||e&&e.start<=a||d-a>2&&!this.fragmentTracker.getPartialFragment(a);if(c||f)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var g,v=Math.max(d,u.start||0)-a,m=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,p=(null==m||null==(g=m.details)?void 0:g.live)?2*m.details.targetduration:2,y=this.fragmentTracker.getPartialFragment(a);if(v>0&&(v<=p||y))return void this._trySkipBufferHole(y)}var T=self.performance.now();if(null!==n){var E=T-n;if(s||!(E>=250)||(this._reportStall(u),this.media)){var S=Ar.bufferInfo(i,a,r.maxBufferHole);this._tryFixBufferStall(S,E)}}else this.stalled=T}}}else if(this.moved=!0,null!==n){if(this.stallReported){var L=self.performance.now()-n;D.warn("playback not stuck anymore @"+a+", after "+Math.round(L)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}}},e._tryFixBufferStall=function(t,e){var r=this.config,i=this.fragmentTracker,n=this.media;if(null!==n){var a=n.currentTime,s=i.getPartialFragment(a);if(s&&(this._trySkipBufferHole(s)||!this.media))return;(t.len>r.maxBufferHole||t.nextStart&&t.nextStart-a<r.maxBufferHole)&&e>1e3*r.highBufferWatchdogPeriod&&(D.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}},e._reportStall=function(t){var e=this.hls,r=this.media;if(!this.stallReported&&r){this.stallReported=!0;var i=new Error("Playback stalling at @"+r.currentTime+" due to low buffer ("+JSON.stringify(t)+")");D.warn(i.message),e.trigger(T.ERROR,{type:E.MEDIA_ERROR,details:S.BUFFER_STALLED_ERROR,fatal:!1,error:i,buffer:t.len})}},e._trySkipBufferHole=function(t){var e=this.config,r=this.hls,i=this.media;if(null===i)return 0;var n=i.currentTime,a=Ar.bufferInfo(i,n,0),s=n<a.start?a.start:a.nextStart;if(s){var o=a.len<=e.maxBufferHole,l=a.len>0&&a.len<1&&i.readyState<3,u=s-n;if(u>0&&(o||l)){if(u>e.maxBufferHole){var h=this.fragmentTracker,d=!1;if(0===n){var c=h.getAppendedFrag(0,he);c&&s<c.end&&(d=!0)}if(!d){var f=t||h.getAppendedFrag(n,he);if(f){for(var g=!1,v=f.end;v<s;){var m=h.getPartialFragment(v);if(!m){g=!0;break}v+=m.duration}if(g)return 0}}}var p=Math.max(s+.05,n+.1);if(D.warn("skipping hole, adjusting currentTime from "+n+" to "+p),this.moved=!0,this.stalled=null,i.currentTime=p,t&&!t.gap){var y=new Error("fragment loaded with buffer holes, seeking from "+n+" to "+p);r.trigger(T.ERROR,{type:E.MEDIA_ERROR,details:S.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:y,reason:y.message,frag:t})}return p}}return 0},e._tryNudgeBuffer=function(){var t=this.config,e=this.hls,r=this.media,i=this.nudgeRetry;if(null!==r){var n=r.currentTime;if(this.nudgeRetry++,i<t.nudgeMaxRetry){var a=n+(i+1)*t.nudgeOffset,s=new Error("Nudging 'currentTime' from "+n+" to "+a);D.warn(s.message),r.currentTime=a,e.trigger(T.ERROR,{type:E.MEDIA_ERROR,details:S.BUFFER_NUDGE_ON_STALL,error:s,fatal:!1})}else{var o=new Error("Playhead still not moving while enough data buffered @"+n+" after "+t.nudgeMaxRetry+" nudges");D.error(o.message),e.trigger(T.ERROR,{type:E.MEDIA_ERROR,details:S.BUFFER_STALLED_ERROR,error:o,fatal:!0})}}},t}(),un=function(t){function e(e,r,i){var n;return(n=t.call(this,e,r,i,"[stream-controller]",he)||this).audioCodecSwap=!1,n.gapController=null,n.level=-1,n._forceStartLoad=!1,n.altAudio=!1,n.audioOnly=!1,n.fragPlaying=null,n.onvplaying=null,n.onvseeked=null,n.fragLastKbps=0,n.couldBacktrack=!1,n.backtrackFragment=null,n.audioCodecSwitch=!1,n.videoBuffer=null,n._registerListeners(),n}l(e,t);var r=e.prototype;return r._registerListeners=function(){var t=this.hls;t.on(T.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(T.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(T.MANIFEST_LOADING,this.onManifestLoading,this),t.on(T.MANIFEST_PARSED,this.onManifestParsed,this),t.on(T.LEVEL_LOADING,this.onLevelLoading,this),t.on(T.LEVEL_LOADED,this.onLevelLoaded,this),t.on(T.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(T.ERROR,this.onError,this),t.on(T.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(T.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(T.BUFFER_CREATED,this.onBufferCreated,this),t.on(T.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(T.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(T.FRAG_BUFFERED,this.onFragBuffered,this)},r._unregisterListeners=function(){var t=this.hls;t.off(T.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(T.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(T.MANIFEST_LOADING,this.onManifestLoading,this),t.off(T.MANIFEST_PARSED,this.onManifestParsed,this),t.off(T.LEVEL_LOADED,this.onLevelLoaded,this),t.off(T.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(T.ERROR,this.onError,this),t.off(T.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(T.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(T.BUFFER_CREATED,this.onBufferCreated,this),t.off(T.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(T.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(T.FRAG_BUFFERED,this.onFragBuffered,this)},r.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},r.startLoad=function(t){if(this.levels){var e=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,!this.startFragRequested){var i=r.startLevel;-1===i&&(r.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=r.nextAutoLevel),this.level=r.nextLoadLevel=i,this.loadedmetadata=!1}e>0&&-1===t&&(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=Nr,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()}else this._forceStartLoad=!0,this.state=Mr},r.stopLoad=function(){this._forceStartLoad=!1,t.prototype.stopLoad.call(this)},r.doTick=function(){switch(this.state){case qr:var t,e=this.levels,r=this.level,i=null==e||null==(t=e[r])?void 0:t.details;if(i&&(!i.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(i))break;this.state=Nr;break}break;case Gr:var n,a=self.performance.now(),s=this.retryDate;(!s||a>=s||null!=(n=this.media)&&n.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=Nr)}this.state===Nr&&this.doTickIdle(),this.onTickEnd()},r.onTickEnd=function(){t.prototype.onTickEnd.call(this),this.checkBuffer(),this.checkFragmentChanged()},r.doTickIdle=function(){var t=this.hls,e=this.levelLastLoaded,r=this.levels,i=this.media,n=t.config,a=t.nextLoadLevel;if(null!==e&&(i||!this.startFragRequested&&n.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&null!=r&&r[a]){var s=r[a],o=this.getMainFwdBufferInfo();if(null!==o){var l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){var u={};return this.altAudio&&(u.type="video"),this.hls.trigger(T.BUFFER_EOS,u),void(this.state=Yr)}t.loadLevel!==a&&-1===t.manualLevel&&this.log("Adapting to level "+a+" from level "+this.level),this.level=t.nextLoadLevel=a;var h=s.details;if(!h||this.state===qr||h.live&&this.levelLastLoaded!==a)return this.level=a,void(this.state=qr);var d=o.len,c=this.getMaxBufferLength(s.maxBitrate);if(!(d>=c)){this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);var f=this.backtrackFragment?this.backtrackFragment.start:o.end,g=this.getNextFragment(f,h);if(this.couldBacktrack&&!this.fragPrevious&&g&&"initSegment"!==g.sn&&this.fragmentTracker.getState(g)!==cr){var v,m=(null!=(v=this.backtrackFragment)?v:g).sn-h.startSN,p=h.fragments[m-1];p&&g.cc===p.cc&&(g=p,this.fragmentTracker.removeFragment(p))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(g&&this.isLoopLoading(g,f)){if(!g.gap){var y=this.audioOnly&&!this.altAudio?F:O,E=(y===O?this.videoBuffer:this.mediaBuffer)||this.media;E&&this.afterBufferFlushed(E,y,he)}g=this.getNextFragmentLoopLoading(g,h,o,he,c)}g&&(!g.initSegment||g.initSegment.data||this.bitrateTest||(g=g.initSegment),this.loadFragment(g,s,f))}}}},r.loadFragment=function(e,r,i){var n=this.fragmentTracker.getState(e);this.fragCurrent=e,n===ur?"initSegment"===e.sn?this._loadInitSegment(e,r):this.bitrateTest?(this.log("Fragment "+e.sn+" of level "+e.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(e,r)):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,i)):this.clearTrackerIfNeeded(e)},r.getAppendedFrag=function(t){var e=this.fragmentTracker.getAppendedFrag(t,he);return e&&"fragment"in e?e.fragment:e},r.getBufferedFrag=function(t){return this.fragmentTracker.getBufferedFrag(t,he)},r.followingBufferedFrag=function(t){return t?this.getBufferedFrag(t.end+.5):null},r.immediateLevelSwitch=function(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},r.nextLevelSwitch=function(){var t=this.levels,e=this.media;if(null!=e&&e.readyState){var r,i=this.getAppendedFrag(e.currentTime);if(i&&i.start>1&&this.flushMainBuffer(0,i.start-1),!e.paused&&t){var n=t[this.hls.nextLoadLevel],a=this.fragLastKbps;r=a&&this.fragCurrent?this.fragCurrent.duration*n.maxBitrate/(1e3*a)+1:0}else r=0;var s=this.getBufferedFrag(e.currentTime+r);if(s){var o=this.followingBufferedFrag(s);if(o){this.abortCurrentFrag();var l=o.maxStartPTS?o.maxStartPTS:o.start,u=o.duration,h=Math.max(s.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,.5*u),.75*u));this.flushMainBuffer(h,Number.POSITIVE_INFINITY)}}}},r.abortCurrentFrag=function(){var t=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,t&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.state){case Ur:case Br:case Gr:case Hr:case Vr:this.state=Nr}this.nextLoadPosition=this.getLoadPosition()},r.flushMainBuffer=function(e,r){t.prototype.flushMainBuffer.call(this,e,r,this.altAudio?"video":null)},r.onMediaAttached=function(e,r){t.prototype.onMediaAttached.call(this,e,r);var i=r.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),i.addEventListener("playing",this.onvplaying),i.addEventListener("seeked",this.onvseeked),this.gapController=new ln(this.config,i,this.fragmentTracker,this.hls)},r.onMediaDetaching=function(){var e=this.media;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),t.prototype.onMediaDetaching.call(this)},r.onMediaPlaying=function(){this.tick()},r.onMediaSeeked=function(){var t=this.media,e=t?t.currentTime:null;y(e)&&this.log("Media seeked to "+e.toFixed(3));var r=this.getMainFwdBufferInfo();null!==r&&0!==r.len?this.tick():this.warn('Main forward buffer length on "seeked" event '+(r?r.len:"empty")+")")},r.onManifestLoading=function(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(T.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.fragPlaying=null,this.backtrackFragment=null},r.onManifestParsed=function(t,e){var r,i,n,a=!1,s=!1;e.levels.forEach((function(t){(r=t.audioCodec)&&(-1!==r.indexOf("mp4a.40.2")&&(a=!0),-1!==r.indexOf("mp4a.40.5")&&(s=!0))})),this.audioCodecSwitch=a&&s&&!("function"==typeof(null==(n=Qr())||null==(i=n.prototype)?void 0:i.changeType)),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1},r.onLevelLoading=function(t,e){var r=this.levels;if(r&&this.state===Nr){var i=r[e.level];(!i.details||i.details.live&&this.levelLastLoaded!==e.level||this.waitForCdnTuneIn(i.details))&&(this.state=qr)}},r.onLevelLoaded=function(t,e){var r,i=this.levels,n=e.level,a=e.details,s=a.totalduration;if(i){this.log("Level "+n+" loaded ["+a.startSN+","+a.endSN+"], cc ["+a.startCC+", "+a.endCC+"] duration:"+s);var o=i[n],l=this.fragCurrent;!l||this.state!==Br&&this.state!==Gr||l.level===e.level&&l.urlId===o.urlId||!l.loader||this.abortCurrentFrag();var u=0;if(a.live||null!=(r=o.details)&&r.live){if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed)return;u=this.alignPlaylists(a,o.details)}if(o.details=a,this.levelLastLoaded=n,this.hls.trigger(T.LEVEL_UPDATED,{details:a,level:n}),this.state===qr){if(this.waitForCdnTuneIn(a))return;this.state=Nr}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,u),this.tick()}else this.warn("Levels were reset while loading level "+n)},r._handleFragmentLoadProgress=function(t){var e,r=t.frag,i=t.part,n=t.payload,a=this.levels;if(a){var s=a[r.level],o=s.details;if(!o)return this.warn("Dropping fragment "+r.sn+" of level "+r.level+" after level details were reset"),void this.fragmentTracker.removeFragment(r);var l=s.videoCodec,u=o.PTSKnown||!o.live,h=null==(e=r.initSegment)?void 0:e.data,d=this._getAudioCodec(s),c=this.transmuxer=this.transmuxer||new on(this.hls,he,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=i?i.index:-1,g=-1!==f,v=new kr(r.level,r.sn,r.stats.chunkCount,n.byteLength,f,g),m=this.initPTS[r.cc];c.push(n,h,d,l,r,i,o.totalduration,u,v,m)}else this.warn("Levels were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},r.onAudioTrackSwitching=function(t,e){var r=this.altAudio;if(!e.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i&&(this.log("Switching to main audio track, cancel main fragment load"),i.abortRequests(),this.fragmentTracker.removeFragment(i)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();var n=this.hls;r&&(n.trigger(T.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),n.trigger(T.AUDIO_TRACK_SWITCHED,e)}},r.onAudioTrackSwitched=function(t,e){var r=e.id,i=!!this.hls.audioTracks[r].url;if(i){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=i,this.tick()},r.onBufferCreated=function(t,e){var r,i,n=e.tracks,a=!1;for(var s in n){var o=n[s];if("main"===o.id){if(i=s,r=o,"video"===s){var l=n[s];l&&(this.videoBuffer=l.buffer)}}else a=!0}a&&r?(this.log("Alternate track found, use "+i+".buffered to schedule main fragment loading"),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media},r.onFragBuffered=function(t,e){var r=e.frag,i=e.part;if(!r||r.type===he){if(this.fragContextChanged(r))return this.warn("Fragment "+r.sn+(i?" p: "+i.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state),void(this.state===Vr&&(this.state=Nr));var n=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*n.total/(n.buffering.end-n.loading.first)),"initSegment"!==r.sn&&(this.fragPrevious=r),this.fragBufferedComplete(r,i)}},r.onError=function(t,e){var r;if(e.fatal)this.state=Wr;else switch(e.details){case S.FRAG_GAP:case S.FRAG_PARSING_ERROR:case S.FRAG_DECRYPT_ERROR:case S.FRAG_LOAD_ERROR:case S.FRAG_LOAD_TIMEOUT:case S.KEY_LOAD_ERROR:case S.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(he,e);break;case S.LEVEL_LOAD_ERROR:case S.LEVEL_LOAD_TIMEOUT:case S.LEVEL_PARSING_ERROR:e.levelRetry||this.state!==qr||(null==(r=e.context)?void 0:r.type)!==oe||(this.state=Nr);break;case S.BUFFER_FULL_ERROR:if(!e.parent||"main"!==e.parent)return;this.reduceLengthAndFlushBuffer(e)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case S.INTERNAL_EXCEPTION:this.recoverWorkerError(e)}},r.checkBuffer=function(){var t=this.media,e=this.gapController;if(t&&e&&t.readyState){if(this.loadedmetadata||!Ar.getBuffered(t).length){var r=this.state!==Nr?this.fragCurrent:null;e.poll(this.lastCurrentTime,r)}this.lastCurrentTime=t.currentTime}},r.onFragLoadEmergencyAborted=function(){this.state=Nr,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()},r.onBufferFlushed=function(t,e){var r=e.type;if(r!==F||this.audioOnly&&!this.altAudio){var i=(r===O?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(i,r,he)}},r.onLevelsUpdated=function(t,e){this.levels=e.levels},r.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r.seekToStartPos=function(){var t=this.media;if(t){var e=t.currentTime,r=this.startPosition;if(r>=0&&e<r){if(t.seeking)return void this.log("could not seek to "+r+", already seeking at "+e);var i=Ar.getBuffered(t),n=(i.length?i.start(0):0)-r;n>0&&(n<this.config.maxBufferHole||n<this.config.maxFragLookUpTolerance)&&(this.log("adjusting start position by "+n+" to match buffer start"),r+=n,this.startPosition=r),this.log("seek to target start position "+r+" from current time "+e),t.currentTime=r}}},r._getAudioCodec=function(t){var e=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&e&&(this.log("Swapping audio codec"),e=-1!==e.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),e},r._loadBitrateTestFrag=function(t,e){var r=this;t.bitrateTest=!0,this._doFragLoad(t,e).then((function(i){var n=r.hls;if(i&&!r.fragContextChanged(t)){e.fragmentError=0,r.state=Nr,r.startFragRequested=!1,r.bitrateTest=!1;var a=t.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),n.trigger(T.FRAG_LOADED,i),t.bitrateTest=!1}}))},r._handleTransmuxComplete=function(t){var e,r="main",i=this.hls,n=t.remuxResult,a=t.chunkMeta,s=this.getCurrentContext(a);if(s){var o=s.frag,l=s.part,u=s.level,h=n.video,d=n.text,c=n.id3,f=n.initSegment,g=u.details,v=this.altAudio?void 0:n.audio;if(this.fragContextChanged(o))this.fragmentTracker.removeFragment(o);else{if(this.state=Hr,f){f.tracks&&(this._bufferInitSegment(u,f.tracks,o,a),i.trigger(T.FRAG_PARSING_INIT_SEGMENT,{frag:o,id:r,tracks:f.tracks}));var m=f.initPTS,p=f.timescale;y(m)&&(this.initPTS[o.cc]={baseTime:m,timescale:p},i.trigger(T.INIT_PTS_FOUND,{frag:o,id:r,initPTS:m,timescale:p}))}if(h&&!1!==n.independent){if(g){var E=h.startPTS,S=h.endPTS,L=h.startDTS,R=h.endDTS;if(l)l.elementaryStreams[h.type]={startPTS:E,endPTS:S,startDTS:L,endDTS:R};else if(h.firstKeyFrame&&h.independent&&1===a.id&&(this.couldBacktrack=!0),h.dropped&&h.independent){var A=this.getMainFwdBufferInfo();if((A?A.end:this.getLoadPosition())+this.config.maxBufferHole<(h.firstKeyFramePTS?h.firstKeyFramePTS:E)-this.config.maxBufferHole)return void this.backtrack(o);o.setElementaryStreamInfo(h.type,o.start,S,o.start,R,!0)}o.setElementaryStreamInfo(h.type,E,S,L,R),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(h,o,l,a)}}else if(!1===n.independent)return void this.backtrack(o);if(v){var k=v.startPTS,b=v.endPTS,D=v.startDTS,I=v.endDTS;l&&(l.elementaryStreams[F]={startPTS:k,endPTS:b,startDTS:D,endDTS:I}),o.setElementaryStreamInfo(F,k,b,D,I),this.bufferFragmentData(v,o,l,a)}if(g&&null!=c&&null!=(e=c.samples)&&e.length){var w={id:r,frag:o,details:g,samples:c.samples};i.trigger(T.FRAG_PARSING_METADATA,w)}if(g&&d){var C={id:r,frag:o,details:g,samples:d.samples};i.trigger(T.FRAG_PARSING_USERDATA,C)}}}else this.resetWhenMissingContext(a)},r._bufferInitSegment=function(t,e,r,i){var n=this;if(this.state===Hr){this.audioOnly=!!e.audio&&!e.video,this.altAudio&&!this.audioOnly&&delete e.audio;var a=e.audio,s=e.video,o=e.audiovideo;if(a){var l=t.audioCodec,u=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(l&&(l=-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==a.metadata.channelCount&&-1===u.indexOf("firefox")&&(l="mp4a.40.5")),-1!==u.indexOf("android")&&"audio/mpeg"!==a.container&&(l="mp4a.40.2",this.log("Android: force audio codec to "+l)),t.audioCodec&&t.audioCodec!==l&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+l+'"'),a.levelCodec=l,a.id="main",this.log("Init audio buffer, container:"+a.container+", codecs[selected/level/parsed]=["+(l||"")+"/"+(t.audioCodec||"")+"/"+a.codec+"]")}s&&(s.levelCodec=t.videoCodec,s.id="main",this.log("Init video buffer, container:"+s.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+s.codec+"]")),o&&this.log("Init audiovideo buffer, container:"+o.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+o.codec+"]"),this.hls.trigger(T.BUFFER_CODECS,e),Object.keys(e).forEach((function(t){var a=e[t].initSegment;null!=a&&a.byteLength&&n.hls.trigger(T.BUFFER_APPENDING,{type:t,data:a,frag:r,part:null,chunkMeta:i,parent:r.type})})),this.tick()}},r.getMainFwdBufferInfo=function(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,he)},r.backtrack=function(t){this.couldBacktrack=!0,this.backtrackFragment=t,this.resetTransmuxer(),this.flushBufferGap(t),this.fragmentTracker.removeFragment(t),this.fragPrevious=null,this.nextLoadPosition=t.start,this.state=Nr},r.checkFragmentChanged=function(){var t=this.media,e=null;if(t&&t.readyState>1&&!1===t.seeking){var r=t.currentTime;if(Ar.isBuffered(t,r)?e=this.getAppendedFrag(r):Ar.isBuffered(t,r+.1)&&(e=this.getAppendedFrag(r+.1)),e){this.backtrackFragment=null;var i=this.fragPlaying,n=e.level;i&&e.sn===i.sn&&i.level===n&&e.urlId===i.urlId||(this.fragPlaying=e,this.hls.trigger(T.FRAG_CHANGED,{frag:e}),i&&i.level===n||this.hls.trigger(T.LEVEL_SWITCHED,{level:n}))}}},a(e,[{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentFrag",get:function(){var t=this.media;return t?this.fragPlaying||this.getAppendedFrag(t.currentTime):null}},{key:"currentProgramDateTime",get:function(){var t=this.media;if(t){var e=t.currentTime,r=this.currentFrag;if(r&&y(e)&&y(r.programDateTime)){var i=r.programDateTime+1e3*(e-r.start);return new Date(i)}}return null}},{key:"currentLevel",get:function(){var t=this.currentFrag;return t?t.level:-1}},{key:"nextBufferedFrag",get:function(){var t=this.currentFrag;return t?this.followingBufferedFrag(t):null}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),e}(Xr),hn=function(){function t(t,e,r){void 0===e&&(e=0),void 0===r&&(r=0),this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=e,this.totalWeight_=r}var e=t.prototype;return e.sample=function(t,e){var r=Math.pow(this.alpha_,t);this.estimate_=e*(1-r)+r*this.estimate_,this.totalWeight_+=t},e.getTotalWeight=function(){return this.totalWeight_},e.getEstimate=function(){if(this.alpha_){var t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_},t}(),dn=function(){function t(t,e,r,i){void 0===i&&(i=100),this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new hn(t),this.fast_=new hn(e),this.defaultTTFB_=i,this.ttfb_=new hn(t)}var e=t.prototype;return e.update=function(t,e){var r=this.slow_,i=this.fast_,n=this.ttfb_;r.halfLife!==t&&(this.slow_=new hn(t,r.getEstimate(),r.getTotalWeight())),i.halfLife!==e&&(this.fast_=new hn(e,i.getEstimate(),i.getTotalWeight())),n.halfLife!==t&&(this.ttfb_=new hn(t,n.getEstimate(),n.getTotalWeight()))},e.sample=function(t,e){var r=(t=Math.max(t,this.minDelayMs_))/1e3,i=8*e/r;this.fast_.sample(r,i),this.slow_.sample(r,i)},e.sampleTTFB=function(t){var e=t/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(e,2)/2);this.ttfb_.sample(r,Math.max(t,5))},e.canEstimate=function(){return this.fast_.getTotalWeight()>=this.minWeight_},e.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.getEstimateTTFB=function(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_},e.destroy=function(){},t}(),cn=function(){function t(t){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=t;var e=t.config;this.bwEstimator=new dn(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate),this.registerListeners()}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(T.FRAG_LOADING,this.onFragLoading,this),t.on(T.FRAG_LOADED,this.onFragLoaded,this),t.on(T.FRAG_BUFFERED,this.onFragBuffered,this),t.on(T.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(T.LEVEL_LOADED,this.onLevelLoaded,this)},e.unregisterListeners=function(){var t=this.hls;t.off(T.FRAG_LOADING,this.onFragLoading,this),t.off(T.FRAG_LOADED,this.onFragLoaded,this),t.off(T.FRAG_BUFFERED,this.onFragBuffered,this),t.off(T.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(T.LEVEL_LOADED,this.onLevelLoaded,this)},e.destroy=function(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null},e.onFragLoading=function(t,e){var r,i=e.frag;this.ignoreFragment(i)||(this.fragCurrent=i,this.partCurrent=null!=(r=e.part)?r:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))},e.onLevelSwitching=function(t,e){this.clearTimer()},e.getTimeToLoadFrag=function(t,e,r,i){return t+r/e+(i?this.lastLevelLoadSec:0)},e.onLevelLoaded=function(t,e){var r=this.hls.config,i=e.stats,n=i.total,a=i.bwEstimate;y(n)&&y(a)&&(this.lastLevelLoadSec=8*n/a),e.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)},e._abandonRulesCheck=function(){var t=this.fragCurrent,e=this.partCurrent,r=this.hls,i=r.autoLevelEnabled,n=r.media;if(t&&n){var a=performance.now(),s=e?e.stats:t.stats,o=e?e.duration:t.duration,l=a-s.loading.start;if(s.aborted||s.loaded&&s.loaded===s.total||0===t.level)return this.clearTimer(),void(this._nextAutoLevel=-1);if(i&&!n.paused&&n.playbackRate&&n.readyState){var u=r.mainForwardBufferInfo;if(null!==u){var h=this.bwEstimator.getEstimateTTFB(),d=Math.abs(n.playbackRate);if(!(l<=Math.max(h,o/(2*d)*1e3))){var c=u.len/d;if(!(c>=2*o/d)){var f=s.loading.first?s.loading.first-s.loading.start:-1,g=s.loaded&&f>-1,v=this.bwEstimator.getEstimate(),m=r.levels,p=r.minAutoLevel,E=m[t.level],S=s.total||Math.max(s.loaded,Math.round(o*E.maxBitrate/8)),L=l-f;L<1&&g&&(L=Math.min(l,8*s.loaded/v));var R=g?1e3*s.loaded/L:0,A=R?(S-s.loaded)/R:8*S/v+h/1e3;if(!(A<=c)){var k,b=R?8*R:v,I=Number.POSITIVE_INFINITY;for(k=t.level-1;k>p;k--){var w=m[k].maxBitrate;if((I=this.getTimeToLoadFrag(h/1e3,b,o*w,!m[k].details))<c)break}I>=A||I>10*o||(r.nextLoadLevel=k,g?this.bwEstimator.sample(l-Math.min(h,f),s.loaded):this.bwEstimator.sampleTTFB(l),this.clearTimer(),D.warn("[abr] Fragment "+t.sn+(e?" part "+e.index:"")+" of level "+t.level+" is loading too slowly;\n      Time to underbuffer: "+c.toFixed(3)+" s\n      Estimated load time for current fragment: "+A.toFixed(3)+" s\n      Estimated load time for down switch fragment: "+I.toFixed(3)+" s\n      TTFB estimate: "+f+"\n      Current BW estimate: "+(y(v)?(v/1024).toFixed(3):"Unknown")+" Kb/s\n      New BW estimate: "+(this.bwEstimator.getEstimate()/1024).toFixed(3)+" Kb/s\n      Aborting and switching to level "+k),t.loader&&(this.fragCurrent=this.partCurrent=null,t.abortRequests()),r.trigger(T.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:e,stats:s}))}}}}}}},e.onFragLoaded=function(t,e){var r=e.frag,i=e.part,n=i?i.stats:r.stats;if(r.type===he&&this.bwEstimator.sampleTTFB(n.loading.first-n.loading.start),!this.ignoreFragment(r)){if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var a=i?i.duration:r.duration,s=this.hls.levels[r.level],o=(s.loaded?s.loaded.bytes:0)+n.loaded,l=(s.loaded?s.loaded.duration:0)+a;s.loaded={bytes:o,duration:l},s.realBitrate=Math.round(8*o/l)}if(r.bitrateTest){var u={stats:n,frag:r,part:i,id:r.type};this.onFragBuffered(T.FRAG_BUFFERED,u),r.bitrateTest=!1}}},e.onFragBuffered=function(t,e){var r=e.frag,i=e.part,n=null!=i&&i.stats.loaded?i.stats:r.stats;if(!n.aborted&&!this.ignoreFragment(r)){var a=n.parsing.end-n.loading.start-Math.min(n.loading.first-n.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,n.loaded),n.bwEstimate=this.bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},e.ignoreFragment=function(t){return t.type!==he||"initSegment"===t.sn},e.clearTimer=function(){self.clearInterval(this.timer)},e.getNextABRAutoLevel=function(){var t=this.fragCurrent,e=this.partCurrent,r=this.hls,i=r.maxAutoLevel,n=r.config,a=r.minAutoLevel,s=r.media,o=e?e.duration:t?t.duration:0,l=s&&0!==s.playbackRate?Math.abs(s.playbackRate):1,u=this.bwEstimator?this.bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,h=r.mainForwardBufferInfo,d=(h?h.len:0)/l,c=this.findBestLevel(u,a,i,d,n.abrBandWidthFactor,n.abrBandWidthUpFactor);if(c>=0)return c;D.trace("[abr] "+(d?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var f=o?Math.min(o,n.maxStarvationDelay):n.maxStarvationDelay,g=n.abrBandWidthFactor,v=n.abrBandWidthUpFactor;if(!d){var m=this.bitrateTestDelay;m&&(f=(o?Math.min(o,n.maxLoadingDelay):n.maxLoadingDelay)-m,D.trace("[abr] bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),g=v=1)}return c=this.findBestLevel(u,a,i,d+f,g,v),Math.max(c,0)},e.findBestLevel=function(t,e,r,i,n,a){for(var s,o=this.fragCurrent,l=this.partCurrent,u=this.lastLoadedFragLevel,h=this.hls.levels,d=h[u],c=!(null==d||null==(s=d.details)||!s.live),f=null==d?void 0:d.codecSet,g=l?l.duration:o?o.duration:0,v=this.bwEstimator.getEstimateTTFB()/1e3,m=e,p=-1,T=r;T>=e;T--){var E=h[T];if(!E||f&&E.codecSet!==f)E&&(m=Math.min(T,m),p=Math.max(T,p));else{-1!==p&&D.trace("[abr] Skipped level(s) "+m+"-"+p+' with CODECS:"'+h[p].attrs.CODECS+'"; not compatible with "'+d.attrs.CODECS+'"');var S=E.details,L=(l?null==S?void 0:S.partTarget:null==S?void 0:S.averagetargetduration)||g,R=void 0;R=T<=u?n*t:a*t;var A=h[T].maxBitrate,k=this.getTimeToLoadFrag(v,R,A*L,void 0===S);if(D.trace("[abr] level:"+T+" adjustedbw-bitrate:"+Math.round(R-A)+" avgDuration:"+L.toFixed(1)+" maxFetchDuration:"+i.toFixed(1)+" fetchDuration:"+k.toFixed(1)),R>A&&(0===k||!y(k)||c&&!this.bitrateTestDelay||k<i))return T}}return-1},a(t,[{key:"nextAutoLevel",get:function(){var t=this._nextAutoLevel,e=this.bwEstimator;if(-1!==t&&!e.canEstimate())return t;var r=this.getNextABRAutoLevel();if(-1!==t){var i=this.hls.levels;if(i.length>Math.max(t,r)&&i[t].loadError<=i[r].loadError)return t}return-1!==t&&(r=Math.min(t,r)),r},set:function(t){this._nextAutoLevel=t}}]),t}(),fn=function(){function t(){this.chunks=[],this.dataLength=0}var e=t.prototype;return e.push=function(t){this.chunks.push(t),this.dataLength+=t.length},e.flush=function(){var t,e=this.chunks,r=this.dataLength;return e.length?(t=1===e.length?e[0]:function(t,e){for(var r=new Uint8Array(e),i=0,n=0;n<t.length;n++){var a=t[n];r.set(a,i),i+=a.length}return r}(e,r),this.reset(),t):new Uint8Array(0)},e.reset=function(){this.chunks.length=0,this.dataLength=0},t}(),gn=function(t){function e(e,r,i){var n;return(n=t.call(this,e,r,i,"[audio-stream-controller]",de)||this).videoBuffer=null,n.videoTrackCC=-1,n.waitingVideoCC=-1,n.bufferedTrack=null,n.switchingTrack=null,n.trackId=-1,n.waitingData=null,n.mainDetails=null,n.bufferFlushed=!1,n.cachedTrackLoadedData=null,n._registerListeners(),n}l(e,t);var r=e.prototype;return r.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null},r._registerListeners=function(){var t=this.hls;t.on(T.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(T.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(T.MANIFEST_LOADING,this.onManifestLoading,this),t.on(T.LEVEL_LOADED,this.onLevelLoaded,this),t.on(T.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(T.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(T.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(T.ERROR,this.onError,this),t.on(T.BUFFER_RESET,this.onBufferReset,this),t.on(T.BUFFER_CREATED,this.onBufferCreated,this),t.on(T.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(T.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(T.FRAG_BUFFERED,this.onFragBuffered,this)},r._unregisterListeners=function(){var t=this.hls;t.off(T.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(T.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(T.MANIFEST_LOADING,this.onManifestLoading,this),t.off(T.LEVEL_LOADED,this.onLevelLoaded,this),t.off(T.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(T.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(T.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(T.ERROR,this.onError,this),t.off(T.BUFFER_RESET,this.onBufferReset,this),t.off(T.BUFFER_CREATED,this.onBufferCreated,this),t.off(T.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(T.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(T.FRAG_BUFFERED,this.onFragBuffered,this)},r.onInitPtsFound=function(t,e){var r=e.frag,i=e.id,n=e.initPTS,a=e.timescale;if("main"===i){var s=r.cc;this.initPTS[r.cc]={baseTime:n,timescale:a},this.log("InitPTS for cc: "+s+" found from main: "+n),this.videoTrackCC=s,this.state===jr&&this.tick()}},r.startLoad=function(t){if(!this.levels)return this.startPosition=t,void(this.state=Mr);var e=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),e>0&&-1===t?(this.log("Override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e,this.state=Nr):(this.loadedmetadata=!1,this.state=Kr),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},r.doTick=function(){switch(this.state){case Nr:this.doTickIdle();break;case Kr:var e,r=this.levels,i=this.trackId,n=null==r||null==(e=r[i])?void 0:e.details;if(n){if(this.waitForCdnTuneIn(n))break;this.state=jr}break;case Gr:var a,s=performance.now(),o=this.retryDate;(!o||s>=o||null!=(a=this.media)&&a.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=Nr);break;case jr:var l=this.waitingData;if(l){var u=l.frag,h=l.part,d=l.cache,c=l.complete;if(void 0!==this.initPTS[u.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=Br;var f={frag:u,part:h,payload:d.flush(),networkDetails:null};this._handleFragmentLoadProgress(f),c&&t.prototype._handleFragmentLoadComplete.call(this,f)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log("Waiting fragment cc ("+u.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var g=this.getLoadPosition(),v=Ar.bufferInfo(this.mediaBuffer,g,this.config.maxBufferHole);Xe(v.end,this.config.maxFragLookUpTolerance,u)<0&&(this.log("Waiting fragment cc ("+u.cc+") @ "+u.start+" cancelled because another fragment at "+v.end+" is needed"),this.clearWaitingFragment())}}else this.state=Nr}this.onTickEnd()},r.clearWaitingFragment=function(){var t=this.waitingData;t&&(this.fragmentTracker.removeFragment(t.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=Nr)},r.resetLoadingState=function(){this.clearWaitingFragment(),t.prototype.resetLoadingState.call(this)},r.onTickEnd=function(){var t=this.media;null!=t&&t.readyState&&(this.lastCurrentTime=t.currentTime)},r.doTickIdle=function(){var t=this.hls,e=this.levels,r=this.media,i=this.trackId,n=t.config;if(null!=e&&e[i]&&(r||!this.startFragRequested&&n.startFragPrefetch)){var a=e[i],s=a.details;if(!s||s.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(s))this.state=Kr;else{var o=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&o&&(this.bufferFlushed=!1,this.afterBufferFlushed(o,F,de));var l=this.getFwdBufferInfo(o,de);if(null!==l){var u=this.bufferedTrack,h=this.switchingTrack;if(!h&&this._streamEnded(l,s))return t.trigger(T.BUFFER_EOS,{type:"audio"}),void(this.state=Yr);var d=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,he),c=l.len,f=this.getMaxBufferLength(null==d?void 0:d.len);if(!(c>=f)||h){var g=s.fragments[0].start,v=l.end;if(h&&r){var m=this.getLoadPosition();u&&h.attrs!==u.attrs&&(v=m),s.PTSKnown&&m<g&&(l.end>g||l.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=g+.05)}var p=this.getNextFragment(v,s),y=!1;if(p&&this.isLoopLoading(p,v)&&(y=!!p.gap,p=this.getNextFragmentLoopLoading(p,s,l,he,f)),p){var E=d&&p.start>d.end+s.targetduration;if(E||(null==d||!d.len)&&l.len){var S=this.fragmentTracker.getBufferedFrag(p.start,he);if(null===S)return;if(y||(y=!!S.gap||!!E&&0===d.len),E&&!y||y&&l.nextStart&&l.nextStart<S.end)return}this.loadFragment(p,a,v)}else this.bufferFlushed=!0}}}}},r.getMaxBufferLength=function(e){var r=t.prototype.getMaxBufferLength.call(this);return e?Math.min(Math.max(r,e),this.config.maxMaxBufferLength):r},r.onMediaDetaching=function(){this.videoBuffer=null,t.prototype.onMediaDetaching.call(this)},r.onAudioTracksUpdated=function(t,e){var r=e.audioTracks;this.resetTransmuxer(),this.levels=r.map((function(t){return new xe(t)}))},r.onAudioTrackSwitching=function(t,e){var r=!!e.url;this.trackId=e.id;var i=this.fragCurrent;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),r?this.setInterval(100):this.resetTransmuxer(),r?(this.switchingTrack=e,this.state=Nr):(this.switchingTrack=null,this.bufferedTrack=e,this.state=Mr),this.tick()},r.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.bufferedTrack=null,this.switchingTrack=null},r.onLevelLoaded=function(t,e){this.mainDetails=e.details,null!==this.cachedTrackLoadedData&&(this.hls.trigger(T.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)},r.onAudioTrackLoaded=function(t,e){var r;if(null!=this.mainDetails){var i=this.levels,n=e.details,a=e.id;if(i){this.log("Track "+a+" loaded ["+n.startSN+","+n.endSN+"],duration:"+n.totalduration);var s=i[a],o=0;if(n.live||null!=(r=s.details)&&r.live){var l=this.mainDetails;if(n.fragments[0]||(n.deltaUpdateFailed=!0),n.deltaUpdateFailed||!l)return;!s.details&&n.hasProgramDateTime&&l.hasProgramDateTime?(Cr(n,l),o=n.fragments[0].start):o=this.alignPlaylists(n,s.details)}s.details=n,this.levelLastLoaded=a,this.startFragRequested||!this.mainDetails&&n.live||this.setStartPosition(s.details,o),this.state!==Kr||this.waitForCdnTuneIn(n)||(this.state=Nr),this.tick()}else this.warn("Audio tracks were reset while loading level "+a)}else this.cachedTrackLoadedData=e},r._handleFragmentLoadProgress=function(t){var e,r=t.frag,i=t.part,n=t.payload,a=this.config,s=this.trackId,o=this.levels;if(o){var l=o[s];if(l){var u=l.details;if(!u)return this.warn("Audio track details undefined on fragment load progress"),void this.removeUnbufferedFrags(r.start);var h=a.defaultAudioCodec||l.audioCodec||"mp4a.40.2",d=this.transmuxer;d||(d=this.transmuxer=new on(this.hls,de,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var c=this.initPTS[r.cc],f=null==(e=r.initSegment)?void 0:e.data;if(void 0!==c){var g=i?i.index:-1,v=-1!==g,m=new kr(r.level,r.sn,r.stats.chunkCount,n.byteLength,g,v);d.push(n,f,h,"",r,i,u.totalduration,!1,m,c)}else this.log("Unknown video PTS for cc "+r.cc+", waiting for video PTS before demuxing audio frag "+r.sn+" of ["+u.startSN+" ,"+u.endSN+"],track "+s),(this.waitingData=this.waitingData||{frag:r,part:i,cache:new fn,complete:!1}).cache.push(new Uint8Array(n)),this.waitingVideoCC=this.videoTrackCC,this.state=jr}else this.warn("Audio track is undefined on fragment load progress")}else this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered")},r._handleFragmentLoadComplete=function(e){this.waitingData?this.waitingData.complete=!0:t.prototype._handleFragmentLoadComplete.call(this,e)},r.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.onBufferCreated=function(t,e){var r=e.tracks.audio;r&&(this.mediaBuffer=r.buffer||null),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer||null)},r.onFragBuffered=function(t,e){var r,n=e.frag,a=e.part;if(n.type===de)if(this.fragContextChanged(n))this.warn("Fragment "+n.sn+(a?" p: "+a.index:"")+" of level "+n.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+(this.switchingTrack?this.switchingTrack.name:"false"));else{if("initSegment"!==n.sn){this.fragPrevious=n;var s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(T.AUDIO_TRACK_SWITCHED,i({},s)))}this.fragBufferedComplete(n,a)}else this.loadedmetadata||n.type!==he||null!=(r=this.videoBuffer||this.media)&&r.buffered.length&&(this.loadedmetadata=!0)},r.onError=function(e,r){var i;if(r.fatal)this.state=Wr;else switch(r.details){case S.FRAG_GAP:case S.FRAG_PARSING_ERROR:case S.FRAG_DECRYPT_ERROR:case S.FRAG_LOAD_ERROR:case S.FRAG_LOAD_TIMEOUT:case S.KEY_LOAD_ERROR:case S.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(de,r);break;case S.AUDIO_TRACK_LOAD_ERROR:case S.AUDIO_TRACK_LOAD_TIMEOUT:case S.LEVEL_PARSING_ERROR:r.levelRetry||this.state!==Kr||(null==(i=r.context)?void 0:i.type)!==le||(this.state=Nr);break;case S.BUFFER_FULL_ERROR:if(!r.parent||"audio"!==r.parent)return;this.reduceLengthAndFlushBuffer(r)&&(this.bufferedTrack=null,t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio"));break;case S.INTERNAL_EXCEPTION:this.recoverWorkerError(r)}},r.onBufferFlushed=function(t,e){e.type===F&&(this.bufferFlushed=!0,this.state===Yr&&(this.state=Nr))},r._handleTransmuxComplete=function(t){var e,r="audio",i=this.hls,n=t.remuxResult,a=t.chunkMeta,s=this.getCurrentContext(a);if(s){var l=s.frag,u=s.part,h=s.level.details,d=n.audio,c=n.text,f=n.id3,g=n.initSegment;if(!this.fragContextChanged(l)&&h){if(this.state=Hr,this.switchingTrack&&d&&this.completeAudioSwitch(this.switchingTrack),null!=g&&g.tracks&&(this._bufferInitSegment(g.tracks,l,a),i.trigger(T.FRAG_PARSING_INIT_SEGMENT,{frag:l,id:r,tracks:g.tracks})),d){var v=d.startPTS,m=d.endPTS,p=d.startDTS,y=d.endDTS;u&&(u.elementaryStreams[F]={startPTS:v,endPTS:m,startDTS:p,endDTS:y}),l.setElementaryStreamInfo(F,v,m,p,y),this.bufferFragmentData(d,l,u,a)}if(null!=f&&null!=(e=f.samples)&&e.length){var E=o({id:r,frag:l,details:h},f);i.trigger(T.FRAG_PARSING_METADATA,E)}if(c){var S=o({id:r,frag:l,details:h},c);i.trigger(T.FRAG_PARSING_USERDATA,S)}}else this.fragmentTracker.removeFragment(l)}else this.resetWhenMissingContext(a)},r._bufferInitSegment=function(t,e,r){if(this.state===Hr){t.video&&delete t.video;var i=t.audio;if(i){i.levelCodec=i.codec,i.id="audio",this.log("Init audio buffer, container:"+i.container+", codecs[parsed]=["+i.codec+"]"),this.hls.trigger(T.BUFFER_CODECS,t);var n=i.initSegment;if(null!=n&&n.byteLength){var a={type:"audio",frag:e,part:null,chunkMeta:r,parent:e.type,data:n};this.hls.trigger(T.BUFFER_APPENDING,a)}this.tick()}}},r.loadFragment=function(e,r,i){var n,a=this.fragmentTracker.getState(e);this.fragCurrent=e,this.switchingTrack||a===ur||a===dr?"initSegment"===e.sn?this._loadInitSegment(e,r):null!=(n=r.details)&&n.live&&!this.initPTS[e.cc]?(this.log("Waiting for video PTS in continuity counter "+e.cc+" of live stream before loading audio fragment "+e.sn+" of level "+this.trackId),this.state=jr):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,i)):this.clearTrackerIfNeeded(e)},r.completeAudioSwitch=function(e){var r=this.hls,n=this.media,a=this.bufferedTrack,s=null==a?void 0:a.attrs,o=e.attrs;n&&s&&(s.CHANNELS!==o.CHANNELS||s.NAME!==o.NAME||s.LANGUAGE!==o.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),t.prototype.flushMainBuffer.call(this,0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=e,this.switchingTrack=null,r.trigger(T.AUDIO_TRACK_SWITCHED,i({},e))},e}(Xr),vn=function(t){function e(e){var r;return(r=t.call(this,e,"[audio-track-controller]")||this).tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.currentTrack=null,r.selectDefaultTrack=!0,r.registerListeners(),r}l(e,t);var r=e.prototype;return r.registerListeners=function(){var t=this.hls;t.on(T.MANIFEST_LOADING,this.onManifestLoading,this),t.on(T.MANIFEST_PARSED,this.onManifestParsed,this),t.on(T.LEVEL_LOADING,this.onLevelLoading,this),t.on(T.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(T.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(T.ERROR,this.onError,this)},r.unregisterListeners=function(){var t=this.hls;t.off(T.MANIFEST_LOADING,this.onManifestLoading,this),t.off(T.MANIFEST_PARSED,this.onManifestParsed,this),t.off(T.LEVEL_LOADING,this.onLevelLoading,this),t.off(T.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(T.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(T.ERROR,this.onError,this)},r.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,t.prototype.destroy.call(this)},r.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0},r.onManifestParsed=function(t,e){this.tracks=e.audioTracks||[]},r.onAudioTrackLoaded=function(t,e){var r=e.id,i=e.groupId,n=e.details,a=this.tracksInGroup[r];if(a&&a.groupId===i){var s=a.details;a.details=e.details,this.log("audio-track "+r+' "'+a.name+'" lang:'+a.lang+" group:"+i+" loaded ["+n.startSN+"-"+n.endSN+"]"),r===this.trackId&&this.playlistLoaded(r,e,s)}else this.warn("Track with id:"+r+" and group:"+i+" not found in active group "+a.groupId)},r.onLevelLoading=function(t,e){this.switchLevel(e.level)},r.onLevelSwitching=function(t,e){this.switchLevel(e.level)},r.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.audioGroupIds){var r=e.audioGroupIds[e.urlId];if(this.groupId!==r){this.groupId=r||null;var i=this.tracks.filter((function(t){return!r||t.groupId===r}));this.selectDefaultTrack&&!i.some((function(t){return t.default}))&&(this.selectDefaultTrack=!1),this.tracksInGroup=i;var n={audioTracks:i};this.log("Updating audio tracks, "+i.length+" track(s) found in group:"+r),this.hls.trigger(T.AUDIO_TRACKS_UPDATED,n),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}},r.onError=function(t,e){!e.fatal&&e.context&&e.context.type===le&&e.context.id===this.trackId&&e.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(e))},r.setAudioTrack=function(t){var e=this.tracksInGroup;if(t<0||t>=e.length)this.warn("Invalid id passed to audio-track controller");else{this.clearTimer();var r=this.currentTrack;e[this.trackId];var n=e[t],a=n.groupId,s=n.name;if(this.log("Switching to audio-track "+t+' "'+s+'" lang:'+n.lang+" group:"+a),this.trackId=t,this.currentTrack=n,this.selectDefaultTrack=!1,this.hls.trigger(T.AUDIO_TRACK_SWITCHING,i({},n)),!n.details||n.details.live){var o=this.switchParams(n.url,null==r?void 0:r.details);this.loadPlaylist(o)}}},r.selectInitialTrack=function(){var t=this.tracksInGroup,e=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(-1!==e)this.setAudioTrack(e);else{var r=new Error("No track found for running audio group-ID: "+this.groupId+" track count: "+t.length);this.warn(r.message),this.hls.trigger(T.ERROR,{type:E.MEDIA_ERROR,details:S.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:r})}},r.findTrackId=function(t){for(var e=this.tracksInGroup,r=0;r<e.length;r++){var i=e[r];if(!this.selectDefaultTrack||i.default){if(!t||t.attrs["STABLE-RENDITION-ID"]===i.attrs["STABLE-RENDITION-ID"])return i.id;if(t.name===i.name&&t.lang===i.lang)return i.id}}return-1},r.loadPlaylist=function(e){t.prototype.loadPlaylist.call(this);var r=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(r)){var i=r.id,n=r.groupId,a=r.url;if(e)try{a=e.addDirectives(a)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("loading audio-track playlist "+i+' "'+r.name+'" lang:'+r.lang+" group:"+n),this.clearTimer(),this.hls.trigger(T.AUDIO_TRACK_LOADING,{url:a,id:i,groupId:n,deliveryDirectives:e||null})}},a(e,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}}]),e}(ar);function mn(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!pn(t[r].attrs,e[r].attrs))return!1;return!0}function pn(t,e){var r=t["STABLE-RENDITION-ID"];return r?r===e["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some((function(r){return t[r]!==e[r]}))}var yn=function(t){function e(e,r,i){var n;return(n=t.call(this,e,r,i,"[subtitle-stream-controller]",ce)||this).levels=[],n.currentTrackId=-1,n.tracksBuffered=[],n.mainDetails=null,n._registerListeners(),n}l(e,t);var r=e.prototype;return r.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},r._registerListeners=function(){var t=this.hls;t.on(T.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(T.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(T.MANIFEST_LOADING,this.onManifestLoading,this),t.on(T.LEVEL_LOADED,this.onLevelLoaded,this),t.on(T.ERROR,this.onError,this),t.on(T.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(T.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(T.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(T.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(T.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(T.FRAG_BUFFERED,this.onFragBuffered,this)},r._unregisterListeners=function(){var t=this.hls;t.off(T.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(T.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(T.MANIFEST_LOADING,this.onManifestLoading,this),t.off(T.LEVEL_LOADED,this.onLevelLoaded,this),t.off(T.ERROR,this.onError,this),t.off(T.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(T.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(T.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(T.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(T.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(T.FRAG_BUFFERED,this.onFragBuffered,this)},r.startLoad=function(t){this.stopLoad(),this.state=Nr,this.setInterval(500),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()},r.onManifestLoading=function(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()},r.onMediaDetaching=function(){this.tracksBuffered=[],t.prototype.onMediaDetaching.call(this)},r.onLevelLoaded=function(t,e){this.mainDetails=e.details},r.onSubtitleFragProcessed=function(t,e){var r=e.frag,i=e.success;if(this.fragPrevious=r,this.state=Nr,i){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var a,s=r.start,o=0;o<n.length;o++)if(s>=n[o].start&&s<=n[o].end){a=n[o];break}var l=r.start+r.duration;a?a.end=l:(a={start:s,end:l},n.push(a)),this.fragmentTracker.fragBuffered(r)}}},r.onBufferFlushing=function(t,e){var r=e.startOffset,i=e.endOffset;if(0===r&&i!==Number.POSITIVE_INFINITY){var n=this.currentTrackId,a=this.levels;if(!a.length||!a[n]||!a[n].details)return;var s=i-a[n].details.targetduration;if(s<=0)return;e.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach((function(t){for(var e=0;e<t.length;)if(t[e].end<=s)t.shift();else{if(!(t[e].start<s))break;t[e].start=s,e++}})),this.fragmentTracker.removeFragmentsInRange(r,s,ce)}},r.onFragBuffered=function(t,e){var r;this.loadedmetadata||e.frag.type!==he||null!=(r=this.media)&&r.buffered.length&&(this.loadedmetadata=!0)},r.onError=function(t,e){var r=e.frag;(null==r?void 0:r.type)===ce&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Mr&&(this.state=Nr))},r.onSubtitleTracksUpdated=function(t,e){var r=this,i=e.subtitleTracks;mn(this.levels,i)?this.levels=i.map((function(t){return new xe(t)})):(this.tracksBuffered=[],this.levels=i.map((function(t){var e=new xe(t);return r.tracksBuffered[e.id]=[],e})),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,ce),this.fragPrevious=null,this.mediaBuffer=null)},r.onSubtitleTrackSwitch=function(t,e){if(this.currentTrackId=e.id,this.levels.length&&-1!==this.currentTrackId){var r=this.levels[this.currentTrackId];null!=r&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.setInterval(500)}else this.clearInterval()},r.onSubtitleTrackLoaded=function(t,e){var r,i=e.details,n=e.id,a=this.currentTrackId,s=this.levels;if(s.length){var o=s[a];if(!(n>=s.length||n!==a)&&o){this.mediaBuffer=this.mediaBufferTimeRanges;var l=0;if(i.live||null!=(r=o.details)&&r.live){var u=this.mainDetails;if(i.deltaUpdateFailed||!u)return;var h=u.fragments[0];o.details?0===(l=this.alignPlaylists(i,o.details))&&h&&Ue(i,l=h.start):i.hasProgramDateTime&&u.hasProgramDateTime?(Cr(i,u),l=i.fragments[0].start):h&&Ue(i,l=h.start)}o.details=i,this.levelLastLoaded=n,this.startFragRequested||!this.mainDetails&&i.live||this.setStartPosition(o.details,l),this.tick(),i.live&&!this.fragCurrent&&this.media&&this.state===Nr&&(qe(null,i.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),o.details=void 0))}}},r._handleFragmentLoadComplete=function(t){var e=this,r=t.frag,i=t.payload,n=r.decryptdata,a=this.hls;if(!this.fragContextChanged(r)&&i&&i.byteLength>0&&n&&n.key&&n.iv&&"AES-128"===n.method){var s=performance.now();this.decrypter.decrypt(new Uint8Array(i),n.key.buffer,n.iv.buffer).catch((function(t){throw a.trigger(T.ERROR,{type:E.MEDIA_ERROR,details:S.FRAG_DECRYPT_ERROR,fatal:!1,error:t,reason:t.message,frag:r}),t})).then((function(t){var e=performance.now();a.trigger(T.FRAG_DECRYPTED,{frag:r,payload:t,stats:{tstart:s,tdecrypt:e}})})).catch((function(t){e.warn(t.name+": "+t.message),e.state=Nr}))}},r.doTick=function(){if(this.media){if(this.state===Nr){var t=this.currentTrackId,e=this.levels,r=e[t];if(!e.length||!r||!r.details)return;var i=r.details,n=i.targetduration,a=this.config,s=this.getLoadPosition(),o=Ar.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s-n,a.maxBufferHole),l=o.end,u=o.len,h=this.getFwdBufferInfo(this.media,he);if(u>this.getMaxBufferLength(null==h?void 0:h.len)+n)return;var d=i.fragments,c=d.length,f=i.edge,g=null,v=this.fragPrevious;if(l<f){var m=a.maxFragLookUpTolerance;!(g=qe(v,d,Math.max(d[0].start,l),m))&&v&&v.start<d[0].start&&(g=d[0])}else g=d[c-1];if(!g)return;g=this.mapToInitFragWhenRequired(g),this.fragmentTracker.getState(g)===ur&&this.loadFragment(g,r,l)}}else this.state=Nr},r.getMaxBufferLength=function(e){var r=t.prototype.getMaxBufferLength.call(this);return e?Math.max(r,e):r},r.loadFragment=function(e,r,i){this.fragCurrent=e,"initSegment"===e.sn?this._loadInitSegment(e,r):(this.startFragRequested=!0,t.prototype.loadFragment.call(this,e,r,i))},a(e,[{key:"mediaBufferTimeRanges",get:function(){return new Tn(this.tracksBuffered[this.currentTrackId]||[])}}]),e}(Xr),Tn=function(t){this.buffered=void 0;var e=function(e,r,i){if((r>>>=0)>i-1)throw new DOMException("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+r+") is greater than the maximum bound ("+i+")");return t[r][e]};this.buffered={get length(){return t.length},end:function(r){return e("end",r,t.length)},start:function(r){return e("start",r,t.length)}}},En=function(t){function e(e){var r;return(r=t.call(this,e,"[subtitle-track-controller]")||this).media=null,r.tracks=[],r.groupId=null,r.tracksInGroup=[],r.trackId=-1,r.selectDefaultTrack=!0,r.queuedDefaultTrack=-1,r.trackChangeListener=function(){return r.onTextTracksChanged()},r.asyncPollTrackChange=function(){return r.pollTrackChange(0)},r.useTextTrackPolling=!1,r.subtitlePollingInterval=-1,r._subtitleDisplay=!0,r.registerListeners(),r}l(e,t);var r=e.prototype;return r.destroy=function(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,t.prototype.destroy.call(this)},r.registerListeners=function(){var t=this.hls;t.on(T.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(T.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(T.MANIFEST_LOADING,this.onManifestLoading,this),t.on(T.MANIFEST_PARSED,this.onManifestParsed,this),t.on(T.LEVEL_LOADING,this.onLevelLoading,this),t.on(T.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(T.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(T.ERROR,this.onError,this)},r.unregisterListeners=function(){var t=this.hls;t.off(T.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(T.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(T.MANIFEST_LOADING,this.onManifestLoading,this),t.off(T.MANIFEST_PARSED,this.onManifestParsed,this),t.off(T.LEVEL_LOADING,this.onLevelLoading,this),t.off(T.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(T.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(T.ERROR,this.onError,this)},r.onMediaAttached=function(t,e){this.media=e.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))},r.pollTrackChange=function(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,t)},r.onMediaDetaching=function(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),Sn(this.media.textTracks).forEach((function(t){ye(t)})),this.subtitleTrack=-1,this.media=null)},r.onManifestLoading=function(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0},r.onManifestParsed=function(t,e){this.tracks=e.subtitleTracks},r.onSubtitleTrackLoaded=function(t,e){var r=e.id,i=e.details,n=this.trackId,a=this.tracksInGroup[n];if(a){var s=a.details;a.details=e.details,this.log("subtitle track "+r+" loaded ["+i.startSN+"-"+i.endSN+"]"),r===this.trackId&&this.playlistLoaded(r,e,s)}else this.warn("Invalid subtitle track id "+r)},r.onLevelLoading=function(t,e){this.switchLevel(e.level)},r.onLevelSwitching=function(t,e){this.switchLevel(e.level)},r.switchLevel=function(t){var e=this.hls.levels[t];if(null!=e&&e.textGroupIds){var r=e.textGroupIds[e.urlId],i=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==r){var n=this.tracks.filter((function(t){return!r||t.groupId===r}));this.tracksInGroup=n;var a=this.findTrackId(null==i?void 0:i.name)||this.findTrackId();this.groupId=r||null;var s={subtitleTracks:n};this.log("Updating subtitle tracks, "+n.length+' track(s) found in "'+r+'" group-id'),this.hls.trigger(T.SUBTITLE_TRACKS_UPDATED,s),-1!==a&&this.setSubtitleTrack(a,i)}else this.shouldReloadPlaylist(i)&&this.setSubtitleTrack(this.trackId,i)}},r.findTrackId=function(t){for(var e=this.tracksInGroup,r=0;r<e.length;r++){var i=e[r];if((!this.selectDefaultTrack||i.default)&&(!t||t===i.name))return i.id}return-1},r.onError=function(t,e){!e.fatal&&e.context&&e.context.type===ue&&e.context.id===this.trackId&&e.context.groupId===this.groupId&&this.checkRetry(e)},r.loadPlaylist=function(e){t.prototype.loadPlaylist.call(this);var r=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(r)){var i=r.id,n=r.groupId,a=r.url;if(e)try{a=e.addDirectives(a)}catch(t){this.warn("Could not construct new URL with HLS Delivery Directives: "+t)}this.log("Loading subtitle playlist for id "+i),this.hls.trigger(T.SUBTITLE_TRACK_LOADING,{url:a,id:i,groupId:n,deliveryDirectives:e||null})}},r.toggleTrackModes=function(t){var e=this,r=this.media,i=this.trackId;if(r){var n=Sn(r.textTracks),a=n.filter((function(t){return t.groupId===e.groupId}));if(-1===t)[].slice.call(n).forEach((function(t){t.mode="disabled"}));else{var s=a[i];s&&(s.mode="disabled")}var o=a[t];o&&(o.mode=this.subtitleDisplay?"showing":"hidden")}},r.setSubtitleTrack=function(t,e){var r,i=this.tracksInGroup;if(this.media){if(this.trackId!==t&&this.toggleTrackModes(t),!(this.trackId===t&&(-1===t||null!=(r=i[t])&&r.details)||t<-1||t>=i.length)){this.clearTimer();var n=i[t];if(this.log("Switching to subtitle-track "+t+(n?' "'+n.name+'" lang:'+n.lang+" group:"+n.groupId:"")),this.trackId=t,n){var a=n.id,s=n.groupId,o=void 0===s?"":s,l=n.name,u=n.type,h=n.url;this.hls.trigger(T.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:l,type:u,url:h});var d=this.switchParams(n.url,null==e?void 0:e.details);this.loadPlaylist(d)}else this.hls.trigger(T.SUBTITLE_TRACK_SWITCH,{id:t})}}else this.queuedDefaultTrack=t},r.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),this.media&&this.hls.config.renderTextTracksNatively){for(var t=-1,e=Sn(this.media.textTracks),r=0;r<e.length;r++)if("hidden"===e[r].mode)t=r;else if("showing"===e[r].mode){t=r;break}this.subtitleTrack!==t&&(this.subtitleTrack=t)}},a(e,[{key:"subtitleDisplay",get:function(){return this._subtitleDisplay},set:function(t){this._subtitleDisplay=t,this.trackId>-1&&this.toggleTrackModes(this.trackId)}},{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(t){this.selectDefaultTrack=!1;var e=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(t,e)}}]),e}(ar);function Sn(t){for(var e=[],r=0;r<t.length;r++){var i=t[r];"subtitles"!==i.kind&&"captions"!==i.kind||!i.label||e.push(t[r])}return e}var Ln=function(){function t(t){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=t}var e=t.prototype;return e.append=function(t,e){var r=this.queues[e];r.push(t),1===r.length&&this.buffers[e]&&this.executeNext(e)},e.insertAbort=function(t,e){this.queues[e].unshift(t),this.executeNext(e)},e.appendBlocker=function(t){var e,r=new Promise((function(t){e=t})),i={execute:e,onStart:function(){},onComplete:function(){},onError:function(){}};return this.append(i,t),r},e.executeNext=function(t){var e=this.buffers,r=this.queues,i=e[t],n=r[t];if(n.length){var a=n[0];try{a.execute()}catch(e){D.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),a.onError(e),null!=i&&i.updating||(n.shift(),this.executeNext(t))}}},e.shiftAndExecuteNext=function(t){this.queues[t].shift(),this.executeNext(t)},e.current=function(t){return this.queues[t][0]},t}(),Rn=zr(),An=/([ha]vc.)(?:\.[^.,]+)+/,kn=function(){function t(t){var e=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=function(){var t=e.media,r=e.mediaSource;D.log("[buffer-controller]: Media source opened"),t&&(t.removeEventListener("emptied",e._onMediaEmptied),e.updateMediaElementDuration(),e.hls.trigger(T.MEDIA_ATTACHED,{media:t})),r&&r.removeEventListener("sourceopen",e._onMediaSourceOpen),e.checkPendingTracks()},this._onMediaSourceClose=function(){D.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=function(){D.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=function(){var t=e.media,r=e._objectUrl;t&&t.src!==r&&D.error("Media element src was set while attaching MediaSource ("+r+" > "+t.src+")")},this.hls=t,this._initSourceBuffer(),this.registerListeners()}var e=t.prototype;return e.hasSourceTypes=function(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0},e.destroy=function(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null},e.registerListeners=function(){var t=this.hls;t.on(T.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(T.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(T.MANIFEST_PARSED,this.onManifestParsed,this),t.on(T.BUFFER_RESET,this.onBufferReset,this),t.on(T.BUFFER_APPENDING,this.onBufferAppending,this),t.on(T.BUFFER_CODECS,this.onBufferCodecs,this),t.on(T.BUFFER_EOS,this.onBufferEos,this),t.on(T.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(T.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(T.FRAG_PARSED,this.onFragParsed,this),t.on(T.FRAG_CHANGED,this.onFragChanged,this)},e.unregisterListeners=function(){var t=this.hls;t.off(T.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(T.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(T.MANIFEST_PARSED,this.onManifestParsed,this),t.off(T.BUFFER_RESET,this.onBufferReset,this),t.off(T.BUFFER_APPENDING,this.onBufferAppending,this),t.off(T.BUFFER_CODECS,this.onBufferCodecs,this),t.off(T.BUFFER_EOS,this.onBufferEos,this),t.off(T.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(T.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(T.FRAG_PARSED,this.onFragParsed,this),t.off(T.FRAG_CHANGED,this.onFragChanged,this)},e._initSourceBuffer=function(){this.sourceBuffer={},this.operationQueue=new Ln(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null},e.onManifestParsed=function(t,e){var r=2;(e.audio&&!e.video||!e.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.details=null,D.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},e.onMediaAttaching=function(t,e){var r=this.media=e.media;if(r&&Rn){var i=this.mediaSource=new Rn;i.addEventListener("sourceopen",this._onMediaSourceOpen),i.addEventListener("sourceended",this._onMediaSourceEnded),i.addEventListener("sourceclose",this._onMediaSourceClose),r.src=self.URL.createObjectURL(i),this._objectUrl=r.src,r.addEventListener("emptied",this._onMediaEmptied)}},e.onMediaDetaching=function(){var t=this.media,e=this.mediaSource,r=this._objectUrl;if(e){if(D.log("[buffer-controller]: media source detaching"),"open"===e.readyState)try{e.endOfStream()}catch(t){D.warn("[buffer-controller]: onMediaDetaching: "+t.message+" while calling endOfStream")}this.onBufferReset(),e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),t&&(t.removeEventListener("emptied",this._onMediaEmptied),r&&self.URL.revokeObjectURL(r),t.src===r?(t.removeAttribute("src"),t.load()):D.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(T.MEDIA_DETACHED,void 0)},e.onBufferReset=function(){var t=this;this.getSourceBufferTypes().forEach((function(e){var r=t.sourceBuffer[e];try{r&&(t.removeBufferListeners(e),t.mediaSource&&t.mediaSource.removeSourceBuffer(r),t.sourceBuffer[e]=void 0)}catch(t){D.warn("[buffer-controller]: Failed to reset the "+e+" buffer",t)}})),this._initSourceBuffer()},e.onBufferCodecs=function(t,e){var r=this,i=this.getSourceBufferTypes().length;Object.keys(e).forEach((function(t){if(i){var n=r.tracks[t];if(n&&"function"==typeof n.buffer.changeType){var a=e[t],s=a.id,o=a.codec,l=a.levelCodec,u=a.container,h=a.metadata,d=(n.levelCodec||n.codec).replace(An,"$1"),c=(l||o).replace(An,"$1");if(d!==c){var f=u+";codecs="+(l||o);r.appendChangeType(t,f),D.log("[buffer-controller]: switching codec "+d+" to "+c),r.tracks[t]={buffer:n.buffer,codec:o,container:u,levelCodec:l,metadata:h,id:s}}}}else r.pendingTracks[t]=e[t]})),i||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},e.appendChangeType=function(t,e){var r=this,i=this.operationQueue,n={execute:function(){var n=r.sourceBuffer[t];n&&(D.log("[buffer-controller]: changing "+t+" sourceBuffer type to "+e),n.changeType(e)),i.shiftAndExecuteNext(t)},onStart:function(){},onComplete:function(){},onError:function(e){D.warn("[buffer-controller]: Failed to change "+t+" SourceBuffer type",e)}};i.append(n,t)},e.onBufferAppending=function(t,e){var r=this,i=this.hls,n=this.operationQueue,a=this.tracks,s=e.data,o=e.type,l=e.frag,u=e.part,h=e.chunkMeta,d=h.buffering[o],c=self.performance.now();d.start=c;var f=l.stats.buffering,g=u?u.stats.buffering:null;0===f.start&&(f.start=c),g&&0===g.start&&(g.start=c);var v=a.audio,m=!1;"audio"===o&&"audio/mpeg"===(null==v?void 0:v.container)&&(m=!this.lastMpegAudioChunk||1===h.id||this.lastMpegAudioChunk.sn!==h.sn,this.lastMpegAudioChunk=h);var p=l.start,y={execute:function(){if(d.executeStart=self.performance.now(),m){var t=r.sourceBuffer[o];if(t){var e=p-t.timestampOffset;Math.abs(e)>=.1&&(D.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+p+" (delta: "+e+") sn: "+l.sn+")"),t.timestampOffset=p)}}r.appendExecutor(s,o)},onStart:function(){},onComplete:function(){var t=self.performance.now();d.executeEnd=d.end=t,0===f.first&&(f.first=t),g&&0===g.first&&(g.first=t);var e=r.sourceBuffer,i={};for(var n in e)i[n]=Ar.getBuffered(e[n]);r.appendError=0,r.hls.trigger(T.BUFFER_APPENDED,{type:o,frag:l,part:u,chunkMeta:h,parent:l.type,timeRanges:i})},onError:function(t){D.error("[buffer-controller]: Error encountered while trying to append to the "+o+" SourceBuffer",t);var e={type:E.MEDIA_ERROR,parent:l.type,details:S.BUFFER_APPEND_ERROR,frag:l,part:u,chunkMeta:h,error:t,err:t,fatal:!1};t.code===DOMException.QUOTA_EXCEEDED_ERR?e.details=S.BUFFER_FULL_ERROR:(r.appendError++,e.details=S.BUFFER_APPEND_ERROR,r.appendError>i.config.appendErrorMaxRetry&&(D.error("[buffer-controller]: Failed "+i.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),e.fatal=!0)),i.trigger(T.ERROR,e)}};n.append(y,o)},e.onBufferFlushing=function(t,e){var r=this,i=this.operationQueue,n=function(t){return{execute:r.removeExecutor.bind(r,t,e.startOffset,e.endOffset),onStart:function(){},onComplete:function(){r.hls.trigger(T.BUFFER_FLUSHED,{type:t})},onError:function(e){D.warn("[buffer-controller]: Failed to remove from "+t+" SourceBuffer",e)}}};e.type?i.append(n(e.type),e.type):this.getSourceBufferTypes().forEach((function(t){i.append(n(t),t)}))},e.onFragParsed=function(t,e){var r=this,i=e.frag,n=e.part,a=[],s=n?n.elementaryStreams:i.elementaryStreams;s[M]?a.push("audiovideo"):(s[F]&&a.push("audio"),s[O]&&a.push("video")),0===a.length&&D.warn("Fragments must have at least one ElementaryStreamType set. type: "+i.type+" level: "+i.level+" sn: "+i.sn),this.blockBuffers((function(){var t=self.performance.now();i.stats.buffering.end=t,n&&(n.stats.buffering.end=t);var e=n?n.stats:i.stats;r.hls.trigger(T.FRAG_BUFFERED,{frag:i,part:n,stats:e,id:i.type})}),a)},e.onFragChanged=function(t,e){this.flushBackBuffer()},e.onBufferEos=function(t,e){var r=this;this.getSourceBufferTypes().reduce((function(t,i){var n=r.sourceBuffer[i];return!n||e.type&&e.type!==i||(n.ending=!0,n.ended||(n.ended=!0,D.log("[buffer-controller]: "+i+" sourceBuffer now EOS"))),t&&!(n&&!n.ended)}),!0)&&(D.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers((function(){r.getSourceBufferTypes().forEach((function(t){var e=r.sourceBuffer[t];e&&(e.ending=!1)}));var t=r.mediaSource;t&&"open"===t.readyState?(D.log("[buffer-controller]: Calling mediaSource.endOfStream()"),t.endOfStream()):t&&D.info("[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: "+t.readyState)})))},e.onLevelUpdated=function(t,e){var r=e.details;r.fragments.length&&(this.details=r,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())},e.flushBackBuffer=function(){var t=this.hls,e=this.details,r=this.media,i=this.sourceBuffer;if(r&&null!==e){var n=this.getSourceBufferTypes();if(n.length){var a=e.live&&null!==t.config.liveBackBufferLength?t.config.liveBackBufferLength:t.config.backBufferLength;if(y(a)&&!(a<0)){var s=r.currentTime,o=e.levelTargetDuration,l=Math.max(a,o),u=Math.floor(s/o)*o-l;n.forEach((function(r){var n=i[r];if(n){var a=Ar.getBuffered(n);if(a.length>0&&u>a.start(0)){if(t.trigger(T.BACK_BUFFER_REACHED,{bufferEnd:u}),e.live)t.trigger(T.LIVE_BACK_BUFFER_REACHED,{bufferEnd:u});else if(n.ended&&a.end(a.length-1)-s<2*o)return void D.info("[buffer-controller]: Cannot flush "+r+" back buffer while SourceBuffer is in ended state");t.trigger(T.BUFFER_FLUSHING,{startOffset:0,endOffset:u,type:r})}}}))}}}},e.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var t=this.details,e=this.hls,r=this.media,i=this.mediaSource,n=t.fragments[0].start+t.totalduration,a=r.duration,s=y(i.duration)?i.duration:0;t.live&&e.config.liveDurationInfinity?(D.log("[buffer-controller]: Media Source duration is set to Infinity"),i.duration=1/0,this.updateSeekableRange(t)):(n>s&&n>a||!y(a))&&(D.log("[buffer-controller]: Updating Media Source duration to "+n.toFixed(3)),i.duration=n)}},e.updateSeekableRange=function(t){var e=this.mediaSource,r=t.fragments;if(r.length&&t.live&&null!=e&&e.setLiveSeekableRange){var i=Math.max(0,r[0].start),n=Math.max(i,i+t.totalduration);e.setLiveSeekableRange(i,n)}},e.checkPendingTracks=function(){var t=this.bufferCodecEventsExpected,e=this.operationQueue,r=this.pendingTracks,i=Object.keys(r).length;if(i&&!t||2===i){this.createSourceBuffers(r),this.pendingTracks={};var n=this.getSourceBufferTypes();if(n.length)this.hls.trigger(T.BUFFER_CREATED,{tracks:this.tracks}),n.forEach((function(t){e.executeNext(t)}));else{var a=new Error("could not create source buffer for media codec(s)");this.hls.trigger(T.ERROR,{type:E.MEDIA_ERROR,details:S.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:a,reason:a.message})}}},e.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(var i in t)if(!e[i]){var n=t[i];if(!n)throw Error("source buffer exists for track "+i+", however track does not");var a=n.levelCodec||n.codec,s=n.container+";codecs="+a;D.log("[buffer-controller]: creating sourceBuffer("+s+")");try{var o=e[i]=r.addSourceBuffer(s),l=i;this.addBufferListener(l,"updatestart",this._onSBUpdateStart),this.addBufferListener(l,"updateend",this._onSBUpdateEnd),this.addBufferListener(l,"error",this._onSBUpdateError),this.tracks[i]={buffer:o,codec:a,container:n.container,levelCodec:n.levelCodec,metadata:n.metadata,id:n.id}}catch(t){D.error("[buffer-controller]: error while trying to add sourceBuffer: "+t.message),this.hls.trigger(T.ERROR,{type:E.MEDIA_ERROR,details:S.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:t,mimeType:s})}}},e._onSBUpdateStart=function(t){this.operationQueue.current(t).onStart()},e._onSBUpdateEnd=function(t){var e=this.operationQueue;e.current(t).onComplete(),e.shiftAndExecuteNext(t)},e._onSBUpdateError=function(t,e){var r=new Error(t+" SourceBuffer error");D.error("[buffer-controller]: "+r,e),this.hls.trigger(T.ERROR,{type:E.MEDIA_ERROR,details:S.BUFFER_APPENDING_ERROR,error:r,fatal:!1});var i=this.operationQueue.current(t);i&&i.onError(e)},e.removeExecutor=function(t,e,r){var i=this.media,n=this.mediaSource,a=this.operationQueue,s=this.sourceBuffer[t];if(!i||!n||!s)return D.warn("[buffer-controller]: Attempting to remove from the "+t+" SourceBuffer, but it does not exist"),void a.shiftAndExecuteNext(t);var o=y(i.duration)?i.duration:1/0,l=y(n.duration)?n.duration:1/0,u=Math.max(0,e),h=Math.min(r,o,l);h>u&&!s.ending?(s.ended=!1,D.log("[buffer-controller]: Removing ["+u+","+h+"] from the "+t+" SourceBuffer"),s.remove(u,h)):a.shiftAndExecuteNext(t)},e.appendExecutor=function(t,e){var r=this.operationQueue,i=this.sourceBuffer[e];if(!i)return D.warn("[buffer-controller]: Attempting to append to the "+e+" SourceBuffer, but it does not exist"),void r.shiftAndExecuteNext(e);i.ended=!1,i.appendBuffer(t)},e.blockBuffers=function(t,e){var r=this;if(void 0===e&&(e=this.getSourceBufferTypes()),!e.length)return D.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(t);var i=this.operationQueue,n=e.map((function(t){return i.appendBlocker(t)}));Promise.all(n).then((function(){t(),e.forEach((function(t){var e=r.sourceBuffer[t];null!=e&&e.updating||i.shiftAndExecuteNext(t)}))}))},e.getSourceBufferTypes=function(){return Object.keys(this.sourceBuffer)},e.addBufferListener=function(t,e,r){var i=this.sourceBuffer[t];if(i){var n=r.bind(this,t);this.listeners[t].push({event:e,listener:n}),i.addEventListener(e,n)}},e.removeBufferListeners=function(t){var e=this.sourceBuffer[t];e&&this.listeners[t].forEach((function(t){e.removeEventListener(t.event,t.listener)}))},t}(),bn={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},Dn=function(t){var e=t;return bn.hasOwnProperty(t)&&(e=bn[t]),String.fromCharCode(e)},In=15,wn=100,Cn={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},_n={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Pn={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},xn={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Fn=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],On=function(){function t(){this.time=null,this.verboseLevel=0}return t.prototype.log=function(t,e){if(this.verboseLevel>=t){var r="function"==typeof e?e():e;D.log(this.time+" ["+t+"] "+r)}},t}(),Mn=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r].toString(16));return e},Nn=function(){function t(t,e,r,i,n){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=t||"white",this.underline=e||!1,this.italics=r||!1,this.background=i||"black",this.flash=n||!1}var e=t.prototype;return e.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.setStyles=function(t){for(var e=["foreground","underline","italics","background","flash"],r=0;r<e.length;r++){var i=e[r];t.hasOwnProperty(i)&&(this[i]=t[i])}},e.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.equals=function(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash},e.copy=function(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash},e.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},t}(),Un=function(){function t(t,e,r,i,n,a){this.uchar=void 0,this.penState=void 0,this.uchar=t||" ",this.penState=new Nn(e,r,i,n,a)}var e=t.prototype;return e.reset=function(){this.uchar=" ",this.penState.reset()},e.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},e.setPenState=function(t){this.penState.copy(t)},e.equals=function(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)},e.copy=function(t){this.uchar=t.uchar,this.penState.copy(t.penState)},e.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},t}(),Bn=function(){function t(t){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(var e=0;e<wn;e++)this.chars.push(new Un);this.logger=t,this.pos=0,this.currPenState=new Nn}var e=t.prototype;return e.equals=function(t){for(var e=!0,r=0;r<wn;r++)if(!this.chars[r].equals(t.chars[r])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<wn;e++)this.chars[e].copy(t.chars[e])},e.isEmpty=function(){for(var t=!0,e=0;e<wn;e++)if(!this.chars[e].isEmpty()){t=!1;break}return t},e.setCursor=function(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>wn&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=wn)},e.moveCursor=function(t){var e=this.pos+t;if(t>1)for(var r=this.pos+1;r<e+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(e)},e.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.insertChar=function(t){var e=this;t>=144&&this.backSpace();var r=Dn(t);this.pos>=wn?this.logger.log(0,(function(){return"Cannot insert "+t.toString(16)+" ("+r+") at position "+e.pos+". Skipping it!"})):(this.chars[this.pos].setChar(r,this.currPenState),this.moveCursor(1))},e.clearFromPos=function(t){var e;for(e=t;e<wn;e++)this.chars[e].reset()},e.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.getTextString=function(){for(var t=[],e=!0,r=0;r<wn;r++){var i=this.chars[r].uchar;" "!==i&&(e=!1),t.push(i)}return e?"":t.join("")},e.setPenStyles=function(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)},t}(),Gn=function(){function t(t){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(var e=0;e<In;e++)this.rows.push(new Bn(t));this.logger=t,this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}var e=t.prototype;return e.reset=function(){for(var t=0;t<In;t++)this.rows[t].clear();this.currRow=14},e.equals=function(t){for(var e=!0,r=0;r<In;r++)if(!this.rows[r].equals(t.rows[r])){e=!1;break}return e},e.copy=function(t){for(var e=0;e<In;e++)this.rows[e].copy(t.rows[e])},e.isEmpty=function(){for(var t=!0,e=0;e<In;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},e.backSpace=function(){this.rows[this.currRow].backSpace()},e.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.insertChar=function(t){this.rows[this.currRow].insertChar(t)},e.setPen=function(t){this.rows[this.currRow].setPenStyles(t)},e.moveCursor=function(t){this.rows[this.currRow].moveCursor(t)},e.setCursor=function(t){this.logger.log(2,"setCursor: "+t),this.rows[this.currRow].setCursor(t)},e.setPAC=function(t){this.logger.log(2,(function(){return"pacData = "+JSON.stringify(t)}));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var r=0;r<In;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,n=this.lastOutputScreen;if(n){var a=n.rows[i].cueStartTime,s=this.logger.time;if(a&&null!==s&&a<s)for(var o=0;o<this.nrRollUpRows;o++)this.rows[e-this.nrRollUpRows+o+1].copy(n.rows[i+o])}}this.currRow=e;var l=this.rows[this.currRow];if(null!==t.indent){var u=t.indent,h=Math.max(u-1,0);l.setCursor(t.indent),t.color=l.chars[h].penState.foreground}var d={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(d)},e.setBkgData=function(t){this.logger.log(2,(function(){return"bkgData = "+JSON.stringify(t)})),this.backSpace(),this.setPen(t),this.insertChar(32)},e.setRollUpRows=function(t){this.nrRollUpRows=t},e.rollUp=function(){var t=this;if(null!==this.nrRollUpRows){this.logger.log(1,(function(){return t.getDisplayText()}));var e=this.currRow+1-this.nrRollUpRows,r=this.rows.splice(e,1)[0];r.clear(),this.rows.splice(this.currRow,0,r),this.logger.log(2,"Rolling up")}else this.logger.log(3,"roll_up but nrRollUpRows not set yet")},e.getDisplayText=function(t){t=t||!1;for(var e=[],r="",i=-1,n=0;n<In;n++){var a=this.rows[n].getTextString();a&&(i=n+1,t?e.push("Row "+i+": '"+a+"'"):e.push(a.trim()))}return e.length>0&&(r=t?"["+e.join(" | ")+"]":e.join("\n")),r},e.getTextAndFormat=function(){return this.rows},t}(),Kn=function(){function t(t,e,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=e,this.mode=null,this.verbose=0,this.displayedMemory=new Gn(r),this.nonDisplayedMemory=new Gn(r),this.lastOutputScreen=new Gn(r),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}var e=t.prototype;return e.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},e.getHandler=function(){return this.outputFilter},e.setHandler=function(t){this.outputFilter=t},e.setPAC=function(t){this.writeScreen.setPAC(t)},e.setBkgData=function(t){this.writeScreen.setBkgData(t)},e.setMode=function(t){t!==this.mode&&(this.mode=t,this.logger.log(2,(function(){return"MODE="+t})),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)},e.insertChars=function(t){for(var e=this,r=0;r<t.length;r++)this.writeScreen.insertChar(t[r]);var i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(function(){return i+": "+e.writeScreen.getDisplayText(!0)})),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(this.logger.log(1,(function(){return"DISPLAYED: "+e.displayedMemory.getDisplayText(!0)})),this.outputDataUpdate())},e.ccRCL=function(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.ccBS=function(){this.logger.log(2,"BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.ccAOF=function(){},e.ccAON=function(){},e.ccDER=function(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.ccRU=function(t){this.logger.log(2,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)},e.ccFON=function(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.ccRDC=function(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.ccTR=function(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")},e.ccRTD=function(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")},e.ccEDM=function(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.ccCR=function(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.ccENM=function(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.ccEOC=function(){var t=this;if(this.logger.log(2,"EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(function(){return"DISP: "+t.displayedMemory.getDisplayText()}))}this.outputDataUpdate(!0)},e.ccTO=function(t){this.logger.log(2,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},e.ccMIDROW=function(t){var e={flash:!1};if(e.underline=t%2==1,e.italics=t>=46,e.italics)e.foreground="white";else{var r=Math.floor(t/2)-16;e.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}this.logger.log(2,"MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},e.outputDataUpdate=function(t){void 0===t&&(t=!1);var e=this.logger.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputScreen.copy(this.displayedMemory))},e.cueSplitAtTime=function(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))},t}(),Hn=function(){function t(t,e,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;var i=new On;this.channels=[null,new Kn(t,e,i),new Kn(t+1,r,i)],this.cmdHistory={a:null,b:null},this.logger=i}var e=t.prototype;return e.getHandler=function(t){return this.channels[t].getHandler()},e.setHandler=function(t,e){this.channels[t].setHandler(e)},e.addData=function(t,e){var r,i,n,a=!1;this.logger.time=t;for(var s=0;s<e.length;s+=2)if(i=127&e[s],n=127&e[s+1],0!==i||0!==n){if(this.logger.log(3,"["+Mn([e[s],e[s+1]])+"] -> ("+Mn([i,n])+")"),(r=this.parseCmd(i,n))||(r=this.parseMidrow(i,n)),r||(r=this.parsePAC(i,n)),r||(r=this.parseBackgroundAttributes(i,n)),!r&&(a=this.parseChars(i,n))){var o=this.currentChannel;o&&o>0?this.channels[o].insertChars(a):this.logger.log(2,"No channel found yet. TEXT-MODE?")}r||a||this.logger.log(2,"Couldn't parse cleaned data "+Mn([i,n])+" orig: "+Mn([e[s],e[s+1]]))}},e.parseCmd=function(t,e){var r=this.cmdHistory;if(!((20===t||28===t||21===t||29===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=33&&e<=35))return!1;if(Yn(t,e,r))return Vn(null,null,r),this.logger.log(3,"Repeated command ("+Mn([t,e])+") is dropped"),!0;var i=20===t||21===t||23===t?1:2,n=this.channels[i];return 20===t||21===t||28===t||29===t?32===e?n.ccRCL():33===e?n.ccBS():34===e?n.ccAOF():35===e?n.ccAON():36===e?n.ccDER():37===e?n.ccRU(2):38===e?n.ccRU(3):39===e?n.ccRU(4):40===e?n.ccFON():41===e?n.ccRDC():42===e?n.ccTR():43===e?n.ccRTD():44===e?n.ccEDM():45===e?n.ccCR():46===e?n.ccENM():47===e&&n.ccEOC():n.ccTO(e-32),Vn(t,e,r),this.currentChannel=i,!0},e.parseMidrow=function(t,e){var r=0;if((17===t||25===t)&&e>=32&&e<=47){if((r=17===t?1:2)!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;var i=this.channels[r];return!!i&&(i.ccMIDROW(e),this.logger.log(3,"MIDROW ("+Mn([t,e])+")"),!0)}return!1},e.parsePAC=function(t,e){var r,i=this.cmdHistory;if(!((t>=17&&t<=23||t>=25&&t<=31)&&e>=64&&e<=127||(16===t||24===t)&&e>=64&&e<=95))return!1;if(Yn(t,e,i))return Vn(null,null,i),!0;var n=t<=23?1:2;r=e>=64&&e<=95?1===n?Cn[t]:Pn[t]:1===n?_n[t]:xn[t];var a=this.channels[n];return!!a&&(a.setPAC(this.interpretPAC(r,e)),Vn(t,e,i),this.currentChannel=n,!0)},e.interpretPAC=function(t,e){var r,i={color:null,italics:!1,indent:null,underline:!1,row:t};return r=e>95?e-96:e-64,i.underline=1==(1&r),r<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(i.italics=!0,i.color="white"):i.indent=4*Math.floor((r-16)/2),i},e.parseChars=function(t,e){var r,i,n=null,a=null;if(t>=25?(r=2,a=t-8):(r=1,a=t),a>=17&&a<=19?(i=17===a?e+80:18===a?e+112:e+144,this.logger.log(2,"Special char '"+Dn(i)+"' in channel "+r),n=[i]):t>=32&&t<=127&&(n=0===e?[t]:[t,e]),n){var s=Mn(n);this.logger.log(3,"Char codes =  "+s.join(",")),Vn(t,e,this.cmdHistory)}return n},e.parseBackgroundAttributes=function(t,e){var r;if(!((16===t||24===t)&&e>=32&&e<=47||(23===t||31===t)&&e>=45&&e<=47))return!1;var i={};16===t||24===t?(r=Math.floor((e-32)/2),i.background=Fn[r],e%2==1&&(i.background=i.background+"_semi")):45===e?i.background="transparent":(i.foreground="black",47===e&&(i.underline=!0));var n=t<=23?1:2;return this.channels[n].setBkgData(i),Vn(t,e,this.cmdHistory),!0},e.reset=function(){for(var t=0;t<Object.keys(this.channels).length;t++){var e=this.channels[t];e&&e.reset()}this.cmdHistory={a:null,b:null}},e.cueSplitAtTime=function(t){for(var e=0;e<this.channels.length;e++){var r=this.channels[e];r&&r.cueSplitAtTime(t)}},t}();function Vn(t,e,r){r.a=t,r.b=e}function Yn(t,e,r){return r.a===t&&r.b===e}var Wn=function(){function t(t,e){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=e}var e=t.prototype;return e.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)},e.newCue=function(t,e,r){(null===this.startTime||this.startTime>t)&&(this.startTime=t),this.endTime=e,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e.reset=function(){this.cueRanges=[],this.startTime=null},t}(),jn=function(){if("undefined"!=typeof self&&self.VTTCue)return self.VTTCue;var t=["","lr","rl"],e=["start","middle","end","left","right"];function r(t,e){if("string"!=typeof e)return!1;if(!Array.isArray(t))return!1;var r=e.toLowerCase();return!!~t.indexOf(r)&&r}function i(t){return r(e,t)}function n(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),i=1;i<e;i++)r[i-1]=arguments[i];for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var s in a)t[s]=a[s]}return t}function a(e,a,s){var o=this,l={enumerable:!0};o.hasBeenReset=!1;var u="",h=!1,d=e,c=a,f=s,g=null,v="",m=!0,p="auto",y="start",T=50,E="middle",S=50,L="middle";Object.defineProperty(o,"id",n({},l,{get:function(){return u},set:function(t){u=""+t}})),Object.defineProperty(o,"pauseOnExit",n({},l,{get:function(){return h},set:function(t){h=!!t}})),Object.defineProperty(o,"startTime",n({},l,{get:function(){return d},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");d=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",n({},l,{get:function(){return c},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");c=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",n({},l,{get:function(){return f},set:function(t){f=""+t,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",n({},l,{get:function(){return g},set:function(t){g=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",n({},l,{get:function(){return v},set:function(e){var i=function(e){return r(t,e)}(e);if(!1===i)throw new SyntaxError("An invalid or illegal string was specified.");v=i,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",n({},l,{get:function(){return m},set:function(t){m=!!t,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",n({},l,{get:function(){return p},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");p=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",n({},l,{get:function(){return y},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",n({},l,{get:function(){return T},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");T=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",n({},l,{get:function(){return E},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");E=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",n({},l,{get:function(){return S},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");S=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",n({},l,{get:function(){return L},set:function(t){var e=i(t);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");L=e,this.hasBeenReset=!0}})),o.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}(),qn=function(){function t(){}return t.prototype.decode=function(t,e){if(!t)return"";if("string"!=typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))},t}();function Xn(t){function e(t,e,r,i){return 3600*(0|t)+60*(0|e)+(0|r)+parseFloat(i||0)}var r=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return r?parseFloat(r[2])>59?e(r[2],r[3],0,r[4]):e(r[1],r[2],r[3],r[4]):null}var zn=function(){function t(){this.values=Object.create(null)}var e=t.prototype;return e.set=function(t,e){this.get(t)||""===e||(this.values[t]=e)},e.get=function(t,e,r){return r?this.has(t)?this.values[t]:e[r]:this.has(t)?this.values[t]:e},e.has=function(t){return t in this.values},e.alt=function(t,e,r){for(var i=0;i<r.length;++i)if(e===r[i]){this.set(t,e);break}},e.integer=function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},e.percent=function(t,e){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(e)){var r=parseFloat(e);if(r>=0&&r<=100)return this.set(t,r),!0}return!1},t}();function Qn(t,e,r,i){var n=i?t.split(i):[t];for(var a in n)if("string"==typeof n[a]){var s=n[a].split(r);2===s.length&&e(s[0],s[1])}}var $n=new jn(0,0,""),Jn="middle"===$n.align?"middle":"center";function Zn(t,e,r){var i=t;function n(){var e=Xn(t);if(null===e)throw new Error("Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=n(),a(),"--\x3e"!==t.slice(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);t=t.slice(3),a(),e.endTime=n(),a(),function(t,e){var i=new zn;Qn(t,(function(t,e){var n;switch(t){case"region":for(var a=r.length-1;a>=0;a--)if(r[a].id===e){i.set(t,r[a].region);break}break;case"vertical":i.alt(t,e,["rl","lr"]);break;case"line":n=e.split(","),i.integer(t,n[0]),i.percent(t,n[0])&&i.set("snapToLines",!1),i.alt(t,n[0],["auto"]),2===n.length&&i.alt("lineAlign",n[1],["start",Jn,"end"]);break;case"position":n=e.split(","),i.percent(t,n[0]),2===n.length&&i.alt("positionAlign",n[1],["start",Jn,"end","line-left","line-right","auto"]);break;case"size":i.percent(t,e);break;case"align":i.alt(t,e,["start",Jn,"end","left","right"])}}),/:/,/\s/),e.region=i.get("region",null),e.vertical=i.get("vertical","");var n=i.get("line","auto");"auto"===n&&-1===$n.line&&(n=-1),e.line=n,e.lineAlign=i.get("lineAlign","start"),e.snapToLines=i.get("snapToLines",!0),e.size=i.get("size",100),e.align=i.get("align",Jn);var a=i.get("position","auto");"auto"===a&&50===$n.position&&(a="start"===e.align||"left"===e.align?0:"end"===e.align||"right"===e.align?100:50),e.position=a}(t,e)}function ta(t){return t.replace(/<br(?: \/)?>/gi,"\n")}var ea=function(){function t(){this.state="INITIAL",this.buffer="",this.decoder=new qn,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}var e=t.prototype;return e.parse=function(t){var e=this;function r(){var t=e.buffer,r=0;for(t=ta(t);r<t.length&&"\r"!==t[r]&&"\n"!==t[r];)++r;var i=t.slice(0,r);return"\r"===t[r]&&++r,"\n"===t[r]&&++r,e.buffer=t.slice(r),i}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var i="";if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var n=(i=r()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(null==n||!n[0])throw new Error("Malformed WebVTT signature.");e.state="HEADER"}for(var a=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(a?a=!1:i=r(),e.state){case"HEADER":/:/.test(i)?Qn(i,(function(t,e){}),/:/):i||(e.state="ID");continue;case"NOTE":i||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){e.state="NOTE";break}if(!i)continue;if(e.cue=new jn(0,0,""),e.state="CUE",-1===i.indexOf("--\x3e")){e.cue.id=i;continue}case"CUE":if(!e.cue){e.state="BADCUE";continue}try{Zn(i,e.cue,e.regionList)}catch(t){e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var s=-1!==i.indexOf("--\x3e");if(!i||s&&(a=!0)){e.oncue&&e.cue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}if(null===e.cue)continue;e.cue.text&&(e.cue.text+="\n"),e.cue.text+=i;continue;case"BADCUE":i||(e.state="ID")}}}catch(t){"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},e.flush=function(){var t=this;try{if((t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state||"BADWEBVTT"===t.state)throw new Error("Malformed WebVTT signature.")}catch(e){t.onparsingerror&&t.onparsingerror(e)}return t.onflush&&t.onflush(),this},t}(),ra=/\r\n|\n\r|\n|\r/g,ia=function(t,e,r){return void 0===r&&(r=0),t.slice(r,r+e.length)===e},na=function(t){for(var e=5381,r=t.length;r;)e=33*e^t.charCodeAt(--r);return(e>>>0).toString()};function aa(t,e,r){return na(t.toString())+na(e.toString())+na(r)}function sa(t,e,r,i,n,a,s){var o,l,u,h=new ea,d=vt(new Uint8Array(t)).trim().replace(ra,"\n").split("\n"),c=[],f=(o=e.baseTime,void 0===(l=e.timescale)&&(l=1),Oi(o,9e4,1/l)),g="00:00.000",v=0,m=0,p=!0;h.oncue=function(t){var e=r[i],a=r.ccOffset,s=(v-f)/9e4;null!=e&&e.new&&(void 0!==m?a=r.ccOffset=e.start:function(t,e,r){var i=t[e],n=t[i.prevCC];if(!n||!n.new&&i.new)return t.ccOffset=t.presentationOffset=i.start,void(i.new=!1);for(;null!=(a=n)&&a.new;){var a;t.ccOffset+=i.start-n.start,i.new=!1,n=t[(i=n).prevCC]}t.presentationOffset=r}(r,i,s)),s&&(a=s-r.presentationOffset);var o=t.endTime-t.startTime,l=Gi(9e4*(t.startTime+a-m),9e4*n)/9e4;t.startTime=Math.max(l,0),t.endTime=Math.max(l+o,0);var u=t.text.trim();t.text=decodeURIComponent(encodeURIComponent(u)),t.id||(t.id=aa(t.startTime,t.endTime,u)),t.endTime>0&&c.push(t)},h.onparsingerror=function(t){u=t},h.onflush=function(){u?s(u):a(c)},d.forEach((function(t){if(p){if(ia(t,"X-TIMESTAMP-MAP=")){p=!1,t.slice(16).split(",").forEach((function(t){ia(t,"LOCAL:")?g=t.slice(6):ia(t,"MPEGTS:")&&(v=parseInt(t.slice(7)))}));try{m=function(t){var e=parseInt(t.slice(-3)),r=parseInt(t.slice(-6,-4)),i=parseInt(t.slice(-9,-7)),n=t.length>9?parseInt(t.substring(0,t.indexOf(":"))):0;if(!(y(e)&&y(r)&&y(i)&&y(n)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+t);return e+=1e3*r,(e+=6e4*i)+36e5*n}(g)/1e3}catch(t){u=t}return}""===t&&(p=!1)}h.parse(t+"\n")})),h.flush()}var oa="stpp.ttml.im1t",la=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ua=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,ha={left:"start",center:"center",right:"end",start:"start",end:"end"};function da(t,e,r,i){var n=bt(new Uint8Array(t),["mdat"]);if(0!==n.length){var a,s,l,u,h=n.map((function(t){return vt(t)})),d=(a=e.baseTime,s=1,void 0===(l=e.timescale)&&(l=1),void 0===u&&(u=!1),Oi(a,s,1/l,u));try{h.forEach((function(t){return r(function(t,e){var r=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");var i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},n=Object.keys(i).reduce((function(t,e){return t[e]=r.getAttribute("ttp:"+e)||i[e],t}),{}),a="preserve"!==r.getAttribute("xml:space"),s=fa(ca(r,"styling","style")),l=fa(ca(r,"layout","region")),u=ca(r,"body","[begin]");return[].map.call(u,(function(t){var r=ga(t,a);if(!r||!t.hasAttribute("begin"))return null;var i=pa(t.getAttribute("begin"),n),u=pa(t.getAttribute("dur"),n),h=pa(t.getAttribute("end"),n);if(null===i)throw ma(t);if(null===h){if(null===u)throw ma(t);h=i+u}var d=new jn(i-e,h-e,r);d.id=aa(d.startTime,d.endTime,d.text);var c=function(t,e,r){var i="http://www.w3.org/ns/ttml#styling",n=null,a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],s=null!=t&&t.hasAttribute("style")?t.getAttribute("style"):null;return s&&r.hasOwnProperty(s)&&(n=r[s]),a.reduce((function(r,a){var s=va(e,i,a)||va(t,i,a)||va(n,i,a);return s&&(r[a]=s),r}),{})}(l[t.getAttribute("region")],s[t.getAttribute("style")],s),f=c.textAlign;if(f){var g=ha[f];g&&(d.lineAlign=g),d.align=f}return o(d,c),d})).filter((function(t){return null!==t}))}(t,d))}))}catch(t){i(t)}}else i(new Error("Could not parse IMSC1 mdat"))}function ca(t,e,r){var i=t.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(r)):[]}function fa(t){return t.reduce((function(t,e){var r=e.getAttribute("xml:id");return r&&(t[r]=e),t}),{})}function ga(t,e){return[].slice.call(t.childNodes).reduce((function(t,r,i){var n;return"br"===r.nodeName&&i?t+"\n":null!=(n=r.childNodes)&&n.length?ga(r,e):e?t+r.textContent.trim().replace(/\s+/g," "):t+r.textContent}),"")}function va(t,e,r){return t&&t.hasAttributeNS(e,r)?t.getAttributeNS(e,r):null}function ma(t){return new Error("Could not parse ttml timestamp "+t)}function pa(t,e){if(!t)return null;var r=Xn(t);return null===r&&(la.test(t)?r=function(t,e){var r=la.exec(t),i=(0|r[4])+(0|r[5])/e.subFrameRate;return 3600*(0|r[1])+60*(0|r[2])+(0|r[3])+i/e.frameRate}(t,e):ua.test(t)&&(r=function(t,e){var r=ua.exec(t),i=Number(r[1]);switch(r[2]){case"h":return 3600*i;case"m":return 60*i;case"ms":return 1e3*i;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}(t,e))),r}var ya=function(){function t(t){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){var e=new Wn(this,"textTrack1"),r=new Wn(this,"textTrack2"),i=new Wn(this,"textTrack3"),n=new Wn(this,"textTrack4");this.cea608Parser1=new Hn(1,e,r),this.cea608Parser2=new Hn(3,i,n)}t.on(T.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(T.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(T.MANIFEST_LOADING,this.onManifestLoading,this),t.on(T.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(T.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(T.FRAG_LOADING,this.onFragLoading,this),t.on(T.FRAG_LOADED,this.onFragLoaded,this),t.on(T.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(T.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(T.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(T.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(T.BUFFER_FLUSHING,this.onBufferFlushing,this)}var e=t.prototype;return e.destroy=function(){var t=this.hls;t.off(T.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(T.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(T.MANIFEST_LOADING,this.onManifestLoading,this),t.off(T.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(T.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(T.FRAG_LOADING,this.onFragLoading,this),t.off(T.FRAG_LOADED,this.onFragLoaded,this),t.off(T.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(T.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(T.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(T.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(T.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null},e.addCues=function(t,e,r,i,n){for(var a,s,o,l,u=!1,h=n.length;h--;){var d=n[h],c=(a=d[0],s=d[1],o=e,l=r,Math.min(s,l)-Math.max(a,o));if(c>=0&&(d[0]=Math.min(d[0],e),d[1]=Math.max(d[1],r),u=!0,c/(r-e)>.5))return}if(u||n.push([e,r]),this.config.renderTextTracksNatively){var f=this.captionsTracks[t];this.Cues.newCue(f,e,r,i)}else{var g=this.Cues.newCue(null,e,r,i);this.hls.trigger(T.CUES_PARSED,{type:"captions",cues:g,track:t})}},e.onInitPtsFound=function(t,e){var r=this,i=e.frag,n=e.id,a=e.initPTS,s=e.timescale,o=this.unparsedVttFrags;"main"===n&&(this.initPTS[i.cc]={baseTime:a,timescale:s}),o.length&&(this.unparsedVttFrags=[],o.forEach((function(t){r.onFragLoaded(T.FRAG_LOADED,t)})))},e.getExistingTrack=function(t){var e=this.media;if(e)for(var r=0;r<e.textTracks.length;r++){var i=e.textTracks[r];if(i[t])return i}return null},e.createCaptionsTrack=function(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)},e.createNativeTrack=function(t){if(!this.captionsTracks[t]){var e=this.captionsProperties,r=this.captionsTracks,i=this.media,n=e[t],a=n.label,s=n.languageCode,o=this.getExistingTrack(t);if(o)r[t]=o,ye(r[t]),me(r[t],i);else{var l=this.createTextTrack("captions",a,s);l&&(l[t]=!0,r[t]=l)}}},e.createNonNativeTrack=function(t){if(!this.nonNativeCaptionsTracks[t]){var e=this.captionsProperties[t];if(e){var r={_id:t,label:e.label,kind:"captions",default:!!e.media&&!!e.media.default,closedCaptions:e.media};this.nonNativeCaptionsTracks[t]=r,this.hls.trigger(T.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}}},e.createTextTrack=function(t,e,r){var i=this.media;if(i)return i.addTextTrack(t,e,r)},e.onMediaAttaching=function(t,e){this.media=e.media,this._cleanTracks()},e.onMediaDetaching=function(){var t=this.captionsTracks;Object.keys(t).forEach((function(e){ye(t[e]),delete t[e]})),this.nonNativeCaptionsTracks={}},e.onManifestLoading=function(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}},this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())},e._cleanTracks=function(){var t=this.media;if(t){var e=t.textTracks;if(e)for(var r=0;r<e.length;r++)ye(e[r])}},e.onSubtitleTracksUpdated=function(t,e){var r=this,i=e.subtitleTracks||[],n=i.some((function(t){return t.textCodec===oa}));if(this.config.enableWebVTT||n&&this.config.enableIMSC1){if(mn(this.tracks,i))return void(this.tracks=i);if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){var a=this.media?this.media.textTracks:null;this.tracks.forEach((function(t,e){var i;if(a&&e<a.length){for(var n=null,s=0;s<a.length;s++)if(Ta(a[s],t)){n=a[s];break}n&&(i=n)}if(i)ye(i);else{var o=r._captionsOrSubtitlesFromCharacteristics(t);(i=r.createTextTrack(o,t.name,t.lang))&&(i.mode="disabled")}i&&(i.groupId=t.groupId,r.textTracks.push(i))}))}else if(this.tracks.length){var s=this.tracks.map((function(t){return{label:t.name,kind:t.type.toLowerCase(),default:t.default,subtitleTrack:t}}));this.hls.trigger(T.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:s})}}},e._captionsOrSubtitlesFromCharacteristics=function(t){if(t.attrs.CHARACTERISTICS){var e=/transcribes-spoken-dialog/gi.test(t.attrs.CHARACTERISTICS),r=/describes-music-and-sound/gi.test(t.attrs.CHARACTERISTICS);if(e&&r)return"captions"}return"subtitles"},e.onManifestLoaded=function(t,e){var r=this;this.config.enableCEA708Captions&&e.captions&&e.captions.forEach((function(t){var e=/(?:CC|SERVICE)([1-4])/.exec(t.instreamId);if(e){var i="textTrack"+e[1],n=r.captionsProperties[i];n&&(n.label=t.name,t.lang&&(n.languageCode=t.lang),n.media=t)}}))},e.closedCaptionsForLevel=function(t){var e=this.hls.levels[t.level];return null==e?void 0:e.attrs["CLOSED-CAPTIONS"]},e.onFragLoading=function(t,e){var r=this.cea608Parser1,i=this.cea608Parser2,n=this.lastSn,a=this.lastPartIndex;if(this.enabled&&r&&i&&e.frag.type===he){var s,o,l=e.frag.sn,u=null!=(s=null==e||null==(o=e.part)?void 0:o.index)?s:-1;l===n+1||l===n&&u===a+1||(r.reset(),i.reset()),this.lastSn=l,this.lastPartIndex=u}},e.onFragLoaded=function(t,e){var r=e.frag,i=e.payload,n=this.initPTS,a=this.unparsedVttFrags;if(r.type===ce)if(i.byteLength){if(!n[r.cc])return a.push(e),void(n.length&&this.hls.trigger(T.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Missing initial subtitle PTS")}));var s=r.decryptdata,o="stats"in e;if(null==s||!s.encrypted||o){var l=this.tracks[r.level],u=this.vttCCs;u[r.cc]||(u[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),l&&l.textCodec===oa?this._parseIMSC1(r,i):this._parseVTTs(r,i,u)}}else this.hls.trigger(T.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})},e._parseIMSC1=function(t,e){var r=this,i=this.hls;da(e,this.initPTS[t.cc],(function(e){r._appendCues(e,t.level),i.trigger(T.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(e){D.log("Failed to parse IMSC1: "+e),i.trigger(T.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:e})}))},e._parseVTTs=function(t,e,r){var i,n=this,a=this.hls;sa(null!=(i=t.initSegment)&&i.data?_t(t.initSegment.data,new Uint8Array(e)):e,this.initPTS[t.cc],r,t.cc,t.start,(function(e){n._appendCues(e,t.level),a.trigger(T.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})}),(function(r){n._fallbackToIMSC1(t,e),D.log("Failed to parse VTT cue: "+r),a.trigger(T.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:r})}))},e._fallbackToIMSC1=function(t,e){var r=this,i=this.tracks[t.level];i.textCodec||da(e,this.initPTS[t.cc],(function(){i.textCodec=oa,r._parseIMSC1(t,e)}),(function(){i.textCodec="wvtt"}))},e._appendCues=function(t,e){var r=this.hls;if(this.config.renderTextTracksNatively){var i=this.textTracks[e];if(!i||"disabled"===i.mode)return;t.forEach((function(t){return pe(i,t)}))}else{var n=this.tracks[e];if(!n)return;var a=n.default?"default":"subtitles"+e;r.trigger(T.CUES_PARSED,{type:"subtitles",cues:t,track:a})}},e.onFragDecrypted=function(t,e){var r=e.frag;if(r.type===ce){if(!this.initPTS[r.cc])return void this.unparsedVttFrags.push(e);this.onFragLoaded(T.FRAG_LOADED,e)}},e.onSubtitleTracksCleared=function(){this.tracks=[],this.captionsTracks={}},e.onFragParsingUserdata=function(t,e){var r=this.cea608Parser1,i=this.cea608Parser2;if(this.enabled&&r&&i){var n=e.frag,a=e.samples;if(n.type!==he||"NONE"!==this.closedCaptionsForLevel(n))for(var s=0;s<a.length;s++){var o=a[s].bytes;if(o){var l=this.extractCea608Data(o);r.addData(a[s].pts,l[0]),i.addData(a[s].pts,l[1])}}}},e.onBufferFlushing=function(t,e){var r=e.startOffset,i=e.endOffset,n=e.endOffsetSubtitles,a=e.type,s=this.media;if(s&&!(s.currentTime<i)){if(!a||"video"===a){var o=this.captionsTracks;Object.keys(o).forEach((function(t){return Te(o[t],r,i)}))}if(this.config.renderTextTracksNatively&&0===r&&void 0!==n){var l=this.textTracks;Object.keys(l).forEach((function(t){return Te(l[t],r,n)}))}}},e.extractCea608Data=function(t){for(var e=[[],[]],r=31&t[0],i=2,n=0;n<r;n++){var a=t[i++],s=127&t[i++],o=127&t[i++];if((0!==s||0!==o)&&0!=(4&a)){var l=3&a;0!==l&&1!==l||(e[l].push(s),e[l].push(o))}}return e},t}();function Ta(t,e){return!!t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}var Ea=function(){function t(t){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}var e=t.prototype;return e.setStreamController=function(t){this.streamController=t},e.destroy=function(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null},e.registerListeners=function(){var t=this.hls;t.on(T.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(T.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(T.MANIFEST_PARSED,this.onManifestParsed,this),t.on(T.BUFFER_CODECS,this.onBufferCodecs,this),t.on(T.MEDIA_DETACHING,this.onMediaDetaching,this)},e.unregisterListener=function(){var t=this.hls;t.off(T.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(T.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(T.MANIFEST_PARSED,this.onManifestParsed,this),t.off(T.BUFFER_CODECS,this.onBufferCodecs,this),t.off(T.MEDIA_DETACHING,this.onMediaDetaching,this)},e.onFpsDropLevelCapping=function(t,e){var r=this.hls.levels[e.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})},e.onMediaAttaching=function(t,e){this.media=e.media instanceof HTMLVideoElement?e.media:null,this.clientRect=null},e.onManifestParsed=function(t,e){var r=this.hls;this.restrictedLevels=[],this.firstLevel=e.firstLevel,r.config.capLevelToPlayerSize&&e.video&&this.startCapping()},e.onBufferCodecs=function(t,e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},e.onMediaDetaching=function(){this.stopCapping()},e.detectPlayerSize=function(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){var t=this.hls.levels;if(t.length){var e=this.hls;e.autoLevelCapping=this.getMaxLevel(t.length-1),e.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=e.autoLevelCapping}}},e.getMaxLevel=function(e){var r=this,i=this.hls.levels;if(!i.length)return-1;var n=i.filter((function(t,i){return r.isLevelAllowed(t)&&i<=e}));return this.clientRect=null,t.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},e.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},e.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)},e.getDimensions=function(){if(this.clientRect)return this.clientRect;var t=this.media,e={width:0,height:0};if(t){var r=t.getBoundingClientRect();e.width=r.width,e.height=r.height,e.width||e.height||(e.width=r.right-r.left||t.width||0,e.height=r.bottom-r.top||t.height||0)}return this.clientRect=e,e},e.isLevelAllowed=function(t){return!this.restrictedLevels.some((function(e){return t.bitrate===e.bitrate&&t.width===e.width&&t.height===e.height}))},t.getMaxLevelByMediaSize=function(t,e,r){if(null==t||!t.length)return-1;for(var i,n,a=t.length-1,s=0;s<t.length;s+=1){var o=t[s];if((o.width>=e||o.height>=r)&&(i=o,!(n=t[s+1])||i.width!==n.width||i.height!==n.height)){a=s;break}}return a},a(t,[{key:"mediaWidth",get:function(){return this.getDimensions().width*this.contentScaleFactor}},{key:"mediaHeight",get:function(){return this.getDimensions().height*this.contentScaleFactor}},{key:"contentScaleFactor",get:function(){var t=1;if(!this.hls.config.ignoreDevicePixelRatio)try{t=self.devicePixelRatio}catch(t){}return t}}]),t}(),Sa=function(){function t(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}var e=t.prototype;return e.setStreamController=function(t){this.streamController=t},e.registerListeners=function(){this.hls.on(T.MEDIA_ATTACHING,this.onMediaAttaching,this)},e.unregisterListeners=function(){this.hls.off(T.MEDIA_ATTACHING,this.onMediaAttaching,this)},e.destroy=function(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null},e.onMediaAttaching=function(t,e){var r=this.hls.config;if(r.capLevelOnFPSDrop){var i=e.media instanceof self.HTMLVideoElement?e.media:null;this.media=i,i&&"function"==typeof i.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}},e.checkFPS=function(t,e,r){var i=performance.now();if(e){if(this.lastTime){var n=i-this.lastTime,a=r-this.lastDroppedFrames,s=e-this.lastDecodedFrames,o=1e3*a/n,l=this.hls;if(l.trigger(T.FPS_DROP,{currentDropped:a,currentDecoded:s,totalDroppedFrames:r}),o>0&&a>l.config.fpsDroppedMonitoringThreshold*s){var u=l.currentLevel;D.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=u)&&(u-=1,l.trigger(T.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:l.currentLevel}),l.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=r,this.lastDecodedFrames=e}},e.checkFPSInterval=function(){var t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){var e=t.getVideoPlaybackQuality();this.checkFPS(t,e.totalVideoFrames,e.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)},t}(),La="[eme]",Ra=function(){function t(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=t.CDMCleanupPromise?[t.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=D.debug.bind(D,La),this.log=D.log.bind(D,La),this.warn=D.warn.bind(D,La),this.error=D.error.bind(D,La),this.hls=e,this.config=e.config,this.registerListeners()}var e=t.prototype;return e.destroy=function(){this.unregisterListeners(),this.onMediaDetached();var t=this.config;t.requestMediaKeySystemAccessFunc=null,t.licenseXhrSetup=t.licenseResponseCallback=void 0,t.drmSystems=t.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null},e.registerListeners=function(){this.hls.on(T.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(T.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(T.MANIFEST_LOADED,this.onManifestLoaded,this)},e.unregisterListeners=function(){this.hls.off(T.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(T.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(T.MANIFEST_LOADED,this.onManifestLoaded,this)},e.getLicenseServerUrl=function(t){var e=this.config,r=e.drmSystems,i=e.widevineLicenseUrl,n=r[t];if(n)return n.licenseUrl;if(t===Y.WIDEVINE&&i)return i;throw new Error('no license server URL configured for key-system "'+t+'"')},e.getServerCertificateUrl=function(t){var e=this.config.drmSystems[t];if(e)return e.serverCertificateUrl;this.log('No Server Certificate in config.drmSystems["'+t+'"]')},e.attemptKeySystemAccess=function(t){var e=this,r=this.hls.levels,i=function(t,e,r){return!!t&&r.indexOf(t)===e},n=r.map((function(t){return t.audioCodec})).filter(i),a=r.map((function(t){return t.videoCodec})).filter(i);return n.length+a.length===0&&a.push("avc1.42e01e"),new Promise((function(r,i){!function t(s){var o=s.shift();e.getMediaKeysPromise(o,n,a).then((function(t){return r({keySystem:o,mediaKeys:t})})).catch((function(e){s.length?t(s):i(e instanceof Aa?e:new Aa({type:E.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_NO_ACCESS,error:e,fatal:!0},e.message))}))}(t)}))},e.requestMediaKeySystemAccess=function(t,e){var r=this.config.requestMediaKeySystemAccessFunc;if("function"!=typeof r){var i="Configured requestMediaKeySystemAccess is not a function "+r;return null===Z&&"http:"===self.location.protocol&&(i="navigator.requestMediaKeySystemAccess is not available over insecure protocol "+location.protocol),Promise.reject(new Error(i))}return r(t,e)},e.getMediaKeysPromise=function(t,e,r){var i=this,n=function(t,e,r,i){var n;switch(t){case Y.FAIRPLAY:n=["cenc","sinf"];break;case Y.WIDEVINE:case Y.PLAYREADY:n=["cenc"];break;case Y.CLEARKEY:n=["cenc","keyids"];break;default:throw new Error("Unknown key-system: "+t)}return function(t,e,r,i){return[{initDataTypes:t,persistentState:i.persistentState||"not-allowed",distinctiveIdentifier:i.distinctiveIdentifier||"not-allowed",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:e.map((function(t){return{contentType:'audio/mp4; codecs="'+t+'"',robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null}})),videoCapabilities:r.map((function(t){return{contentType:'video/mp4; codecs="'+t+'"',robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}}))}]}(n,e,r,i)}(t,e,r,this.config.drmSystemOptions),a=this.keySystemAccessPromises[t],s=null==a?void 0:a.keySystemAccess;if(!s){this.log('Requesting encrypted media "'+t+'" key-system access with config: '+JSON.stringify(n)),s=this.requestMediaKeySystemAccess(t,n);var o=this.keySystemAccessPromises[t]={keySystemAccess:s};return s.catch((function(e){i.log('Failed to obtain access to key-system "'+t+'": '+e)})),s.then((function(e){i.log('Access for key-system "'+e.keySystem+'" obtained');var r=i.fetchServerCertificate(t);return i.log('Create media-keys for "'+t+'"'),o.mediaKeys=e.createMediaKeys().then((function(e){return i.log('Media-keys created for "'+t+'"'),r.then((function(r){return r?i.setMediaKeysServerCertificate(e,t,r):e}))})),o.mediaKeys.catch((function(e){i.error('Failed to create media-keys for "'+t+'"}: '+e)})),o.mediaKeys}))}return s.then((function(){return a.mediaKeys}))},e.createMediaKeySessionContext=function(t){var e=t.decryptdata,r=t.keySystem,i=t.mediaKeys;this.log('Creating key-system session "'+r+'" keyId: '+pt(e.keyId||[]));var n=i.createSession(),a={decryptdata:e,keySystem:r,mediaKeys:i,mediaKeysSession:n,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a},e.renewKeySession=function(t){var e=t.decryptdata;if(e.pssh){var r=this.createMediaKeySessionContext(t),i=this.getKeyIdString(e);this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(r,"cenc",e.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(t)},e.getKeyIdString=function(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(null===t.keyId)throw new Error("keyId is null");return pt(t.keyId)},e.updateKeySession=function(t,e){var r,i=t.mediaKeysSession;return this.log('Updating key-session "'+i.sessionId+'" for keyID '+pt((null==(r=t.decryptdata)?void 0:r.keyId)||[])+"\n      } (data length: "+(e?e.byteLength:e)+")"),i.update(e)},e.selectKeySystemFormat=function(t){var e=Object.keys(t.levelkeys||{});return this.keyFormatPromise||(this.log("Selecting key-system from fragment (sn: "+t.sn+" "+t.type+": "+t.level+") key formats "+e.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(e)),this.keyFormatPromise},e.getKeyFormatPromise=function(t){var e=this;return new Promise((function(r,i){var n=J(e.config),a=t.map(z).filter((function(t){return!!t&&-1!==n.indexOf(t)}));return e.getKeySystemSelectionPromise(a).then((function(t){var e=t.keySystem,n=$(e);n?r(n):i(new Error('Unable to find format for key-system "'+e+'"'))})).catch(i)}))},e.loadKey=function(t){var e=this,r=t.keyInfo.decryptdata,i=this.getKeyIdString(r),n="(keyId: "+i+' format: "'+r.keyFormat+'" method: '+r.method+" uri: "+r.uri+")";this.log("Starting session for key "+n);var a=this.keyIdToKeySessionPromise[i];return a||(a=this.keyIdToKeySessionPromise[i]=this.getKeySystemForKeyPromise(r).then((function(i){var a=i.keySystem,s=i.mediaKeys;return e.throwIfDestroyed(),e.log("Handle encrypted media sn: "+t.frag.sn+" "+t.frag.type+": "+t.frag.level+" using key "+n),e.attemptSetMediaKeys(a,s).then((function(){e.throwIfDestroyed();var t=e.createMediaKeySessionContext({keySystem:a,mediaKeys:s,decryptdata:r});return e.generateRequestWithPreferredKeySession(t,"cenc",r.pssh,"playlist-key")}))}))).catch((function(t){return e.handleError(t)})),a},e.throwIfDestroyed=function(t){if(!this.hls)throw new Error("invalid state")},e.handleError=function(t){this.hls&&(this.error(t.message),t instanceof Aa?this.hls.trigger(T.ERROR,t.data):this.hls.trigger(T.ERROR,{type:E.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_NO_KEYS,error:t,fatal:!0}))},e.getKeySystemForKeyPromise=function(t){var e=this.getKeyIdString(t),r=this.keyIdToKeySessionPromise[e];if(!r){var i=z(t.keyFormat),n=i?[i]:J(this.config);return this.attemptKeySystemAccess(n)}return r},e.getKeySystemSelectionPromise=function(t){if(t.length||(t=J(this.config)),0===t.length)throw new Aa({type:E.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},"Missing key-system license configuration options "+JSON.stringify({drmSystems:this.config.drmSystems}));return this.attemptKeySystemAccess(t)},e._onMediaEncrypted=function(t){var e=this,r=t.initDataType,i=t.initData;if(this.debug('"'+t.type+'" event: init data type: "'+r+'"'),null!==i){var n,a;if("sinf"===r&&this.config.drmSystems[Y.FAIRPLAY]){var s=St(new Uint8Array(i));try{var o=K(JSON.parse(s).sinf),l=wt(new Uint8Array(o));if(!l)return;n=l.subarray(8,24),a=Y.FAIRPLAY}catch(t){return void this.warn('Failed to parse sinf "encrypted" event message initData')}}else{var u=function(t){if(!(t instanceof ArrayBuffer)||t.byteLength<32)return null;var e={version:0,systemId:"",kids:null,data:null},r=new DataView(t),i=r.getUint32(0);if(t.byteLength!==i&&i>44)return null;if(1886614376!==r.getUint32(4))return null;if(e.version=r.getUint32(8)>>>24,e.version>1)return null;e.systemId=pt(new Uint8Array(t,12,16));var n=r.getUint32(28);if(0===e.version){if(i-32<n)return null;e.data=new Uint8Array(t,32,n)}else if(1===e.version){e.kids=[];for(var a=0;a<n;a++)e.kids.push(new Uint8Array(t,32+16*a,16))}return e}(i);if(null===u)return;0===u.version&&u.systemId===Q&&u.data&&(n=u.data.subarray(8,24)),a=function(t){if(t===Q)return Y.WIDEVINE}(u.systemId)}if(a&&n){for(var h=pt(n),d=this.keyIdToKeySessionPromise,c=this.mediaKeySessions,f=d[h],g=function(){var t=c[v],a=t.decryptdata;if(a.pssh||!a.keyId)return"continue";var s=pt(a.keyId);return h===s||-1!==a.uri.replace(/-/g,"").indexOf(h)?(f=d[s],delete d[s],a.pssh=new Uint8Array(i),a.keyId=n,f=d[h]=f.then((function(){return e.generateRequestWithPreferredKeySession(t,r,i,"encrypted-event-key-match")})),"break"):void 0},v=0;v<c.length;v++){var m=g();if("continue"!==m&&"break"===m)break}f||(f=d[h]=this.getKeySystemSelectionPromise([a]).then((function(t){var a,s=t.keySystem,o=t.mediaKeys;e.throwIfDestroyed();var l=new Ut("ISO-23001-7",h,null!=(a=$(s))?a:"");return l.pssh=new Uint8Array(i),l.keyId=n,e.attemptSetMediaKeys(s,o).then((function(){e.throwIfDestroyed();var t=e.createMediaKeySessionContext({decryptdata:l,keySystem:s,mediaKeys:o});return e.generateRequestWithPreferredKeySession(t,r,i,"encrypted-event-no-match")}))}))),f.catch((function(t){return e.handleError(t)}))}}},e._onWaitingForKey=function(t){this.log('"'+t.type+'" event')},e.attemptSetMediaKeys=function(t,e){var r=this,i=this.setMediaKeysQueue.slice();this.log('Setting media-keys for "'+t+'"');var n=Promise.all(i).then((function(){if(!r.media)throw new Error("Attempted to set mediaKeys without media element attached");return r.media.setMediaKeys(e)}));return this.setMediaKeysQueue.push(n),n.then((function(){r.log('Media-keys set for "'+t+'"'),i.push(n),r.setMediaKeysQueue=r.setMediaKeysQueue.filter((function(t){return-1===i.indexOf(t)}))}))},e.generateRequestWithPreferredKeySession=function(t,e,r,i){var n,a,s=this,o=null==(n=this.config.drmSystems)||null==(a=n[t.keySystem])?void 0:a.generateRequest;if(o)try{var l=o.call(this.hls,e,r,t);if(!l)throw new Error("Invalid response from configured generateRequest filter");e=l.initDataType,r=t.decryptdata.pssh=l.initData?new Uint8Array(l.initData):null}catch(t){var u;if(this.warn(t.message),null!=(u=this.hls)&&u.config.debug)throw t}if(null===r)return this.log('Skipping key-session request for "'+i+'" (no initData)'),Promise.resolve(t);var h=this.getKeyIdString(t.decryptdata);this.log('Generating key-session request for "'+i+'": '+h+" (init data type: "+e+" length: "+(r?r.byteLength:null)+")");var d=new en;t.mediaKeysSession.onmessage=function(e){var r=t.mediaKeysSession;if(r){var i=e.messageType,n=e.message;s.log('"'+i+'" message event for session "'+r.sessionId+'" message size: '+n.byteLength),"license-request"===i||"license-renewal"===i?s.renewLicense(t,n).catch((function(t){s.handleError(t),d.emit("error",t)})):"license-release"===i?t.keySystem===Y.FAIRPLAY&&(s.updateKeySession(t,V("acknowledged")),s.removeSession(t)):s.warn('unhandled media key message type "'+i+'"')}else d.emit("error",new Error("invalid state"))},t.mediaKeysSession.onkeystatuseschange=function(e){if(t.mediaKeysSession){s.onKeyStatusChange(t);var r=t.keyStatus;d.emit("keyStatus",r),"expired"===r&&(s.warn(t.keySystem+" expired for key "+h),s.renewKeySession(t))}else d.emit("error",new Error("invalid state"))};var c=new Promise((function(t,e){d.on("error",e),d.on("keyStatus",(function(r){r.startsWith("usable")?t():"output-restricted"===r?e(new Aa({type:E.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):"internal-error"===r?e(new Aa({type:E.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},'key status changed to "'+r+'"')):"expired"===r?e(new Error("key expired while generating request")):s.warn('unhandled key status change "'+r+'"')}))}));return t.mediaKeysSession.generateRequest(e,r).then((function(){var e;s.log('Request generated for key-session "'+(null==(e=t.mediaKeysSession)?void 0:e.sessionId)+'" keyId: '+h)})).catch((function(t){throw new Aa({type:E.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_NO_SESSION,error:t,fatal:!1},"Error generating key-session request: "+t)})).then((function(){return c})).catch((function(e){throw d.removeAllListeners(),s.removeSession(t),e})).then((function(){return d.removeAllListeners(),t}))},e.onKeyStatusChange=function(t){var e=this;t.mediaKeysSession.keyStatuses.forEach((function(r,i){e.log('key status change "'+r+'" for keyStatuses keyId: '+pt("buffer"in i?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i))+" session keyId: "+pt(new Uint8Array(t.decryptdata.keyId||[]))+" uri: "+t.decryptdata.uri),t.keyStatus=r}))},e.fetchServerCertificate=function(t){var e=this.config,r=new(0,e.loader)(e),n=this.getServerCertificateUrl(t);return n?(this.log('Fetching serverCertificate for "'+t+'"'),new Promise((function(a,s){var o={responseType:"arraybuffer",url:n},l=e.certLoadPolicy.default,u={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},h={onSuccess:function(t,e,r,i){a(t.data)},onError:function(e,r,a,l){s(new Aa({type:E.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:i({url:o.url,data:void 0},e)},'"'+t+'" certificate request failed ('+n+"). Status: "+e.code+" ("+e.text+")"))},onTimeout:function(e,r,i){s(new Aa({type:E.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:i,response:{url:o.url,data:void 0}},'"'+t+'" certificate request timed out ('+n+")"))},onAbort:function(t,e,r){s(new Error("aborted"))}};r.load(o,u,h)}))):Promise.resolve()},e.setMediaKeysServerCertificate=function(t,e,r){var i=this;return new Promise((function(n,a){t.setServerCertificate(r).then((function(a){i.log("setServerCertificate "+(a?"success":"not supported by CDM")+" ("+(null==r?void 0:r.byteLength)+') on "'+e+'"'),n(t)})).catch((function(t){a(new Aa({type:E.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:t,fatal:!0},t.message))}))}))},e.renewLicense=function(t,e){var r=this;return this.requestLicense(t,new Uint8Array(e)).then((function(e){return r.updateKeySession(t,new Uint8Array(e)).catch((function(t){throw new Aa({type:E.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:t,fatal:!0},t.message)}))}))},e.setupLicenseXHR=function(t,e,r,i){var n=this,a=this.config.licenseXhrSetup;return a?Promise.resolve().then((function(){if(!r.decryptdata)throw new Error("Key removed");return a.call(n.hls,t,e,r,i)})).catch((function(s){if(!r.decryptdata)throw s;return t.open("POST",e,!0),a.call(n.hls,t,e,r,i)})).then((function(r){return t.readyState||t.open("POST",e,!0),{xhr:t,licenseChallenge:r||i}})):(t.open("POST",e,!0),Promise.resolve({xhr:t,licenseChallenge:i}))},e.requestLicense=function(t,e){var r=this,i=this.config.keyLoadPolicy.default;return new Promise((function(n,a){var s=r.getLicenseServerUrl(t.keySystem);r.log("Sending license request to URL: "+s);var o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=function(){if(!r.hls||!t.mediaKeysSession)return a(new Error("invalid state"));if(4===o.readyState)if(200===o.status){r._requestLicenseFailureCount=0;var l=o.response;r.log("License received "+(l instanceof ArrayBuffer?l.byteLength:l));var u=r.config.licenseResponseCallback;if(u)try{l=u.call(r.hls,o,s,t)}catch(t){r.error(t)}n(l)}else{var h=i.errorRetry,d=h?h.maxNumRetry:0;if(r._requestLicenseFailureCount++,r._requestLicenseFailureCount>d||o.status>=400&&o.status<500)a(new Aa({type:E.KEY_SYSTEM_ERROR,details:S.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:s,data:void 0,code:o.status,text:o.statusText}},"License Request XHR failed ("+s+"). Status: "+o.status+" ("+o.statusText+")"));else{var c=d-r._requestLicenseFailureCount+1;r.warn("Retrying license request, "+c+" attempts left"),r.requestLicense(t,e).then(n,a)}}},t.licenseXhr&&t.licenseXhr.readyState!==XMLHttpRequest.DONE&&t.licenseXhr.abort(),t.licenseXhr=o,r.setupLicenseXHR(o,s,t,e).then((function(t){var e=t.xhr,r=t.licenseChallenge;e.send(r)}))}))},e.onMediaAttached=function(t,e){if(this.config.emeEnabled){var r=e.media;this.media=r,r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey)}},e.onMediaDetached=function(){var e=this,r=this.media,i=this.mediaKeySessions;r&&(r.removeEventListener("encrypted",this.onMediaEncrypted),r.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Ut.clearKeyUriToKeyIdMap();var n=i.length;t.CDMCleanupPromise=Promise.all(i.map((function(t){return e.removeSession(t)})).concat(null==r?void 0:r.setMediaKeys(null).catch((function(t){e.log("Could not clear media keys: "+t+". media.src: "+(null==r?void 0:r.src))})))).then((function(){n&&(e.log("finished closing key sessions and clearing media keys"),i.length=0)})).catch((function(t){e.log("Could not close sessions and clear media keys: "+t+". media.src: "+(null==r?void 0:r.src))}))},e.onManifestLoaded=function(t,e){var r=e.sessionKeys;if(r&&this.config.emeEnabled&&!this.keyFormatPromise){var i=r.reduce((function(t,e){return-1===t.indexOf(e.keyFormat)&&t.push(e.keyFormat),t}),[]);this.log("Selecting key-system from session-keys "+i.join(", ")),this.keyFormatPromise=this.getKeyFormatPromise(i)}},e.removeSession=function(t){var e=this,r=t.mediaKeysSession,i=t.licenseXhr;if(r){this.log("Remove licenses and keys and close session "+r.sessionId),r.onmessage=null,r.onkeystatuseschange=null,i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),t.mediaKeysSession=t.decryptdata=t.licenseXhr=void 0;var n=this.mediaKeySessions.indexOf(t);return n>-1&&this.mediaKeySessions.splice(n,1),r.remove().catch((function(t){e.log("Could not remove session: "+t)})).then((function(){return r.close()})).catch((function(t){e.log("Could not close session: "+t)}))}},t}();Ra.CDMCleanupPromise=void 0;var Aa=function(t){function e(e,r){var i;return(i=t.call(this,r)||this).data=void 0,e.error||(e.error=new Error(r)),i.data=e,e.err=e.error,i}return l(e,t),e}(f(Error)),ka="m",ba="a",Da="v",Ia="av",wa="i",Ca="tt",_a=function(){function t(e){var r=this;this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=function(){r.initialized&&(r.starved=!0),r.buffering=!0},this.onPlaying=function(){r.initialized||(r.initialized=!0),r.buffering=!1},this.applyPlaylistData=function(t){try{r.apply(t,{ot:ka,su:!r.initialized})}catch(t){D.warn("Could not generate manifest CMCD data.",t)}},this.applyFragmentData=function(t){try{var e=t.frag,i=r.hls.levels[e.level],n=r.getObjectType(e),a={d:1e3*e.duration,ot:n};n!==Da&&n!==ba&&n!=Ia||(a.br=i.bitrate/1e3,a.tb=r.getTopBandwidth(n)/1e3,a.bl=r.getBufferLength(n)),r.apply(t,a)}catch(t){D.warn("Could not generate segment CMCD data.",t)}},this.hls=e;var i=this.config=e.config,n=i.cmcd;null!=n&&(i.pLoader=this.createPlaylistLoader(),i.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||t.uuid(),this.cid=n.contentId,this.useHeaders=!0===n.useHeaders,this.registerListeners())}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(T.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(T.MEDIA_DETACHED,this.onMediaDetached,this),t.on(T.BUFFER_CREATED,this.onBufferCreated,this)},e.unregisterListeners=function(){var t=this.hls;t.off(T.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(T.MEDIA_DETACHED,this.onMediaDetached,this),t.off(T.BUFFER_CREATED,this.onBufferCreated,this)},e.destroy=function(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null},e.onMediaAttached=function(t,e){this.media=e.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)},e.onMediaDetached=function(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)},e.onBufferCreated=function(t,e){var r,i;this.audioBuffer=null==(r=e.tracks.audio)?void 0:r.buffer,this.videoBuffer=null==(i=e.tracks.video)?void 0:i.buffer},e.createData=function(){var t;return{v:1,sf:"h",sid:this.sid,cid:this.cid,pr:null==(t=this.media)?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}},e.apply=function(e,r){void 0===r&&(r={}),o(r,this.createData());var i=r.ot===wa||r.ot===Da||r.ot===Ia;if(this.starved&&i&&(r.bs=!0,r.su=!0,this.starved=!1),null==r.su&&(r.su=this.buffering),this.useHeaders){var n=t.toHeaders(r);if(!Object.keys(n).length)return;e.headers||(e.headers={}),o(e.headers,n)}else{var a=t.toQuery(r);if(!a)return;e.url=t.appendQueryToUri(e.url,a)}},e.getObjectType=function(t){var e=t.type;return"subtitle"===e?Ca:"initSegment"===t.sn?wa:"audio"===e?ba:"main"===e?this.hls.audioTracks.length?Da:Ia:void 0},e.getTopBandwidth=function(t){var e,r=0,i=this.hls;if(t===ba)e=i.audioTracks;else{var n=i.maxAutoLevel,a=n>-1?n+1:i.levels.length;e=i.levels.slice(0,a)}for(var s,o=v(e);!(s=o()).done;){var l=s.value;l.bitrate>r&&(r=l.bitrate)}return r>0?r:NaN},e.getBufferLength=function(t){var e=this.hls.media,r=t===ba?this.audioBuffer:this.videoBuffer;return r&&e?1e3*Ar.bufferInfo(r,e.currentTime,this.config.maxBufferHole).len:NaN},e.createPlaylistLoader=function(){var t=this.config.pLoader,e=this.applyPlaylistData,r=t||this.config.loader;return function(){function t(t){this.loader=void 0,this.loader=new r(t)}var i=t.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(t,r,i){e(t),this.loader.load(t,r,i)},a(t,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),t}()},e.createFragmentLoader=function(){var t=this.config.fLoader,e=this.applyFragmentData,r=t||this.config.loader;return function(){function t(t){this.loader=void 0,this.loader=new r(t)}var i=t.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(t,r,i){e(t),this.loader.load(t,r,i)},a(t,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),t}()},t.uuid=function(){var t=URL.createObjectURL(new Blob),e=t.toString();return URL.revokeObjectURL(t),e.slice(e.lastIndexOf("/")+1)},t.serialize=function(t){for(var e,r=[],i=function(t){return!Number.isNaN(t)&&null!=t&&""!==t&&!1!==t},n=function(t){return Math.round(t)},a=function(t){return 100*n(t/100)},s={br:n,d:n,bl:a,dl:a,mtp:a,nor:function(t){return encodeURIComponent(t)},rtp:a,tb:n},o=v(Object.keys(t||{}).sort());!(e=o()).done;){var l=e.value,u=t[l];if(i(u)&&!("v"===l&&1===u||"pr"==l&&1===u)){var h=s[l];h&&(u=h(u));var d=typeof u,c=void 0;c="ot"===l||"sf"===l||"st"===l?l+"="+u:"boolean"===d?l:"number"===d?l+"="+u:l+"="+JSON.stringify(u),r.push(c)}}return r.join(",")},t.toHeaders=function(e){for(var r={},i=["Object","Request","Session","Status"],n=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3},s=0,o=Object.keys(e);s<o.length;s++){var l=o[s];n[null!=a[l]?a[l]:1][l]=e[l]}for(var u=0;u<n.length;u++){var h=t.serialize(n[u]);h&&(r["CMCD-"+i[u]]=h)}return r},t.toQuery=function(e){return"CMCD="+encodeURIComponent(t.serialize(e))},t.appendQueryToUri=function(t,e){if(!e)return t;var r=t.includes("?")?"&":"?";return""+t+r+e},t}(),Pa=function(){function t(t){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=t,this.log=D.log.bind(D,"[content-steering]:"),this.registerListeners()}var e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(T.MANIFEST_LOADING,this.onManifestLoading,this),t.on(T.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(T.MANIFEST_PARSED,this.onManifestParsed,this),t.on(T.ERROR,this.onError,this)},e.unregisterListeners=function(){var t=this.hls;t&&(t.off(T.MANIFEST_LOADING,this.onManifestLoading,this),t.off(T.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(T.MANIFEST_PARSED,this.onManifestParsed,this),t.off(T.ERROR,this.onError,this))},e.startLoad=function(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){var t=Math.max(1e3*this.timeToLoad-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,t)}else this.loadSteeringManifest(this.uri)},e.stopLoad=function(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)},e.destroy=function(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null},e.removeLevel=function(t){var e=this.levels;e&&(this.levels=e.filter((function(e){return e!==t})))},e.onManifestLoading=function(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null},e.onManifestLoaded=function(t,e){var r=e.contentSteering;null!==r&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())},e.onManifestParsed=function(t,e){this.audioTracks=e.audioTracks,this.subtitleTracks=e.subtitleTracks},e.onError=function(t,e){var r=e.errorAction;if((null==r?void 0:r.action)===Ze&&r.flags===rr){var i=this.pathwayPriority,n=this.pathwayId;this.penalizedPathways[n]||(this.penalizedPathways[n]=performance.now()),!i&&this.levels&&(i=this.levels.reduce((function(t,e){return-1===t.indexOf(e.pathwayId)&&t.push(e.pathwayId),t}),[])),i&&i.length>1&&(this.updatePathwayPriority(i),r.resolved=this.pathwayId!==n)}},e.filterParsedLevels=function(t){this.levels=t;var e=this.getLevelsForPathway(this.pathwayId);if(0===e.length){var r=t[0].pathwayId;this.log("No levels found in Pathway "+this.pathwayId+'. Setting initial Pathway to "'+r+'"'),e=this.getLevelsForPathway(r),this.pathwayId=r}return e.length!==t.length?(this.log("Found "+e.length+"/"+t.length+' levels in Pathway "'+this.pathwayId+'"'),e):t},e.getLevelsForPathway=function(t){return null===this.levels?[]:this.levels.filter((function(e){return t===e.pathwayId}))},e.updatePathwayPriority=function(t){var e;this.pathwayPriority=t;var r=this.penalizedPathways,i=performance.now();Object.keys(r).forEach((function(t){i-r[t]>3e5&&delete r[t]}));for(var n=0;n<t.length;n++){var a=t[n];if(!r[a]){if(a===this.pathwayId)return;var s=this.hls.nextLoadLevel,o=this.hls.levels[s];if((e=this.getLevelsForPathway(a)).length>0){this.log('Setting Pathway to "'+a+'"'),this.pathwayId=a,this.hls.trigger(T.LEVELS_UPDATED,{levels:e});var l=this.hls.levels[s];o&&l&&this.levels&&(l.attrs["STABLE-VARIANT-ID"]!==o.attrs["STABLE-VARIANT-ID"]&&l.bitrate!==o.bitrate&&this.log("Unstable Pathways change from bitrate "+o.bitrate+" to "+l.bitrate),this.hls.nextLoadLevel=s);break}}}},e.clonePathways=function(t){var e=this,r=this.levels;if(r){var i={},n={};t.forEach((function(t){var a=t.ID,s=t["BASE-ID"],l=t["URI-REPLACEMENT"];if(!r.some((function(t){return t.pathwayId===a}))){var u=e.getLevelsForPathway(s).map((function(t){var e=o({},t);e.details=void 0,e.url=Fa(t.uri,t.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l);var r=new C(t.attrs);r["PATHWAY-ID"]=a;var s=r.AUDIO&&r.AUDIO+"_clone_"+a,u=r.SUBTITLES&&r.SUBTITLES+"_clone_"+a;s&&(i[r.AUDIO]=s,r.AUDIO=s),u&&(n[r.SUBTITLES]=u,r.SUBTITLES=u),e.attrs=r;var h=new xe(e);return or(h,"audio",s),or(h,"text",u),h}));r.push.apply(r,u),xa(e.audioTracks,i,l,a),xa(e.subtitleTracks,n,l,a)}}))}},e.loadSteeringManifest=function(t){var e,r=this,i=this.hls.config,n=i.loader;this.loader&&this.loader.destroy(),this.loader=new n(i);try{e=new self.URL(t)}catch(e){return this.enabled=!1,void this.log("Failed to parse Steering Manifest URI: "+t)}if("data:"!==e.protocol){var a=0|(this.hls.bandwidthEstimate||i.abrEwmaDefaultEstimate);e.searchParams.set("_HLS_pathway",this.pathwayId),e.searchParams.set("_HLS_throughput",""+a)}var s={responseType:"json",url:e.href},o=i.steeringManifestLoadPolicy.default,l=o.errorRetry||o.timeoutRetry||{},u={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},h={onSuccess:function(t,i,n,a){r.log('Loaded steering manifest: "'+e+'"');var s=t.data;if(1===s.VERSION){r.updated=performance.now(),r.timeToLoad=s.TTL;var o=s["RELOAD-URI"],l=s["PATHWAY-CLONES"],u=s["PATHWAY-PRIORITY"];if(o)try{r.uri=new self.URL(o,e).href}catch(t){return r.enabled=!1,void r.log("Failed to parse Steering Manifest RELOAD-URI: "+o)}r.scheduleRefresh(r.uri||n.url),l&&r.clonePathways(l),u&&r.updatePathwayPriority(u)}else r.log("Steering VERSION "+s.VERSION+" not supported!")},onError:function(t,e,i,n){if(r.log("Error loading steering manifest: "+t.code+" "+t.text+" ("+e.url+")"),r.stopLoad(),410===t.code)return r.enabled=!1,void r.log("Steering manifest "+e.url+" no longer available");var a=1e3*r.timeToLoad;if(429!==t.code)r.scheduleRefresh(r.uri||e.url,a);else{var s=r.loader;if("function"==typeof(null==s?void 0:s.getResponseHeader)){var o=s.getResponseHeader("Retry-After");o&&(a=1e3*parseFloat(o))}r.log("Steering manifest "+e.url+" rate limited")}},onTimeout:function(t,e,i){r.log("Timeout loading steering manifest ("+e.url+")"),r.scheduleRefresh(r.uri||e.url)}};this.log("Requesting steering manifest: "+e),this.loader.load(s,u,h)},e.scheduleRefresh=function(t,e){var r=this;void 0===e&&(e=1e3*this.timeToLoad),self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout((function(){r.loadSteeringManifest(t)}),e)},t}();function xa(t,e,r,i){t&&Object.keys(e).forEach((function(n){var a=t.filter((function(t){return t.groupId===n})).map((function(t){var a=o({},t);return a.details=void 0,a.attrs=new C(a.attrs),a.url=a.attrs.URI=Fa(t.url,t.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",r),a.groupId=a.attrs["GROUP-ID"]=e[n],a.attrs["PATHWAY-ID"]=i,a}));t.push.apply(t,a)}))}function Fa(t,e,r,i){var n,a=i.HOST,s=i.PARAMS,o=i[r];e&&(n=null==o?void 0:o[e])&&(t=n);var l=new self.URL(t);return a&&!n&&(l.host=a),s&&Object.keys(s).sort().forEach((function(t){t&&l.searchParams.set(t,s[t])})),l.href}var Oa=/^age:\s*[\d.]+\s*$/im,Ma=function(){function t(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=t&&t.xhrSetup||null,this.stats=new x,this.retryDelay=0}var e=t.prototype;return e.destroy=function(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null},e.abortInternal=function(){var t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,4!==t.readyState&&(this.stats.aborted=!0,t.abort()))},e.abort=function(){var t;this.abortInternal(),null!=(t=this.callbacks)&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},e.load=function(t,e,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=e,this.callbacks=r,this.loadInternal()},e.loadInternal=function(){var t=this,e=this.config,r=this.context;if(e){var i=this.loader=new self.XMLHttpRequest,n=this.stats;n.loading.first=0,n.loaded=0;var a=this.xhrSetup;a?Promise.resolve().then((function(){if(!t.stats.aborted)return a(i,r.url)})).catch((function(t){return i.open("GET",r.url,!0),a(i,r.url)})).then((function(){t.stats.aborted||t.openAndSendXhr(i,r,e)})).catch((function(e){t.callbacks.onError({code:i.status,text:e.message},r,i,n)})):this.openAndSendXhr(i,r,e)}},e.openAndSendXhr=function(t,e,r){t.readyState||t.open("GET",e.url,!0);var i=this.context.headers,n=r.loadPolicy,a=n.maxTimeToFirstByteMs,s=n.maxLoadTimeMs;if(i)for(var o in i)t.setRequestHeader(o,i[o]);e.rangeEnd&&t.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=e.responseType,self.clearTimeout(this.requestTimeout),r.timeout=a&&y(a)?a:s,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),t.send()},e.readystatechange=function(){var t=this.context,e=this.loader,r=this.stats;if(t&&e){var i=e.readyState,n=this.config;if(!r.aborted&&i>=2&&(0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),n.timeout!==n.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),n.timeout=n.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),4===i)){self.clearTimeout(this.requestTimeout),e.onreadystatechange=null,e.onprogress=null;var a=e.status,s="text"!==e.responseType;if(a>=200&&a<300&&(s&&e.response||null!==e.responseText)){r.loading.end=Math.max(self.performance.now(),r.loading.first);var o=s?e.response:e.responseText,l="arraybuffer"===e.responseType?o.byteLength:o.length;if(r.loaded=r.total=l,r.bwEstimate=8e3*r.total/(r.loading.end-r.loading.first),!this.callbacks)return;var u=this.callbacks.onProgress;if(u&&u(r,t,o,e),!this.callbacks)return;var h={url:e.responseURL,data:o,code:a};this.callbacks.onSuccess(h,r,t,e)}else{var d=n.loadPolicy.errorRetry;We(d,r.retry,!1,a)?this.retry(d):(D.error(a+" while loading "+t.url),this.callbacks.onError({code:a,text:e.statusText},t,e,r))}}}},e.loadtimeout=function(){var t,e=null==(t=this.config)?void 0:t.loadPolicy.timeoutRetry;if(We(e,this.stats.retry,!0))this.retry(e);else{D.warn("timeout while loading "+this.context.url);var r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}},e.retry=function(t){var e=this.context,r=this.stats;this.retryDelay=Ve(t,r.retry),r.retry++,D.warn((status?"HTTP Status "+status:"Timeout")+" while loading "+e.url+", retrying "+r.retry+"/"+t.maxNumRetry+" in "+this.retryDelay+"ms"),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)},e.loadprogress=function(t){var e=this.stats;e.loaded=t.loaded,t.lengthComputable&&(e.total=t.total)},e.getCacheAge=function(){var t=null;if(this.loader&&Oa.test(this.loader.getAllResponseHeaders())){var e=this.loader.getResponseHeader("age");t=e?parseFloat(e):null}return t},e.getResponseHeader=function(t){return this.loader&&new RegExp("^"+t+":\\s*[\\d.]+\\s*$","im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(t):null},t}(),Na=/(\d+)-(\d+)\/(\d+)/,Ua=function(){function t(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||Ba,this.controller=new self.AbortController,this.stats=new x}var e=t.prototype;return e.destroy=function(){this.loader=this.callbacks=null,this.abortInternal()},e.abortInternal=function(){var t=this.response;null!=t&&t.ok||(this.stats.aborted=!0,this.controller.abort())},e.abort=function(){var t;this.abortInternal(),null!=(t=this.callbacks)&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},e.load=function(t,e,r){var i=this,n=this.stats;if(n.loading.start)throw new Error("Loader can only be used once.");n.loading.start=self.performance.now();var a=function(t,e){var r={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(o({},t.headers))};return t.rangeEnd&&r.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),r}(t,this.controller.signal),s=r.onProgress,l="arraybuffer"===t.responseType,u=l?"byteLength":"length",h=e.loadPolicy,d=h.maxTimeToFirstByteMs,c=h.maxLoadTimeMs;this.context=t,this.config=e,this.callbacks=r,this.request=this.fetchSetup(t,a),self.clearTimeout(this.requestTimeout),e.timeout=d&&y(d)?d:c,this.requestTimeout=self.setTimeout((function(){i.abortInternal(),r.onTimeout(n,t,i.response)}),e.timeout),self.fetch(this.request).then((function(a){i.response=i.loader=a;var o=Math.max(self.performance.now(),n.loading.start);if(self.clearTimeout(i.requestTimeout),e.timeout=c,i.requestTimeout=self.setTimeout((function(){i.abortInternal(),r.onTimeout(n,t,i.response)}),c-(o-n.loading.start)),!a.ok){var u=a.status,h=a.statusText;throw new Ga(h||"fetch, bad network response",u,a)}return n.loading.first=o,n.total=function(t){var e=t.get("Content-Range");if(e){var r=function(t){var e=Na.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}(e);if(y(r))return r}var i=t.get("Content-Length");if(i)return parseInt(i)}(a.headers)||n.total,s&&y(e.highWaterMark)?i.loadProgressively(a,n,t,e.highWaterMark,s):l?a.arrayBuffer():"json"===t.responseType?a.json():a.text()})).then((function(a){var o=i.response;self.clearTimeout(i.requestTimeout),n.loading.end=Math.max(self.performance.now(),n.loading.first);var l=a[u];l&&(n.loaded=n.total=l);var h={url:o.url,data:a,code:o.status};s&&!y(e.highWaterMark)&&s(n,t,a,o),r.onSuccess(h,n,t,o)})).catch((function(e){if(self.clearTimeout(i.requestTimeout),!n.aborted){var a=e&&e.code||0,s=e?e.message:null;r.onError({code:a,text:s},t,e?e.details:null,n)}}))},e.getCacheAge=function(){var t=null;if(this.response){var e=this.response.headers.get("age");t=e?parseFloat(e):null}return t},e.getResponseHeader=function(t){return this.response?this.response.headers.get(t):null},e.loadProgressively=function(t,e,r,i,n){void 0===i&&(i=0);var a=new fn,s=t.body.getReader();return function o(){return s.read().then((function(s){if(s.done)return a.dataLength&&n(e,r,a.flush(),t),Promise.resolve(new ArrayBuffer(0));var l=s.value,u=l.length;return e.loaded+=u,u<i||a.dataLength?(a.push(l),a.dataLength>=i&&n(e,r,a.flush(),t)):n(e,r,l,t),o()})).catch((function(){return Promise.reject()}))}()},t}();function Ba(t,e){return new self.Request(t.url,e)}var Ga=function(t){function e(e,r,i){var n;return(n=t.call(this,e)||this).code=void 0,n.details=void 0,n.code=r,n.details=i,n}return l(e,t),e}(f(Error)),Ka=/\s/,Ha=i(i({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Ma,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:cn,bufferController:kn,capLevelController:Ea,errorController:nr,fpsController:Sa,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:Z,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null}},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:{newCue:function(t,e,r,i){for(var n,a,s,o,l,u=[],h=self.VTTCue||self.TextTrackCue,d=0;d<i.rows.length;d++)if(s=!0,o=0,l="",!(n=i.rows[d]).isEmpty()){for(var c,f=0;f<n.chars.length;f++)Ka.test(n.chars[f].uchar)&&s?o++:(l+=n.chars[f].uchar,s=!1);n.cueStartTime=e,e===r&&(r+=1e-4),o>=16?o--:o++;var g=ta(l.trim()),v=aa(e,r,g);null!=t&&null!=(c=t.cues)&&c.getCueById(v)||((a=new h(e,r,g)).id=v,a.line=d+1,a.align="left",a.position=10+Math.min(80,10*Math.floor(8*o/32)),u.push(a))}return t&&u.length&&(u.sort((function(t,e){return"auto"===t.line||"auto"===e.line?0:t.line>8&&e.line>8?e.line-t.line:t.line-e.line})),u.forEach((function(e){return pe(t,e)}))),u}},enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:yn,subtitleTrackController:En,timelineController:ya,audioStreamController:gn,audioTrackController:vn,emeController:Ra,cmcdController:_a,contentSteeringController:Pa});function Va(t){return t&&"object"==typeof t?Array.isArray(t)?t.map(Va):Object.keys(t).reduce((function(e,r){return e[r]=Va(t[r]),e}),{}):t}function Ya(t){var e=t.loader;e!==Ua&&e!==Ma?(D.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):function(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch(t){}return!1}()&&(t.loader=Ua,t.progressive=!0,t.enableSoftwareAES=!0,D.log("[config]: Progressive streaming enabled, using FetchLoader"))}var Wa=function(){function t(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new en,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,b(e.debug||!1,"Hls instance");var r=this.config=function(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(void 0!==e.liveMaxLatencyDurationCount&&(void 0===e.liveSyncDurationCount||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(void 0!==e.liveMaxLatencyDuration&&(void 0===e.liveSyncDuration||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');var r=Va(t),n=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return["manifest","level","frag"].forEach((function(t){var i=("level"===t?"playlist":t)+"LoadPolicy",a=void 0===e[i],s=[];n.forEach((function(n){var o=t+"Loading"+n,l=e[o];if(void 0!==l&&a){s.push(o);var u=r[i].default;switch(e[i]={default:u},n){case"TimeOut":u.maxLoadTimeMs=l,u.maxTimeToFirstByteMs=l;break;case"MaxRetry":u.errorRetry.maxNumRetry=l,u.timeoutRetry.maxNumRetry=l;break;case"RetryDelay":u.errorRetry.retryDelayMs=l,u.timeoutRetry.retryDelayMs=l;break;case"MaxRetryTimeout":u.errorRetry.maxRetryDelayMs=l,u.timeoutRetry.maxRetryDelayMs=l}}})),s.length&&D.warn('hls.js config: "'+s.join('", "')+'" setting(s) are deprecated, use "'+i+'": '+JSON.stringify(e[i]))})),i(i({},r),e)}(t.DefaultConfig,e);this.userConfig=e,this._autoLevelCapping=-1,r.progressive&&Ya(r);var n=r.abrController,a=r.bufferController,s=r.capLevelController,o=r.errorController,l=r.fpsController,u=new o(this),h=this.abrController=new n(this),d=this.bufferController=new a(this),c=this.capLevelController=new s(this),f=new l(this),g=new ve(this),v=new be(this),m=r.contentSteeringController,p=m?new m(this):null,y=this.levelController=new sr(this,p),E=new fr(this),S=new Sr(this.config),L=this.streamController=new un(this,E,S);c.setStreamController(L),f.setStreamController(L);var R=[g,y,L];p&&R.splice(1,0,p),this.networkControllers=R;var A=[h,d,c,f,v,E];this.audioTrackController=this.createController(r.audioTrackController,R);var k=r.audioStreamController;k&&R.push(new k(this,E,S)),this.subtitleTrackController=this.createController(r.subtitleTrackController,R);var I=r.subtitleStreamController;I&&R.push(new I(this,E,S)),this.createController(r.timelineController,A),S.emeController=this.emeController=this.createController(r.emeController,A),this.cmcdController=this.createController(r.cmcdController,A),this.latencyController=this.createController(De,A),this.coreComponents=A,R.push(u);var w=u.onErrorOut;"function"==typeof w&&this.on(T.ERROR,w,u)}t.isSupported=function(){return function(){var t=zr();if(!t)return!1;var e=Qr(),r=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),i=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove;return!!r&&!!i}()};var e=t.prototype;return e.createController=function(t,e){if(t){var r=new t(this);return e&&e.push(r),r}return null},e.on=function(t,e,r){void 0===r&&(r=this),this._emitter.on(t,e,r)},e.once=function(t,e,r){void 0===r&&(r=this),this._emitter.once(t,e,r)},e.removeAllListeners=function(t){this._emitter.removeAllListeners(t)},e.off=function(t,e,r,i){void 0===r&&(r=this),this._emitter.off(t,e,r,i)},e.listeners=function(t){return this._emitter.listeners(t)},e.emit=function(t,e,r){return this._emitter.emit(t,e,r)},e.trigger=function(t,e){if(this.config.debug)return this.emit(t,t,e);try{return this.emit(t,t,e)}catch(e){D.error("An internal error happened while handling event "+t+'. Error message: "'+e.message+'". Here is a stacktrace:',e),this.trigger(T.ERROR,{type:E.OTHER_ERROR,details:S.INTERNAL_EXCEPTION,fatal:!1,event:t,error:e})}return!1},e.listenerCount=function(t){return this._emitter.listenerCount(t)},e.destroy=function(){D.log("destroy"),this.trigger(T.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach((function(t){return t.destroy()})),this.networkControllers.length=0,this.coreComponents.forEach((function(t){return t.destroy()})),this.coreComponents.length=0;var t=this.config;t.xhrSetup=t.fetchSetup=void 0,this.userConfig=null},e.attachMedia=function(t){D.log("attachMedia"),this._media=t,this.trigger(T.MEDIA_ATTACHING,{media:t})},e.detachMedia=function(){D.log("detachMedia"),this.trigger(T.MEDIA_DETACHING,void 0),this._media=null},e.loadSource=function(t){this.stopLoad();var e=this.media,r=this.url,i=this.url=p.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});D.log("loadSource:"+i),e&&r&&r!==i&&this.bufferController.hasSourceTypes()&&(this.detachMedia(),this.attachMedia(e)),this.trigger(T.MANIFEST_LOADING,{url:t})},e.startLoad=function(t){void 0===t&&(t=-1),D.log("startLoad("+t+")"),this.networkControllers.forEach((function(e){e.startLoad(t)}))},e.stopLoad=function(){D.log("stopLoad"),this.networkControllers.forEach((function(t){t.stopLoad()}))},e.swapAudioCodec=function(){D.log("swapAudioCodec"),this.streamController.swapAudioCodec()},e.recoverMediaError=function(){D.log("recoverMediaError");var t=this._media;this.detachMedia(),t&&this.attachMedia(t)},e.removeLevel=function(t,e){void 0===e&&(e=0),this.levelController.removeLevel(t,e)},a(t,[{key:"levels",get:function(){var t=this.levelController.levels;return t||[]}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(t){D.log("set currentLevel:"+t),this.loadLevel=t,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(t){D.log("set nextLevel:"+t),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){D.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(t){D.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(t){D.log("set startLevel:"+t),-1!==t&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:function(t){var e=!!t;e!==this.config.capLevelToPlayerSize&&(e?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=e)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(t){this._autoLevelCapping!==t&&(D.log("set autoLevelCapping:"+t),this._autoLevelCapping=t)}},{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"ttfbEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimateTTFB():NaN}},{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:function(t){Ie.indexOf(t)>-1&&(this._maxHdcpLevel=t)}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){var t=this.levels,e=this.config.minAutoBitrate;if(!t)return 0;for(var r=t.length,i=0;i<r;i++)if(t[i].maxBitrate>=e)return i;return 0}},{key:"maxAutoLevel",get:function(){var t,e=this.levels,r=this.autoLevelCapping,i=this.maxHdcpLevel;if(t=-1===r&&e&&e.length?e.length-1:r,i)for(var n=t;n--;){var a=e[n].attrs["HDCP-LEVEL"];if(a&&a<=i)return n}return t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(t){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:function(){return this.streamController.getMainFwdBufferInfo()}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"subtitleTracks",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:function(){var t=this.subtitleTrackController;return!!t&&t.subtitleDisplay},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}},{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:function(t){this.config.lowLatencyMode=t}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],[{key:"version",get:function(){return"1.4.0"}},{key:"Events",get:function(){return T}},{key:"ErrorTypes",get:function(){return E}},{key:"ErrorDetails",get:function(){return S}},{key:"DefaultConfig",get:function(){return t.defaultConfig?t.defaultConfig:Ha},set:function(e){t.defaultConfig=e}}]),t}();return Wa.defaultConfig=void 0,Wa},"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(r="undefined"!=typeof globalThis?globalThis:r||self).Hls=i()}(!1);
            //# sourceMappingURL=hls.min.js.map</script><script>"object"==typeof navigator&&function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Plyr",t):(e="undefined"!=typeof globalThis?globalThis:e||self).Plyr=t()}(this,(function(){"use strict";!function(){if("undefined"!=typeof window)try{var e=new window.CustomEvent("test",{cancelable:!0});if(e.preventDefault(),!0!==e.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var t=function(e,t){var n,i;return(t=t||{}).bubbles=!!t.bubbles,t.cancelable=!!t.cancelable,(n=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i=n.preventDefault,n.preventDefault=function(){i.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};t.prototype=window.Event.prototype,window.CustomEvent=t}}();var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e,t){return e(t={exports:{}},t.exports),t.exports}var n=function(e){return e&&e.Math==Math&&e},i=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")(),r=function(e){try{return!!e()}catch(e){return!0}},o=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),a={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,l={f:s&&!a.call({1:2},1)?function(e){var t=s(this,e);return!!t&&t.enumerable}:a},c=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},u={}.toString,h=function(e){return u.call(e).slice(8,-1)},f="".split,d=r((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==h(e)?f.call(e,""):Object(e)}:Object,p=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},m=function(e){return d(p(e))},g=function(e){return"object"==typeof e?null!==e:"function"==typeof e},v=function(e,t){if(!g(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!g(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!g(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!g(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")},y={}.hasOwnProperty,b=function(e,t){return y.call(e,t)},w=i.document,k=g(w)&&g(w.createElement),T=function(e){return k?w.createElement(e):{}},S=!o&&!r((function(){return 7!=Object.defineProperty(T("div"),"a",{get:function(){return 7}}).a})),E=Object.getOwnPropertyDescriptor,A={f:o?E:function(e,t){if(e=m(e),t=v(t,!0),S)try{return E(e,t)}catch(e){}if(b(e,t))return c(!l.f.call(e,t),e[t])}},C=function(e){if(!g(e))throw TypeError(String(e)+" is not an object");return e},P=Object.defineProperty,x={f:o?P:function(e,t,n){if(C(e),t=v(t,!0),C(n),S)try{return P(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},O=o?function(e,t,n){return x.f(e,t,c(1,n))}:function(e,t,n){return e[t]=n,e},I=function(e,t){try{O(i,e,t)}catch(n){i[e]=t}return t},L="__core-js_shared__",j=i[L]||I(L,{}),N=Function.toString;"function"!=typeof j.inspectSource&&(j.inspectSource=function(e){return N.call(e)});var R,M,_,U=j.inspectSource,D=i.WeakMap,F="function"==typeof D&&/native code/.test(U(D)),q=t((function(e){(e.exports=function(e,t){return j[e]||(j[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.7.0",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),H=0,B=Math.random(),V=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++H+B).toString(36)},z=q("keys"),W=function(e){return z[e]||(z[e]=V(e))},K={},$=i.WeakMap;if(F){var Y=j.state||(j.state=new $),G=Y.get,X=Y.has,Q=Y.set;R=function(e,t){return t.facade=e,Q.call(Y,e,t),t},M=function(e){return G.call(Y,e)||{}},_=function(e){return X.call(Y,e)}}else{var J=W("state");K[J]=!0,R=function(e,t){return t.facade=e,O(e,J,t),t},M=function(e){return b(e,J)?e[J]:{}},_=function(e){return b(e,J)}}var Z,ee={set:R,get:M,has:_,enforce:function(e){return _(e)?M(e):R(e,{})},getterFor:function(e){return function(t){var n;if(!g(t)||(n=M(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},te=t((function(e){var t=ee.get,n=ee.enforce,r=String(String).split("String");(e.exports=function(e,t,o,a){var s,l=!!a&&!!a.unsafe,c=!!a&&!!a.enumerable,u=!!a&&!!a.noTargetGet;"function"==typeof o&&("string"!=typeof t||b(o,"name")||O(o,"name",t),(s=n(o)).source||(s.source=r.join("string"==typeof t?t:""))),e!==i?(l?!u&&e[t]&&(c=!0):delete e[t],c?e[t]=o:O(e,t,o)):c?e[t]=o:I(t,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||U(this)}))})),ne=i,ie=function(e){return"function"==typeof e?e:void 0},re=function(e,t){return arguments.length<2?ie(ne[e])||ie(i[e]):ne[e]&&ne[e][t]||i[e]&&i[e][t]},oe=Math.ceil,ae=Math.floor,se=function(e){return isNaN(e=+e)?0:(e>0?ae:oe)(e)},le=Math.min,ce=function(e){return e>0?le(se(e),9007199254740991):0},ue=Math.max,he=Math.min,fe=function(e,t){var n=se(e);return n<0?ue(n+t,0):he(n,t)},de=function(e){return function(t,n,i){var r,o=m(t),a=ce(o.length),s=fe(i,a);if(e&&n!=n){for(;a>s;)if((r=o[s++])!=r)return!0}else for(;a>s;s++)if((e||s in o)&&o[s]===n)return e||s||0;return!e&&-1}},pe={includes:de(!0),indexOf:de(!1)},me=pe.indexOf,ge=function(e,t){var n,i=m(e),r=0,o=[];for(n in i)!b(K,n)&&b(i,n)&&o.push(n);for(;t.length>r;)b(i,n=t[r++])&&(~me(o,n)||o.push(n));return o},ve=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ye=ve.concat("length","prototype"),be={f:Object.getOwnPropertyNames||function(e){return ge(e,ye)}},we={f:Object.getOwnPropertySymbols},ke=re("Reflect","ownKeys")||function(e){var t=be.f(C(e)),n=we.f;return n?t.concat(n(e)):t},Te=function(e,t){for(var n=ke(t),i=x.f,r=A.f,o=0;o<n.length;o++){var a=n[o];b(e,a)||i(e,a,r(t,a))}},Se=/#|\.prototype\./,Ee=function(e,t){var n=Ce[Ae(e)];return n==xe||n!=Pe&&("function"==typeof t?r(t):!!t)},Ae=Ee.normalize=function(e){return String(e).replace(Se,".").toLowerCase()},Ce=Ee.data={},Pe=Ee.NATIVE="N",xe=Ee.POLYFILL="P",Oe=Ee,Ie=A.f,Le=function(e,t){var n,r,o,a,s,l=e.target,c=e.global,u=e.stat;if(n=c?i:u?i[l]||I(l,{}):(i[l]||{}).prototype)for(r in t){if(a=t[r],o=e.noTargetGet?(s=Ie(n,r))&&s.value:n[r],!Oe(c?r:l+(u?".":"#")+r,e.forced)&&void 0!==o){if(typeof a==typeof o)continue;Te(a,o)}(e.sham||o&&o.sham)&&O(a,"sham",!0),te(n,r,a,e)}},je=!!Object.getOwnPropertySymbols&&!r((function(){return!String(Symbol())})),Ne=je&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Re=Array.isArray||function(e){return"Array"==h(e)},Me=function(e){return Object(p(e))},_e=Object.keys||function(e){return ge(e,ve)},Ue=o?Object.defineProperties:function(e,t){C(e);for(var n,i=_e(t),r=i.length,o=0;r>o;)x.f(e,n=i[o++],t[n]);return e},De=re("document","documentElement"),Fe=W("IE_PROTO"),qe=function(){},He=function(e){return"<script>"+e+"</"+"script>"},Be=function(){try{Z=document.domain&&new ActiveXObject("htmlfile")}catch(e){}var e,t;Be=Z?function(e){e.write(He("")),e.close();var t=e.parentWindow.Object;return e=null,t}(Z):((t=T("iframe")).style.display="none",De.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(He("document.F=Object")),e.close(),e.F);for(var n=ve.length;n--;)delete Be.prototype[ve[n]];return Be()};K[Fe]=!0;var Ve=Object.create||function(e,t){var n;return null!==e?(qe.prototype=C(e),n=new qe,qe.prototype=null,n[Fe]=e):n=Be(),void 0===t?n:Ue(n,t)},ze=be.f,We={}.toString,Ke="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],$e={f:function(e){return Ke&&"[object Window]"==We.call(e)?function(e){try{return ze(e)}catch(e){return Ke.slice()}}(e):ze(m(e))}},Ye=q("wks"),Ge=i.Symbol,Xe=Ne?Ge:Ge&&Ge.withoutSetter||V,Qe=function(e){return b(Ye,e)||(je&&b(Ge,e)?Ye[e]=Ge[e]:Ye[e]=Xe("Symbol."+e)),Ye[e]},Je={f:Qe},Ze=x.f,et=function(e){var t=ne.Symbol||(ne.Symbol={});b(t,e)||Ze(t,e,{value:Je.f(e)})},tt=x.f,nt=Qe("toStringTag"),it=function(e,t,n){e&&!b(e=n?e:e.prototype,nt)&&tt(e,nt,{configurable:!0,value:t})},rt=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},ot=function(e,t,n){if(rt(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}},at=Qe("species"),st=function(e,t){var n;return Re(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!Re(n.prototype)?g(n)&&null===(n=n[at])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)},lt=[].push,ct=function(e){var t=1==e,n=2==e,i=3==e,r=4==e,o=6==e,a=5==e||o;return function(s,l,c,u){for(var h,f,p=Me(s),m=d(p),g=ot(l,c,3),v=ce(m.length),y=0,b=u||st,w=t?b(s,v):n?b(s,0):void 0;v>y;y++)if((a||y in m)&&(f=g(h=m[y],y,p),e))if(t)w[y]=f;else if(f)switch(e){case 3:return!0;case 5:return h;case 6:return y;case 2:lt.call(w,h)}else if(r)return!1;return o?-1:i||r?r:w}},ut={forEach:ct(0),map:ct(1),filter:ct(2),some:ct(3),every:ct(4),find:ct(5),findIndex:ct(6)},ht=ut.forEach,ft=W("hidden"),dt="Symbol",pt=Qe("toPrimitive"),mt=ee.set,gt=ee.getterFor(dt),vt=Object.prototype,yt=i.Symbol,bt=re("JSON","stringify"),wt=A.f,kt=x.f,Tt=$e.f,St=l.f,Et=q("symbols"),At=q("op-symbols"),Ct=q("string-to-symbol-registry"),Pt=q("symbol-to-string-registry"),xt=q("wks"),Ot=i.QObject,It=!Ot||!Ot.prototype||!Ot.prototype.findChild,Lt=o&&r((function(){return 7!=Ve(kt({},"a",{get:function(){return kt(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=wt(vt,t);i&&delete vt[t],kt(e,t,n),i&&e!==vt&&kt(vt,t,i)}:kt,jt=function(e,t){var n=Et[e]=Ve(yt.prototype);return mt(n,{type:dt,tag:e,description:t}),o||(n.description=t),n},Nt=Ne?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof yt},Rt=function(e,t,n){e===vt&&Rt(At,t,n),C(e);var i=v(t,!0);return C(n),b(Et,i)?(n.enumerable?(b(e,ft)&&e[ft][i]&&(e[ft][i]=!1),n=Ve(n,{enumerable:c(0,!1)})):(b(e,ft)||kt(e,ft,c(1,{})),e[ft][i]=!0),Lt(e,i,n)):kt(e,i,n)},Mt=function(e,t){C(e);var n=m(t),i=_e(n).concat(Ft(n));return ht(i,(function(t){o&&!_t.call(n,t)||Rt(e,t,n[t])})),e},_t=function(e){var t=v(e,!0),n=St.call(this,t);return!(this===vt&&b(Et,t)&&!b(At,t))&&(!(n||!b(this,t)||!b(Et,t)||b(this,ft)&&this[ft][t])||n)},Ut=function(e,t){var n=m(e),i=v(t,!0);if(n!==vt||!b(Et,i)||b(At,i)){var r=wt(n,i);return!r||!b(Et,i)||b(n,ft)&&n[ft][i]||(r.enumerable=!0),r}},Dt=function(e){var t=Tt(m(e)),n=[];return ht(t,(function(e){b(Et,e)||b(K,e)||n.push(e)})),n},Ft=function(e){var t=e===vt,n=Tt(t?At:m(e)),i=[];return ht(n,(function(e){!b(Et,e)||t&&!b(vt,e)||i.push(Et[e])})),i};if(je||(te((yt=function(){if(this instanceof yt)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=V(e),n=function(e){this===vt&&n.call(At,e),b(this,ft)&&b(this[ft],t)&&(this[ft][t]=!1),Lt(this,t,c(1,e))};return o&&It&&Lt(vt,t,{configurable:!0,set:n}),jt(t,e)}).prototype,"toString",(function(){return gt(this).tag})),te(yt,"withoutSetter",(function(e){return jt(V(e),e)})),l.f=_t,x.f=Rt,A.f=Ut,be.f=$e.f=Dt,we.f=Ft,Je.f=function(e){return jt(Qe(e),e)},o&&(kt(yt.prototype,"description",{configurable:!0,get:function(){return gt(this).description}}),te(vt,"propertyIsEnumerable",_t,{unsafe:!0}))),Le({global:!0,wrap:!0,forced:!je,sham:!je},{Symbol:yt}),ht(_e(xt),(function(e){et(e)})),Le({target:dt,stat:!0,forced:!je},{for:function(e){var t=String(e);if(b(Ct,t))return Ct[t];var n=yt(t);return Ct[t]=n,Pt[n]=t,n},keyFor:function(e){if(!Nt(e))throw TypeError(e+" is not a symbol");if(b(Pt,e))return Pt[e]},useSetter:function(){It=!0},useSimple:function(){It=!1}}),Le({target:"Object",stat:!0,forced:!je,sham:!o},{create:function(e,t){return void 0===t?Ve(e):Mt(Ve(e),t)},defineProperty:Rt,defineProperties:Mt,getOwnPropertyDescriptor:Ut}),Le({target:"Object",stat:!0,forced:!je},{getOwnPropertyNames:Dt,getOwnPropertySymbols:Ft}),Le({target:"Object",stat:!0,forced:r((function(){we.f(1)}))},{getOwnPropertySymbols:function(e){return we.f(Me(e))}}),bt){var qt=!je||r((function(){var e=yt();return"[null]"!=bt([e])||"{}"!=bt({a:e})||"{}"!=bt(Object(e))}));Le({target:"JSON",stat:!0,forced:qt},{stringify:function(e,t,n){for(var i,r=[e],o=1;arguments.length>o;)r.push(arguments[o++]);if(i=t,(g(t)||void 0!==e)&&!Nt(e))return Re(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!Nt(t))return t}),r[1]=t,bt.apply(null,r)}})}yt.prototype[pt]||O(yt.prototype,pt,yt.prototype.valueOf),it(yt,dt),K[ft]=!0;var Ht=x.f,Bt=i.Symbol;if(o&&"function"==typeof Bt&&(!("description"in Bt.prototype)||void 0!==Bt().description)){var Vt={},zt=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof zt?new Bt(e):void 0===e?Bt():Bt(e);return""===e&&(Vt[t]=!0),t};Te(zt,Bt);var Wt=zt.prototype=Bt.prototype;Wt.constructor=zt;var Kt=Wt.toString,$t="Symbol(test)"==String(Bt("test")),Yt=/^Symbol\((.*)\)[^)]+$/;Ht(Wt,"description",{configurable:!0,get:function(){var e=g(this)?this.valueOf():this,t=Kt.call(e);if(b(Vt,e))return"";var n=$t?t.slice(7,-1):t.replace(Yt,"$1");return""===n?void 0:n}}),Le({global:!0,forced:!0},{Symbol:zt})}et("iterator");var Gt=function(e,t){var n=[][e];return!!n&&r((function(){n.call(null,t||function(){throw 1},1)}))},Xt=Object.defineProperty,Qt={},Jt=function(e){throw e},Zt=function(e,t){if(b(Qt,e))return Qt[e];t||(t={});var n=[][e],i=!!b(t,"ACCESSORS")&&t.ACCESSORS,a=b(t,0)?t[0]:Jt,s=b(t,1)?t[1]:void 0;return Qt[e]=!!n&&!r((function(){if(i&&!o)return!0;var e={length:-1};i?Xt(e,1,{enumerable:!0,get:Jt}):e[1]=1,n.call(e,a,s)}))},en=ut.forEach,tn=Gt("forEach"),nn=Zt("forEach"),rn=tn&&nn?[].forEach:function(e){return en(this,e,arguments.length>1?arguments[1]:void 0)};Le({target:"Array",proto:!0,forced:[].forEach!=rn},{forEach:rn});var on=pe.indexOf,an=[].indexOf,sn=!!an&&1/[1].indexOf(1,-0)<0,ln=Gt("indexOf"),cn=Zt("indexOf",{ACCESSORS:!0,1:0});Le({target:"Array",proto:!0,forced:sn||!ln||!cn},{indexOf:function(e){return sn?an.apply(this,arguments)||0:on(this,e,arguments.length>1?arguments[1]:void 0)}});var un=Qe("unscopables"),hn=Array.prototype;null==hn[un]&&x.f(hn,un,{configurable:!0,value:Ve(null)});var fn,dn,pn,mn=function(e){hn[un][e]=!0},gn={},vn=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),yn=W("IE_PROTO"),bn=Object.prototype,wn=vn?Object.getPrototypeOf:function(e){return e=Me(e),b(e,yn)?e[yn]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?bn:null},kn=Qe("iterator"),Tn=!1;[].keys&&("next"in(pn=[].keys())?(dn=wn(wn(pn)))!==Object.prototype&&(fn=dn):Tn=!0),null==fn&&(fn={}),b(fn,kn)||O(fn,kn,(function(){return this}));var Sn={IteratorPrototype:fn,BUGGY_SAFARI_ITERATORS:Tn},En=Sn.IteratorPrototype,An=function(){return this},Cn=function(e,t,n){var i=t+" Iterator";return e.prototype=Ve(En,{next:c(1,n)}),it(e,i,!1),gn[i]=An,e},Pn=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return C(n),function(e){if(!g(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype")}(i),t?e.call(n,i):n.__proto__=i,n}}():void 0),xn=Sn.IteratorPrototype,On=Sn.BUGGY_SAFARI_ITERATORS,In=Qe("iterator"),Ln="keys",jn="values",Nn="entries",Rn=function(){return this},Mn=function(e,t,n,i,r,o,a){Cn(n,t,i);var s,l,c,u=function(e){if(e===r&&m)return m;if(!On&&e in d)return d[e];switch(e){case Ln:case jn:case Nn:return function(){return new n(this,e)}}return function(){return new n(this)}},h=t+" Iterator",f=!1,d=e.prototype,p=d[In]||d["@@iterator"]||r&&d[r],m=!On&&p||u(r),g="Array"==t&&d.entries||p;if(g&&(s=wn(g.call(new e)),xn!==Object.prototype&&s.next&&(wn(s)!==xn&&(Pn?Pn(s,xn):"function"!=typeof s[In]&&O(s,In,Rn)),it(s,h,!0))),r==jn&&p&&p.name!==jn&&(f=!0,m=function(){return p.call(this)}),d[In]!==m&&O(d,In,m),gn[t]=m,r)if(l={values:u(jn),keys:o?m:u(Ln),entries:u(Nn)},a)for(c in l)(On||f||!(c in d))&&te(d,c,l[c]);else Le({target:t,proto:!0,forced:On||f},l);return l},_n="Array Iterator",Un=ee.set,Dn=ee.getterFor(_n),Fn=Mn(Array,"Array",(function(e,t){Un(this,{type:_n,target:m(e),index:0,kind:t})}),(function(){var e=Dn(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values");gn.Arguments=gn.Array,mn("keys"),mn("values"),mn("entries");var qn=[].join,Hn=d!=Object,Bn=Gt("join",",");Le({target:"Array",proto:!0,forced:Hn||!Bn},{join:function(e){return qn.call(m(this),void 0===e?",":e)}});var Vn,zn,Wn=function(e,t,n){var i=v(t);i in e?x.f(e,i,c(0,n)):e[i]=n},Kn=re("navigator","userAgent")||"",$n=i.process,Yn=$n&&$n.versions,Gn=Yn&&Yn.v8;Gn?zn=(Vn=Gn.split("."))[0]+Vn[1]:Kn&&(!(Vn=Kn.match(/Edge\/(\d+)/))||Vn[1]>=74)&&(Vn=Kn.match(/Chrome\/(\d+)/))&&(zn=Vn[1]);var Xn=zn&&+zn,Qn=Qe("species"),Jn=function(e){return Xn>=51||!r((function(){var t=[];return(t.constructor={})[Qn]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Zn=Jn("slice"),ei=Zt("slice",{ACCESSORS:!0,0:0,1:2}),ti=Qe("species"),ni=[].slice,ii=Math.max;Le({target:"Array",proto:!0,forced:!Zn||!ei},{slice:function(e,t){var n,i,r,o=m(this),a=ce(o.length),s=fe(e,a),l=fe(void 0===t?a:t,a);if(Re(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Re(n.prototype)?g(n)&&null===(n=n[ti])&&(n=void 0):n=void 0,n===Array||void 0===n))return ni.call(o,s,l);for(i=new(void 0===n?Array:n)(ii(l-s,0)),r=0;s<l;s++,r++)s in o&&Wn(i,r,o[s]);return i.length=r,i}});var ri={};ri[Qe("toStringTag")]="z";var oi="[object z]"===String(ri),ai=Qe("toStringTag"),si="Arguments"==h(function(){return arguments}()),li=oi?h:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),ai))?n:si?h(t):"Object"==(i=h(t))&&"function"==typeof t.callee?"Arguments":i},ci=oi?{}.toString:function(){return"[object "+li(this)+"]"};oi||te(Object.prototype,"toString",ci,{unsafe:!0});var ui=function(){var e=C(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t};function hi(e,t){return RegExp(e,t)}var fi={UNSUPPORTED_Y:r((function(){var e=hi("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),BROKEN_CARET:r((function(){var e=hi("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},di=RegExp.prototype.exec,pi=String.prototype.replace,mi=di,gi=function(){var e=/a/,t=/b*/g;return di.call(e,"a"),di.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),vi=fi.UNSUPPORTED_Y||fi.BROKEN_CARET,yi=void 0!==/()??/.exec("")[1];(gi||yi||vi)&&(mi=function(e){var t,n,i,r,o=this,a=vi&&o.sticky,s=ui.call(o),l=o.source,c=0,u=e;return a&&(-1===(s=s.replace("y","")).indexOf("g")&&(s+="g"),u=String(e).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==e[o.lastIndex-1])&&(l="(?: "+l+")",u=" "+u,c++),n=new RegExp("^(?:"+l+")",s)),yi&&(n=new RegExp("^"+l+"$(?!\\s)",s)),gi&&(t=o.lastIndex),i=di.call(a?n:o,u),a?i?(i.input=i.input.slice(c),i[0]=i[0].slice(c),i.index=o.lastIndex,o.lastIndex+=i[0].length):o.lastIndex=0:gi&&i&&(o.lastIndex=o.global?i.index+i[0].length:t),yi&&i&&i.length>1&&pi.call(i[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i});var bi=mi;Le({target:"RegExp",proto:!0,forced:/./.exec!==bi},{exec:bi});var wi="toString",ki=RegExp.prototype,Ti=ki.toString,Si=r((function(){return"/a/b"!=Ti.call({source:"a",flags:"b"})})),Ei=Ti.name!=wi;(Si||Ei)&&te(RegExp.prototype,wi,(function(){var e=C(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in ki)?ui.call(e):n)}),{unsafe:!0});var Ai=function(e){return function(t,n){var i,r,o=String(p(t)),a=se(n),s=o.length;return a<0||a>=s?e?"":void 0:(i=o.charCodeAt(a))<55296||i>56319||a+1===s||(r=o.charCodeAt(a+1))<56320||r>57343?e?o.charAt(a):i:e?o.slice(a,a+2):r-56320+(i-55296<<10)+65536}},Ci={codeAt:Ai(!1),charAt:Ai(!0)},Pi=Ci.charAt,xi="String Iterator",Oi=ee.set,Ii=ee.getterFor(xi);Mn(String,"String",(function(e){Oi(this,{type:xi,string:String(e),index:0})}),(function(){var e,t=Ii(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=Pi(n,i),t.index+=e.length,{value:e,done:!1})}));var Li=Qe("species"),ji=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),Ni="$0"==="a".replace(/./,"$0"),Ri=Qe("replace"),Mi=!!/./[Ri]&&""===/./[Ri]("a","$0"),_i=!r((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Ui=function(e,t,n,i){var o=Qe(e),a=!r((function(){var t={};return t[o]=function(){return 7},7!=""[e](t)})),s=a&&!r((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[Li]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return t=!0,null},n[o](""),!t}));if(!a||!s||"replace"===e&&(!ji||!Ni||Mi)||"split"===e&&!_i){var l=/./[o],c=n(o,""[e],(function(e,t,n,i,r){return t.exec===bi?a&&!r?{done:!0,value:l.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),{REPLACE_KEEPS_$0:Ni,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Mi}),u=c[0],h=c[1];te(String.prototype,e,u),te(RegExp.prototype,o,2==t?function(e,t){return h.call(e,this,t)}:function(e){return h.call(e,this)})}i&&O(RegExp.prototype[o],"sham",!0)},Di=Ci.charAt,Fi=function(e,t,n){return t+(n?Di(e,t).length:1)},qi=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==h(e))throw TypeError("RegExp#exec called on incompatible receiver");return bi.call(e,t)},Hi=Math.max,Bi=Math.min,Vi=Math.floor,zi=/\$([$&'`]|\d\d?|<[^>]*>)/g,Wi=/\$([$&'`]|\d\d?)/g;Ui("replace",2,(function(e,t,n,i){var r=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=i.REPLACE_KEEPS_$0,a=r?"$":"$0";return[function(n,i){var r=p(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,r,i):t.call(String(r),n,i)},function(e,i){if(!r&&o||"string"==typeof i&&-1===i.indexOf(a)){var l=n(t,e,this,i);if(l.done)return l.value}var c=C(e),u=String(this),h="function"==typeof i;h||(i=String(i));var f=c.global;if(f){var d=c.unicode;c.lastIndex=0}for(var p=[];;){var m=qi(c,u);if(null===m)break;if(p.push(m),!f)break;""===String(m[0])&&(c.lastIndex=Fi(u,ce(c.lastIndex),d))}for(var g,v="",y=0,b=0;b<p.length;b++){m=p[b];for(var w=String(m[0]),k=Hi(Bi(se(m.index),u.length),0),T=[],S=1;S<m.length;S++)T.push(void 0===(g=m[S])?g:String(g));var E=m.groups;if(h){var A=[w].concat(T,k,u);void 0!==E&&A.push(E);var P=String(i.apply(void 0,A))}else P=s(w,u,k,T,E,i);k>=y&&(v+=u.slice(y,k)+P,y=k+w.length)}return v+u.slice(y)}];function s(e,n,i,r,o,a){var s=i+e.length,l=r.length,c=Wi;return void 0!==o&&(o=Me(o),c=zi),t.call(a,c,(function(t,a){var c;switch(a.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,i);case"'":return n.slice(s);case"<":c=o[a.slice(1,-1)];break;default:var u=+a;if(0===u)return t;if(u>l){var h=Vi(u/10);return 0===h?t:h<=l?void 0===r[h-1]?a.charAt(1):r[h-1]+a.charAt(1):t}c=r[u-1]}return void 0===c?"":c}))}}));var Ki=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};Ui("search",1,(function(e,t,n){return[function(t){var n=p(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var r=C(e),o=String(this),a=r.lastIndex;Ki(a,0)||(r.lastIndex=0);var s=qi(r,o);return Ki(r.lastIndex,a)||(r.lastIndex=a),null===s?-1:s.index}]}));var $i=Qe("match"),Yi=function(e){var t;return g(e)&&(void 0!==(t=e[$i])?!!t:"RegExp"==h(e))},Gi=Qe("species"),Xi=function(e,t){var n,i=C(e).constructor;return void 0===i||null==(n=C(i)[Gi])?t:rt(n)},Qi=[].push,Ji=Math.min,Zi=4294967295,er=!r((function(){return!RegExp(Zi,"y")}));Ui("split",2,(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=String(p(this)),r=void 0===n?Zi:n>>>0;if(0===r)return[];if(void 0===e)return[i];if(!Yi(e))return t.call(i,e,r);for(var o,a,s,l=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),u=0,h=new RegExp(e.source,c+"g");(o=bi.call(h,i))&&!((a=h.lastIndex)>u&&(l.push(i.slice(u,o.index)),o.length>1&&o.index<i.length&&Qi.apply(l,o.slice(1)),s=o[0].length,u=a,l.length>=r));)h.lastIndex===o.index&&h.lastIndex++;return u===i.length?!s&&h.test("")||l.push(""):l.push(i.slice(u)),l.length>r?l.slice(0,r):l}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var r=p(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,r,n):i.call(String(r),t,n)},function(e,r){var o=n(i,e,this,r,i!==t);if(o.done)return o.value;var a=C(e),s=String(this),l=Xi(a,RegExp),c=a.unicode,u=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(er?"y":"g"),h=new l(er?a:"^(?:"+a.source+")",u),f=void 0===r?Zi:r>>>0;if(0===f)return[];if(0===s.length)return null===qi(h,s)?[s]:[];for(var d=0,p=0,m=[];p<s.length;){h.lastIndex=er?p:0;var g,v=qi(h,er?s:s.slice(p));if(null===v||(g=Ji(ce(h.lastIndex+(er?0:p)),s.length))===d)p=Fi(s,p,c);else{if(m.push(s.slice(d,p)),m.length===f)return m;for(var y=1;y<=v.length-1;y++)if(m.push(v[y]),m.length===f)return m;p=d=g}}return m.push(s.slice(d)),m}]}),!er);var tr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var nr in tr){var ir=i[nr],rr=ir&&ir.prototype;if(rr&&rr.forEach!==rn)try{O(rr,"forEach",rn)}catch(e){rr.forEach=rn}}var or=Qe("iterator"),ar=Qe("toStringTag"),sr=Fn.values;for(var lr in tr){var cr=i[lr],ur=cr&&cr.prototype;if(ur){if(ur[or]!==sr)try{O(ur,or,sr)}catch(e){ur[or]=sr}if(ur[ar]||O(ur,ar,lr),tr[lr])for(var hr in Fn)if(ur[hr]!==Fn[hr])try{O(ur,hr,Fn[hr])}catch(e){ur[hr]=Fn[hr]}}}var fr=Qe("iterator"),dr=!r((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,i){t.delete("b"),n+=i+e})),!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[fr]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})),pr=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},mr=Object.assign,gr=Object.defineProperty,vr=!mr||r((function(){if(o&&1!==mr({b:1},mr(gr({},"a",{enumerable:!0,get:function(){gr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach((function(e){t[e]=e})),7!=mr({},e)[n]||_e(mr({},t)).join("")!=i}))?function(e,t){for(var n=Me(e),i=arguments.length,r=1,a=we.f,s=l.f;i>r;)for(var c,u=d(arguments[r++]),h=a?_e(u).concat(a(u)):_e(u),f=h.length,p=0;f>p;)c=h[p++],o&&!s.call(u,c)||(n[c]=u[c]);return n}:mr,yr=function(e){var t=e.return;if(void 0!==t)return C(t.call(e)).value},br=function(e,t,n,i){try{return i?t(C(n)[0],n[1]):t(n)}catch(t){throw yr(e),t}},wr=Qe("iterator"),kr=Array.prototype,Tr=function(e){return void 0!==e&&(gn.Array===e||kr[wr]===e)},Sr=Qe("iterator"),Er=function(e){if(null!=e)return e[Sr]||e["@@iterator"]||gn[li(e)]},Ar=function(e){var t,n,i,r,o,a,s=Me(e),l="function"==typeof this?this:Array,c=arguments.length,u=c>1?arguments[1]:void 0,h=void 0!==u,f=Er(s),d=0;if(h&&(u=ot(u,c>2?arguments[2]:void 0,2)),null==f||l==Array&&Tr(f))for(n=new l(t=ce(s.length));t>d;d++)a=h?u(s[d],d):s[d],Wn(n,d,a);else for(o=(r=f.call(s)).next,n=new l;!(i=o.call(r)).done;d++)a=h?br(r,u,[i.value,d],!0):i.value,Wn(n,d,a);return n.length=d,n},Cr=2147483647,Pr=/[^\0-\u007E]/,xr=/[.\u3002\uFF0E\uFF61]/g,Or="Overflow: input needs wider integers to process",Ir=Math.floor,Lr=String.fromCharCode,jr=function(e){return e+22+75*(e<26)},Nr=function(e,t,n){var i=0;for(e=n?Ir(e/700):e>>1,e+=Ir(e/t);e>455;i+=36)e=Ir(e/35);return Ir(i+36*e/(e+38))},Rr=function(e){var t,n,i=[],r=(e=function(e){for(var t=[],n=0,i=e.length;n<i;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var o=e.charCodeAt(n++);56320==(64512&o)?t.push(((1023&r)<<10)+(1023&o)+65536):(t.push(r),n--)}else t.push(r)}return t}(e)).length,o=128,a=0,s=72;for(t=0;t<e.length;t++)(n=e[t])<128&&i.push(Lr(n));var l=i.length,c=l;for(l&&i.push("-");c<r;){var u=Cr;for(t=0;t<e.length;t++)(n=e[t])>=o&&n<u&&(u=n);var h=c+1;if(u-o>Ir((Cr-a)/h))throw RangeError(Or);for(a+=(u-o)*h,o=u,t=0;t<e.length;t++){if((n=e[t])<o&&++a>Cr)throw RangeError(Or);if(n==o){for(var f=a,d=36;;d+=36){var p=d<=s?1:d>=s+26?26:d-s;if(f<p)break;var m=f-p,g=36-p;i.push(Lr(jr(p+m%g))),f=Ir(m/g)}i.push(Lr(jr(f))),s=Nr(a,h,c==l),a=0,++c}}++a,++o}return i.join("")},Mr=function(e,t,n){for(var i in t)te(e,i,t[i],n);return e},_r=function(e){var t=Er(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return C(t.call(e))},Ur=re("fetch"),Dr=re("Headers"),Fr=Qe("iterator"),qr="URLSearchParams",Hr="URLSearchParamsIterator",Br=ee.set,Vr=ee.getterFor(qr),zr=ee.getterFor(Hr),Wr=/\+/g,Kr=Array(4),$r=function(e){return Kr[e-1]||(Kr[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},Yr=function(e){try{return decodeURIComponent(e)}catch(t){return e}},Gr=function(e){var t=e.replace(Wr," "),n=4;try{return decodeURIComponent(t)}catch(e){for(;n;)t=t.replace($r(n--),Yr);return t}},Xr=/[!'()~]|%20/g,Qr={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Jr=function(e){return Qr[e]},Zr=function(e){return encodeURIComponent(e).replace(Xr,Jr)},eo=function(e,t){if(t)for(var n,i,r=t.split("&"),o=0;o<r.length;)(n=r[o++]).length&&(i=n.split("="),e.push({key:Gr(i.shift()),value:Gr(i.join("="))}))},to=function(e){this.entries.length=0,eo(this.entries,e)},no=function(e,t){if(e<t)throw TypeError("Not enough arguments")},io=Cn((function(e,t){Br(this,{type:Hr,iterator:_r(Vr(e).entries),kind:t})}),"Iterator",(function(){var e=zr(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n})),ro=function(){pr(this,ro,qr);var e,t,n,i,r,o,a,s,l,c=arguments.length>0?arguments[0]:void 0,u=this,h=[];if(Br(u,{type:qr,entries:h,updateURL:function(){},updateSearchParams:to}),void 0!==c)if(g(c))if("function"==typeof(e=Er(c)))for(n=(t=e.call(c)).next;!(i=n.call(t)).done;){if((a=(o=(r=_r(C(i.value))).next).call(r)).done||(s=o.call(r)).done||!o.call(r).done)throw TypeError("Expected sequence with length 2");h.push({key:a.value+"",value:s.value+""})}else for(l in c)b(c,l)&&h.push({key:l,value:c[l]+""});else eo(h,"string"==typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},oo=ro.prototype;Mr(oo,{append:function(e,t){no(arguments.length,2);var n=Vr(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){no(arguments.length,1);for(var t=Vr(this),n=t.entries,i=e+"",r=0;r<n.length;)n[r].key===i?n.splice(r,1):r++;t.updateURL()},get:function(e){no(arguments.length,1);for(var t=Vr(this).entries,n=e+"",i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){no(arguments.length,1);for(var t=Vr(this).entries,n=e+"",i=[],r=0;r<t.length;r++)t[r].key===n&&i.push(t[r].value);return i},has:function(e){no(arguments.length,1);for(var t=Vr(this).entries,n=e+"",i=0;i<t.length;)if(t[i++].key===n)return!0;return!1},set:function(e,t){no(arguments.length,1);for(var n,i=Vr(this),r=i.entries,o=!1,a=e+"",s=t+"",l=0;l<r.length;l++)(n=r[l]).key===a&&(o?r.splice(l--,1):(o=!0,n.value=s));o||r.push({key:a,value:s}),i.updateURL()},sort:function(){var e,t,n,i=Vr(this),r=i.entries,o=r.slice();for(r.length=0,n=0;n<o.length;n++){for(e=o[n],t=0;t<n;t++)if(r[t].key>e.key){r.splice(t,0,e);break}t===n&&r.push(e)}i.updateURL()},forEach:function(e){for(var t,n=Vr(this).entries,i=ot(e,arguments.length>1?arguments[1]:void 0,3),r=0;r<n.length;)i((t=n[r++]).value,t.key,this)},keys:function(){return new io(this,"keys")},values:function(){return new io(this,"values")},entries:function(){return new io(this,"entries")}},{enumerable:!0}),te(oo,Fr,oo.entries),te(oo,"toString",(function(){for(var e,t=Vr(this).entries,n=[],i=0;i<t.length;)e=t[i++],n.push(Zr(e.key)+"="+Zr(e.value));return n.join("&")}),{enumerable:!0}),it(ro,qr),Le({global:!0,forced:!dr},{URLSearchParams:ro}),dr||"function"!=typeof Ur||"function"!=typeof Dr||Le({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,i,r=[e];return arguments.length>1&&(g(t=arguments[1])&&(n=t.body,li(n)===qr&&((i=t.headers?new Dr(t.headers):new Dr).has("content-type")||i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=Ve(t,{body:c(0,String(n)),headers:c(0,i)}))),r.push(t)),Ur.apply(this,r)}});var ao,so={URLSearchParams:ro,getState:Vr},lo=Ci.codeAt,co=i.URL,uo=so.URLSearchParams,ho=so.getState,fo=ee.set,po=ee.getterFor("URL"),mo=Math.floor,go=Math.pow,vo="Invalid scheme",yo="Invalid host",bo="Invalid port",wo=/[A-Za-z]/,ko=/[\d+-.A-Za-z]/,To=/\d/,So=/^(0x|0X)/,Eo=/^[0-7]+$/,Ao=/^\d+$/,Co=/^[\dA-Fa-f]+$/,Po=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,xo=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,Oo=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,Io=/[\u0009\u000A\u000D]/g,Lo=function(e,t){var n,i,r;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return yo;if(!(n=No(t.slice(1,-1))))return yo;e.host=n}else if(Ho(e)){if(t=function(e){var t,n,i=[],r=e.toLowerCase().replace(xr,".").split(".");for(t=0;t<r.length;t++)n=r[t],i.push(Pr.test(n)?"xn--"+Rr(n):n);return i.join(".")}(t),Po.test(t))return yo;if(null===(n=jo(t)))return yo;e.host=n}else{if(xo.test(t))return yo;for(n="",i=Ar(t),r=0;r<i.length;r++)n+=Fo(i[r],Mo);e.host=n}},jo=function(e){var t,n,i,r,o,a,s,l=e.split(".");if(l.length&&""==l[l.length-1]&&l.pop(),(t=l.length)>4)return e;for(n=[],i=0;i<t;i++){if(""==(r=l[i]))return e;if(o=10,r.length>1&&"0"==r.charAt(0)&&(o=So.test(r)?16:8,r=r.slice(8==o?1:2)),""===r)a=0;else{if(!(10==o?Ao:8==o?Eo:Co).test(r))return e;a=parseInt(r,o)}n.push(a)}for(i=0;i<t;i++)if(a=n[i],i==t-1){if(a>=go(256,5-t))return null}else if(a>255)return null;for(s=n.pop(),i=0;i<n.length;i++)s+=n[i]*go(256,3-i);return s},No=function(e){var t,n,i,r,o,a,s,l=[0,0,0,0,0,0,0,0],c=0,u=null,h=0,f=function(){return e.charAt(h)};if(":"==f()){if(":"!=e.charAt(1))return;h+=2,u=++c}for(;f();){if(8==c)return;if(":"!=f()){for(t=n=0;n<4&&Co.test(f());)t=16*t+parseInt(f(),16),h++,n++;if("."==f()){if(0==n)return;if(h-=n,c>6)return;for(i=0;f();){if(r=null,i>0){if(!("."==f()&&i<4))return;h++}if(!To.test(f()))return;for(;To.test(f());){if(o=parseInt(f(),10),null===r)r=o;else{if(0==r)return;r=10*r+o}if(r>255)return;h++}l[c]=256*l[c]+r,2!=++i&&4!=i||c++}if(4!=i)return;break}if(":"==f()){if(h++,!f())return}else if(f())return;l[c++]=t}else{if(null!==u)return;h++,u=++c}}if(null!==u)for(a=c-u,c=7;0!=c&&a>0;)s=l[c],l[c--]=l[u+a-1],l[u+--a]=s;else if(8!=c)return;return l},Ro=function(e){var t,n,i,r;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=mo(e/256);return t.join(".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,n=1,i=null,r=0,o=0;o<8;o++)0!==e[o]?(r>n&&(t=i,n=r),i=null,r=0):(null===i&&(i=o),++r);return r>n&&(t=i,n=r),t}(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),i===n?(t+=n?":":"::",r=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},Mo={},_o=vr({},Mo,{" ":1,'"':1,"<":1,">":1,"`":1}),Uo=vr({},_o,{"#":1,"?":1,"{":1,"}":1}),Do=vr({},Uo,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Fo=function(e,t){var n=lo(e,0);return n>32&&n<127&&!b(t,e)?e:encodeURIComponent(e)},qo={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Ho=function(e){return b(qo,e.scheme)},Bo=function(e){return""!=e.username||""!=e.password},Vo=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},zo=function(e,t){var n;return 2==e.length&&wo.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},Wo=function(e){var t;return e.length>1&&zo(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},Ko=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&zo(t[0],!0)||t.pop()},$o=function(e){return"."===e||"%2e"===e.toLowerCase()},Yo={},Go={},Xo={},Qo={},Jo={},Zo={},ea={},ta={},na={},ia={},ra={},oa={},aa={},sa={},la={},ca={},ua={},ha={},fa={},da={},pa={},ma=function(e,t,n,i){var r,o,a,s,l,c=n||Yo,u=0,h="",f=!1,d=!1,p=!1;for(n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(Oo,"")),t=t.replace(Io,""),r=Ar(t);u<=r.length;){switch(o=r[u],c){case Yo:if(!o||!wo.test(o)){if(n)return vo;c=Xo;continue}h+=o.toLowerCase(),c=Go;break;case Go:if(o&&(ko.test(o)||"+"==o||"-"==o||"."==o))h+=o.toLowerCase();else{if(":"!=o){if(n)return vo;h="",c=Xo,u=0;continue}if(n&&(Ho(e)!=b(qo,h)||"file"==h&&(Bo(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=h,n)return void(Ho(e)&&qo[e.scheme]==e.port&&(e.port=null));h="","file"==e.scheme?c=sa:Ho(e)&&i&&i.scheme==e.scheme?c=Qo:Ho(e)?c=ta:"/"==r[u+1]?(c=Jo,u++):(e.cannotBeABaseURL=!0,e.path.push(""),c=fa)}break;case Xo:if(!i||i.cannotBeABaseURL&&"#"!=o)return vo;if(i.cannotBeABaseURL&&"#"==o){e.scheme=i.scheme,e.path=i.path.slice(),e.query=i.query,e.fragment="",e.cannotBeABaseURL=!0,c=pa;break}c="file"==i.scheme?sa:Zo;continue;case Qo:if("/"!=o||"/"!=r[u+1]){c=Zo;continue}c=na,u++;break;case Jo:if("/"==o){c=ia;break}c=ha;continue;case Zo:if(e.scheme=i.scheme,o==ao)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query;else if("/"==o||"\\"==o&&Ho(e))c=ea;else if("?"==o)e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query="",c=da;else{if("#"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.path.pop(),c=ha;continue}e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,e.path=i.path.slice(),e.query=i.query,e.fragment="",c=pa}break;case ea:if(!Ho(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=i.username,e.password=i.password,e.host=i.host,e.port=i.port,c=ha;continue}c=ia}else c=na;break;case ta:if(c=na,"/"!=o||"/"!=h.charAt(u+1))continue;u++;break;case na:if("/"!=o&&"\\"!=o){c=ia;continue}break;case ia:if("@"==o){f&&(h="%40"+h),f=!0,a=Ar(h);for(var m=0;m<a.length;m++){var g=a[m];if(":"!=g||p){var v=Fo(g,Do);p?e.password+=v:e.username+=v}else p=!0}h=""}else if(o==ao||"/"==o||"?"==o||"#"==o||"\\"==o&&Ho(e)){if(f&&""==h)return"Invalid authority";u-=Ar(h).length+1,h="",c=ra}else h+=o;break;case ra:case oa:if(n&&"file"==e.scheme){c=ca;continue}if(":"!=o||d){if(o==ao||"/"==o||"?"==o||"#"==o||"\\"==o&&Ho(e)){if(Ho(e)&&""==h)return yo;if(n&&""==h&&(Bo(e)||null!==e.port))return;if(s=Lo(e,h))return s;if(h="",c=ua,n)return;continue}"["==o?d=!0:"]"==o&&(d=!1),h+=o}else{if(""==h)return yo;if(s=Lo(e,h))return s;if(h="",c=aa,n==oa)return}break;case aa:if(!To.test(o)){if(o==ao||"/"==o||"?"==o||"#"==o||"\\"==o&&Ho(e)||n){if(""!=h){var y=parseInt(h,10);if(y>65535)return bo;e.port=Ho(e)&&y===qo[e.scheme]?null:y,h=""}if(n)return;c=ua;continue}return bo}h+=o;break;case sa:if(e.scheme="file","/"==o||"\\"==o)c=la;else{if(!i||"file"!=i.scheme){c=ha;continue}if(o==ao)e.host=i.host,e.path=i.path.slice(),e.query=i.query;else if("?"==o)e.host=i.host,e.path=i.path.slice(),e.query="",c=da;else{if("#"!=o){Wo(r.slice(u).join(""))||(e.host=i.host,e.path=i.path.slice(),Ko(e)),c=ha;continue}e.host=i.host,e.path=i.path.slice(),e.query=i.query,e.fragment="",c=pa}}break;case la:if("/"==o||"\\"==o){c=ca;break}i&&"file"==i.scheme&&!Wo(r.slice(u).join(""))&&(zo(i.path[0],!0)?e.path.push(i.path[0]):e.host=i.host),c=ha;continue;case ca:if(o==ao||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&zo(h))c=ha;else if(""==h){if(e.host="",n)return;c=ua}else{if(s=Lo(e,h))return s;if("localhost"==e.host&&(e.host=""),n)return;h="",c=ua}continue}h+=o;break;case ua:if(Ho(e)){if(c=ha,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=ao&&(c=ha,"/"!=o))continue}else e.fragment="",c=pa;else e.query="",c=da;break;case ha:if(o==ao||"/"==o||"\\"==o&&Ho(e)||!n&&("?"==o||"#"==o)){if(".."===(l=(l=h).toLowerCase())||"%2e."===l||".%2e"===l||"%2e%2e"===l?(Ko(e),"/"==o||"\\"==o&&Ho(e)||e.path.push("")):$o(h)?"/"==o||"\\"==o&&Ho(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&zo(h)&&(e.host&&(e.host=""),h=h.charAt(0)+":"),e.path.push(h)),h="","file"==e.scheme&&(o==ao||"?"==o||"#"==o))for(;e.path.length>1&&""===e.path[0];)e.path.shift();"?"==o?(e.query="",c=da):"#"==o&&(e.fragment="",c=pa)}else h+=Fo(o,Uo);break;case fa:"?"==o?(e.query="",c=da):"#"==o?(e.fragment="",c=pa):o!=ao&&(e.path[0]+=Fo(o,Mo));break;case da:n||"#"!=o?o!=ao&&("'"==o&&Ho(e)?e.query+="%27":e.query+="#"==o?"%23":Fo(o,Mo)):(e.fragment="",c=pa);break;case pa:o!=ao&&(e.fragment+=Fo(o,_o))}u++}},ga=function(e){var t,n,i=pr(this,ga,"URL"),r=arguments.length>1?arguments[1]:void 0,a=String(e),s=fo(i,{type:"URL"});if(void 0!==r)if(r instanceof ga)t=po(r);else if(n=ma(t={},String(r)))throw TypeError(n);if(n=ma(s,a,null,t))throw TypeError(n);var l=s.searchParams=new uo,c=ho(l);c.updateSearchParams(s.query),c.updateURL=function(){s.query=String(l)||null},o||(i.href=ya.call(i),i.origin=ba.call(i),i.protocol=wa.call(i),i.username=ka.call(i),i.password=Ta.call(i),i.host=Sa.call(i),i.hostname=Ea.call(i),i.port=Aa.call(i),i.pathname=Ca.call(i),i.search=Pa.call(i),i.searchParams=xa.call(i),i.hash=Oa.call(i))},va=ga.prototype,ya=function(){var e=po(this),t=e.scheme,n=e.username,i=e.password,r=e.host,o=e.port,a=e.path,s=e.query,l=e.fragment,c=t+":";return null!==r?(c+="//",Bo(e)&&(c+=n+(i?":"+i:"")+"@"),c+=Ro(r),null!==o&&(c+=":"+o)):"file"==t&&(c+="//"),c+=e.cannotBeABaseURL?a[0]:a.length?"/"+a.join("/"):"",null!==s&&(c+="?"+s),null!==l&&(c+="#"+l),c},ba=function(){var e=po(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(e){return"null"}return"file"!=t&&Ho(e)?t+"://"+Ro(e.host)+(null!==n?":"+n:""):"null"},wa=function(){return po(this).scheme+":"},ka=function(){return po(this).username},Ta=function(){return po(this).password},Sa=function(){var e=po(this),t=e.host,n=e.port;return null===t?"":null===n?Ro(t):Ro(t)+":"+n},Ea=function(){var e=po(this).host;return null===e?"":Ro(e)},Aa=function(){var e=po(this).port;return null===e?"":String(e)},Ca=function(){var e=po(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},Pa=function(){var e=po(this).query;return e?"?"+e:""},xa=function(){return po(this).searchParams},Oa=function(){var e=po(this).fragment;return e?"#"+e:""},Ia=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(o&&Ue(va,{href:Ia(ya,(function(e){var t=po(this),n=String(e),i=ma(t,n);if(i)throw TypeError(i);ho(t.searchParams).updateSearchParams(t.query)})),origin:Ia(ba),protocol:Ia(wa,(function(e){var t=po(this);ma(t,String(e)+":",Yo)})),username:Ia(ka,(function(e){var t=po(this),n=Ar(String(e));if(!Vo(t)){t.username="";for(var i=0;i<n.length;i++)t.username+=Fo(n[i],Do)}})),password:Ia(Ta,(function(e){var t=po(this),n=Ar(String(e));if(!Vo(t)){t.password="";for(var i=0;i<n.length;i++)t.password+=Fo(n[i],Do)}})),host:Ia(Sa,(function(e){var t=po(this);t.cannotBeABaseURL||ma(t,String(e),ra)})),hostname:Ia(Ea,(function(e){var t=po(this);t.cannotBeABaseURL||ma(t,String(e),oa)})),port:Ia(Aa,(function(e){var t=po(this);Vo(t)||(""==(e=String(e))?t.port=null:ma(t,e,aa))})),pathname:Ia(Ca,(function(e){var t=po(this);t.cannotBeABaseURL||(t.path=[],ma(t,e+"",ua))})),search:Ia(Pa,(function(e){var t=po(this);""==(e=String(e))?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",ma(t,e,da)),ho(t.searchParams).updateSearchParams(t.query)})),searchParams:Ia(xa),hash:Ia(Oa,(function(e){var t=po(this);""!=(e=String(e))?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",ma(t,e,pa)):t.fragment=null}))}),te(va,"toJSON",(function(){return ya.call(this)}),{enumerable:!0}),te(va,"toString",(function(){return ya.call(this)}),{enumerable:!0}),co){var La=co.createObjectURL,ja=co.revokeObjectURL;La&&te(ga,"createObjectURL",(function(e){return La.apply(co,arguments)})),ja&&te(ga,"revokeObjectURL",(function(e){return ja.apply(co,arguments)}))}function Na(e){return(Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ra(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ma(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _a(e,t,n){return t&&Ma(e.prototype,t),n&&Ma(e,n),e}function Ua(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(n),!0).forEach((function(t){Ua(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Da(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qa(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Ha(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}(e,t)||Va(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(e){return function(e){if(Array.isArray(e))return za(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Va(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Va(e,t){if(e){if("string"==typeof e)return za(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?za(e,t):void 0}}function za(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}it(ga,"URL"),Le({global:!0,forced:!dr,sham:!o},{URL:ga}),function(e){var t=function(){try{return!!Symbol.iterator}catch(e){return!1}}(),n=function(e){var n={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t&&(n[Symbol.iterator]=function(){return n}),n},i=function(e){return encodeURIComponent(e).replace(/%20/g,"+")},r=function(e){return decodeURIComponent(String(e).replace(/\+/g," "))};(function(){try{var t=e.URLSearchParams;return"a=1"===new t("?a=1").toString()&&"function"==typeof t.prototype.set&&"function"==typeof t.prototype.entries}catch(e){return!1}})()||function(){var r=function e(t){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var n=Na(t);if("undefined"===n);else if("string"===n)""!==t&&this._fromString(t);else if(t instanceof e){var i=this;t.forEach((function(e,t){i.append(t,e)}))}else{if(null===t||"object"!==n)throw new TypeError("Unsupported input's type for URLSearchParams");if("[object Array]"===Object.prototype.toString.call(t))for(var r=0;r<t.length;r++){var o=t[r];if("[object Array]"!==Object.prototype.toString.call(o)&&2===o.length)throw new TypeError("Expected [string, any] as entry at index "+r+" of URLSearchParams's input");this.append(o[0],o[1])}else for(var a in t)t.hasOwnProperty(a)&&this.append(a,t[a])}},o=r.prototype;o.append=function(e,t){e in this._entries?this._entries[e].push(String(t)):this._entries[e]=[String(t)]},o.delete=function(e){delete this._entries[e]},o.get=function(e){return e in this._entries?this._entries[e][0]:null},o.getAll=function(e){return e in this._entries?this._entries[e].slice(0):[]},o.has=function(e){return e in this._entries},o.set=function(e,t){this._entries[e]=[String(t)]},o.forEach=function(e,t){var n;for(var i in this._entries)if(this._entries.hasOwnProperty(i)){n=this._entries[i];for(var r=0;r<n.length;r++)e.call(t,n[r],i,this)}},o.keys=function(){var e=[];return this.forEach((function(t,n){e.push(n)})),n(e)},o.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),n(e)},o.entries=function(){var e=[];return this.forEach((function(t,n){e.push([n,t])})),n(e)},t&&(o[Symbol.iterator]=o.entries),o.toString=function(){var e=[];return this.forEach((function(t,n){e.push(i(n)+"="+i(t))})),e.join("&")},e.URLSearchParams=r}();var o=e.URLSearchParams.prototype;"function"!=typeof o.sort&&(o.sort=function(){var e=this,t=[];this.forEach((function(n,i){t.push([i,n]),e._entries||e.delete(i)})),t.sort((function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0})),e._entries&&(e._entries={});for(var n=0;n<t.length;n++)this.append(t[n][0],t[n][1])}),"function"!=typeof o._fromString&&Object.defineProperty(o,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(e){if(this._entries)this._entries={};else{var t=[];this.forEach((function(e,n){t.push(n)}));for(var n=0;n<t.length;n++)this.delete(t[n])}var i,o=(e=e.replace(/^\?/,"")).split("&");for(n=0;n<o.length;n++)i=o[n].split("="),this.append(r(i[0]),i.length>1?r(i[1]):"")}})}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:e),function(e){if(function(){try{var t=new e.URL("b","http://a");return t.pathname="c d","http://a/c%20d"===t.href&&t.searchParams}catch(e){return!1}}()||function(){var t=e.URL,n=function(t,n){"string"!=typeof t&&(t=String(t)),n&&"string"!=typeof n&&(n=String(n));var i,r=document;if(n&&(void 0===e.location||n!==e.location.href)){n=n.toLowerCase(),(i=(r=document.implementation.createHTMLDocument("")).createElement("base")).href=n,r.head.appendChild(i);try{if(0!==i.href.indexOf(n))throw new Error(i.href)}catch(e){throw new Error("URL unable to set base "+n+" due to "+e)}}var o=r.createElement("a");o.href=t,i&&(r.body.appendChild(o),o.href=o.href);var a=r.createElement("input");if(a.type="url",a.value=t,":"===o.protocol||!/:/.test(o.href)||!a.checkValidity()&&!n)throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:o});var s=new e.URLSearchParams(this.search),l=!0,c=!0,u=this;["append","delete","set"].forEach((function(e){var t=s[e];s[e]=function(){t.apply(s,arguments),l&&(c=!1,u.search=s.toString(),c=!0)}})),Object.defineProperty(this,"searchParams",{value:s,enumerable:!0});var h=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==h&&(h=this.search,c&&(l=!1,this.searchParams._fromString(this.search),l=!0))}})},i=n.prototype;["hash","host","hostname","port","protocol"].forEach((function(e){!function(e){Object.defineProperty(i,e,{get:function(){return this._anchorElement[e]},set:function(t){this._anchorElement[e]=t},enumerable:!0})}(e)})),Object.defineProperty(i,"search",{get:function(){return this._anchorElement.search},set:function(e){this._anchorElement.search=e,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(i,{toString:{get:function(){var e=this;return function(){return e.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(e){this._anchorElement.href=e,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(e){this._anchorElement.pathname=e},enumerable:!0},origin:{get:function(){var e={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],t=this._anchorElement.port!=e&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(t?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(e){},enumerable:!0},username:{get:function(){return""},set:function(e){},enumerable:!0}}),n.createObjectURL=function(e){return t.createObjectURL.apply(t,arguments)},n.revokeObjectURL=function(e){return t.revokeObjectURL.apply(t,arguments)},e.URL=n}(),void 0!==e.location&&!("origin"in e.location)){var t=function(){return e.location.protocol+"//"+e.location.hostname+(e.location.port?":"+e.location.port:"")};try{Object.defineProperty(e.location,"origin",{get:t,enumerable:!0})}catch(n){setInterval((function(){e.location.origin=t()}),100)}}}(void 0!==e?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:e);var Wa=Qe("isConcatSpreadable"),Ka=9007199254740991,$a="Maximum allowed index exceeded",Ya=Xn>=51||!r((function(){var e=[];return e[Wa]=!1,e.concat()[0]!==e})),Ga=Jn("concat"),Xa=function(e){if(!g(e))return!1;var t=e[Wa];return void 0!==t?!!t:Re(e)};Le({target:"Array",proto:!0,forced:!Ya||!Ga},{concat:function(e){var t,n,i,r,o,a=Me(this),s=st(a,0),l=0;for(t=-1,i=arguments.length;t<i;t++)if(Xa(o=-1===t?a:arguments[t])){if(l+(r=ce(o.length))>Ka)throw TypeError($a);for(n=0;n<r;n++,l++)n in o&&Wn(s,l,o[n])}else{if(l>=Ka)throw TypeError($a);Wn(s,l++,o)}return s.length=l,s}});var Qa=ut.filter,Ja=Jn("filter"),Za=Zt("filter");Le({target:"Array",proto:!0,forced:!Ja||!Za},{filter:function(e){return Qa(this,e,arguments.length>1?arguments[1]:void 0)}});var es=ut.find,ts="find",ns=!0,is=Zt(ts);ts in[]&&Array(1).find((function(){ns=!1})),Le({target:"Array",proto:!0,forced:ns||!is},{find:function(e){return es(this,e,arguments.length>1?arguments[1]:void 0)}}),mn(ts);var rs=Qe("iterator"),os=!1;try{var as=0,ss={next:function(){return{done:!!as++}},return:function(){os=!0}};ss[rs]=function(){return this},Array.from(ss,(function(){throw 2}))}catch(e){}var ls=function(e,t){if(!t&&!os)return!1;var n=!1;try{var i={};i[rs]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n},cs=!ls((function(e){Array.from(e)}));Le({target:"Array",stat:!0,forced:cs},{from:Ar});var us=pe.includes,hs=Zt("indexOf",{ACCESSORS:!0,1:0});Le({target:"Array",proto:!0,forced:!hs},{includes:function(e){return us(this,e,arguments.length>1?arguments[1]:void 0)}}),mn("includes");var fs=ut.map,ds=Jn("map"),ps=Zt("map");Le({target:"Array",proto:!0,forced:!ds||!ps},{map:function(e){return fs(this,e,arguments.length>1?arguments[1]:void 0)}});var ms=function(e,t,n){var i,r;return Pn&&"function"==typeof(i=t.constructor)&&i!==n&&g(r=i.prototype)&&r!==n.prototype&&Pn(e,r),e},gs="\t\n\v\f\r                　\u2028\u2029\ufeff",vs="["+gs+"]",ys=RegExp("^"+vs+vs+"*"),bs=RegExp(vs+vs+"*$"),ws=function(e){return function(t){var n=String(p(t));return 1&e&&(n=n.replace(ys,"")),2&e&&(n=n.replace(bs,"")),n}},ks={start:ws(1),end:ws(2),trim:ws(3)},Ts=be.f,Ss=A.f,Es=x.f,As=ks.trim,Cs="Number",Ps=i.Number,xs=Ps.prototype,Os=h(Ve(xs))==Cs,Is=function(e){var t,n,i,r,o,a,s,l,c=v(e,!1);if("string"==typeof c&&c.length>2)if(43===(t=(c=As(c)).charCodeAt(0))||45===t){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+c}for(a=(o=c.slice(2)).length,s=0;s<a;s++)if((l=o.charCodeAt(s))<48||l>r)return NaN;return parseInt(o,i)}return+c};if(Oe(Cs,!Ps(" 0o1")||!Ps("0b1")||Ps("+0x1"))){for(var Ls,js=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof js&&(Os?r((function(){xs.valueOf.call(n)})):h(n)!=Cs)?ms(new Ps(Is(t)),n,js):Is(t)},Ns=o?Ts(Ps):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Rs=0;Ns.length>Rs;Rs++)b(Ps,Ls=Ns[Rs])&&!b(js,Ls)&&Es(js,Ls,Ss(Ps,Ls));js.prototype=xs,xs.constructor=js,te(i,Cs,js)}var Ms=r((function(){_e(1)}));Le({target:"Object",stat:!0,forced:Ms},{keys:function(e){return _e(Me(e))}});var _s=function(e){if(Yi(e))throw TypeError("The method doesn't accept regular expressions");return e},Us=Qe("match"),Ds=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Us]=!1,"/./"[e](t)}catch(e){}}return!1};Le({target:"String",proto:!0,forced:!Ds("includes")},{includes:function(e){return!!~String(p(this)).indexOf(_s(e),arguments.length>1?arguments[1]:void 0)}});var Fs=!r((function(){return Object.isExtensible(Object.preventExtensions({}))})),qs=t((function(e){var t=x.f,n=V("meta"),i=0,r=Object.isExtensible||function(){return!0},o=function(e){t(e,n,{value:{objectID:"O"+ ++i,weakData:{}}})},a=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!g(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!b(e,n)){if(!r(e))return"F";if(!t)return"E";o(e)}return e[n].objectID},getWeakData:function(e,t){if(!b(e,n)){if(!r(e))return!0;if(!t)return!1;o(e)}return e[n].weakData},onFreeze:function(e){return Fs&&a.REQUIRED&&r(e)&&!b(e,n)&&o(e),e}};K[n]=!0})),Hs=(qs.REQUIRED,qs.fastKey,qs.getWeakData,qs.onFreeze,function(e,t){this.stopped=e,this.result=t}),Bs=function(e,t,n){var i,r,o,a,s,l,c,u=n&&n.that,h=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),p=ot(t,u,1+h+d),m=function(e){return i&&yr(i),new Hs(!0,e)},g=function(e){return h?(C(e),d?p(e[0],e[1],m):p(e[0],e[1])):d?p(e,m):p(e)};if(f)i=e;else{if("function"!=typeof(r=Er(e)))throw TypeError("Target is not iterable");if(Tr(r)){for(o=0,a=ce(e.length);a>o;o++)if((s=g(e[o]))&&s instanceof Hs)return s;return new Hs(!1)}i=r.call(e)}for(l=i.next;!(c=l.call(i)).done;){try{s=g(c.value)}catch(e){throw yr(i),e}if("object"==typeof s&&s&&s instanceof Hs)return s}return new Hs(!1)},Vs=qs.getWeakData,zs=ee.set,Ws=ee.getterFor,Ks=ut.find,$s=ut.findIndex,Ys=0,Gs=function(e){return e.frozen||(e.frozen=new Xs)},Xs=function(){this.entries=[]},Qs=function(e,t){return Ks(e.entries,(function(e){return e[0]===t}))};Xs.prototype={get:function(e){var t=Qs(this,e);if(t)return t[1]},has:function(e){return!!Qs(this,e)},set:function(e,t){var n=Qs(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=$s(this.entries,(function(t){return t[0]===e}));return~t&&this.entries.splice(t,1),!!~t}};var Js={getConstructor:function(e,t,n,i){var r=e((function(e,o){pr(e,r,t),zs(e,{type:t,id:Ys++,frozen:void 0}),null!=o&&Bs(o,e[i],{that:e,AS_ENTRIES:n})})),o=Ws(t),a=function(e,t,n){var i=o(e),r=Vs(C(t),!0);return!0===r?Gs(i).set(t,n):r[i.id]=n,e};return Mr(r.prototype,{delete:function(e){var t=o(this);if(!g(e))return!1;var n=Vs(e);return!0===n?Gs(t).delete(e):n&&b(n,t.id)&&delete n[t.id]},has:function(e){var t=o(this);if(!g(e))return!1;var n=Vs(e);return!0===n?Gs(t).has(e):n&&b(n,t.id)}}),Mr(r.prototype,n?{get:function(e){var t=o(this);if(g(e)){var n=Vs(e);return!0===n?Gs(t).get(e):n?n[t.id]:void 0}},set:function(e,t){return a(this,e,t)}}:{add:function(e){return a(this,e,!0)}}),r}},Zs=(t((function(e){var t,n=ee.enforce,o=!i.ActiveXObject&&"ActiveXObject"in i,a=Object.isExtensible,s=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},l=e.exports=function(e,t,n){var o=-1!==e.indexOf("Map"),a=-1!==e.indexOf("Weak"),s=o?"set":"add",l=i[e],c=l&&l.prototype,u=l,h={},f=function(e){var t=c[e];te(c,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(a&&!g(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return a&&!g(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(a&&!g(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(Oe(e,"function"!=typeof l||!(a||c.forEach&&!r((function(){(new l).entries().next()})))))u=n.getConstructor(t,e,o,s),qs.REQUIRED=!0;else if(Oe(e,!0)){var d=new u,p=d[s](a?{}:-0,1)!=d,m=r((function(){d.has(1)})),v=ls((function(e){new l(e)})),y=!a&&r((function(){for(var e=new l,t=5;t--;)e[s](t,t);return!e.has(-0)}));v||((u=t((function(t,n){pr(t,u,e);var i=ms(new l,t,u);return null!=n&&Bs(n,i[s],{that:i,AS_ENTRIES:o}),i}))).prototype=c,c.constructor=u),(m||y)&&(f("delete"),f("has"),o&&f("get")),(y||p)&&f(s),a&&c.clear&&delete c.clear}return h[e]=u,Le({global:!0,forced:u!=l},h),it(u,e),a||n.setStrong(u,e,o),u}("WeakMap",s,Js);if(F&&o){t=Js.getConstructor(s,"WeakMap",!0),qs.REQUIRED=!0;var c=l.prototype,u=c.delete,h=c.has,f=c.get,d=c.set;Mr(c,{delete:function(e){if(g(e)&&!a(e)){var i=n(this);return i.frozen||(i.frozen=new t),u.call(this,e)||i.frozen.delete(e)}return u.call(this,e)},has:function(e){if(g(e)&&!a(e)){var i=n(this);return i.frozen||(i.frozen=new t),h.call(this,e)||i.frozen.has(e)}return h.call(this,e)},get:function(e){if(g(e)&&!a(e)){var i=n(this);return i.frozen||(i.frozen=new t),h.call(this,e)?f.call(this,e):i.frozen.get(e)}return f.call(this,e)},set:function(e,i){if(g(e)&&!a(e)){var r=n(this);r.frozen||(r.frozen=new t),h.call(this,e)?d.call(this,e,i):r.frozen.set(e,i)}else d.call(this,e,i);return this}})}})),ut.every),el=Gt("every"),tl=Zt("every");Le({target:"Array",proto:!0,forced:!el||!tl},{every:function(e){return Zs(this,e,arguments.length>1?arguments[1]:void 0)}}),Le({target:"Object",stat:!0,forced:Object.assign!==vr},{assign:vr});var nl=ks.trim;Le({target:"String",proto:!0,forced:function(e){return r((function(){return!!gs[e]()||"​᠎"!="​᠎"[e]()||gs[e].name!==e}))}("trim")},{trim:function(){return nl(this)}});var il=ut.some,rl=Gt("some"),ol=Zt("some");Le({target:"Array",proto:!0,forced:!rl||!ol},{some:function(e){return il(this,e,arguments.length>1?arguments[1]:void 0)}});var al="".repeat||function(e){var t=String(p(this)),n="",i=se(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(n+=t);return n},sl=1..toFixed,ll=Math.floor,cl=function(e,t,n){return 0===t?n:t%2==1?cl(e,t-1,n*e):cl(e*e,t/2,n)},ul=sl&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){sl.call({})}));Le({target:"Number",proto:!0,forced:ul},{toFixed:function(e){var t,n,i,r,o=function(e){if("number"!=typeof e&&"Number"!=h(e))throw TypeError("Incorrect invocation");return+e}(this),a=se(e),s=[0,0,0,0,0,0],l="",c="0",u=function(e,t){for(var n=-1,i=t;++n<6;)i+=e*s[n],s[n]=i%1e7,i=ll(i/1e7)},f=function(e){for(var t=6,n=0;--t>=0;)n+=s[t],s[t]=ll(n/e),n=n%e*1e7},d=function(){for(var e=6,t="";--e>=0;)if(""!==t||0===e||0!==s[e]){var n=String(s[e]);t=""===t?n:t+al.call("0",7-n.length)+n}return t};if(a<0||a>20)throw RangeError("Incorrect fraction digits");if(o!=o)return"NaN";if(o<=-1e21||o>=1e21)return String(o);if(o<0&&(l="-",o=-o),o>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(o*cl(2,69,1))-69)<0?o*cl(2,-t,1):o/cl(2,t,1),n*=4503599627370496,(t=52-t)>0){for(u(0,n),i=a;i>=7;)u(1e7,0),i-=7;for(u(cl(10,i,1),0),i=t-1;i>=23;)f(1<<23),i-=23;f(1<<i),u(1,1),f(2),c=d()}else u(0,n),u(1<<-t,0),c=d()+al.call("0",a);return c=a>0?l+((r=c.length)<=a?"0."+al.call("0",a-r)+c:c.slice(0,r-a)+"."+c.slice(r-a)):l+c}});var hl=l.f,fl=function(e){return function(t){for(var n,i=m(t),r=_e(i),a=r.length,s=0,l=[];a>s;)n=r[s++],o&&!hl.call(i,n)||l.push(e?[n,i[n]]:i[n]);return l}},dl={entries:fl(!0),values:fl(!1)},pl=dl.entries;Le({target:"Object",stat:!0},{entries:function(e){return pl(e)}});var ml=dl.values;Le({target:"Object",stat:!0},{values:function(e){return ml(e)}}),Le({target:"Number",stat:!0},{isNaN:function(e){return e!=e}});var gl=A.f,vl=r((function(){gl(1)}));function yl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function bl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function kl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wl(Object(n),!0).forEach((function(t){bl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Le({target:"Object",stat:!0,forced:!o||vl,sham:!o},{getOwnPropertyDescriptor:function(e,t){return gl(m(e),t)}}),Le({target:"Object",stat:!0,sham:!o},{getOwnPropertyDescriptors:function(e){for(var t,n,i=m(e),r=A.f,o=ke(i),a={},s=0;o.length>s;)void 0!==(n=r(i,t=o[s++]))&&Wn(a,t,n);return a}}),Ui("match",1,(function(e,t,n){return[function(t){var n=p(this),i=null==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var r=C(e),o=String(this);if(!r.global)return qi(r,o);var a=r.unicode;r.lastIndex=0;for(var s,l=[],c=0;null!==(s=qi(r,o));){var u=String(s[0]);l[c]=u,""===u&&(r.lastIndex=Fi(o,ce(r.lastIndex),a)),c++}return 0===c?null:l}]}));var Tl={addCSS:!0,thumbWidth:15,watch:!0};function Sl(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}var El=function(e){return null!=e?e.constructor:null},Al=function(e,t){return!!(e&&t&&e instanceof t)},Cl=function(e){return null==e},Pl=function(e){return El(e)===Object},xl=function(e){return El(e)===String},Ol=function(e){return Array.isArray(e)},Il=function(e){return Al(e,NodeList)},Ll=xl,jl=Ol,Nl=Il,Rl=function(e){return Al(e,Element)},Ml=function(e){return Al(e,Event)},_l=function(e){return Cl(e)||(xl(e)||Ol(e)||Il(e))&&!e.length||Pl(e)&&!Object.keys(e).length};function Ul(e,t){if(1>t){var n=function(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}(t);return parseFloat(e.toFixed(n))}return Math.round(e/t)*t}var Dl,Fl,ql,Hl=function(){function e(t,n){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),Rl(t)?this.element=t:Ll(t)&&(this.element=document.querySelector(t)),Rl(this.element)&&_l(this.element.rangeTouch)&&(this.config=kl({},Tl,{},n),this.init())}return function(e,t,n){t&&yl(e.prototype,t),n&&yl(e,n)}(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,n=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach((function(e){t.element[n](e,(function(e){return t.set(e)}),!1)}))}},{key:"get",value:function(t){if(!e.enabled||!Ml(t))return null;var n,i=t.target,r=t.changedTouches[0],o=parseFloat(i.getAttribute("min"))||0,a=parseFloat(i.getAttribute("max"))||100,s=parseFloat(i.getAttribute("step"))||1,l=i.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(n=100/l.width*(r.clientX-l.left))?n=0:100<n&&(n=100),50>n?n-=(100-2*n)*c:50<n&&(n+=2*(n-50)*c),o+Ul(n/100*(a-o),s)}},{key:"set",value:function(t){e.enabled&&Ml(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),function(e,t){if(e&&t){var n=new Event(t,{bubbles:!0});e.dispatchEvent(n)}}(t.target,"touchend"===t.type?"change":"input"))}}],[{key:"setup",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=null;if(_l(t)||Ll(t)?i=Array.from(document.querySelectorAll(Ll(t)?t:'input[type="range"]')):Rl(t)?i=[t]:Nl(t)?i=Array.from(t):jl(t)&&(i=t.filter(Rl)),_l(i))return null;var r=kl({},Tl,{},n);if(Ll(t)&&r.watch){var o=new MutationObserver((function(n){Array.from(n).forEach((function(n){Array.from(n.addedNodes).forEach((function(n){Rl(n)&&Sl(n,t)&&new e(n,r)}))}))}));o.observe(document.body,{childList:!0,subtree:!0})}return i.map((function(t){return new e(t,n)}))}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}(),Bl=i.Promise,Vl=Qe("species"),zl=function(e){var t=re(e),n=x.f;o&&t&&!t[Vl]&&n(t,Vl,{configurable:!0,get:function(){return this}})},Wl=/(iphone|ipod|ipad).*applewebkit/i.test(Kn),Kl="process"==h(i.process),$l=i.location,Yl=i.setImmediate,Gl=i.clearImmediate,Xl=i.process,Ql=i.MessageChannel,Jl=i.Dispatch,Zl=0,ec={},tc="onreadystatechange",nc=function(e){if(ec.hasOwnProperty(e)){var t=ec[e];delete ec[e],t()}},ic=function(e){return function(){nc(e)}},rc=function(e){nc(e.data)},oc=function(e){i.postMessage(e+"",$l.protocol+"//"+$l.host)};Yl&&Gl||(Yl=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return ec[++Zl]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},Dl(Zl),Zl},Gl=function(e){delete ec[e]},Kl?Dl=function(e){Xl.nextTick(ic(e))}:Jl&&Jl.now?Dl=function(e){Jl.now(ic(e))}:Ql&&!Wl?(ql=(Fl=new Ql).port2,Fl.port1.onmessage=rc,Dl=ot(ql.postMessage,ql,1)):i.addEventListener&&"function"==typeof postMessage&&!i.importScripts&&$l&&"file:"!==$l.protocol&&!r(oc)?(Dl=oc,i.addEventListener("message",rc,!1)):Dl=tc in T("script")?function(e){De.appendChild(T("script")).onreadystatechange=function(){De.removeChild(this),nc(e)}}:function(e){setTimeout(ic(e),0)});var ac,sc,lc,cc,uc,hc,fc,dc,pc={set:Yl,clear:Gl},mc=A.f,gc=pc.set,vc=i.MutationObserver||i.WebKitMutationObserver,yc=i.document,bc=i.process,wc=i.Promise,kc=mc(i,"queueMicrotask"),Tc=kc&&kc.value;Tc||(ac=function(){var e,t;for(Kl&&(e=bc.domain)&&e.exit();sc;){t=sc.fn,sc=sc.next;try{t()}catch(e){throw sc?cc():lc=void 0,e}}lc=void 0,e&&e.enter()},!Wl&&!Kl&&vc&&yc?(uc=!0,hc=yc.createTextNode(""),new vc(ac).observe(hc,{characterData:!0}),cc=function(){hc.data=uc=!uc}):wc&&wc.resolve?(fc=wc.resolve(void 0),dc=fc.then,cc=function(){dc.call(fc,ac)}):cc=Kl?function(){bc.nextTick(ac)}:function(){gc.call(i,ac)});var Sc,Ec,Ac,Cc,Pc=Tc||function(e){var t={fn:e,next:void 0};lc&&(lc.next=t),sc||(sc=t,cc()),lc=t},xc=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=rt(t),this.reject=rt(n)},Oc={f:function(e){return new xc(e)}},Ic=function(e,t){if(C(e),g(t)&&t.constructor===e)return t;var n=Oc.f(e);return(0,n.resolve)(t),n.promise},Lc=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},jc=pc.set,Nc=Qe("species"),Rc="Promise",Mc=ee.get,_c=ee.set,Uc=ee.getterFor(Rc),Dc=Bl,Fc=i.TypeError,qc=i.document,Hc=i.process,Bc=re("fetch"),Vc=Oc.f,zc=Vc,Wc=!!(qc&&qc.createEvent&&i.dispatchEvent),Kc="function"==typeof PromiseRejectionEvent,$c="unhandledrejection",Yc=Oe(Rc,(function(){if(!(U(Dc)!==String(Dc))){if(66===Xn)return!0;if(!Kl&&!Kc)return!0}if(Xn>=51&&/native code/.test(Dc))return!1;var e=Dc.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[Nc]=t,!(e.then((function(){}))instanceof t)})),Gc=Yc||!ls((function(e){Dc.all(e).catch((function(){}))})),Xc=function(e){var t;return!(!g(e)||"function"!=typeof(t=e.then))&&t},Qc=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;Pc((function(){for(var i=e.value,r=1==e.state,o=0;n.length>o;){var a,s,l,c=n[o++],u=r?c.ok:c.fail,h=c.resolve,f=c.reject,d=c.domain;try{u?(r||(2===e.rejection&&tu(e),e.rejection=1),!0===u?a=i:(d&&d.enter(),a=u(i),d&&(d.exit(),l=!0)),a===c.promise?f(Fc("Promise-chain cycle")):(s=Xc(a))?s.call(a,h,f):h(a)):f(i)}catch(e){d&&!l&&d.exit(),f(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Zc(e)}))}},Jc=function(e,t,n){var r,o;Wc?((r=qc.createEvent("Event")).promise=t,r.reason=n,r.initEvent(e,!1,!0),i.dispatchEvent(r)):r={promise:t,reason:n},!Kc&&(o=i["on"+e])?o(r):e===$c&&function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}("Unhandled promise rejection",n)},Zc=function(e){jc.call(i,(function(){var t,n=e.facade,i=e.value;if(eu(e)&&(t=Lc((function(){Kl?Hc.emit("unhandledRejection",i,n):Jc($c,n,i)})),e.rejection=Kl||eu(e)?2:1,t.error))throw t.value}))},eu=function(e){return 1!==e.rejection&&!e.parent},tu=function(e){jc.call(i,(function(){var t=e.facade;Kl?Hc.emit("rejectionHandled",t):Jc("rejectionhandled",t,e.value)}))},nu=function(e,t,n){return function(i){e(t,i,n)}},iu=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Qc(e,!0))},ru=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw Fc("Promise can't be resolved itself");var i=Xc(t);i?Pc((function(){var n={done:!1};try{i.call(t,nu(ru,n,e),nu(iu,n,e))}catch(t){iu(n,t,e)}})):(e.value=t,e.state=1,Qc(e,!1))}catch(t){iu({done:!1},t,e)}}};Yc&&(Dc=function(e){pr(this,Dc,Rc),rt(e),Sc.call(this);var t=Mc(this);try{e(nu(ru,t),nu(iu,t))}catch(e){iu(t,e)}},(Sc=function(e){_c(this,{type:Rc,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Mr(Dc.prototype,{then:function(e,t){var n=Uc(this),i=Vc(Xi(this,Dc));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=Kl?Hc.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&Qc(n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),Ec=function(){var e=new Sc,t=Mc(e);this.promise=e,this.resolve=nu(ru,t),this.reject=nu(iu,t)},Oc.f=Vc=function(e){return e===Dc||e===Ac?new Ec(e):zc(e)},"function"==typeof Bl&&(Cc=Bl.prototype.then,te(Bl.prototype,"then",(function(e,t){var n=this;return new Dc((function(e,t){Cc.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof Bc&&Le({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return Ic(Dc,Bc.apply(i,arguments))}}))),Le({global:!0,wrap:!0,forced:Yc},{Promise:Dc}),it(Dc,Rc,!1),zl(Rc),Ac=re(Rc),Le({target:Rc,stat:!0,forced:Yc},{reject:function(e){var t=Vc(this);return t.reject.call(void 0,e),t.promise}}),Le({target:Rc,stat:!0,forced:Yc},{resolve:function(e){return Ic(this,e)}}),Le({target:Rc,stat:!0,forced:Gc},{all:function(e){var t=this,n=Vc(t),i=n.resolve,r=n.reject,o=Lc((function(){var n=rt(t.resolve),o=[],a=0,s=1;Bs(e,(function(e){var l=a++,c=!1;o.push(void 0),s++,n.call(t,e).then((function(e){c||(c=!0,o[l]=e,--s||i(o))}),r)})),--s||i(o)}));return o.error&&r(o.value),n.promise},race:function(e){var t=this,n=Vc(t),i=n.reject,r=Lc((function(){var r=rt(t.resolve);Bs(e,(function(e){r.call(t,e).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}});var ou,au=A.f,su="".startsWith,lu=Math.min,cu=Ds("startsWith"),uu=!(cu||(ou=au(String.prototype,"startsWith"),!ou||ou.writable));Le({target:"String",proto:!0,forced:!uu&&!cu},{startsWith:function(e){var t=String(p(this));_s(e);var n=ce(lu(arguments.length>1?arguments[1]:void 0,t.length)),i=String(e);return su?su.call(t,i,n):t.slice(n,n+i.length)===i}});var hu,fu,du,pu=function(e){return null!=e?e.constructor:null},mu=function(e,t){return Boolean(e&&t&&e instanceof t)},gu=function(e){return null==e},vu=function(e){return pu(e)===Object},yu=function(e){return pu(e)===String},bu=function(e){return pu(e)===Function},wu=function(e){return Array.isArray(e)},ku=function(e){return mu(e,NodeList)},Tu=function(e){return gu(e)||(yu(e)||wu(e)||ku(e))&&!e.length||vu(e)&&!Object.keys(e).length},Su=gu,Eu=vu,Au=function(e){return pu(e)===Number&&!Number.isNaN(e)},Cu=yu,Pu=function(e){return pu(e)===Boolean},xu=bu,Ou=wu,Iu=ku,Lu=function(e){return mu(e,Element)},ju=function(e){return mu(e,Event)},Nu=function(e){return mu(e,KeyboardEvent)},Ru=function(e){return mu(e,TextTrack)||!gu(e)&&yu(e.kind)},Mu=function(e){return mu(e,Promise)&&bu(e.then)},_u=function(e){if(mu(e,window.URL))return!0;if(!yu(e))return!1;var t=e;e.startsWith("http://")&&e.startsWith("https://")||(t="http://".concat(e));try{return!Tu(new URL(t).hostname)}catch(e){return!1}},Uu=Tu,Du=(hu=document.createElement("span"),fu={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},du=Object.keys(fu).find((function(e){return void 0!==hu.style[e]})),!!Cu(du)&&fu[du]);function Fu(e,t){setTimeout((function(){try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}}),t)}var qu={isIE:
/* @cc_on!@ */
!!document.documentMode,isEdge:window.navigator.userAgent.includes("Edge"),isWebkit:"WebkitAppearance"in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)},Hu=function(e){return function(t,n,i,r){rt(n);var o=Me(t),a=d(o),s=ce(o.length),l=e?s-1:0,c=e?-1:1;if(i<2)for(;;){if(l in a){r=a[l],l+=c;break}if(l+=c,e?l<0:s<=l)throw TypeError("Reduce of empty array with no initial value")}for(;e?l>=0:s>l;l+=c)l in a&&(r=n(r,a[l],l,o));return r}},Bu={left:Hu(!1),right:Hu(!0)}.left,Vu=Gt("reduce"),zu=Zt("reduce",{1:0});function Wu(e,t){return t.split(".").reduce((function(e,t){return e&&e[t]}),e)}function Ku(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(!n.length)return e;var r=n.shift();return Eu(r)?(Object.keys(r).forEach((function(t){Eu(r[t])?(Object.keys(e).includes(t)||Object.assign(e,Ua({},t,{})),Ku(e[t],r[t])):Object.assign(e,Ua({},t,r[t]))})),Ku.apply(void 0,[e].concat(n))):e}function $u(e,t){var n=e.length?e:[e];Array.from(n).reverse().forEach((function(e,n){var i=n>0?t.cloneNode(!0):t,r=e.parentNode,o=e.nextSibling;i.appendChild(e),o?r.insertBefore(i,o):r.appendChild(i)}))}function Yu(e,t){Lu(e)&&!Uu(t)&&Object.entries(t).filter((function(e){var t=Ha(e,2)[1];return!Su(t)})).forEach((function(t){var n=Ha(t,2),i=n[0],r=n[1];return e.setAttribute(i,r)}))}function Gu(e,t,n){var i=document.createElement(e);return Eu(t)&&Yu(i,t),Cu(n)&&(i.innerText=n),i}function Xu(e,t,n,i){Lu(t)&&t.appendChild(Gu(e,n,i))}function Qu(e){Iu(e)||Ou(e)?Array.from(e).forEach(Qu):Lu(e)&&Lu(e.parentNode)&&e.parentNode.removeChild(e)}function Ju(e){if(Lu(e))for(var t=e.childNodes.length;t>0;)e.removeChild(e.lastChild),t-=1}function Zu(e,t){return Lu(t)&&Lu(t.parentNode)&&Lu(e)?(t.parentNode.replaceChild(e,t),e):null}function eh(e,t){if(!Cu(e)||Uu(e))return{};var n={},i=Ku({},t);return e.split(",").forEach((function(e){var t=e.trim(),r=t.replace(".",""),o=t.replace(/[[\]]/g,"").split("="),a=Ha(o,1)[0],s=o.length>1?o[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":Cu(i.class)?n.class="".concat(i.class," ").concat(r):n.class=r;break;case"#":n.id=t.replace("#","");break;case"[":n[a]=s}})),Ku(i,n)}function th(e,t){if(Lu(e)){var n=t;Pu(n)||(n=!e.hidden),e.hidden=n}}function nh(e,t,n){if(Iu(e))return Array.from(e).map((function(e){return nh(e,t,n)}));if(Lu(e)){var i="toggle";return void 0!==n&&(i=n?"add":"remove"),e.classList[i](t),e.classList.contains(t)}return!1}function ih(e,t){return Lu(e)&&e.classList.contains(t)}function rh(e,t){var n=Element.prototype;return(n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function oh(e){return this.elements.container.querySelectorAll(e)}function ah(e){return this.elements.container.querySelector(e)}function sh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Lu(e)&&(e.focus({preventScroll:!0}),t&&nh(e,this.config.classNames.tabFocus))}Le({target:"Array",proto:!0,forced:!Vu||!zu||!Kl&&Xn>79&&Xn<83},{reduce:function(e){return Bu(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}});var lh,ch={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},uh={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check:function(e,t,n){var i=qu.isIPhone&&n&&uh.playsinline,r=uh[e]||"html5"!==t;return{api:r,ui:r&&uh.rangeInput&&("video"!==e||!qu.isIPhone||i)}},pip:!(qu.isIPhone||!xu(Gu("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||Gu("video").disablePictureInPicture)),airplay:xu(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime:function(e){if(Uu(e))return!1;var t=Ha(e.split("/"),1)[0],n=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(ch).includes(n)&&(n+='; codecs="'.concat(ch[e],'"'));try{return Boolean(n&&this.media.canPlayType(n).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(lh=document.createElement("input"),lh.type="range","range"===lh.type),touch:"ontouchstart"in document.documentElement,transitions:!1!==Du,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},hh=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return e=!0,null}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}();function fh(e,t,n){var i=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(e&&"addEventListener"in e&&!Uu(t)&&xu(n)){var s=t.split(" "),l=a;hh&&(l={passive:o,capture:a}),s.forEach((function(t){i&&i.eventListeners&&r&&i.eventListeners.push({element:e,type:t,callback:n,options:l}),e[r?"addEventListener":"removeEventListener"](t,n,l)}))}}function dh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];fh.call(this,e,t,n,!0,i,r)}function ph(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];fh.call(this,e,t,n,!1,i,r)}function mh(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=function a(){ph(e,n,a,r,o);for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];i.apply(t,l)};fh.call(this,e,n,a,!0,r,o)}function gh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(Lu(e)&&!Uu(t)){var r=new CustomEvent(t,{bubbles:n,detail:Fa(Fa({},i),{},{plyr:this})});e.dispatchEvent(r)}}function vh(){this&&this.eventListeners&&(this.eventListeners.forEach((function(e){var t=e.element,n=e.type,i=e.callback,r=e.options;t.removeEventListener(n,i,r)})),this.eventListeners=[])}function yh(){var e=this;return new Promise((function(t){return e.ready?setTimeout(t,0):dh.call(e,e.elements.container,"ready",t)})).then((function(){}))}function bh(e){Mu(e)&&e.then(null,(function(){}))}function wh(e){return!!(Ou(e)||Cu(e)&&e.includes(":"))&&(Ou(e)?e:e.split(":")).map(Number).every(Au)}function kh(e){if(!Ou(e)||!e.every(Au))return null;var t=Ha(e,2),n=t[0],i=t[1],r=function e(t,n){return 0===n?t:e(n,t%n)}(n,i);return[n/r,i/r]}function Th(e){var t=function(e){return wh(e)?e.split(":").map(Number):null},n=t(e);if(null===n&&(n=t(this.config.ratio)),null===n&&!Uu(this.embed)&&Ou(this.embed.ratio)&&(n=this.embed.ratio),null===n&&this.isHTML5){var i=this.media;n=kh([i.videoWidth,i.videoHeight])}return n}function Sh(e){if(!this.isVideo)return{};var t=this.elements.wrapper,n=Th.call(this,e),i=Ha(Ou(n)?n:[0,0],2),r=100/i[0]*i[1];if(t.style.paddingBottom="".concat(r,"%"),this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){var o=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),a=(o-r)/(o/50);this.fullscreen.active?t.style.paddingBottom=null:this.media.style.transform="translateY(-".concat(a,"%)")}else this.isHTML5&&t.classList.toggle(this.config.classNames.videoFixedRatio,null!==n);return{padding:r,ratio:n}}var Eh={getSources:function(){var e=this;return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter((function(t){var n=t.getAttribute("type");return!!Uu(n)||uh.mime.call(e,n)})):[]},getQualityOptions:function(){return this.config.quality.forced?this.config.quality.options:Eh.getSources.call(this).map((function(e){return Number(e.getAttribute("size"))})).filter(Boolean)},setup:function(){if(this.isHTML5){var e=this;e.options.speed=e.config.speed.options,Uu(this.config.ratio)||Sh.call(e),Object.defineProperty(e.media,"quality",{get:function(){var t=Eh.getSources.call(e).find((function(t){return t.getAttribute("src")===e.source}));return t&&Number(t.getAttribute("size"))},set:function(t){if(e.quality!==t){if(e.config.quality.forced&&xu(e.config.quality.onChange))e.config.quality.onChange(t);else{var n=Eh.getSources.call(e).find((function(e){return Number(e.getAttribute("size"))===t}));if(!n)return;var i=e.media,r=i.currentTime,o=i.paused,a=i.preload,s=i.readyState,l=i.playbackRate;e.media.src=n.getAttribute("src"),("none"!==a||s)&&(e.once("loadedmetadata",(function(){e.speed=l,e.currentTime=r,o||bh(e.play())})),e.media.load())}gh.call(e,e.media,"qualitychange",!1,{quality:t})}}})}},cancelRequests:function(){this.isHTML5&&(Qu(Eh.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function Ah(e){return Ou(e)?e.filter((function(t,n){return e.indexOf(t)===n})):e}var Ch=x.f,Ph=be.f,xh=ee.set,Oh=Qe("match"),Ih=i.RegExp,Lh=Ih.prototype,jh=/a/g,Nh=/a/g,Rh=new Ih(jh)!==jh,Mh=fi.UNSUPPORTED_Y;if(o&&Oe("RegExp",!Rh||Mh||r((function(){return Nh[Oh]=!1,Ih(jh)!=jh||Ih(Nh)==Nh||"/a/i"!=Ih(jh,"i")})))){for(var _h=function(e,t){var n,i=this instanceof _h,r=Yi(e),o=void 0===t;if(!i&&r&&e.constructor===_h&&o)return e;Rh?r&&!o&&(e=e.source):e instanceof _h&&(o&&(t=ui.call(e)),e=e.source),Mh&&(n=!!t&&t.indexOf("y")>-1)&&(t=t.replace(/y/g,""));var a=ms(Rh?new Ih(e,t):Ih(e,t),i?this:Lh,_h);return Mh&&n&&xh(a,{sticky:n}),a},Uh=function(e){e in _h||Ch(_h,e,{configurable:!0,get:function(){return Ih[e]},set:function(t){Ih[e]=t}})},Dh=Ph(Ih),Fh=0;Dh.length>Fh;)Uh(Dh[Fh++]);Lh.constructor=_h,_h.prototype=Lh,te(i,"RegExp",_h)}function qh(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Uu(e)?e:e.toString().replace(/{(\d+)}/g,(function(e,t){return n[t].toString()}))}zl("RegExp");var Hh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),n.toString())},Bh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toString().replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))};function Vh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.toString();return t=Hh(t,"-"," "),t=Hh(t,"_"," "),t=Bh(t),Hh(t," ","")}function zh(e){var t=document.createElement("div");return t.appendChild(e),t.innerHTML}var Wh={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Kh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Uu(e)||Uu(t))return"";var n=Wu(t.i18n,e);if(Uu(n))return Object.keys(Wh).includes(e)?Wh[e]:"";var i={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(i).forEach((function(e){var t=Ha(e,2),i=t[0],r=t[1];n=Hh(n,i,r)})),n},$h=function(){function e(t){Ra(this,e),this.enabled=t.config.storage.enabled,this.key=t.config.storage.key}return _a(e,[{key:"get",value:function(t){if(!e.supported||!this.enabled)return null;var n=window.localStorage.getItem(this.key);if(Uu(n))return null;var i=JSON.parse(n);return Cu(t)&&t.length?i[t]:i}},{key:"set",value:function(t){if(e.supported&&this.enabled&&Eu(t)){var n=this.get();Uu(n)&&(n={}),Ku(n,t),window.localStorage.setItem(this.key,JSON.stringify(n))}}}],[{key:"supported",get:function(){try{if(!("localStorage"in window))return!1;var e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}}]),e}();function Yh(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";return new Promise((function(n,i){try{var r=new XMLHttpRequest;if(!("withCredentials"in r))return;r.addEventListener("load",(function(){if("text"===t)try{n(JSON.parse(r.responseText))}catch(e){n(r.responseText)}else n(r.response)})),r.addEventListener("error",(function(){throw new Error(r.status)})),r.open("GET",e,!0),r.responseType=t,r.send()}catch(e){i(e)}}))}function Gh(e,t){if(Cu(e)){var n="cache",i=Cu(t),r=function(){return null!==document.getElementById(t)},o=function(e,t){e.innerHTML=t,i&&r()||document.body.insertAdjacentElement("afterbegin",e)};if(!i||!r()){var a=$h.supported,s=document.createElement("div");if(s.setAttribute("hidden",""),i&&s.setAttribute("id",t),a){var l=window.localStorage.getItem("".concat(n,"-").concat(t));if(null!==l){var c=JSON.parse(l);o(s,c.content)}}Yh(e).then((function(e){Uu(e)||(a&&window.localStorage.setItem("".concat(n,"-").concat(t),JSON.stringify({content:e})),o(s,e))})).catch((function(){}))}}}var Xh=Math.ceil,Qh=Math.floor;Le({target:"Math",stat:!0},{trunc:function(e){return(e>0?Qh:Xh)(e)}});var Jh=function(e){return Math.trunc(e/60/60%60,10)},Zh=function(e){return Math.trunc(e/60%60,10)},ef=function(e){return Math.trunc(e%60,10)};function tf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Au(e))return tf(void 0,t,n);var i=function(e){return"0".concat(e).slice(-2)},r=Jh(e),o=Zh(e),a=ef(e);return r=t||r>0?"".concat(r,":"):"","".concat(n&&e>0?"-":"").concat(r).concat(i(o),":").concat(i(a))}var nf={getIconUrl:function(){var e=new URL(this.config.iconUrl,window.location).host!==window.location.host||qu.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:e}},findElements:function(){try{return this.elements.controls=ah.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:oh.call(this,this.config.selectors.buttons.play),pause:ah.call(this,this.config.selectors.buttons.pause),restart:ah.call(this,this.config.selectors.buttons.restart),rewind:ah.call(this,this.config.selectors.buttons.rewind),fastForward:ah.call(this,this.config.selectors.buttons.fastForward),mute:ah.call(this,this.config.selectors.buttons.mute),pip:ah.call(this,this.config.selectors.buttons.pip),airplay:ah.call(this,this.config.selectors.buttons.airplay),settings:ah.call(this,this.config.selectors.buttons.settings),captions:ah.call(this,this.config.selectors.buttons.captions),fullscreen:ah.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=ah.call(this,this.config.selectors.progress),this.elements.inputs={seek:ah.call(this,this.config.selectors.inputs.seek),volume:ah.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:ah.call(this,this.config.selectors.display.buffer),currentTime:ah.call(this,this.config.selectors.display.currentTime),duration:ah.call(this,this.config.selectors.display.duration)},Lu(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip))),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon:function(e,t){var n="http://www.w3.org/2000/svg",i=nf.getIconUrl.call(this),r="".concat(i.cors?"":i.url,"#").concat(this.config.iconPrefix),o=document.createElementNS(n,"svg");Yu(o,Ku(t,{"aria-hidden":"true",focusable:"false"}));var a=document.createElementNS(n,"use"),s="".concat(r,"-").concat(e);return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",s),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s),o.appendChild(a),o},createLabel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Kh(e,this.config),i=Fa(Fa({},t),{},{class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")});return Gu("span",i,n)},createBadge:function(e){if(Uu(e))return null;var t=Gu("span",{class:this.config.classNames.menu.value});return t.appendChild(Gu("span",{class:this.config.classNames.menu.badge},e)),t},createButton:function(e,t){var n=this,i=Ku({},t),r=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toString();return(e=Vh(e)).charAt(0).toLowerCase()+e.slice(1)}(e),o={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach((function(e){Object.keys(i).includes(e)&&(o[e]=i[e],delete i[e])})),"button"!==o.element||Object.keys(i).includes("type")||(i.type="button"),Object.keys(i).includes("class")?i.class.split(" ").some((function(e){return e===n.config.classNames.control}))||Ku(i,{class:"".concat(i.class," ").concat(this.config.classNames.control)}):i.class=this.config.classNames.control,e){case"play":o.toggle=!0,o.label="play",o.labelPressed="pause",o.icon="play",o.iconPressed="pause";break;case"mute":o.toggle=!0,o.label="mute",o.labelPressed="unmute",o.icon="volume",o.iconPressed="muted";break;case"captions":o.toggle=!0,o.label="enableCaptions",o.labelPressed="disableCaptions",o.icon="captions-off",o.iconPressed="captions-on";break;case"fullscreen":o.toggle=!0,o.label="enterFullscreen",o.labelPressed="exitFullscreen",o.icon="enter-fullscreen",o.iconPressed="exit-fullscreen";break;case"play-large":i.class+=" ".concat(this.config.classNames.control,"--overlaid"),r="play",o.label="play",o.icon="play";break;default:Uu(o.label)&&(o.label=r),Uu(o.icon)&&(o.icon=e)}var a=Gu(o.element);return o.toggle?(a.appendChild(nf.createIcon.call(this,o.iconPressed,{class:"icon--pressed"})),a.appendChild(nf.createIcon.call(this,o.icon,{class:"icon--not-pressed"})),a.appendChild(nf.createLabel.call(this,o.labelPressed,{class:"label--pressed"})),a.appendChild(nf.createLabel.call(this,o.label,{class:"label--not-pressed"}))):(a.appendChild(nf.createIcon.call(this,o.icon)),a.appendChild(nf.createLabel.call(this,o.label))),Ku(i,eh(this.config.selectors.buttons[r],i)),Yu(a,i),"play"===r?(Ou(this.elements.buttons[r])||(this.elements.buttons[r]=[]),this.elements.buttons[r].push(a)):this.elements.buttons[r]=a,a},createRange:function(e,t){var n=Gu("input",Ku(eh(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Kh(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=n,nf.updateRangeFill.call(this,n),Hl.setup(n),n},createProgress:function(e,t){var n=Gu("progress",Ku(eh(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){n.appendChild(Gu("span",null,"0"));var i={played:"played",buffer:"buffered"}[e],r=i?Kh(i,this.config):"";n.innerText="% ".concat(r.toLowerCase())}return this.elements.display[e]=n,n},createTime:function(e,t){var n=eh(this.config.selectors.display[e],t),i=Gu("div",Ku(n,{class:"".concat(n.class?n.class:""," ").concat(this.config.classNames.display.time," ").trim(),"aria-label":Kh(e,this.config)}),"00:00");return this.elements.display[e]=i,i},bindMenuItemShortcuts:function(e,t){var n=this;dh.call(this,e,"keydown keyup",(function(i){if([32,38,39,40].includes(i.which)&&(i.preventDefault(),i.stopPropagation(),"keydown"!==i.type)){var r,o=rh(e,'[role="menuitemradio"]');if(!o&&[32,39].includes(i.which))nf.showMenuPanel.call(n,t,!0);else 32!==i.which&&(40===i.which||o&&39===i.which?(r=e.nextElementSibling,Lu(r)||(r=e.parentNode.firstElementChild)):(r=e.previousElementSibling,Lu(r)||(r=e.parentNode.lastElementChild)),sh.call(n,r,!0))}}),!1),dh.call(this,e,"keyup",(function(e){13===e.which&&nf.focusFirstMenuItem.call(n,null,!0)}))},createMenuItem:function(e){var t=this,n=e.value,i=e.list,r=e.type,o=e.title,a=e.badge,s=void 0===a?null:a,l=e.checked,c=void 0!==l&&l,u=eh(this.config.selectors.inputs[r]),h=Gu("button",Ku(u,{type:"button",role:"menuitemradio",class:"".concat(this.config.classNames.control," ").concat(u.class?u.class:"").trim(),"aria-checked":c,value:n})),f=Gu("span");f.innerHTML=o,Lu(s)&&f.appendChild(s),h.appendChild(f),Object.defineProperty(h,"checked",{enumerable:!0,get:function(){return"true"===h.getAttribute("aria-checked")},set:function(e){e&&Array.from(h.parentNode.children).filter((function(e){return rh(e,'[role="menuitemradio"]')})).forEach((function(e){return e.setAttribute("aria-checked","false")})),h.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(h,"click keyup",(function(e){if(!Nu(e)||32===e.which){switch(e.preventDefault(),e.stopPropagation(),h.checked=!0,r){case"language":t.currentTrack=Number(n);break;case"quality":t.quality=n;break;case"speed":t.speed=parseFloat(n)}nf.showMenuPanel.call(t,"home",Nu(e))}}),r,!1),nf.bindMenuItemShortcuts.call(this,h,r),i.appendChild(h)},formatTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Au(e))return e;var n=Jh(this.duration)>0;return tf(e,n,t)},updateTimeDisplay:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Lu(e)&&Au(t)&&(e.innerText=nf.formatTime(t,n))},updateVolume:function(){this.supported.ui&&(Lu(this.elements.inputs.volume)&&nf.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),Lu(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Lu(e)&&(e.value=t,nf.updateRangeFill.call(this,e))},updateProgress:function(e){var t=this;if(this.supported.ui&&ju(e)){var n=0;if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":n=function(e,t){return 0===e||0===t||Number.isNaN(e)||Number.isNaN(t)?0:(e/t*100).toFixed(2)}(this.currentTime,this.duration),"timeupdate"===e.type&&nf.setRange.call(this,this.elements.inputs.seek,n);break;case"playing":case"progress":!function(e,n){var i=Au(n)?n:0,r=Lu(e)?e:t.elements.display.buffer;if(Lu(r)){r.value=i;var o=r.getElementsByTagName("span")[0];Lu(o)&&(o.childNodes[0].nodeValue=i)}}(this.elements.display.buffer,100*this.buffered)}}},updateRangeFill:function(e){var t=ju(e)?e.target:e;if(Lu(t)&&"range"===t.getAttribute("type")){if(rh(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);var n=nf.formatTime(this.currentTime),i=nf.formatTime(this.duration),r=Kh("seekLabel",this.config);t.setAttribute("aria-valuetext",r.replace("{currentTime}",n).replace("{duration}",i))}else if(rh(t,this.config.selectors.inputs.volume)){var o=100*t.value;t.setAttribute("aria-valuenow",o),t.setAttribute("aria-valuetext","".concat(o.toFixed(1),"%"))}else t.setAttribute("aria-valuenow",t.value);qu.isWebkit&&t.style.setProperty("--value","".concat(t.value/t.max*100,"%"))}},updateSeekTooltip:function(e){var t=this;if(this.config.tooltips.seek&&Lu(this.elements.inputs.seek)&&Lu(this.elements.display.seekTooltip)&&0!==this.duration){var n="".concat(this.config.classNames.tooltip,"--visible"),i=function(e){return nh(t.elements.display.seekTooltip,n,e)};if(this.touch)i(!1);else{var r=0,o=this.elements.progress.getBoundingClientRect();if(ju(e))r=100/o.width*(e.pageX-o.left);else{if(!ih(this.elements.display.seekTooltip,n))return;r=parseFloat(this.elements.display.seekTooltip.style.left,10)}r<0?r=0:r>100&&(r=100),nf.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*r),this.elements.display.seekTooltip.style.left="".concat(r,"%"),ju(e)&&["mouseenter","mouseleave"].includes(e.type)&&i("mouseenter"===e.type)}}},timeUpdate:function(e){var t=!Lu(this.elements.display.duration)&&this.config.invertTime;nf.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||nf.updateProgress.call(this,e)},durationUpdate:function(){if(this.supported.ui&&(this.config.invertTime||!this.currentTime)){if(this.duration>=Math.pow(2,32))return th(this.elements.display.currentTime,!0),void th(this.elements.progress,!0);Lu(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);var e=Lu(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&nf.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&nf.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),nf.updateSeekTooltip.call(this)}},toggleMenuButton:function(e,t){th(this.elements.settings.buttons[e],!t)},updateSetting:function(e,t,n){var i=this.elements.settings.panels[e],r=null,o=t;if("captions"===e)r=this.currentTrack;else{if(r=Uu(n)?this[e]:n,Uu(r)&&(r=this.config[e].default),!Uu(this.options[e])&&!this.options[e].includes(r))return void this.debug.warn("Unsupported value of '".concat(r,"' for ").concat(e));if(!this.config[e].options.includes(r))return void this.debug.warn("Disabled value of '".concat(r,"' for ").concat(e))}if(Lu(o)||(o=i&&i.querySelector('[role="menu"]')),Lu(o)){this.elements.settings.buttons[e].querySelector(".".concat(this.config.classNames.menu.value)).innerHTML=nf.getLabel.call(this,e,r);var a=o&&o.querySelector('[value="'.concat(r,'"]'));Lu(a)&&(a.checked=!0)}},getLabel:function(e,t){switch(e){case"speed":return 1===t?Kh("normal",this.config):"".concat(t,"&times;");case"quality":if(0===t)return"Auto";case"quality":if(Au(t)){var n=Kh("qualityLabel.".concat(t),this.config);return n.length?n:"".concat(t,"p")}return Bh(t);case"captions":return af.getLabel.call(this);default:return null}},setQualityMenu:function(e){var t=this;if(Lu(this.elements.settings.panels.quality)){var n="quality",i=this.elements.settings.panels.quality.querySelector('[role="menu"]');Ou(e)&&(this.options.quality=Ah(e).filter((function(e){return t.config.quality.options.includes(e)})));var r=!Uu(this.options.quality)&&this.options.quality.length>1;if(nf.toggleMenuButton.call(this,n,r),Ju(i),nf.checkMenu.call(this),r){var o=function(e){var n=Kh("qualityBadge.".concat(e),t.config);return n.length?nf.createBadge.call(t,n):null};this.options.quality.sort((function(e,n){var i=t.config.quality.options;return i.indexOf(e)>i.indexOf(n)?1:-1})).forEach((function(e){nf.createMenuItem.call(t,{value:e,list:i,type:n,title:nf.getLabel.call(t,"quality",e),badge:o(e)})})),nf.updateSetting.call(this,n,i)}}},setCaptionsMenu:function(){var e=this;if(Lu(this.elements.settings.panels.captions)){var t="captions",n=this.elements.settings.panels.captions.querySelector('[role="menu"]'),i=af.getTracks.call(this),r=Boolean(i.length);if(nf.toggleMenuButton.call(this,t,r),Ju(n),nf.checkMenu.call(this),r){var o=i.map((function(t,i){return{value:i,checked:e.captions.toggled&&e.currentTrack===i,title:af.getLabel.call(e,t),badge:t.language&&nf.createBadge.call(e,t.language.toUpperCase()),list:n,type:"language"}}));o.unshift({value:-1,checked:!this.captions.toggled,title:Kh("disabled",this.config),list:n,type:"language"}),o.forEach(nf.createMenuItem.bind(this)),nf.updateSetting.call(this,t,n)}}},setSpeedMenu:function(){var e=this;if(Lu(this.elements.settings.panels.speed)){var t="speed",n=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter((function(t){return t>=e.minimumSpeed&&t<=e.maximumSpeed}));var i=!Uu(this.options.speed)&&this.options.speed.length>1;nf.toggleMenuButton.call(this,t,i),Ju(n),nf.checkMenu.call(this),i&&(this.options.speed.forEach((function(i){nf.createMenuItem.call(e,{value:i,list:n,type:t,title:nf.getLabel.call(e,"speed",i)})})),nf.updateSetting.call(this,t,n))}},checkMenu:function(){var e=this.elements.settings.buttons,t=!Uu(e)&&Object.values(e).some((function(e){return!e.hidden}));th(this.elements.settings.menu,!t)},focusFirstMenuItem:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.elements.settings.popup.hidden){var n=e;Lu(n)||(n=Object.values(this.elements.settings.panels).find((function(e){return!e.hidden})));var i=n.querySelector('[role^="menuitem"]');sh.call(this,i,t)}},toggleMenu:function(e){var t=this.elements.settings.popup,n=this.elements.buttons.settings;if(Lu(t)&&Lu(n)){var i=t.hidden,r=i;if(Pu(e))r=e;else if(Nu(e)&&27===e.which)r=!1;else if(ju(e)){var o=xu(e.composedPath)?e.composedPath()[0]:e.target,a=t.contains(o);if(a||!a&&e.target!==n&&r)return}n.setAttribute("aria-expanded",r),th(t,!r),nh(this.elements.container,this.config.classNames.menu.open,r),r&&Nu(e)?nf.focusFirstMenuItem.call(this,null,!0):r||i||sh.call(this,n,Nu(e))}},getMenuSize:function(e){var t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);var n=t.scrollWidth,i=t.scrollHeight;return Qu(t),{width:n,height:i}},showMenuPanel:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.elements.container.querySelector("#plyr-settings-".concat(this.id,"-").concat(t));if(Lu(i)){var r=i.parentNode,o=Array.from(r.children).find((function(e){return!e.hidden}));if(uh.transitions&&!uh.reducedMotion){r.style.width="".concat(o.scrollWidth,"px"),r.style.height="".concat(o.scrollHeight,"px");var a=nf.getMenuSize.call(this,i),s=function t(n){n.target===r&&["width","height"].includes(n.propertyName)&&(r.style.width="",r.style.height="",ph.call(e,r,Du,t))};dh.call(this,r,Du,s),r.style.width="".concat(a.width,"px"),r.style.height="".concat(a.height,"px")}th(o,!0),th(i,!1),nf.focusFirstMenuItem.call(this,i,n)}},setDownloadUrl:function(){var e=this.elements.buttons.download;Lu(e)&&e.setAttribute("href",this.download)},create:function(e){var t=this,n=nf.bindMenuItemShortcuts,i=nf.createButton,r=nf.createProgress,o=nf.createRange,a=nf.createTime,s=nf.setQualityMenu,l=nf.setSpeedMenu,c=nf.showMenuPanel;this.elements.controls=null,Ou(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(i.call(this,"play-large"));var u=Gu("div",eh(this.config.selectors.controls.wrapper));this.elements.controls=u;var h={class:"plyr__controls__item"};return Ah(Ou(this.config.controls)?this.config.controls:[]).forEach((function(s){if("restart"===s&&u.appendChild(i.call(t,"restart",h)),"rewind"===s&&u.appendChild(i.call(t,"rewind",h)),"play"===s&&u.appendChild(i.call(t,"play",h)),"fast-forward"===s&&u.appendChild(i.call(t,"fast-forward",h)),"progress"===s){var l=Gu("div",{class:"".concat(h.class," plyr__progress__container")}),f=Gu("div",eh(t.config.selectors.progress));if(f.appendChild(o.call(t,"seek",{id:"plyr-seek-".concat(e.id)})),f.appendChild(r.call(t,"buffer")),t.config.tooltips.seek){var d=Gu("span",{class:t.config.classNames.tooltip},"00:00");f.appendChild(d),t.elements.display.seekTooltip=d}t.elements.progress=f,l.appendChild(t.elements.progress),u.appendChild(l)}if("current-time"===s&&u.appendChild(a.call(t,"currentTime",h)),"duration"===s&&u.appendChild(a.call(t,"duration",h)),"mute"===s||"volume"===s){var p=t.elements.volume;if(Lu(p)&&u.contains(p)||(p=Gu("div",Ku({},h,{class:"".concat(h.class," plyr__volume").trim()})),t.elements.volume=p,u.appendChild(p)),"mute"===s&&p.appendChild(i.call(t,"mute")),"volume"===s&&!qu.isIos){var m={max:1,step:.05,value:t.config.volume};p.appendChild(o.call(t,"volume",Ku(m,{id:"plyr-volume-".concat(e.id)})))}}if("captions"===s&&u.appendChild(i.call(t,"captions",h)),"settings"===s&&!Uu(t.config.settings)){var g=Gu("div",Ku({},h,{class:"".concat(h.class," plyr__menu").trim(),hidden:""}));g.appendChild(i.call(t,"settings",{"aria-haspopup":!0,"aria-controls":"plyr-settings-".concat(e.id),"aria-expanded":!1}));var v=Gu("div",{class:"plyr__menu__container",id:"plyr-settings-".concat(e.id),hidden:""}),y=Gu("div"),b=Gu("div",{id:"plyr-settings-".concat(e.id,"-home")}),w=Gu("div",{role:"menu"});b.appendChild(w),y.appendChild(b),t.elements.settings.panels.home=b,t.config.settings.forEach((function(i){var r=Gu("button",Ku(eh(t.config.selectors.buttons.settings),{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--forward"),role:"menuitem","aria-haspopup":!0,hidden:""}));n.call(t,r,i),dh.call(t,r,"click",(function(){c.call(t,i,!1)}));var o=Gu("span",null,Kh(i,t.config)),a=Gu("span",{class:t.config.classNames.menu.value});a.innerHTML=e[i],o.appendChild(a),r.appendChild(o),w.appendChild(r);var s=Gu("div",{id:"plyr-settings-".concat(e.id,"-").concat(i),hidden:""}),l=Gu("button",{type:"button",class:"".concat(t.config.classNames.control," ").concat(t.config.classNames.control,"--back")});l.appendChild(Gu("span",{"aria-hidden":!0},Kh(i,t.config))),l.appendChild(Gu("span",{class:t.config.classNames.hidden},Kh("menuBack",t.config))),dh.call(t,s,"keydown",(function(e){37===e.which&&(e.preventDefault(),e.stopPropagation(),c.call(t,"home",!0))}),!1),dh.call(t,l,"click",(function(){c.call(t,"home",!1)})),s.appendChild(l),s.appendChild(Gu("div",{role:"menu"})),y.appendChild(s),t.elements.settings.buttons[i]=r,t.elements.settings.panels[i]=s})),v.appendChild(y),g.appendChild(v),u.appendChild(g),t.elements.settings.popup=v,t.elements.settings.menu=g}if("pip"===s&&uh.pip&&u.appendChild(i.call(t,"pip",h)),"airplay"===s&&uh.airplay&&u.appendChild(i.call(t,"airplay",h)),"download"===s){var k=Ku({},h,{element:"a",href:t.download,target:"_blank"});t.isHTML5&&(k.download="");var T=t.config.urls.download;!_u(T)&&t.isEmbed&&Ku(k,{icon:"logo-".concat(t.provider),label:t.provider}),u.appendChild(i.call(t,"download",k))}"fullscreen"===s&&u.appendChild(i.call(t,"fullscreen",h))})),this.isHTML5&&s.call(this,Eh.getQualityOptions.call(this)),l.call(this),u},inject:function(){var e=this;if(this.config.loadSprite){var t=nf.getIconUrl.call(this);t.cors&&Gh(t.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());var n=null;this.elements.controls=null;var i={id:this.id,seektime:this.config.seekTime,title:this.config.title},r=!0;xu(this.config.controls)&&(this.config.controls=this.config.controls.call(this,i)),this.config.controls||(this.config.controls=[]),Lu(this.config.controls)||Cu(this.config.controls)?n=this.config.controls:(n=nf.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:af.getLabel.call(this)}),r=!1);var o,a;if(r&&Cu(this.config.controls)&&(o=n,Object.entries(i).forEach((function(e){var t=Ha(e,2),n=t[0],i=t[1];o=Hh(o,"{".concat(n,"}"),i)})),n=o),Cu(this.config.selectors.controls.container)&&(a=document.querySelector(this.config.selectors.controls.container)),Lu(a)||(a=this.elements.container),a[Lu(n)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",n),Lu(this.elements.controls)||nf.findElements.call(this),!Uu(this.elements.buttons)){var s=function(t){var n=e.config.classNames.controlPressed;Object.defineProperty(t,"pressed",{enumerable:!0,get:function(){return ih(t,n)},set:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];nh(t,n,e)}})};Object.values(this.elements.buttons).filter(Boolean).forEach((function(e){Ou(e)||Iu(e)?Array.from(e).filter(Boolean).forEach(s):s(e)}))}if(qu.isEdge&&Fu(a),this.config.tooltips.controls){var l=this.config,c=l.classNames,u=l.selectors,h="".concat(u.controls.wrapper," ").concat(u.labels," .").concat(c.hidden),f=oh.call(this,h);Array.from(f).forEach((function(t){nh(t,e.config.classNames.hidden,!1),nh(t,e.config.classNames.tooltip,!0)}))}}};function rf(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e;if(t){var i=document.createElement("a");i.href=n,n=i.href}try{return new URL(n)}catch(e){return null}}function of(e){var t=new URLSearchParams;return Eu(e)&&Object.entries(e).forEach((function(e){var n=Ha(e,2),i=n[0],r=n[1];t.set(i,r)})),t}var af={setup:function(){if(this.supported.ui)if(!this.isVideo||this.isYouTube||this.isHTML5&&!uh.textTracks)Ou(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&nf.setCaptionsMenu.call(this);else{if(Lu(this.elements.captions)||(this.elements.captions=Gu("div",eh(this.config.selectors.captions)),function(e,t){Lu(e)&&Lu(t)&&t.parentNode.insertBefore(e,t.nextSibling)}(this.elements.captions,this.elements.wrapper)),qu.isIE&&window.URL){var e=this.media.querySelectorAll("track");Array.from(e).forEach((function(e){var t=e.getAttribute("src"),n=rf(t);null!==n&&n.hostname!==window.location.href.hostname&&["http:","https:"].includes(n.protocol)&&Yh(t,"blob").then((function(t){e.setAttribute("src",window.URL.createObjectURL(t))})).catch((function(){Qu(e)}))}))}var t=Ah((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map((function(e){return e.split("-")[0]}))),n=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();if("auto"===n)n=Ha(t,1)[0];var i=this.storage.get("captions");if(Pu(i)||(i=this.config.captions.active),Object.assign(this.captions,{toggled:!1,active:i,language:n,languages:t}),this.isHTML5){var r=this.config.captions.update?"addtrack removetrack":"removetrack";dh.call(this,this.media.textTracks,r,af.update.bind(this))}setTimeout(af.update.bind(this),0)}},update:function(){var e=this,t=af.getTracks.call(this,!0),n=this.captions,i=n.active,r=n.language,o=n.meta,a=n.currentTrackNode,s=Boolean(t.find((function(e){return e.language===r})));this.isHTML5&&this.isVideo&&t.filter((function(e){return!o.get(e)})).forEach((function(t){e.debug.log("Track added",t),o.set(t,{default:"showing"===t.mode}),"showing"===t.mode&&(t.mode="hidden"),dh.call(e,t,"cuechange",(function(){return af.updateCues.call(e)}))})),(s&&this.language!==r||!t.includes(a))&&(af.setLanguage.call(this,r),af.toggle.call(this,i&&s)),nh(this.elements.container,this.config.classNames.captions.enabled,!Uu(t)),Ou(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&nf.setCaptionsMenu.call(this)},toggle:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.supported.ui){var i=this.captions.toggled,r=this.config.classNames.captions.active,o=Su(e)?!i:e;if(o!==i){if(n||(this.captions.active=o,this.storage.set({captions:o})),!this.language&&o&&!n){var a=af.getTracks.call(this),s=af.findTrack.call(this,[this.captions.language].concat(Ba(this.captions.languages)),!0);return this.captions.language=s.language,void af.set.call(this,a.indexOf(s))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=o),nh(this.elements.container,r,o),this.captions.toggled=o,nf.updateSetting.call(this,"captions"),gh.call(this,this.media,o?"captionsenabled":"captionsdisabled")}setTimeout((function(){o&&t.captions.toggled&&(t.captions.currentTrackNode.mode="hidden")}))}},set:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=af.getTracks.call(this);if(-1!==e)if(Au(e))if(e in n){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;var i=n[e],r=i||{},o=r.language;this.captions.currentTrackNode=i,nf.updateSetting.call(this,"captions"),t||(this.captions.language=o,this.storage.set({language:o})),this.isVimeo&&this.embed.enableTextTrack(o),gh.call(this,this.media,"languagechange")}af.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&af.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else af.toggle.call(this,!1,t)},setLanguage:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Cu(e)){var n=e.toLowerCase();this.captions.language=n;var i=af.getTracks.call(this),r=af.findTrack.call(this,[n]);af.set.call(this,i.indexOf(r),t)}else this.debug.warn("Invalid language argument",e)},getTracks:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=Array.from((this.media||{}).textTracks||[]);return n.filter((function(n){return!e.isHTML5||t||e.captions.meta.has(n)})).filter((function(e){return["captions","subtitles"].includes(e.kind)}))},findTrack:function(e){var t,n=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=af.getTracks.call(this),o=function(e){return Number((n.captions.meta.get(e)||{}).default)},a=Array.from(r).sort((function(e,t){return o(t)-o(e)}));return e.every((function(e){return!(t=a.find((function(t){return t.language===e})))})),t||(i?a[0]:void 0)},getCurrentTrack:function(){return af.getTracks.call(this)[this.currentTrack]},getLabel:function(e){var t=e;return!Ru(t)&&uh.textTracks&&this.captions.toggled&&(t=af.getCurrentTrack.call(this)),Ru(t)?Uu(t.label)?Uu(t.language)?Kh("enabled",this.config):e.language.toUpperCase():t.label:Kh("disabled",this.config)},updateCues:function(e){if(this.supported.ui)if(Lu(this.elements.captions))if(Su(e)||Array.isArray(e)){var t=e;if(!t){var n=af.getCurrentTrack.call(this);t=Array.from((n||{}).activeCues||[]).map((function(e){return e.getCueAsHTML()})).map(zh)}var i=t.map((function(e){return e.trim()})).join("\n");if(i!==this.elements.captions.innerHTML){Ju(this.elements.captions);var r=Gu("span",eh(this.config.selectors.caption));r.innerHTML=i,this.elements.captions.appendChild(r),gh.call(this,this.media,"cuechange")}}else this.debug.warn("updateCues: Invalid input",e);else this.debug.warn("No captions element to render to")}},sf={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.6.3/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isIos:"plyr--is-ios",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},tabFocus:"plyr__tab-focus",previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1}},lf="picture-in-picture",cf="inline",uf={html5:"html5",youtube:"youtube",vimeo:"vimeo"},hf="audio",ff="video";var df=function(){},pf=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];Ra(this,e),this.enabled=window.console&&t,this.enabled&&this.log("Debugging enabled")}return _a(e,[{key:"log",get:function(){return this.enabled?Function.prototype.bind.call(console.log,console):df}},{key:"warn",get:function(){return this.enabled?Function.prototype.bind.call(console.warn,console):df}},{key:"error",get:function(){return this.enabled?Function.prototype.bind.call(console.error,console):df}}]),e}(),mf=function(){function e(t){var n=this;Ra(this,e),this.player=t,this.prefix=e.prefix,this.property=e.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===t.config.fullscreen.fallback,this.player.elements.fullscreen=t.config.fullscreen.container&&function(e,t){return(Element.prototype.closest||function(){var e=this;do{if(rh.matches(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}).call(e,t)}(this.player.elements.container,t.config.fullscreen.container),dh.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":"".concat(this.prefix,"fullscreenchange"),(function(){n.onChange()})),dh.call(this.player,this.player.elements.container,"dblclick",(function(e){Lu(n.player.elements.controls)&&n.player.elements.controls.contains(e.target)||n.player.listeners.proxy(e,n.toggle,"fullscreen")})),dh.call(this,this.player.elements.container,"keydown",(function(e){return n.trapFocus(e)})),this.update()}return _a(e,[{key:"onChange",value:function(){if(this.enabled){var e=this.player.elements.buttons.fullscreen;Lu(e)&&(e.pressed=this.active);var t=this.target===this.player.media?this.target:this.player.elements.container;gh.call(this.player,t,this.active?"enterfullscreen":"exitfullscreen",!0)}}},{key:"toggleFallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e?this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=e?"hidden":"",nh(this.target,this.player.config.classNames.fullscreen.fallback,e),qu.isIos){var t=document.head.querySelector('meta[name="viewport"]'),n="viewport-fit=cover";t||(t=document.createElement("meta")).setAttribute("name","viewport");var i=Cu(t.content)&&t.content.includes(n);e?(this.cleanupViewport=!i,i||(t.content+=",".concat(n))):this.cleanupViewport&&(t.content=t.content.split(",").filter((function(e){return e.trim()!==n})).join(","))}this.onChange()}},{key:"trapFocus",value:function(e){if(!qu.isIos&&this.active&&"Tab"===e.key&&9===e.keyCode){var t=document.activeElement,n=oh.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),i=Ha(n,1)[0],r=n[n.length-1];t!==r||e.shiftKey?t===i&&e.shiftKey&&(r.focus(),e.preventDefault()):(i.focus(),e.preventDefault())}}},{key:"update",value:function(){var t;this.enabled?(t=this.forceFallback?"Fallback (forced)":e.native?"Native":"Fallback",this.player.debug.log("".concat(t," fullscreen enabled"))):this.player.debug.log("Fullscreen not supported and fallback disabled");nh(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled)}},{key:"enter",value:function(){this.enabled&&(qu.isIos&&this.player.config.fullscreen.iosNative?this.target.webkitEnterFullscreen():!e.native||this.forceFallback?this.toggleFallback(!0):this.prefix?Uu(this.prefix)||this.target["".concat(this.prefix,"Request").concat(this.property)]():this.target.requestFullscreen({navigationUI:"hide"}))}},{key:"exit",value:function(){if(this.enabled)if(qu.isIos&&this.player.config.fullscreen.iosNative)this.target.webkitExitFullscreen(),bh(this.player.play());else if(!e.native||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!Uu(this.prefix)){var t="moz"===this.prefix?"Cancel":"Exit";document["".concat(this.prefix).concat(t).concat(this.property)]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}},{key:"toggle",value:function(){this.active?this.exit():this.enter()}},{key:"usingNative",get:function(){return e.native&&!this.forceFallback}},{key:"enabled",get:function(){return(e.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo}},{key:"active",get:function(){if(!this.enabled)return!1;if(!e.native||this.forceFallback)return ih(this.target,this.player.config.classNames.fullscreen.fallback);var t=this.prefix?document["".concat(this.prefix).concat(this.property,"Element")]:document.fullscreenElement;return t&&t.shadowRoot?t===this.target.getRootNode().host:t===this.target}},{key:"target",get:function(){return qu.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen||this.player.elements.container}}],[{key:"native",get:function(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}},{key:"prefix",get:function(){if(xu(document.exitFullscreen))return"";var e="";return["webkit","moz","ms"].some((function(t){return!(!xu(document["".concat(t,"ExitFullscreen")])&&!xu(document["".concat(t,"CancelFullScreen")]))&&(e=t,!0)})),e}},{key:"property",get:function(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}}]),e}(),gf=Math.sign||function(e){return 0==(e=+e)||e!=e?e:e<0?-1:1};function vf(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((function(n,i){var r=new Image,o=function(){delete r.onload,delete r.onerror,(r.naturalWidth>=t?n:i)(r)};Object.assign(r,{onload:o,onerror:o,src:e})}))}Le({target:"Math",stat:!0},{sign:gf});var yf={addStyleHook:function(){nh(this.elements.container,this.config.selectors.container.replace(".",""),!0),nh(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build:function(){var e=this;if(this.listeners.media(),!this.supported.ui)return this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type)),void yf.toggleNativeControls.call(this,!0);Lu(this.elements.controls)||(nf.inject.call(this),this.listeners.controls()),yf.toggleNativeControls.call(this),this.isHTML5&&af.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,nf.updateVolume.call(this),nf.timeUpdate.call(this),yf.checkPlaying.call(this),nh(this.elements.container,this.config.classNames.pip.supported,uh.pip&&this.isHTML5&&this.isVideo),nh(this.elements.container,this.config.classNames.airplay.supported,uh.airplay&&this.isHTML5),nh(this.elements.container,this.config.classNames.isIos,qu.isIos),nh(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout((function(){gh.call(e,e.media,"ready")}),0),yf.setTitle.call(this),this.poster&&yf.setPoster.call(this,this.poster,!1).catch((function(){})),this.config.duration&&nf.durationUpdate.call(this)},setTitle:function(){var e=Kh("play",this.config);if(Cu(this.config.title)&&!Uu(this.config.title)&&(e+=", ".concat(this.config.title)),Array.from(this.elements.buttons.play||[]).forEach((function(t){t.setAttribute("aria-label",e)})),this.isEmbed){var t=ah.call(this,"iframe");if(!Lu(t))return;var n=Uu(this.config.title)?"video":this.config.title,i=Kh("frameTitle",this.config);t.setAttribute("title",i.replace("{title}",n))}},togglePoster:function(e){nh(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),yh.call(this).then((function(){return vf(e)})).catch((function(n){throw e===t.poster&&yf.togglePoster.call(t,!1),n})).then((function(){if(e!==t.poster)throw new Error("setPoster cancelled by later call to setPoster")})).then((function(){return Object.assign(t.elements.poster.style,{backgroundImage:"url('".concat(e,"')"),backgroundSize:""}),yf.togglePoster.call(t,!0),e})))},checkPlaying:function(e){var t=this;nh(this.elements.container,this.config.classNames.playing,this.playing),nh(this.elements.container,this.config.classNames.paused,this.paused),nh(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach((function(e){Object.assign(e,{pressed:t.playing}),e.setAttribute("aria-label",Kh(t.playing?"pause":"play",t.config))})),ju(e)&&"timeupdate"===e.type||yf.toggleControls.call(this)},checkLoading:function(e){var t=this;this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout((function(){nh(t.elements.container,t.config.classNames.loading,t.loading),yf.toggleControls.call(t)}),this.loading?250:0)},toggleControls:function(e){var t=this.elements.controls;if(t&&this.config.hideControls){var n=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||n))}},migrateStyles:function(){var e=this;Object.values(Fa({},this.media.style)).filter((function(e){return!Uu(e)&&Cu(e)&&e.startsWith("--plyr")})).forEach((function(t){e.elements.container.style.setProperty(t,e.media.style.getPropertyValue(t)),e.media.style.removeProperty(t)})),Uu(this.media.style)&&this.media.removeAttribute("style")}},bf=function(){function e(t){Ra(this,e),this.player=t,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.setTabFocus=this.setTabFocus.bind(this),this.firstTouch=this.firstTouch.bind(this)}return _a(e,[{key:"handleKey",value:function(e){var t=this.player,n=t.elements,i=e.keyCode?e.keyCode:e.which,r="keydown"===e.type,o=r&&i===this.lastKey;if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&Au(i)){if(r){var a=document.activeElement;if(Lu(a)){var s=t.config.selectors.editable;if(a!==n.inputs.seek&&rh(a,s))return;if(32===e.which&&rh(a,'button, [role^="menuitem"]'))return}switch([32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79].includes(i)&&(e.preventDefault(),e.stopPropagation()),i){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:o||(t.currentTime=t.duration/10*(i-48));break;case 32:case 75:o||bh(t.togglePlay());break;case 38:t.increaseVolume(.1);break;case 40:t.decreaseVolume(.1);break;case 77:o||(t.muted=!t.muted);break;case 39:t.forward();break;case 37:t.rewind();break;case 70:t.fullscreen.toggle();break;case 67:o||t.toggleCaptions();break;case 76:t.loop=!t.loop}27===i&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=i}else this.lastKey=null}}},{key:"toggleMenu",value:function(e){nf.toggleMenu.call(this.player,e)}},{key:"firstTouch",value:function(){var e=this.player,t=e.elements;e.touch=!0,nh(t.container,e.config.classNames.isTouch,!0)}},{key:"setTabFocus",value:function(e){var t=this.player,n=t.elements;if(clearTimeout(this.focusTimer),"keydown"!==e.type||9===e.which){"keydown"===e.type&&(this.lastKeyDown=e.timeStamp);var i,r=e.timeStamp-this.lastKeyDown<=20;if("focus"!==e.type||r)i=t.config.classNames.tabFocus,nh(oh.call(t,".".concat(i)),i,!1),"focusout"!==e.type&&(this.focusTimer=setTimeout((function(){var e=document.activeElement;n.container.contains(e)&&nh(document.activeElement,t.config.classNames.tabFocus,!0)}),10))}}},{key:"global",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.player;t.config.keyboard.global&&fh.call(t,window,"keydown keyup",this.handleKey,e,!1),fh.call(t,document.body,"click",this.toggleMenu,e),mh.call(t,document.body,"touchstart",this.firstTouch),fh.call(t,document.body,"keydown focus blur focusout",this.setTabFocus,e,!1,!0)}},{key:"container",value:function(){var e=this.player,t=e.config,n=e.elements,i=e.timers;!t.keyboard.global&&t.keyboard.focused&&dh.call(e,n.container,"keydown keyup",this.handleKey,!1),dh.call(e,n.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",(function(t){var r=n.controls;r&&"enterfullscreen"===t.type&&(r.pressed=!1,r.hover=!1);var o=0;["touchstart","touchmove","mousemove"].includes(t.type)&&(yf.toggleControls.call(e,!0),o=e.touch?3e3:2e3),clearTimeout(i.controls),i.controls=setTimeout((function(){return yf.toggleControls.call(e,!1)}),o)}));var r=function(t){if(!t)return Sh.call(e);var i=n.container.getBoundingClientRect(),r=i.width,o=i.height;return Sh.call(e,"".concat(r,":").concat(o))},o=function(){clearTimeout(i.resized),i.resized=setTimeout(r,50)};dh.call(e,n.container,"enterfullscreen exitfullscreen",(function(t){var i=e.fullscreen,a=i.target,s=i.usingNative;if(a===n.container&&(e.isEmbed||!Uu(e.config.ratio))){var l="enterfullscreen"===t.type,c=r(l);c.padding;!function(t,n,i){if(e.isVimeo&&!e.config.vimeo.premium){var r=e.elements.wrapper.firstChild,o=Ha(t,2)[1],a=Ha(Th.call(e),2),s=a[0],l=a[1];r.style.maxWidth=i?"".concat(o/l*s,"px"):null,r.style.margin=i?"0 auto":null}}(c.ratio,0,l),l&&setTimeout((function(){return Fu(n.container)}),100),s||(l?dh.call(e,window,"resize",o):ph.call(e,window,"resize",o))}}))}},{key:"media",value:function(){var e=this,t=this.player,n=t.elements;if(dh.call(t,t.media,"timeupdate seeking seeked",(function(e){return nf.timeUpdate.call(t,e)})),dh.call(t,t.media,"durationchange loadeddata loadedmetadata",(function(e){return nf.durationUpdate.call(t,e)})),dh.call(t,t.media,"ended",(function(){t.isHTML5&&t.isVideo&&t.config.resetOnEnd&&(t.restart(),t.pause())})),dh.call(t,t.media,"progress playing seeking seeked",(function(e){return nf.updateProgress.call(t,e)})),dh.call(t,t.media,"volumechange",(function(e){return nf.updateVolume.call(t,e)})),dh.call(t,t.media,"playing play pause ended emptied timeupdate",(function(e){return yf.checkPlaying.call(t,e)})),dh.call(t,t.media,"waiting canplay seeked playing",(function(e){return yf.checkLoading.call(t,e)})),t.supported.ui&&t.config.clickToPlay&&!t.isAudio){var i=ah.call(t,".".concat(t.config.classNames.video));if(!Lu(i))return;dh.call(t,n.container,"click",(function(r){([n.container,i].includes(r.target)||i.contains(r.target))&&(t.touch&&t.config.hideControls||(t.ended?(e.proxy(r,t.restart,"restart"),e.proxy(r,(function(){bh(t.play())}),"play")):e.proxy(r,(function(){bh(t.togglePlay())}),"play")))}))}t.supported.ui&&t.config.disableContextMenu&&dh.call(t,n.wrapper,"contextmenu",(function(e){e.preventDefault()}),!1),dh.call(t,t.media,"volumechange",(function(){t.storage.set({volume:t.volume,muted:t.muted})})),dh.call(t,t.media,"ratechange",(function(){nf.updateSetting.call(t,"speed"),t.storage.set({speed:t.speed})})),dh.call(t,t.media,"qualitychange",(function(e){nf.updateSetting.call(t,"quality",null,e.detail.quality)})),dh.call(t,t.media,"ready qualitychange",(function(){nf.setDownloadUrl.call(t)}));var r=t.config.events.concat(["keyup","keydown"]).join(" ");dh.call(t,t.media,r,(function(e){var i=e.detail,r=void 0===i?{}:i;"error"===e.type&&(r=t.media.error),gh.call(t,n.container,e.type,!0,r)}))}},{key:"proxy",value:function(e,t,n){var i=this.player,r=i.config.listeners[n],o=!0;xu(r)&&(o=r.call(i,e)),!1!==o&&xu(t)&&t.call(i,e)}},{key:"bind",value:function(e,t,n,i){var r=this,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.player,s=a.config.listeners[i],l=xu(s);dh.call(a,e,t,(function(e){return r.proxy(e,n,i)}),o&&!l)}},{key:"controls",value:function(){var e=this,t=this.player,n=t.elements,i=qu.isIE?"change":"input";if(n.buttons.play&&Array.from(n.buttons.play).forEach((function(n){e.bind(n,"click",(function(){bh(t.togglePlay())}),"play")})),this.bind(n.buttons.restart,"click",t.restart,"restart"),this.bind(n.buttons.rewind,"click",(function(){t.lastSeekTime=Date.now(),t.rewind()}),"rewind"),this.bind(n.buttons.fastForward,"click",(function(){t.lastSeekTime=Date.now(),t.forward()}),"fastForward"),this.bind(n.buttons.mute,"click",(function(){t.muted=!t.muted}),"mute"),this.bind(n.buttons.captions,"click",(function(){return t.toggleCaptions()})),this.bind(n.buttons.download,"click",(function(){gh.call(t,t.media,"download")}),"download"),this.bind(n.buttons.fullscreen,"click",(function(){t.fullscreen.toggle()}),"fullscreen"),this.bind(n.buttons.pip,"click",(function(){t.pip="toggle"}),"pip"),this.bind(n.buttons.airplay,"click",t.airplay,"airplay"),this.bind(n.buttons.settings,"click",(function(e){e.stopPropagation(),e.preventDefault(),nf.toggleMenu.call(t,e)}),null,!1),this.bind(n.buttons.settings,"keyup",(function(e){var n=e.which;[13,32].includes(n)&&(13!==n?(e.preventDefault(),e.stopPropagation(),nf.toggleMenu.call(t,e)):nf.focusFirstMenuItem.call(t,null,!0))}),null,!1),this.bind(n.settings.menu,"keydown",(function(e){27===e.which&&nf.toggleMenu.call(t,e)})),this.bind(n.inputs.seek,"mousedown mousemove",(function(e){var t=n.progress.getBoundingClientRect(),i=100/t.width*(e.pageX-t.left);e.currentTarget.setAttribute("seek-value",i)})),this.bind(n.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",(function(e){var n=e.currentTarget,i=e.keyCode?e.keyCode:e.which,r="play-on-seeked";if(!Nu(e)||39===i||37===i){t.lastSeekTime=Date.now();var o=n.hasAttribute(r),a=["mouseup","touchend","keyup"].includes(e.type);o&&a?(n.removeAttribute(r),bh(t.play())):!a&&t.playing&&(n.setAttribute(r,""),t.pause())}})),qu.isIos){var r=oh.call(t,'input[type="range"]');Array.from(r).forEach((function(t){return e.bind(t,i,(function(e){return Fu(e.target)}))}))}this.bind(n.inputs.seek,i,(function(e){var n=e.currentTarget,i=n.getAttribute("seek-value");Uu(i)&&(i=n.value),n.removeAttribute("seek-value"),t.currentTime=i/n.max*t.duration}),"seek"),this.bind(n.progress,"mouseenter mouseleave mousemove",(function(e){return nf.updateSeekTooltip.call(t,e)})),this.bind(n.progress,"mousemove touchmove",(function(e){var n=t.previewThumbnails;n&&n.loaded&&n.startMove(e)})),this.bind(n.progress,"mouseleave touchend click",(function(){var e=t.previewThumbnails;e&&e.loaded&&e.endMove(!1,!0)})),this.bind(n.progress,"mousedown touchstart",(function(e){var n=t.previewThumbnails;n&&n.loaded&&n.startScrubbing(e)})),this.bind(n.progress,"mouseup touchend",(function(e){var n=t.previewThumbnails;n&&n.loaded&&n.endScrubbing(e)})),qu.isWebkit&&Array.from(oh.call(t,'input[type="range"]')).forEach((function(n){e.bind(n,"input",(function(e){return nf.updateRangeFill.call(t,e.target)}))})),t.config.toggleInvert&&!Lu(n.display.duration)&&this.bind(n.display.currentTime,"click",(function(){0!==t.currentTime&&(t.config.invertTime=!t.config.invertTime,nf.timeUpdate.call(t))})),this.bind(n.inputs.volume,i,(function(e){t.volume=e.target.value}),"volume"),this.bind(n.controls,"mouseenter mouseleave",(function(e){n.controls.hover=!t.touch&&"mouseenter"===e.type})),n.fullscreen&&Array.from(n.fullscreen.children).filter((function(e){return!e.contains(n.container)})).forEach((function(i){e.bind(i,"mouseenter mouseleave",(function(e){n.controls.hover=!t.touch&&"mouseenter"===e.type}))})),this.bind(n.controls,"mousedown mouseup touchstart touchend touchcancel",(function(e){n.controls.pressed=["mousedown","touchstart"].includes(e.type)})),this.bind(n.controls,"focusin",(function(){var i=t.config,r=t.timers;nh(n.controls,i.classNames.noTransition,!0),yf.toggleControls.call(t,!0),setTimeout((function(){nh(n.controls,i.classNames.noTransition,!1)}),0);var o=e.touch?3e3:4e3;clearTimeout(r.controls),r.controls=setTimeout((function(){return yf.toggleControls.call(t,!1)}),o)})),this.bind(n.inputs.volume,"wheel",(function(e){var n=e.webkitDirectionInvertedFromDevice,i=Ha([e.deltaX,-e.deltaY].map((function(e){return n?-e:e})),2),r=i[0],o=i[1],a=Math.sign(Math.abs(r)>Math.abs(o)?r:o);t.increaseVolume(a/50);var s=t.media.volume;(1===a&&s<1||-1===a&&s>0)&&e.preventDefault()}),"volume",!1)}}]),e}(),wf=Jn("splice"),kf=Zt("splice",{ACCESSORS:!0,0:0,1:2}),Tf=Math.max,Sf=Math.min,Ef=9007199254740991,Af="Maximum allowed length exceeded";Le({target:"Array",proto:!0,forced:!wf||!kf},{splice:function(e,t){var n,i,r,o,a,s,l=Me(this),c=ce(l.length),u=fe(e,c),h=arguments.length;if(0===h?n=i=0:1===h?(n=0,i=c-u):(n=h-2,i=Sf(Tf(se(t),0),c-u)),c+n-i>Ef)throw TypeError(Af);for(r=st(l,i),o=0;o<i;o++)(a=u+o)in l&&Wn(r,o,l[a]);if(r.length=i,n<i){for(o=u;o<c-i;o++)s=o+n,(a=o+i)in l?l[s]=l[a]:delete l[s];for(o=c;o>c-i+n;o--)delete l[o-1]}else if(n>i)for(o=c-i;o>u;o--)s=o+n-1,(a=o+i-1)in l?l[s]=l[a]:delete l[s];for(o=0;o<n;o++)l[o+u]=arguments[o+2];return l.length=c-i+n,r}});var Cf=t((function(e,t){e.exports=function(){var e=function(){},t={},n={},i={};function r(e,t){e=e.push?e:[e];var r,o,a,s=[],l=e.length,c=l;for(r=function(e,n){n.length&&s.push(e),--c||t(s)};l--;)o=e[l],(a=n[o])?r(o,a):(i[o]=i[o]||[]).push(r)}function o(e,t){if(e){var r=i[e];if(n[e]=t,r)for(;r.length;)r[0](e,t),r.splice(0,1)}}function a(t,n){t.call&&(t={success:t}),n.length?(t.error||e)(n):(t.success||e)(t)}function s(t,n,i,r){var o,a,l=document,c=i.async,u=(i.numRetries||0)+1,h=i.before||e,f=t.replace(/[\?|#].*$/,""),d=t.replace(/^(css|img)!/,"");r=r||0,/(^css!|\.css$)/.test(f)?((a=l.createElement("link")).rel="stylesheet",a.href=d,(o="hideFocus"in a)&&a.relList&&(o=0,a.rel="preload",a.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(f)?(a=l.createElement("img")).src=d:((a=l.createElement("script")).src=t,a.async=void 0===c||c),a.onload=a.onerror=a.onbeforeload=function(e){var l=e.type[0];if(o)try{a.sheet.cssText.length||(l="e")}catch(e){18!=e.code&&(l="e")}if("e"==l){if((r+=1)<u)return s(t,n,i,r)}else if("preload"==a.rel&&"style"==a.as)return a.rel="stylesheet";n(t,l,e.defaultPrevented)},!1!==h(t,a)&&l.head.appendChild(a)}function l(e,t,n){var i,r,o=(e=e.push?e:[e]).length,a=o,l=[];for(i=function(e,n,i){if("e"==n&&l.push(e),"b"==n){if(!i)return;l.push(e)}--o||t(l)},r=0;r<a;r++)s(e[r],i,n)}function c(e,n,i){var r,s;if(n&&n.trim&&(r=n),s=(r?i:n)||{},r){if(r in t)throw"LoadJS";t[r]=!0}function c(t,n){l(e,(function(e){a(s,e),t&&a({success:t,error:n},e),o(r,e)}),s)}if(s.returnPromise)return new Promise(c);c()}return c.ready=function(e,t){return r(e,(function(e){a(t,e)})),c},c.done=function(e){o(e,[])},c.reset=function(){t={},n={},i={}},c.isDefined=function(e){return e in t},c}()}));function Pf(e){return new Promise((function(t,n){Cf(e,{success:t,error:n})}))}function xf(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,gh.call(this,this.media,e?"play":"pause"))}var Of={setup:function(){var e=this;nh(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,Sh.call(e),Eu(window.Vimeo)?Of.ready.call(e):Pf(e.config.urls.vimeo.sdk).then((function(){Of.ready.call(e)})).catch((function(t){e.debug.warn("Vimeo SDK (player.js) failed to load",t)}))},ready:function(){var e=this,t=this,n=t.config.vimeo,i=n.premium,r=n.referrerPolicy,o=qa(n,["premium","referrerPolicy"]);i&&Object.assign(o,{controls:!1,sidedock:!1});var a=of(Fa({loop:t.config.loop.active,autoplay:t.autoplay,muted:t.muted,gesture:"media",playsinline:!this.config.fullscreen.iosNative},o)),s=t.media.getAttribute("src");Uu(s)&&(s=t.media.getAttribute(t.config.attributes.embed.id));var l,c=Uu(l=s)?null:Au(Number(l))?l:l.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:l,u=Gu("iframe"),h=qh(t.config.urls.vimeo.iframe,c,a);if(u.setAttribute("src",h),u.setAttribute("allowfullscreen",""),u.setAttribute("allow","autoplay,fullscreen,picture-in-picture"),Uu(r)||u.setAttribute("referrerPolicy",r),i||!n.customControls)u.setAttribute("data-poster",t.poster),t.media=Zu(u,t.media);else{var f=Gu("div",{class:t.config.classNames.embedContainer,"data-poster":t.poster});f.appendChild(u),t.media=Zu(f,t.media)}n.customControls||Yh(qh(t.config.urls.vimeo.api,h)).then((function(e){!Uu(e)&&e.thumbnail_url&&yf.setPoster.call(t,e.thumbnail_url).catch((function(){}))})),t.embed=new window.Vimeo.Player(u,{autopause:t.config.autopause,muted:t.muted}),t.media.paused=!0,t.media.currentTime=0,t.supported.ui&&t.embed.disableTextTrack(),t.media.play=function(){return xf.call(t,!0),t.embed.play()},t.media.pause=function(){return xf.call(t,!1),t.embed.pause()},t.media.stop=function(){t.pause(),t.currentTime=0};var d=t.media.currentTime;Object.defineProperty(t.media,"currentTime",{get:function(){return d},set:function(e){var n=t.embed,i=t.media,r=t.paused,o=t.volume,a=r&&!n.hasPlayed;i.seeking=!0,gh.call(t,i,"seeking"),Promise.resolve(a&&n.setVolume(0)).then((function(){return n.setCurrentTime(e)})).then((function(){return a&&n.pause()})).then((function(){return a&&n.setVolume(o)})).catch((function(){}))}});var p=t.config.speed.selected;Object.defineProperty(t.media,"playbackRate",{get:function(){return p},set:function(e){t.embed.setPlaybackRate(e).then((function(){p=e,gh.call(t,t.media,"ratechange")})).catch((function(){t.options.speed=[1]}))}});var m=t.config.volume;Object.defineProperty(t.media,"volume",{get:function(){return m},set:function(e){t.embed.setVolume(e).then((function(){m=e,gh.call(t,t.media,"volumechange")}))}});var g=t.config.muted;Object.defineProperty(t.media,"muted",{get:function(){return g},set:function(e){var n=!!Pu(e)&&e;t.embed.setVolume(n?0:t.config.volume).then((function(){g=n,gh.call(t,t.media,"volumechange")}))}});var v,y=t.config.loop;Object.defineProperty(t.media,"loop",{get:function(){return y},set:function(e){var n=Pu(e)?e:t.config.loop.active;t.embed.setLoop(n).then((function(){y=n}))}}),t.embed.getVideoUrl().then((function(e){v=e,nf.setDownloadUrl.call(t)})).catch((function(t){e.debug.warn(t)})),Object.defineProperty(t.media,"currentSrc",{get:function(){return v}}),Object.defineProperty(t.media,"ended",{get:function(){return t.currentTime===t.duration}}),Promise.all([t.embed.getVideoWidth(),t.embed.getVideoHeight()]).then((function(n){var i=Ha(n,2),r=i[0],o=i[1];t.embed.ratio=[r,o],Sh.call(e)})),t.embed.setAutopause(t.config.autopause).then((function(e){t.config.autopause=e})),t.embed.getVideoTitle().then((function(n){t.config.title=n,yf.setTitle.call(e)})),t.embed.getCurrentTime().then((function(e){d=e,gh.call(t,t.media,"timeupdate")})),t.embed.getDuration().then((function(e){t.media.duration=e,gh.call(t,t.media,"durationchange")})),t.embed.getTextTracks().then((function(e){t.media.textTracks=e,af.setup.call(t)})),t.embed.on("cuechange",(function(e){var n=e.cues,i=(void 0===n?[]:n).map((function(e){return function(e){var t=document.createDocumentFragment(),n=document.createElement("div");return t.appendChild(n),n.innerHTML=e,t.firstChild.innerText}(e.text)}));af.updateCues.call(t,i)})),t.embed.on("loaded",(function(){(t.embed.getPaused().then((function(e){xf.call(t,!e),e||gh.call(t,t.media,"playing")})),Lu(t.embed.element)&&t.supported.ui)&&t.embed.element.setAttribute("tabindex",-1)})),t.embed.on("bufferstart",(function(){gh.call(t,t.media,"waiting")})),t.embed.on("bufferend",(function(){gh.call(t,t.media,"playing")})),t.embed.on("play",(function(){xf.call(t,!0),gh.call(t,t.media,"playing")})),t.embed.on("pause",(function(){xf.call(t,!1)})),t.embed.on("timeupdate",(function(e){t.media.seeking=!1,d=e.seconds,gh.call(t,t.media,"timeupdate")})),t.embed.on("progress",(function(e){t.media.buffered=e.percent,gh.call(t,t.media,"progress"),1===parseInt(e.percent,10)&&gh.call(t,t.media,"canplaythrough"),t.embed.getDuration().then((function(e){e!==t.media.duration&&(t.media.duration=e,gh.call(t,t.media,"durationchange"))}))})),t.embed.on("seeked",(function(){t.media.seeking=!1,gh.call(t,t.media,"seeked")})),t.embed.on("ended",(function(){t.media.paused=!0,gh.call(t,t.media,"ended")})),t.embed.on("error",(function(e){t.media.error=e,gh.call(t,t.media,"error")})),n.customControls&&setTimeout((function(){return yf.build.call(t)}),0)}};function If(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,gh.call(this,this.media,e?"play":"pause"))}function Lf(e){return e.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}var jf={setup:function(){var e=this;if(nh(this.elements.wrapper,this.config.classNames.embed,!0),Eu(window.YT)&&xu(window.YT.Player))jf.ready.call(this);else{var t=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){xu(t)&&t(),jf.ready.call(e)},Pf(this.config.urls.youtube.sdk).catch((function(t){e.debug.warn("YouTube API failed to load",t)}))}},getTitle:function(e){var t=this;Yh(qh(this.config.urls.youtube.api,e)).then((function(e){if(Eu(e)){var n=e.title,i=e.height,r=e.width;t.config.title=n,yf.setTitle.call(t),t.embed.ratio=[r,i]}Sh.call(t)})).catch((function(){Sh.call(t)}))},ready:function(){var e=this,t=e.config.youtube,n=e.media&&e.media.getAttribute("id");if(Uu(n)||!n.startsWith("youtube-")){var i=e.media.getAttribute("src");Uu(i)&&(i=e.media.getAttribute(this.config.attributes.embed.id));var r,o,a=Uu(r=i)?null:r.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:r,s=Gu("div",{id:(o=e.provider,"".concat(o,"-").concat(Math.floor(1e4*Math.random()))),"data-poster":t.customControls?e.poster:void 0});if(e.media=Zu(s,e.media),t.customControls){var l=function(e){return"https://i.ytimg.com/vi/".concat(a,"/").concat(e,"default.jpg")};vf(l("maxres"),121).catch((function(){return vf(l("sd"),121)})).catch((function(){return vf(l("hq"))})).then((function(t){return yf.setPoster.call(e,t.src)})).then((function(t){t.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")})).catch((function(){}))}e.embed=new window.YT.Player(e.media,{videoId:a,host:Lf(t),playerVars:Ku({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui&&t.customControls?0:1,disablekb:1,playsinline:e.config.fullscreen.iosNative?0:1,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},t),events:{onError:function(t){if(!e.media.error){var n=t.data,i={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[n]||"An unknown error occured";e.media.error={code:n,message:i},gh.call(e,e.media,"error")}},onPlaybackRateChange:function(t){var n=t.target;e.media.playbackRate=n.getPlaybackRate(),gh.call(e,e.media,"ratechange")},onReady:function(n){if(!xu(e.media.play)){var i=n.target;jf.getTitle.call(e,a),e.media.play=function(){If.call(e,!0),i.playVideo()},e.media.pause=function(){If.call(e,!1),i.pauseVideo()},e.media.stop=function(){i.stopVideo()},e.media.duration=i.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:function(){return Number(i.getCurrentTime())},set:function(t){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,gh.call(e,e.media,"seeking"),i.seekTo(t)}}),Object.defineProperty(e.media,"playbackRate",{get:function(){return i.getPlaybackRate()},set:function(e){i.setPlaybackRate(e)}});var r=e.config.volume;Object.defineProperty(e.media,"volume",{get:function(){return r},set:function(t){r=t,i.setVolume(100*r),gh.call(e,e.media,"volumechange")}});var o=e.config.muted;Object.defineProperty(e.media,"muted",{get:function(){return o},set:function(t){var n=Pu(t)?t:o;o=n,i[n?"mute":"unMute"](),i.setVolume(100*r),gh.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:function(){return i.getVideoUrl()}}),Object.defineProperty(e.media,"ended",{get:function(){return e.currentTime===e.duration}});var s=i.getAvailablePlaybackRates();e.options.speed=s.filter((function(t){return e.config.speed.options.includes(t)})),e.supported.ui&&t.customControls&&e.media.setAttribute("tabindex",-1),gh.call(e,e.media,"timeupdate"),gh.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval((function(){e.media.buffered=i.getVideoLoadedFraction(),(null===e.media.lastBuffered||e.media.lastBuffered<e.media.buffered)&&gh.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,1===e.media.buffered&&(clearInterval(e.timers.buffering),gh.call(e,e.media,"canplaythrough"))}),200),t.customControls&&setTimeout((function(){return yf.build.call(e)}),50)}},onStateChange:function(n){var i=n.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(n.data)&&(e.media.seeking=!1,gh.call(e,e.media,"seeked")),n.data){case-1:gh.call(e,e.media,"timeupdate"),e.media.buffered=i.getVideoLoadedFraction(),gh.call(e,e.media,"progress");break;case 0:If.call(e,!1),e.media.loop?(i.stopVideo(),i.playVideo()):gh.call(e,e.media,"ended");break;case 1:t.customControls&&!e.config.autoplay&&e.media.paused&&!e.embed.hasPlayed?e.media.pause():(If.call(e,!0),gh.call(e,e.media,"playing"),e.timers.playing=setInterval((function(){gh.call(e,e.media,"timeupdate")}),50),e.media.duration!==i.getDuration()&&(e.media.duration=i.getDuration(),gh.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),If.call(e,!1);break;case 3:gh.call(e,e.media,"waiting")}gh.call(e,e.elements.container,"statechange",!1,{code:n.data})}}})}}},Nf={setup:function(){this.media?(nh(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),nh(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&nh(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=Gu("div",{class:this.config.classNames.video}),$u(this.media,this.elements.wrapper),this.elements.poster=Gu("div",{class:this.config.classNames.poster,hidden:""}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?Eh.setup.call(this):this.isYouTube?jf.setup.call(this):this.isVimeo&&Of.setup.call(this)):this.debug.warn("No media element found!")}},Rf=function(){function e(t){var n=this;Ra(this,e),this.player=t,this.config=t.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((function(e,t){n.on("loaded",e),n.on("error",t)})),this.load()}return _a(e,[{key:"load",value:function(){var e=this;this.enabled&&(Eu(window.google)&&Eu(window.google.ima)?this.ready():Pf(this.player.config.urls.googleIMA.sdk).then((function(){e.ready()})).catch((function(){e.trigger("error",new Error("Google IMA SDK failed to load"))})))}},{key:"ready",value:function(){var e,t=this;this.enabled||((e=this).manager&&e.manager.destroy(),e.elements.displayContainer&&e.elements.displayContainer.destroy(),e.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then((function(){t.clearSafetyTimer("onAdsManagerLoaded()")})),this.listeners(),this.setupIMA()}},{key:"setupIMA",value:function(){var e=this;this.elements.container=Gu("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(function(t){return e.onAdsManagerLoaded(t)}),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(t){return e.onAdError(t)}),!1),this.requestAds()}},{key:"requestAds",value:function(){var e=this.player.elements.container;try{var t=new google.ima.AdsRequest;t.adTagUrl=this.tagUrl,t.linearAdSlotWidth=e.offsetWidth,t.linearAdSlotHeight=e.offsetHeight,t.nonLinearAdSlotWidth=e.offsetWidth,t.nonLinearAdSlotHeight=e.offsetHeight,t.forceNonLinearFullSlot=!1,t.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(t)}catch(e){this.onAdError(e)}}},{key:"pollCountdown",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!t)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");var n=function(){var t=tf(Math.max(e.manager.getRemainingTime(),0)),n="".concat(Kh("advertisement",e.player.config)," - ").concat(t);e.elements.container.setAttribute("data-badge-text",n)};this.countdownTimer=setInterval(n,100)}},{key:"onAdsManagerLoaded",value:function(e){var t=this;if(this.enabled){var n=new google.ima.AdsRenderingSettings;n.restoreCustomPlaybackStateOnAdBreakComplete=!0,n.enablePreloading=!0,this.manager=e.getAdsManager(this.player,n),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(e){return t.onAdError(e)})),Object.keys(google.ima.AdEvent.Type).forEach((function(e){t.manager.addEventListener(google.ima.AdEvent.Type[e],(function(e){return t.onAdEvent(e)}))})),this.trigger("loaded")}}},{key:"addCuePoints",value:function(){var e=this;Uu(this.cuePoints)||this.cuePoints.forEach((function(t){if(0!==t&&-1!==t&&t<e.player.duration){var n=e.player.elements.progress;if(Lu(n)){var i=100/e.player.duration*t,r=Gu("span",{class:e.player.config.classNames.cues});r.style.left="".concat(i.toString(),"%"),n.appendChild(r)}}}))}},{key:"onAdEvent",value:function(e){var t=this,n=this.player.elements.container,i=e.getAd(),r=e.getAdData();switch(function(e){gh.call(t.player,t.player.media,"ads".concat(e.replace(/_/g,"").toLowerCase()))}(e.type),e.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),i.isLinear()||(i.width=n.offsetWidth,i.height=n.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:r.adError&&this.player.debug.warn("Non-fatal ad error: ".concat(r.adError.getMessage()))}}},{key:"onAdError",value:function(e){this.cancel(),this.player.debug.warn("Ads error",e)}},{key:"listeners",value:function(){var e,t=this,n=this.player.elements.container;this.player.on("canplay",(function(){t.addCuePoints()})),this.player.on("ended",(function(){t.loader.contentComplete()})),this.player.on("timeupdate",(function(){e=t.player.currentTime})),this.player.on("seeked",(function(){var n=t.player.currentTime;Uu(t.cuePoints)||t.cuePoints.forEach((function(i,r){e<i&&i<n&&(t.manager.discardAdBreak(),t.cuePoints.splice(r,1))}))})),window.addEventListener("resize",(function(){t.manager&&t.manager.resize(n.offsetWidth,n.offsetHeight,google.ima.ViewMode.NORMAL)}))}},{key:"play",value:function(){var e=this,t=this.player.elements.container;this.managerPromise||this.resumeContent(),this.managerPromise.then((function(){e.manager.setVolume(e.player.volume),e.elements.displayContainer.initialize();try{e.initialized||(e.manager.init(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL),e.manager.start()),e.initialized=!0}catch(t){e.onAdError(t)}})).catch((function(){}))}},{key:"resumeContent",value:function(){this.elements.container.style.zIndex="",this.playing=!1,bh(this.player.media.play())}},{key:"pauseContent",value:function(){this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}},{key:"cancel",value:function(){this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}},{key:"loadAds",value:function(){var e=this;this.managerPromise.then((function(){e.manager&&e.manager.destroy(),e.managerPromise=new Promise((function(t){e.on("loaded",t),e.player.debug.log(e.manager)})),e.initialized=!1,e.requestAds()})).catch((function(){}))}},{key:"trigger",value:function(e){for(var t=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var o=this.events[e];Ou(o)&&o.forEach((function(e){xu(e)&&e.apply(t,i)}))}},{key:"on",value:function(e,t){return Ou(this.events[e])||(this.events[e]=[]),this.events[e].push(t),this}},{key:"startSafetyTimer",value:function(e,t){var n=this;this.player.debug.log("Safety timer invoked from: ".concat(t)),this.safetyTimer=setTimeout((function(){n.cancel(),n.clearSafetyTimer("startSafetyTimer()")}),e)}},{key:"clearSafetyTimer",value:function(e){Su(this.safetyTimer)||(this.player.debug.log("Safety timer cleared from: ".concat(e)),clearTimeout(this.safetyTimer),this.safetyTimer=null)}},{key:"enabled",get:function(){var e=this.config;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!Uu(e.publisherId)||_u(e.tagUrl))}},{key:"tagUrl",get:function(){var e=this.config;if(_u(e.tagUrl))return e.tagUrl;var t={AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId};return"".concat("https://go.aniview.com/api/adserver6/vast/","?").concat(of(t))}}]),e}(),Mf=ut.findIndex,_f="findIndex",Uf=!0,Df=Zt(_f);_f in[]&&Array(1).findIndex((function(){Uf=!1})),Le({target:"Array",proto:!0,forced:Uf||!Df},{findIndex:function(e){return Mf(this,e,arguments.length>1?arguments[1]:void 0)}}),mn(_f);var Ff=Math.min,qf=[].lastIndexOf,Hf=!!qf&&1/[1].lastIndexOf(1,-0)<0,Bf=Gt("lastIndexOf"),Vf=Zt("indexOf",{ACCESSORS:!0,1:0}),zf=Hf||!Bf||!Vf?function(e){if(Hf)return qf.apply(this,arguments)||0;var t=m(this),n=ce(t.length),i=n-1;for(arguments.length>1&&(i=Ff(i,se(arguments[1]))),i<0&&(i=n+i);i>=0;i--)if(i in t&&t[i]===e)return i||0;return-1}:qf;Le({target:"Array",proto:!0,forced:zf!==[].lastIndexOf},{lastIndexOf:zf});var Wf=function(e,t){var n={};return e>t.width/t.height?(n.width=t.width,n.height=1/e*t.width):(n.height=t.height,n.width=e*t.height),n},Kf=function(){function e(t){Ra(this,e),this.player=t,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}return _a(e,[{key:"load",value:function(){var e=this;this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then((function(){e.enabled&&(e.render(),e.determineContainerAutoSizing(),e.loaded=!0)}))}},{key:"getThumbnails",value:function(){var e=this;return new Promise((function(t){var n=e.player.config.previewThumbnails.src;if(Uu(n))throw new Error("Missing previewThumbnails.src config attribute");var i=function(){e.thumbnails.sort((function(e,t){return e.height-t.height})),e.player.debug.log("Preview thumbnails",e.thumbnails),t()};if(xu(n))n((function(t){e.thumbnails=t,i()}));else{var r=(Cu(n)?[n]:n).map((function(t){return e.getThumbnail(t)}));Promise.all(r).then(i)}}))}},{key:"getThumbnail",value:function(e){var t=this;return new Promise((function(n){Yh(e).then((function(i){var r,o,a={frames:(r=i,o=[],r.split(/\r\n\r\n|\n\n|\r\r/).forEach((function(e){var t={};e.split(/\r\n|\n|\r/).forEach((function(e){if(Au(t.startTime)){if(!Uu(e.trim())&&Uu(t.text)){var n=e.trim().split("#xywh="),i=Ha(n,1);if(t.text=i[0],n[1]){var r=Ha(n[1].split(","),4);t.x=r[0],t.y=r[1],t.w=r[2],t.h=r[3]}}}else{var o=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);o&&(t.startTime=60*Number(o[1]||0)*60+60*Number(o[2])+Number(o[3])+Number("0.".concat(o[4])),t.endTime=60*Number(o[6]||0)*60+60*Number(o[7])+Number(o[8])+Number("0.".concat(o[9])))}})),t.text&&o.push(t)})),o),height:null,urlPrefix:""};a.frames[0].text.startsWith("/")||a.frames[0].text.startsWith("http://")||a.frames[0].text.startsWith("https://")||(a.urlPrefix=e.substring(0,e.lastIndexOf("/")+1));var s=new Image;s.onload=function(){a.height=s.naturalHeight,a.width=s.naturalWidth,t.thumbnails.push(a),n()},s.src=a.urlPrefix+a.frames[0].text}))}))}},{key:"startMove",value:function(e){if(this.loaded&&ju(e)&&["touchmove","mousemove"].includes(e.type)&&this.player.media.duration){if("touchmove"===e.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var t=this.player.elements.progress.getBoundingClientRect(),n=100/t.width*(e.pageX-t.left);this.seekTime=this.player.media.duration*(n/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=tf(this.seekTime)}this.showImageAtCurrentTime()}}},{key:"endMove",value:function(){this.toggleThumbContainer(!1,!0)}},{key:"startScrubbing",value:function(e){(Su(e.button)||!1===e.button||0===e.button)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}},{key:"endScrubbing",value:function(){var e=this;this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):mh.call(this.player,this.player.media,"timeupdate",(function(){e.mouseDown||e.toggleScrubbingContainer(!1)}))}},{key:"listeners",value:function(){var e=this;this.player.on("play",(function(){e.toggleThumbContainer(!1,!0)})),this.player.on("seeked",(function(){e.toggleThumbContainer(!1)})),this.player.on("timeupdate",(function(){e.lastTime=e.player.media.currentTime}))}},{key:"render",value:function(){this.elements.thumb.container=Gu("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=Gu("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);var e=Gu("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=Gu("span",{},"00:00"),e.appendChild(this.elements.thumb.time),this.elements.thumb.container.appendChild(e),Lu(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=Gu("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}},{key:"destroy",value:function(){this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}},{key:"showImageAtCurrentTime",value:function(){var e=this;this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();var t=this.thumbnails[0].frames.findIndex((function(t){return e.seekTime>=t.startTime&&e.seekTime<=t.endTime})),n=t>=0,i=0;this.mouseDown||this.toggleThumbContainer(n),n&&(this.thumbnails.forEach((function(n,r){e.loadedImages.includes(n.frames[t].text)&&(i=r)})),t!==this.showingThumb&&(this.showingThumb=t,this.loadImage(i)))}},{key:"loadImage",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=this.showingThumb,i=this.thumbnails[t],r=i.urlPrefix,o=i.frames[n],a=i.frames[n].text,s=r+a;if(this.currentImageElement&&this.currentImageElement.dataset.filename===a)this.showImage(this.currentImageElement,o,t,n,a,!1),this.currentImageElement.dataset.index=n,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);var l=new Image;l.src=s,l.dataset.index=n,l.dataset.filename=a,this.showingThumbFilename=a,this.player.debug.log("Loading image: ".concat(s)),l.onload=function(){return e.showImage(l,o,t,n,a,!0)},this.loadingImage=l,this.removeOldImages(l)}}},{key:"showImage",value:function(e,t,n,i,r){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.player.debug.log("Showing thumb: ".concat(r,". num: ").concat(i,". qual: ").concat(n,". newimg: ").concat(o)),this.setImageSizeAndOffset(e,t),o&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(r)||this.loadedImages.push(r)),this.preloadNearby(i,!0).then(this.preloadNearby(i,!1)).then(this.getHigherQuality(n,e,t,r))}},{key:"removeOldImages",value:function(e){var t=this;Array.from(this.currentImageContainer.children).forEach((function(n){if("img"===n.tagName.toLowerCase()){var i=t.usingSprites?500:1e3;if(n.dataset.index!==e.dataset.index&&!n.dataset.deleting){n.dataset.deleting=!0;var r=t.currentImageContainer;setTimeout((function(){r.removeChild(n),t.player.debug.log("Removing thumb: ".concat(n.dataset.filename))}),i)}}}))}},{key:"preloadNearby",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return new Promise((function(i){setTimeout((function(){var r=t.thumbnails[0].frames[e].text;if(t.showingThumbFilename===r){var o;o=n?t.thumbnails[0].frames.slice(e):t.thumbnails[0].frames.slice(0,e).reverse();var a=!1;o.forEach((function(e){var n=e.text;if(n!==r&&!t.loadedImages.includes(n)){a=!0,t.player.debug.log("Preloading thumb filename: ".concat(n));var o=t.thumbnails[0].urlPrefix+n,s=new Image;s.src=o,s.onload=function(){t.player.debug.log("Preloaded thumb filename: ".concat(n)),t.loadedImages.includes(n)||t.loadedImages.push(n),i()}}})),a||i()}}),300)}))}},{key:"getHigherQuality",value:function(e,t,n,i){var r=this;if(e<this.thumbnails.length-1){var o=t.naturalHeight;this.usingSprites&&(o=n.h),o<this.thumbContainerHeight&&setTimeout((function(){r.showingThumbFilename===i&&(r.player.debug.log("Showing higher quality thumb for: ".concat(i)),r.loadImage(e+1))}),300)}}},{key:"toggleThumbContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(n,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"toggleScrubbingContainer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null)}},{key:"determineContainerAutoSizing",value:function(){(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}},{key:"setThumbContainerSizeAndPos",value:function(){if(this.sizeSpecifiedInCSS){if(this.elements.thumb.imageContainer.clientHeight>20&&this.elements.thumb.imageContainer.clientWidth<20){var e=Math.floor(this.elements.thumb.imageContainer.clientHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.width="".concat(e,"px")}else if(this.elements.thumb.imageContainer.clientHeight<20&&this.elements.thumb.imageContainer.clientWidth>20){var t=Math.floor(this.elements.thumb.imageContainer.clientWidth/this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(t,"px")}}else{var n=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(this.thumbContainerHeight,"px"),this.elements.thumb.imageContainer.style.width="".concat(n,"px")}this.setThumbContainerPos()}},{key:"setThumbContainerPos",value:function(){var e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),n=this.elements.thumb.container,i=t.left-e.left+10,r=t.right-e.left-n.clientWidth-10,o=this.mousePosX-e.left-n.clientWidth/2;o<i&&(o=i),o>r&&(o=r),n.style.left="".concat(o,"px")}},{key:"setScrubbingContainerSize",value:function(){var e=Wf(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}),t=e.width,n=e.height;this.elements.scrubbing.container.style.width="".concat(t,"px"),this.elements.scrubbing.container.style.height="".concat(n,"px")}},{key:"setImageSizeAndOffset",value:function(e,t){if(this.usingSprites){var n=this.thumbContainerHeight/t.h;e.style.height="".concat(e.naturalHeight*n,"px"),e.style.width="".concat(e.naturalWidth*n,"px"),e.style.left="-".concat(t.x*n,"px"),e.style.top="-".concat(t.y*n,"px")}}},{key:"enabled",get:function(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}},{key:"currentImageContainer",get:function(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}},{key:"usingSprites",get:function(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}},{key:"thumbAspectRatio",get:function(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}},{key:"thumbContainerHeight",get:function(){return this.mouseDown?Wf(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight}).height:this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}},{key:"currentImageElement",get:function(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement},set:function(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}]),e}(),$f={insertElements:function(e,t){var n=this;Cu(t)?Xu(e,this.media,{src:t}):Ou(t)&&t.forEach((function(t){Xu(e,n.media,t)}))},change:function(e){var t=this;Wu(e,"sources.length")?(Eh.cancelRequests.call(this),this.destroy.call(this,(function(){t.options.quality=[],Qu(t.media),t.media=null,Lu(t.elements.container)&&t.elements.container.removeAttribute("class");var n=e.sources,i=e.type,r=Ha(n,1)[0],o=r.provider,a=void 0===o?uf.html5:o,s=r.src,l="html5"===a?i:"div",c="html5"===a?{}:{src:s};Object.assign(t,{provider:a,type:i,supported:uh.check(i,a,t.config.playsinline),media:Gu(l,c)}),t.elements.container.appendChild(t.media),Pu(e.autoplay)&&(t.config.autoplay=e.autoplay),t.isHTML5&&(t.config.crossorigin&&t.media.setAttribute("crossorigin",""),t.config.autoplay&&t.media.setAttribute("autoplay",""),Uu(e.poster)||(t.poster=e.poster),t.config.loop.active&&t.media.setAttribute("loop",""),t.config.muted&&t.media.setAttribute("muted",""),t.config.playsinline&&t.media.setAttribute("playsinline","")),yf.addStyleHook.call(t),t.isHTML5&&$f.insertElements.call(t,"source",n),t.config.title=e.title,Nf.setup.call(t),t.isHTML5&&Object.keys(e).includes("tracks")&&$f.insertElements.call(t,"track",e.tracks),(t.isHTML5||t.isEmbed&&!t.supported.ui)&&yf.build.call(t),t.isHTML5&&t.media.load(),Uu(e.previewThumbnails)||(Object.assign(t.config.previewThumbnails,e.previewThumbnails),t.previewThumbnails&&t.previewThumbnails.loaded&&(t.previewThumbnails.destroy(),t.previewThumbnails=null),t.config.previewThumbnails.enabled&&(t.previewThumbnails=new Kf(t))),t.fullscreen.update()}),!0)):this.debug.warn("Invalid source format")}};var Yf,Gf=function(){function e(t,n){var i=this;if(Ra(this,e),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=uh.touch,this.media=t,Cu(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||Iu(this.media)||Ou(this.media))&&(this.media=this.media[0]),this.config=Ku({},sf,e.defaults,n||{},function(){try{return JSON.parse(i.media.getAttribute("data-plyr-config"))}catch(e){return{}}}()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new pf(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",uh),!Su(this.media)&&Lu(this.media))if(this.media.plyr)this.debug.warn("Target already setup");else if(this.config.enabled)if(uh.check().api){var r=this.media.cloneNode(!0);r.autoplay=!1,this.elements.original=r;var o=this.media.tagName.toLowerCase(),a=null,s=null;switch(o){case"div":if(a=this.media.querySelector("iframe"),Lu(a)){if(s=rf(a.getAttribute("src")),this.provider=function(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?uf.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?uf.vimeo:null}(s.toString()),this.elements.container=this.media,this.media=a,this.elements.container.className="",s.search.length){var l=["1","true"];l.includes(s.searchParams.get("autoplay"))&&(this.config.autoplay=!0),l.includes(s.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=l.includes(s.searchParams.get("playsinline")),this.config.youtube.hl=s.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(Uu(this.provider)||!Object.keys(uf).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=ff;break;case"video":case"audio":this.type=o,this.provider=uf.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=uh.check(this.type,this.provider,this.config.playsinline),this.supported.api?(this.eventListeners=[],this.listeners=new bf(this),this.storage=new $h(this),this.media.plyr=this,Lu(this.elements.container)||(this.elements.container=Gu("div",{tabindex:0}),$u(this.media,this.elements.container)),yf.migrateStyles.call(this),yf.addStyleHook.call(this),Nf.setup.call(this),this.config.debug&&dh.call(this,this.elements.container,this.config.events.join(" "),(function(e){i.debug.log("event: ".concat(e.type))})),this.fullscreen=new mf(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&yf.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new Rf(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",(function(){return bh(i.play())})),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new Kf(this))):this.debug.error("Setup failed: no support")}else this.debug.error("Setup failed: no support");else this.debug.error("Setup failed: disabled by config");else this.debug.error("Setup failed: no suitable element passed")}return _a(e,[{key:"play",value:function(){var e=this;return xu(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then((function(){return e.ads.play()})).catch((function(){return bh(e.media.play())})),this.media.play()):null}},{key:"pause",value:function(){return this.playing&&xu(this.media.pause)?this.media.pause():null}},{key:"togglePlay",value:function(e){return(Pu(e)?e:!this.playing)?this.play():this.pause()}},{key:"stop",value:function(){this.isHTML5?(this.pause(),this.restart()):xu(this.media.stop)&&this.media.stop()}},{key:"restart",value:function(){this.currentTime=0}},{key:"rewind",value:function(e){this.currentTime-=Au(e)?e:this.config.seekTime}},{key:"forward",value:function(e){this.currentTime+=Au(e)?e:this.config.seekTime}},{key:"increaseVolume",value:function(e){var t=this.media.muted?0:this.volume;this.volume=t+(Au(e)?e:0)}},{key:"decreaseVolume",value:function(e){this.increaseVolume(-e)}},{key:"toggleCaptions",value:function(e){af.toggle.call(this,e,!1)}},{key:"airplay",value:function(){uh.airplay&&this.media.webkitShowPlaybackTargetPicker()}},{key:"toggleControls",value:function(e){if(this.supported.ui&&!this.isAudio){var t=ih(this.elements.container,this.config.classNames.hideControls),n=void 0===e?void 0:!e,i=nh(this.elements.container,this.config.classNames.hideControls,n);if(i&&Ou(this.config.controls)&&this.config.controls.includes("settings")&&!Uu(this.config.settings)&&nf.toggleMenu.call(this,!1),i!==t){var r=i?"controlshidden":"controlsshown";gh.call(this,this.media,r)}return!i}return!1}},{key:"on",value:function(e,t){dh.call(this,this.elements.container,e,t)}},{key:"once",value:function(e,t){mh.call(this,this.elements.container,e,t)}},{key:"off",value:function(e,t){ph(this.elements.container,e,t)}},{key:"destroy",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.ready){var i=function(){document.body.style.overflow="",t.embed=null,n?(Object.keys(t.elements).length&&(Qu(t.elements.buttons.play),Qu(t.elements.captions),Qu(t.elements.controls),Qu(t.elements.wrapper),t.elements.buttons.play=null,t.elements.captions=null,t.elements.controls=null,t.elements.wrapper=null),xu(e)&&e()):(vh.call(t),Eh.cancelRequests.call(t),Zu(t.elements.original,t.elements.container),gh.call(t,t.elements.original,"destroyed",!0),xu(e)&&e.call(t.elements.original),t.ready=!1,setTimeout((function(){t.elements=null,t.media=null}),200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(yf.toggleNativeControls.call(this,!0),i()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&xu(this.embed.destroy)&&this.embed.destroy(),i()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(i),setTimeout(i,200))}}},{key:"supports",value:function(e){return uh.mime.call(this,e)}},{key:"isHTML5",get:function(){return this.provider===uf.html5}},{key:"isEmbed",get:function(){return this.isYouTube||this.isVimeo}},{key:"isYouTube",get:function(){return this.provider===uf.youtube}},{key:"isVimeo",get:function(){return this.provider===uf.vimeo}},{key:"isVideo",get:function(){return this.type===ff}},{key:"isAudio",get:function(){return this.type===hf}},{key:"playing",get:function(){return Boolean(this.ready&&!this.paused&&!this.ended)}},{key:"paused",get:function(){return Boolean(this.media.paused)}},{key:"stopped",get:function(){return Boolean(this.paused&&0===this.currentTime)}},{key:"ended",get:function(){return Boolean(this.media.ended)}},{key:"currentTime",set:function(e){if(this.duration){var t=Au(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log("Seeking to ".concat(this.currentTime," seconds"))}},get:function(){return Number(this.media.currentTime)}},{key:"buffered",get:function(){var e=this.media.buffered;return Au(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}},{key:"seeking",get:function(){return Boolean(this.media.seeking)}},{key:"duration",get:function(){var e=parseFloat(this.config.duration),t=(this.media||{}).duration,n=Au(t)&&t!==1/0?t:0;return e||n}},{key:"volume",set:function(e){var t=e;Cu(t)&&(t=Number(t)),Au(t)||(t=this.storage.get("volume")),Au(t)||(t=this.config.volume),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!Uu(e)&&this.muted&&t>0&&(this.muted=!1)},get:function(){return Number(this.media.volume)}},{key:"muted",set:function(e){var t=e;Pu(t)||(t=this.storage.get("muted")),Pu(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t},get:function(){return Boolean(this.media.muted)}},{key:"hasAudio",get:function(){return!this.isHTML5||(!!this.isAudio||(Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)))}},{key:"speed",set:function(e){var t=this,n=null;Au(e)&&(n=e),Au(n)||(n=this.storage.get("speed")),Au(n)||(n=this.config.speed.selected);var i=this.minimumSpeed,r=this.maximumSpeed;n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:255;return Math.min(Math.max(e,t),n)}(n,i,r),this.config.speed.selected=n,setTimeout((function(){t.media.playbackRate=n}),0)},get:function(){return Number(this.media.playbackRate)}},{key:"minimumSpeed",get:function(){return this.isYouTube?Math.min.apply(Math,Ba(this.options.speed)):this.isVimeo?.5:.0625}},{key:"maximumSpeed",get:function(){return this.isYouTube?Math.max.apply(Math,Ba(this.options.speed)):this.isVimeo?2:16}},{key:"quality",set:function(e){var t=this.config.quality,n=this.options.quality;if(n.length){var i=[!Uu(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(Au),r=!0;if(!n.includes(i)){var o=function(e,t){return Ou(e)&&e.length?e.reduce((function(e,n){return Math.abs(n-t)<Math.abs(e-t)?n:e})):null}(n,i);this.debug.warn("Unsupported quality option: ".concat(i,", using ").concat(o," instead")),i=o,r=!1}t.selected=i,this.media.quality=i,r&&this.storage.set({quality:i})}},get:function(){return this.media.quality}},{key:"loop",set:function(e){var t=Pu(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t},get:function(){return Boolean(this.media.loop)}},{key:"source",set:function(e){$f.change.call(this,e)},get:function(){return this.media.currentSrc}},{key:"download",get:function(){var e=this.config.urls.download;return _u(e)?e:this.source},set:function(e){_u(e)&&(this.config.urls.download=e,nf.setDownloadUrl.call(this))}},{key:"poster",set:function(e){this.isVideo?yf.setPoster.call(this,e,!1).catch((function(){})):this.debug.warn("Poster can only be set for video")},get:function(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}},{key:"ratio",get:function(){if(!this.isVideo)return null;var e=kh(Th.call(this));return Ou(e)?e.join(":"):e},set:function(e){this.isVideo?Cu(e)&&wh(e)?(this.config.ratio=e,Sh.call(this)):this.debug.error("Invalid aspect ratio specified (".concat(e,")")):this.debug.warn("Aspect ratio can only be set for video")}},{key:"autoplay",set:function(e){var t=Pu(e)?e:this.config.autoplay;this.config.autoplay=t},get:function(){return Boolean(this.config.autoplay)}},{key:"currentTrack",set:function(e){af.set.call(this,e,!1)},get:function(){var e=this.captions,t=e.toggled,n=e.currentTrack;return t?n:-1}},{key:"language",set:function(e){af.setLanguage.call(this,e,!1)},get:function(){return(af.getCurrentTrack.call(this)||{}).language}},{key:"pip",set:function(e){if(uh.pip){var t=Pu(e)?e:!this.pip;xu(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?lf:cf),xu(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}},get:function(){return uh.pip?Uu(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===lf:null}}],[{key:"supported",value:function(e,t,n){return uh.check(e,t,n)}},{key:"loadSprite",value:function(e,t){return Gh(e,t)}},{key:"setup",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null;return Cu(t)?i=Array.from(document.querySelectorAll(t)):Iu(t)?i=Array.from(t):Ou(t)&&(i=t.filter(Lu)),Uu(i)?null:i.map((function(t){return new e(t,n)}))}}]),e}();return Gf.defaults=(Yf=sf,JSON.parse(JSON.stringify(Yf))),Gf}));
//# sourceMappingURL=plyr.polyfilled.min.js.map</script><script>!function(e){function t(e=0,i=!1,s=!1){if("number"!=(a=typeof(n=e))&&"string"!==a||isNaN(n-parseFloat(n)))return t(null,i,s);var n,a;const h=e=>`0${e}`.slice(-2);let o=(r=e,Math.trunc(r/60/60%60,10));var r;const l=(e=>Math.trunc(e/60%60,10))(e),m=(e=>Math.trunc(e%60,10))(e);return o=i||o>0?`${o}:`:"",`${s&&e>0?"-":""}${o}${h(l)}:${h(m)}`}class i{constructor(e){this.player=e,this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.thumbnail.enabled}get config(){return this.player.config.thumbnail}load(){this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.loaded=!0,this.listeners())}startMove(e){if(this.loaded&&!(!e instanceof Event)&&["touchmove","mousemove"].includes(e.type)&&this.player.media.duration){if("touchmove"===e.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{const i=this.player.elements.progress.getBoundingClientRect(),s=100/i.width*(e.pageX-i.left);this.seekTime=this.player.media.duration*(s/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=t(this.seekTime)}this.showImageAtCurrentTime()}}endMove(){this.toggleThumbContainer(!1,!0)}startScrubbing(e){!1!==e.button&&0!==e.button||(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}endScrubbing(){this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):this.player.media.addEventListener("timeupdate",(()=>{this.mouseDown||this.toggleScrubbingContainer(!1)}),{once:!0})}listeners(){const{player:e}=this;e.on("play",(()=>{this.toggleThumbContainer(!1,!0)})),e.on("seeked",(()=>{this.toggleThumbContainer(!1)})),e.on("timeupdate",(()=>{this.lastTime=this.player.media.currentTime}));let t=this.player.elements;["mousemove","touchmove","mouseleave","click","mousedown","touchstart","mouseup","touchend"].forEach((i=>{null!=t.progress.addEventListener&&t.progress.addEventListener(i,(t=>{const{thumbnails:s}=e;if(s&&s.loaded)switch(i){case"mousemove":case"touchmove":case"mousedown":case"touchstart":s.startMove(t);break;case"mouseleave":case"click":s.endMove(!1,!0);break;case"mouseup":case"touchend":s.endScrubbing(t)}}))}))}render(){this.elements.thumb.container=e.createElement("div"),this.elements.thumb.container.classList.add(this.player.config.classNames.previewThumbnails.thumbContainer),this.elements.thumb.imageContainer=e.createElement("div"),this.elements.thumb.imageContainer.className=this.player.config.classNames.previewThumbnails.imageContainer,this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const t=e.createElement("div");t.className=this.player.config.classNames.previewThumbnails.timeContainer,this.elements.thumb.time=e.createElement("span"),this.elements.thumb.time.textContent="00:00",t.appendChild(this.elements.thumb.time),this.elements.thumb.container.appendChild(t),this.player.elements.progress instanceof Element&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=e.createElement("div"),this.elements.scrubbing.container.className=this.player.config.classNames.previewThumbnails.scrubbingContainer,this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}showImageAtCurrentTime(){this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();let e=this.config,t=this.player.duration/e.pic_num;const i=Math.floor(this.seekTime/t);let s=Math.ceil((i+1)/(e.col*e.row))-1;const n=i>=0;this.mouseDown||this.toggleThumbContainer(n),n&&i!==this.showingThumb&&(this.showingThumb=i,this.loadImage(s))}loadImage(e=0){const t=this.showingThumb,i=this.config.urls[e];if(this.currentImageElement&&this.currentImageElement.src===i)this.showImage(this.currentImageElement,e,t,i,!1),this.currentImageElement.dataset.index=t,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&(this.loadingImage.onload=null);const s=new Image;s.src=i,s.dataset.index=t,this.player.debug.log(`Loading image: ${i}`),s.onload=()=>this.showImage(s,e,t,i,!0),this.loadingImage=s,this.removeOldImages(s)}}showImage(e,t,i,s,n=!0){this.player.debug.log(`Showing thumb: ${s}. num: ${i}. qual: ${t}. newimg: ${n}`),this.setImageSizeAndOffset(e,i),n&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(s)||this.loadedImages.push(s))}removeOldImages(e){Array.from(this.currentImageContainer.children).forEach((t=>{if("img"===t.tagName.toLowerCase()&&t.dataset.index!==e.dataset.index&&!t.dataset.deleting){t.dataset.deleting=!0;const{currentImageContainer:e}=this;setTimeout((()=>{e.removeChild(t),this.player.debug.log(`Removing thumb: ${t.dataset.filename}`)}),500)}}))}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get thumbAspectRatio(){return this.config.width/this.config.height}get thumbContainerHeight(){return this.mouseDown?Math.floor(this.player.media.clientWidth/this.thumbAspectRatio):Math.min(135,Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4))}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}toggleThumbContainer(e=!1,t=!1){const i=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(i,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null)}toggleScrubbingContainer(e=!1){const t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null)}determineContainerAutoSizing(){this.elements.thumb.imageContainer.clientHeight>20&&(this.sizeSpecifiedInCSS=!0)}setThumbContainerSizeAndPos(){if(!this.sizeSpecifiedInCSS){const e=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height=`${this.thumbContainerHeight}px`,this.elements.thumb.imageContainer.style.width=`${e}px`}this.setThumbContainerPos()}setThumbContainerPos(){const e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),{container:i}=this.elements.thumb,s=t.left-e.left+10,n=t.right-e.left-i.clientWidth-10;let a=this.mousePosX-e.left-i.clientWidth/2;a<s&&(a=s),a>n&&(a=n),i.style.left=`${a}px`}setScrubbingContainerSize(){this.elements.scrubbing.container.style.width=`${this.player.media.clientWidth}px`,this.elements.scrubbing.container.style.height=this.player.media.clientWidth/this.thumbAspectRatio+"px"}setImageSizeAndOffset(e,t){let i=this.config,s=t+1-i.col*i.row*(Math.ceil((t+1)/(i.col*i.row))-1),n=Math.ceil(s/i.row)-1,a=s-n*i.row-1;const h=this.thumbContainerHeight/i.height;e.style.height=`${Math.floor(e.naturalHeight*h)}px`,e.style.width=`${Math.floor(e.naturalWidth*h)}px`,e.style.left=`-${a*i.width*h}px`,e.style.top=`-${n*i.height*h}px`}}e.addEventListener("ready",(e=>{const t=e.detail.plyr;t.thumbnails=new i(t)}))}(document);</script><script>/*! @sentry/tracing & @sentry/browser 7.0.0 (4cc07f6) | https://github.com/getsentry/sentry-javascript */
var Sentry=function(t){var e={};function n(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:e}function r(t,e,r){var i=r||n(),s=i.__SENTRY__=i.__SENTRY__||{};return s[t]||(s[t]=e())}var i=Object.prototype.toString;function s(t){switch(i.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return p(t,Error)}}function o(t,e){return i.call(t)===`[object ${e}]`}function a(t){return o(t,"ErrorEvent")}function u(t){return o(t,"DOMError")}function c(t){return o(t,"String")}function h(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function f(t){return o(t,"Object")}function l(t){return"undefined"!=typeof Event&&p(t,Event)}function d(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function v(t){return"number"==typeof t&&t!=t}function p(t,e){try{return t instanceof e}catch(t){return!1}}function m(t,e){try{let i=t;var n=[];let s=0,o=0;var r=" > ".length;let a;for(;i&&s++<5&&(a=y(i,e),!("html"===a||s>1&&o+n.length*r+a.length>=80));)n.push(a),o+=a.length,i=i.parentNode;return n.reverse().join(" > ")}catch(t){return"<unknown>"}}function y(t,e){var n=t,r=[];let i,s,o,a,u;if(!n||!n.tagName)return"";r.push(n.tagName.toLowerCase());var h=e&&e.length?e.filter((t=>n.getAttribute(t))).map((t=>[t,n.getAttribute(t)])):null;if(h&&h.length)h.forEach((t=>{r.push(`[${t[0]}="${t[1]}"]`)}));else if(n.id&&r.push(`#${n.id}`),i=n.className,i&&c(i))for(s=i.split(/\s+/),u=0;u<s.length;u++)r.push(`.${s[u]}`);var f=["type","name","title","alt"];for(u=0;u<f.length;u++)o=f[u],a=n.getAttribute(o),a&&r.push(`[${o}="${a}"]`);return r.join("")}class g extends Error{constructor(t){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}}var _=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/;function b(t,e=!1){const{host:n,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:u}=t;return`${a}://${u}${e&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r?`${r}/`:r}${o}`}function w(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function x(t){return"string"==typeof t?function(t){var e=_.exec(t);if(!e)throw new g(`Invalid Sentry Dsn: ${t}`);const[n,r,i="",s,o="",a]=e.slice(1);let u="",c=a;var h=c.split("/");if(h.length>1&&(u=h.slice(0,-1).join("/"),c=h.pop()),c){var f=c.match(/^\d+/);f&&(c=f[0])}return w({host:s,pass:i,path:u,projectId:c,port:o,protocol:n,publicKey:r})}(t):w(t)}n();var S=["debug","info","warn","error","log","assert"];function E(t){var e=n();if(!("console"in e))return t();var r=e.console,i={};S.forEach((t=>{var n=r[t]&&r[t].__sentry_original__;t in e.console&&n&&(i[t]=r[t],r[t]=n)}));try{return t()}finally{Object.keys(i).forEach((t=>{r[t]=i[t]}))}}function $(){let t=!1;var e={enable:()=>{t=!0},disable:()=>{t=!1}};return S.forEach((t=>{e[t]=()=>{}})),e}let T;function O(){var t="function"==typeof WeakSet,e=t?new WeakSet:[];return[function(n){if(t)return!!e.has(n)||(e.add(n),!1);for(let t=0;t<e.length;t++){if(e[t]===n)return!0}return e.push(n),!1},function(n){if(t)e.delete(n);else for(let t=0;t<e.length;t++)if(e[t]===n){e.splice(t,1);break}}]}function k(t,e=0){return"string"!=typeof t||0===e||t.length<=e?t:`${t.substr(0,e)}...`}function j(t,e){if(!Array.isArray(t))return"";var n=[];for(let e=0;e<t.length;e++){var r=t[e];try{n.push(String(r))}catch(t){n.push("[value cannot be serialized]")}}return n.join(e)}function R(t,e){return!!c(t)&&(o(e,"RegExp")?e.test(t):"string"==typeof e&&-1!==t.indexOf(e))}function C(t,e,n){if(e in t){var r=t[e],i=n(r);if("function"==typeof i)try{I(i,r)}catch(t){}t[e]=i}}function D(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}function I(t,e){var n=e.prototype||{};t.prototype=e.prototype=n,D(t,"__sentry_original__",e)}function L(t){return t.__sentry_original__}function M(t){if(s(t))return{message:t.message,name:t.name,stack:t.stack,...N(t)};if(l(t)){var e={type:t.type,target:A(t.target),currentTarget:A(t.currentTarget),...N(t)};return"undefined"!=typeof CustomEvent&&p(t,CustomEvent)&&(e.detail=t.detail),e}return t}function A(t){try{return e=t,"undefined"!=typeof Element&&p(e,Element)?m(t):Object.prototype.toString.call(t)}catch(t){return"<unknown>"}var e}function N(t){if("object"==typeof t&&null!==t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}return{}}function q(t,e=40){var n=Object.keys(M(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return k(n[0],e);for(let t=n.length;t>0;t--){var r=n.slice(0,t).join(", ");if(!(r.length>e))return t===n.length?r:k(r,e)}return""}function U(t){return F(t,O())}function F(t,e){const[n]=e;if(f(t)){if(n(t))return t;var r={};for(var i of Object.keys(t))void 0!==t[i]&&(r[i]=F(t[i],e));return r}return Array.isArray(t)?n(t)?t:t.map((t=>F(t,e))):t}T=$();function P(...t){var e=t.sort(((t,e)=>t[0]-e[0])).map((t=>t[1]));return(t,n=0)=>{var r=[];for(var i of t.split("\n").slice(n))for(var s of e){var o=s(i);if(o){r.push(o);break}}return function(t){if(!t.length)return[];let e=t;var n=e[0].function||"",r=e[e.length-1].function||"";-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(e=e.slice(1));-1!==r.indexOf("sentryWrapped")&&(e=e.slice(0,-1));return e.slice(0,50).map((t=>({...t,filename:t.filename||e[0].filename,function:t.function||"?"}))).reverse()}(r)}}var B="<anonymous>";function H(t){try{return t&&"function"==typeof t&&t.name||B}catch(t){return B}}function z(){if(!("fetch"in n()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function X(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}var W=n(),J={},G={};function K(t){if(!G[t])switch(G[t]=!0,t){case"console":!function(){if(!("console"in W))return;S.forEach((function(t){t in W.console&&C(W.console,t,(function(e){return function(...n){Q("console",{args:n,level:t}),e&&e.apply(W.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in W))return;var t=Q.bind(null,"dom"),e=rt(t,!0);W.document.addEventListener("click",e,!1),W.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach((e=>{var n=W[e]&&W[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(C(n,"addEventListener",(function(e){return function(n,r,i){if("click"===n||"keypress"==n)try{var s=this,o=s.__sentry_instrumentation_handlers__=s.__sentry_instrumentation_handlers__||{},a=o[n]=o[n]||{refCount:0};if(!a.handler){var u=rt(t);a.handler=u,e.call(this,n,u,i)}a.refCount+=1}catch(t){}return e.call(this,n,r,i)}})),C(n,"removeEventListener",(function(t){return function(e,n,r){if("click"===e||"keypress"==e)try{var i=this,s=i.__sentry_instrumentation_handlers__||{},o=s[e];o&&(o.refCount-=1,o.refCount<=0&&(t.call(this,e,o.handler,r),o.handler=void 0,delete s[e]),0===Object.keys(s).length&&delete i.__sentry_instrumentation_handlers__)}catch(t){}return t.call(this,e,n,r)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in W))return;var t=XMLHttpRequest.prototype;C(t,"open",(function(t){return function(...e){var n=this,r=e[1],i=n.__sentry_xhr__={method:c(e[0])?e[0].toUpperCase():e[0],url:e[1]};c(r)&&"POST"===i.method&&r.match(/sentry_key/)&&(n.__sentry_own_request__=!0);var s=function(){if(4===n.readyState){try{i.status_code=n.status}catch(t){}Q("xhr",{args:e,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:n})}};return"onreadystatechange"in n&&"function"==typeof n.onreadystatechange?C(n,"onreadystatechange",(function(t){return function(...e){return s(),t.apply(n,e)}})):n.addEventListener("readystatechange",s),t.apply(n,e)}})),C(t,"send",(function(t){return function(...e){return this.__sentry_xhr__&&void 0!==e[0]&&(this.__sentry_xhr__.body=e[0]),Q("xhr",{args:e,startTimestamp:Date.now(),xhr:this}),t.apply(this,e)}}))}();break;case"fetch":!function(){if(!function(){if(!z())return!1;var t=n();if(X(t.fetch))return!0;let e=!1;var r=t.document;if(r&&"function"==typeof r.createElement)try{var i=r.createElement("iframe");i.hidden=!0,r.head.appendChild(i),i.contentWindow&&i.contentWindow.fetch&&(e=X(i.contentWindow.fetch)),r.head.removeChild(i)}catch(t){}return e}())return;C(W,"fetch",(function(t){return function(...e){var n={args:e,fetchData:{method:Y(e),url:Z(e)},startTimestamp:Date.now()};return Q("fetch",{...n}),t.apply(W,e).then((t=>(Q("fetch",{...n,endTimestamp:Date.now(),response:t}),t)),(t=>{throw Q("fetch",{...n,endTimestamp:Date.now(),error:t}),t}))}}))}();break;case"history":!function(){if(!function(){var t=n(),e=t.chrome,r=e&&e.app&&e.app.runtime,i="history"in t&&!!t.history.pushState&&!!t.history.replaceState;return!r&&i}())return;var t=W.onpopstate;function e(t){return function(...e){var n=e.length>2?e[2]:void 0;if(n){var r=tt,i=String(n);tt=i,Q("history",{from:r,to:i})}return t.apply(this,e)}}W.onpopstate=function(...e){var n=W.location.href,r=tt;if(tt=n,Q("history",{from:r,to:n}),t)try{return t.apply(this,e)}catch(t){}},C(W.history,"pushState",e),C(W.history,"replaceState",e)}();break;case"error":it=W.onerror,W.onerror=function(t,e,n,r,i){return Q("error",{column:r,error:i,line:n,msg:t,url:e}),!!it&&it.apply(this,arguments)};break;case"unhandledrejection":st=W.onunhandledrejection,W.onunhandledrejection=function(t){return Q("unhandledrejection",t),!st||st.apply(this,arguments)};break;default:return}}function V(t,e){J[t]=J[t]||[],J[t].push(e),K(t)}function Q(t,e){if(t&&J[t])for(var n of J[t]||[])try{n(e)}catch(t){}}function Y(t=[]){return"Request"in W&&p(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function Z(t=[]){return"string"==typeof t[0]?t[0]:"Request"in W&&p(t[0],Request)?t[0].url:String(t[0])}let tt;let et,nt;function rt(t,e=!1){return n=>{if(n&&nt!==n&&!function(t){if("keypress"!==t.type)return!1;try{var e=t.target;if(!e||!e.tagName)return!0;if("INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable)return!1}catch(t){}return!0}(n)){var r="keypress"===n.type?"input":n.type;(void 0===et||function(t,e){if(!t)return!0;if(t.type!==e.type)return!0;try{if(t.target!==e.target)return!0}catch(t){}return!1}(nt,n))&&(t({event:n,name:r,global:e}),nt=n),clearTimeout(et),et=W.setTimeout((()=>{et=void 0}),1e3)}}}let it=null;let st=null;function ot(){var t=n(),e=t.crypto||t.msCrypto;if(void 0!==e&&e.getRandomValues){var r=new Uint16Array(8);e.getRandomValues(r),r[3]=4095&r[3]|16384,r[4]=16383&r[4]|32768;var i=t=>{let e=t.toString(16);for(;e.length<4;)e=`0${e}`;return e};return i(r[0])+i(r[1])+i(r[2])+i(r[3])+i(r[4])+i(r[5])+i(r[6])+i(r[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(t=>{var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function at(t){if(!t)return{};var e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};var n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],relative:e[5]+n+r}}function ut(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function ct(t){const{message:e,event_id:n}=t;if(e)return e;var r=ut(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function ht(t,e,n){var r=t.exception=t.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type=n||"Error")}function ft(t,e){var n=ut(t);if(n){var r=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...r,...e},e&&"data"in e){var i={...r&&r.data,...e.data};n.mechanism.data=i}}}function lt(t){if(t&&t.__sentry_captured__)return!0;try{D(t,"__sentry_captured__",!0)}catch(t){}return!1}function dt(t,e=1/0,n=1/0){try{return pt("",t,e,n)}catch(t){return{ERROR:`**non-serializable** (${t})`}}}function vt(t,e=3,n=102400){var r,i=dt(t,e);return r=i,function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(r))>n?vt(t,e-1,n):i}function pt(t,e,n=1/0,r=1/0,i=O()){const[s,o]=i;var a=e;if(a&&"function"==typeof a.toJSON)try{return a.toJSON()}catch(t){}if(null===e||["number","boolean","string"].includes(typeof e)&&!v(e))return e;var u=function(t,e){try{return"domain"===t&&e&&"object"==typeof e&&e.t?"[Domain]":"domainEmitter"===t?"[DomainEmitter]":"undefined"!=typeof global&&e===global?"[Global]":"undefined"!=typeof window&&e===window?"[Window]":"undefined"!=typeof document&&e===document?"[Document]":f(n=e)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n?"[SyntheticEvent]":"number"==typeof e&&e!=e?"[NaN]":void 0===e?"[undefined]":"function"==typeof e?`[Function: ${H(e)}]`:"symbol"==typeof e?`[${String(e)}]`:"bigint"==typeof e?`[BigInt: ${String(e)}]`:`[object ${Object.getPrototypeOf(e).constructor.name}]`}catch(t){return`**non-serializable** (${t})`}var n}(t,e);if(!u.startsWith("[object "))return u;if(e.__sentry_skip_normalization__)return e;if(0===n)return u.replace("object ","");if(s(e))return"[Circular ~]";var c=Array.isArray(e)?[]:{};let h=0;var l=M(e);for(var d in l)if(Object.prototype.hasOwnProperty.call(l,d)){if(h>=r){c[d]="[MaxProperties ~]";break}var p=l[d];c[d]=pt(d,p,n-1,r,i),h+=1}return o(e),c}var mt;function yt(t){return new _t((e=>{e(t)}))}function gt(t){return new _t(((e,n)=>{n(t)}))}!function(t){t[t.PENDING=0]="PENDING";t[t.RESOLVED=1]="RESOLVED";t[t.REJECTED=2]="REJECTED"}(mt||(mt={}));class _t{__init(){this.i=mt.PENDING}__init2(){this.o=[]}constructor(t){_t.prototype.__init.call(this),_t.prototype.__init2.call(this),_t.prototype.__init3.call(this),_t.prototype.__init4.call(this),_t.prototype.__init5.call(this),_t.prototype.__init6.call(this);try{t(this.u,this.h)}catch(t){this.h(t)}}then(t,e){return new _t(((n,r)=>{this.o.push([!1,e=>{if(t)try{n(t(e))}catch(t){r(t)}else n(e)},t=>{if(e)try{n(e(t))}catch(t){r(t)}else r(t)}]),this.l()}))}catch(t){return this.then((t=>t),t)}finally(t){return new _t(((e,n)=>{let r,i;return this.then((e=>{i=!1,r=e,t&&t()}),(e=>{i=!0,r=e,t&&t()})).then((()=>{i?n(r):e(r)}))}))}__init3(){this.u=t=>{this.v(mt.RESOLVED,t)}}__init4(){this.h=t=>{this.v(mt.REJECTED,t)}}__init5(){this.v=(t,e)=>{this.i===mt.PENDING&&(d(e)?e.then(this.u,this.h):(this.i=t,this.p=e,this.l()))}}__init6(){this.l=()=>{if(this.i!==mt.PENDING){var t=this.o.slice();this.o=[],t.forEach((t=>{t[0]||(this.i===mt.RESOLVED&&t[1](this.p),this.i===mt.REJECTED&&t[2](this.p),t[0]=!0)}))}}}}function bt(t){var e=[];function n(t){return e.splice(e.indexOf(t),1)[0]}return{$:e,add:function(r){if(!(void 0===t||e.length<t))return gt(new g("Not adding Promise due to buffer limit reached."));var i=r();return-1===e.indexOf(i)&&e.push(i),i.then((()=>n(i))).then(null,(()=>n(i).then(null,(()=>{})))),i},drain:function(t){return new _t(((n,r)=>{let i=e.length;if(!i)return n(!0);var s=setTimeout((()=>{t&&t>0&&n(!1)}),t);e.forEach((t=>{yt(t).then((()=>{--i||(clearTimeout(s),n(!0))}),r)}))}))}}}var wt=["fatal","error","warning","log","info","debug"];var xt={nowSeconds:()=>Date.now()/1e3};var St=function(){const{performance:t}=n();if(t&&t.now)return{now:()=>t.now(),timeOrigin:Date.now()-t.now()}}(),Et=void 0===St?xt:{nowSeconds:()=>(St.timeOrigin+St.now())/1e3},$t=xt.nowSeconds.bind(xt),Tt=Et.nowSeconds.bind(Et),Ot=Tt,kt=(()=>{const{performance:t}=n();if(t&&t.now){var e=36e5,r=t.now(),i=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+r-i):e,o=s<e,a=t.timing&&t.timing.navigationStart,u="number"==typeof a?Math.abs(a+r-i):e;return o||u<e?s<=u?t.timeOrigin:a:i}})(),jt=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Rt(t,e=[]){return[t,e]}function Ct(t,e){const[n,r]=t;return[n,[...r,e]]}function Dt(t,e){t[1].forEach((t=>{var n=t[0].type;e(t,n)}))}function It(t,e){return(e||new TextEncoder).encode(t)}function Lt(t,e){const[n,r]=t;let i=JSON.stringify(n);function s(t){"string"==typeof i?i="string"==typeof t?i+t:[It(i,e),t]:i.push("string"==typeof t?It(t,e):t)}for(var o of r){const[t,e]=o;s(`\n${JSON.stringify(t)}\n`),s("string"==typeof e||e instanceof Uint8Array?e:JSON.stringify(e))}return"string"==typeof i?i:function(t){var e=t.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(e);let r=0;for(var i of t)n.set(i,r),r+=i.length;return n}(i)}function Mt(t,e){var n="string"==typeof t.data?It(t.data,e):t.data;return[U({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}var At={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default"};function Nt(t){return At[t]}function qt(t,{statusCode:e,headers:n},r=Date.now()){var i={...t},s=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(s)for(var a of s.trim().split(",")){const[t,e]=a.split(":",2);var u=parseInt(t,10),c=1e3*(isNaN(u)?60:u);if(e)for(var h of e.split(";"))i[h]=r+c;else i.all=r+c}else o?i.all=r+function(t,e=Date.now()){var n=parseInt(`${t}`,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(`${t}`);return isNaN(r)?6e4:r-e}(o,r):429===e&&(i.all=r+6e4);return i}var Ut="baggage",Ft=/^sentry-/;function Pt(t){return t.split(",").reduce((([t,e],n)=>{const[r,i]=n.split("=");if(Ft.test(r)){var s=decodeURIComponent(r.split("-")[1]);return[{...t,[s]:decodeURIComponent(i)},e]}return[t,""===e?n:`${e},${n}`]}),[{},""])}function Bt(t,e){if(!t&&!e)return"";var n=e&&Pt(e)||void 0,r=n&&n[1];return function(t){return Object.keys(t[0]).reduce(((e,n)=>{var r=t[0][n],i=`sentry-${encodeURIComponent(n)}=${encodeURIComponent(r)}`,s=""===e?i:`${e},${i}`;return s.length>8192?e:s}),t[1])}(function(t,e=""){return[{...t},e]}(t&&t[0]||{},r||t&&t[1]||""))}function Ht(t){var e=Tt(),n={sid:ot(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(t){return U({sid:`${t.sid}`,init:t.init,started:new Date(1e3*t.started).toISOString(),timestamp:new Date(1e3*t.timestamp).toISOString(),status:t.status,errors:t.errors,did:"number"==typeof t.did||"string"==typeof t.did?`${t.did}`:void 0,duration:t.duration,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}(n)};return t&&zt(n,t),n}function zt(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),t.did||e.did||(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Tt(),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=32===e.sid.length?e.sid:ot()),void 0!==e.init&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),"number"==typeof e.started&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if("number"==typeof e.duration)t.duration=e.duration;else{var n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),"number"==typeof e.errors&&(t.errors=e.errors),e.status&&(t.status=e.status)}class Xt{constructor(){Xt.prototype.__init.call(this),Xt.prototype.__init2.call(this),Xt.prototype.__init3.call(this),Xt.prototype.__init4.call(this),Xt.prototype.__init5.call(this),Xt.prototype.__init6.call(this),Xt.prototype.__init7.call(this),Xt.prototype.__init8.call(this),Xt.prototype.__init9.call(this),Xt.prototype.__init10.call(this)}__init(){this.m=!1}__init2(){this.g=[]}__init3(){this._=[]}__init4(){this.S=[]}__init5(){this.T={}}__init6(){this.O={}}__init7(){this.k={}}__init8(){this.j={}}__init9(){this.R=[]}__init10(){this.C={}}static clone(t){var e=new Xt;return t&&(e.S=[...t.S],e.O={...t.O},e.k={...t.k},e.j={...t.j},e.T=t.T,e.D=t.D,e.I=t.I,e.L=t.L,e.M=t.M,e.A=t.A,e._=[...t._],e.N=t.N,e.R=[...t.R]),e}addScopeListener(t){this.g.push(t)}addEventProcessor(t){return this._.push(t),this}setUser(t){return this.T=t||{},this.L&&zt(this.L,{user:t}),this.q(),this}getUser(){return this.T}getRequestSession(){return this.N}setRequestSession(t){return this.N=t,this}setTags(t){return this.O={...this.O,...t},this.q(),this}setTag(t,e){return this.O={...this.O,[t]:e},this.q(),this}setExtras(t){return this.k={...this.k,...t},this.q(),this}setExtra(t,e){return this.k={...this.k,[t]:e},this.q(),this}setFingerprint(t){return this.A=t,this.q(),this}setLevel(t){return this.D=t,this.q(),this}setTransactionName(t){return this.M=t,this.q(),this}setContext(t,e){return null===e?delete this.j[t]:this.j={...this.j,[t]:e},this.q(),this}setSpan(t){return this.I=t,this.q(),this}getSpan(){return this.I}getTransaction(){var t=this.getSpan();return t&&t.transaction}setSession(t){return t?this.L=t:delete this.L,this.q(),this}getSession(){return this.L}update(t){if(!t)return this;if("function"==typeof t){var e=t(this);return e instanceof Xt?e:this}return t instanceof Xt?(this.O={...this.O,...t.O},this.k={...this.k,...t.k},this.j={...this.j,...t.j},t.T&&Object.keys(t.T).length&&(this.T=t.T),t.D&&(this.D=t.D),t.A&&(this.A=t.A),t.N&&(this.N=t.N)):f(t)&&(t=t,this.O={...this.O,...t.tags},this.k={...this.k,...t.extra},this.j={...this.j,...t.contexts},t.user&&(this.T=t.user),t.level&&(this.D=t.level),t.fingerprint&&(this.A=t.fingerprint),t.requestSession&&(this.N=t.requestSession)),this}clear(){return this.S=[],this.O={},this.k={},this.T={},this.j={},this.D=void 0,this.M=void 0,this.A=void 0,this.N=void 0,this.I=void 0,this.L=void 0,this.q(),this.R=[],this}addBreadcrumb(t,e){var n="number"==typeof e?Math.min(e,100):100;if(n<=0)return this;var r={timestamp:$t(),...t};return this.S=[...this.S,r].slice(-n),this.q(),this}clearBreadcrumbs(){return this.S=[],this.q(),this}addAttachment(t){return this.R.push(t),this}getAttachments(){return this.R}clearAttachments(){return this.R=[],this}applyToEvent(t,e={}){if(this.k&&Object.keys(this.k).length&&(t.extra={...this.k,...t.extra}),this.O&&Object.keys(this.O).length&&(t.tags={...this.O,...t.tags}),this.T&&Object.keys(this.T).length&&(t.user={...this.T,...t.user}),this.j&&Object.keys(this.j).length&&(t.contexts={...this.j,...t.contexts}),this.D&&(t.level=this.D),this.M&&(t.transaction=this.M),this.I){t.contexts={trace:this.I.getTraceContext(),...t.contexts};var n=this.I.transaction&&this.I.transaction.name;n&&(t.tags={transaction:n,...t.tags})}return this.U(t),t.breadcrumbs=[...t.breadcrumbs||[],...this.S],t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,t.sdkProcessingMetadata=this.C,this.F([...Wt(),...this._],t,e)}setSDKProcessingMetadata(t){return this.C={...this.C,...t},this}F(t,e,n,r=0){return new _t(((i,s)=>{var o=t[r];if(null===e||"function"!=typeof o)i(e);else{var a=o({...e},n);d(a)?a.then((e=>this.F(t,e,n,r+1).then(i))).then(null,s):this.F(t,a,n,r+1).then(i).then(null,s)}}))}q(){this.m||(this.m=!0,this.g.forEach((t=>{t(this)})),this.m=!1)}U(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this.A&&(t.fingerprint=t.fingerprint.concat(this.A)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}}function Wt(){return r("globalEventProcessors",(()=>[]))}function Jt(t){Wt().push(t)}var Gt=100;class Kt{__init(){this.P=[{}]}constructor(t,e=new Xt,n=4){this.B=n,Kt.prototype.__init.call(this),this.getStackTop().scope=e,t&&this.bindClient(t)}isOlderThan(t){return this.B<t}bindClient(t){this.getStackTop().client=t,t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){var t=Xt.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(t){var e=this.pushScope();try{t(e)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this.P}getStackTop(){return this.P[this.P.length-1]}captureException(t,e){var n=this.H=e&&e.event_id?e.event_id:ot(),r=new Error("Sentry syntheticException");return this.X(((i,s)=>{i.captureException(t,{originalException:t,syntheticException:r,...e,event_id:n},s)})),n}captureMessage(t,e,n){var r=this.H=n&&n.event_id?n.event_id:ot(),i=new Error(t);return this.X(((s,o)=>{s.captureMessage(t,e,{originalException:t,syntheticException:i,...n,event_id:r},o)})),r}captureEvent(t,e){var n=e&&e.event_id?e.event_id:ot();return"transaction"!==t.type&&(this.H=n),this.X(((r,i)=>{r.captureEvent(t,{...e,event_id:n},i)})),n}lastEventId(){return this.H}addBreadcrumb(t,e){const{scope:n,client:r}=this.getStackTop();if(!n||!r)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:s=Gt}=r.getOptions&&r.getOptions()||{};if(!(s<=0)){var o={timestamp:$t(),...t},a=i?E((()=>i(o,e))):o;null!==a&&n.addBreadcrumb(a,s)}}setUser(t){var e=this.getScope();e&&e.setUser(t)}setTags(t){var e=this.getScope();e&&e.setTags(t)}setExtras(t){var e=this.getScope();e&&e.setExtras(t)}setTag(t,e){var n=this.getScope();n&&n.setTag(t,e)}setExtra(t,e){var n=this.getScope();n&&n.setExtra(t,e)}setContext(t,e){var n=this.getScope();n&&n.setContext(t,e)}configureScope(t){const{scope:e,client:n}=this.getStackTop();e&&n&&t(e)}run(t){var e=Qt(this);try{t(this)}finally{Qt(e)}}getIntegration(t){var e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(t){return null}}startTransaction(t,e){return this.W("startTransaction",t,e)}traceHeaders(){return this.W("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this.J()}endSession(){var t=this.getStackTop(),e=t&&t.scope,n=e&&e.getSession();n&&function(t,e){let n={};e?n={status:e}:"ok"===t.status&&(n={status:"exited"}),zt(t,n)}(n),this.J(),e&&e.setSession()}startSession(t){const{scope:e,client:r}=this.getStackTop(),{release:i,environment:s}=r&&r.getOptions()||{};var o=n();const{userAgent:a}=o.navigator||{};var u=Ht({release:i,environment:s,...e&&{user:e.getUser()},...a&&{userAgent:a},...t});if(e){var c=e.getSession&&e.getSession();c&&"ok"===c.status&&zt(c,{status:"exited"}),this.endSession(),e.setSession(u)}return u}J(){const{scope:t,client:e}=this.getStackTop();if(t){var n=t.getSession();n&&e&&e.captureSession&&e.captureSession(n)}}X(t){const{scope:e,client:n}=this.getStackTop();n&&t(n,e)}W(t,...e){var n=Vt().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[t])return n.extensions[t].apply(this,e)}}function Vt(){var t=n();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function Qt(t){var e=Vt(),n=Zt(e);return te(e,t),n}function Yt(){var t,e=Vt();return(t=e)&&t.__SENTRY__&&t.__SENTRY__.hub&&!Zt(e).isOlderThan(4)||te(e,new Kt),Zt(e)}function Zt(t){return r("hub",(()=>new Kt),t)}function te(t,e){return!!t&&((t.__SENTRY__=t.__SENTRY__||{}).hub=e,!0)}function captureException(t,e){return Yt().captureException(t,{captureContext:e})}function ee(t){Yt().withScope(t)}function ne(t){var e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function re(t){return e={sentry_key:t.publicKey,sentry_version:"7"},Object.keys(e).map((t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&");var e}function ie(t,e){return e||`${function(t){return`${ne(t)}${t.projectId}/envelope/`}(t)}?${re(t)}`}function se(t){let e,n=t[0],r=1;for(;r<t.length;){var i=t[r],s=t[r+1];if(r+=2,("optionalAccess"===i||"optionalCall"===i)&&null==n)return;"access"===i||"optionalAccess"===i?(e=n,n=s(n)):"call"!==i&&"optionalCall"!==i||(n=s(((...t)=>n.call(e,...t))),e=void 0)}return n}function oe(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function ae(t,e,n,r){var i=oe(n),s=t.type||"event";const{transactionSampling:o}=t.sdkProcessingMetadata||{},{method:a,rate:u}=o||{};!function(t,e){e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]])}(t,n&&n.sdk),t.tags=t.tags||{},t.extra=t.extra||{},t.sdkProcessingMetadata&&t.sdkProcessingMetadata.baseClientNormalized||(t.tags.skippedNormalization=!0,t.extra.normalizeDepth=t.sdkProcessingMetadata?t.sdkProcessingMetadata.normalizeDepth:"unset"),delete t.sdkProcessingMetadata;var c=function(t,e,n,r){return{event_id:t.event_id,sent_at:(new Date).toISOString(),...e&&{sdk:e},...!!n&&{dsn:b(r)},..."transaction"===t.type&&t.contexts&&t.contexts.trace&&{trace:U({trace_id:t.contexts.trace.trace_id,environment:t.environment,release:t.release,transaction:t.transaction,user:t.user&&{id:t.user.id,segment:t.user.segment},public_key:r.publicKey})}}}(t,i,r,e);return Rt(c,[[{type:s,sample_rates:[{id:a,rate:u}]},t]])}var ue=[];function ce(t){return t.reduce(((t,e)=>(t.every((t=>e.name!==t.name))&&t.push(e),t)),[])}function he(t){var e=t.defaultIntegrations&&[...t.defaultIntegrations]||[],n=t.integrations;let r=[...ce(e)];Array.isArray(n)?r=[...r.filter((t=>n.every((e=>e.name!==t.name)))),...ce(n)]:"function"==typeof n&&(r=n(r),r=Array.isArray(r)?r:[r]);var i=r.map((t=>t.name)),s="Debug";return-1!==i.indexOf(s)&&r.push(...r.splice(i.indexOf(s),1)),r}class fe{__init(){this.G={}}__init2(){this.K=!1}__init3(){this.V=0}__init4(){this.Y={}}constructor(t){if(fe.prototype.__init.call(this),fe.prototype.__init2.call(this),fe.prototype.__init3.call(this),fe.prototype.__init4.call(this),this.Z=t,t.dsn){this.tt=x(t.dsn);var e=ie(this.tt,t.tunnel);this.et=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:e})}}captureException(t,e,n){if(lt(t))return;let r=e&&e.event_id;return this.nt(this.eventFromException(t,e).then((t=>this.rt(t,e,n))).then((t=>{r=t}))),r}captureMessage(t,e,n,r){let i=n&&n.event_id;var s=h(t)?this.eventFromMessage(String(t),e,n):this.eventFromException(t,n);return this.nt(s.then((t=>this.rt(t,n,r))).then((t=>{i=t}))),i}captureEvent(t,e,n){if(e&&e.originalException&&lt(e.originalException))return;let r=e&&e.event_id;return this.nt(this.rt(t,e,n).then((t=>{r=t}))),r}captureSession(t){this.it()&&("string"!=typeof t.release||(this.sendSession(t),zt(t,{init:!1})))}getDsn(){return this.tt}getOptions(){return this.Z}getTransport(){return this.et}flush(t){var e=this.et;return e?this.st(t).then((n=>e.flush(t).then((t=>n&&t)))):yt(!0)}close(t){return this.flush(t).then((t=>(this.getOptions().enabled=!1,t)))}setupIntegrations(){var t,e;this.it()&&!this.K&&(this.G=(t=this.Z.integrations,e={},t.forEach((t=>{e[t.name]=t,-1===ue.indexOf(t.name)&&(t.setupOnce(Jt,Yt),ue.push(t.name))})),e),this.K=!0)}getIntegrationById(t){return this.G[t]}getIntegration(t){try{return this.G[t.id]||null}catch(t){return null}}sendEvent(t,e={}){if(this.tt){let r=ae(t,this.tt,this.Z.ot,this.Z.tunnel);for(var n of e.attachments||[])r=Ct(r,Mt(n,se([this,"access",t=>t.Z,"access",t=>t.transportOptions,"optionalAccess",t=>t.textEncoder])));this.at(r)}}sendSession(t){if(this.tt){var e=function(t,e,n,r){var i=oe(n);return Rt({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!r&&{dsn:b(e)}},["aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t]])}(t,this.tt,this.Z.ot,this.Z.tunnel);this.at(e)}}recordDroppedEvent(t,e){if(this.Z.sendClientReports){var n=`${t}:${e}`;this.Y[n]=this.Y[n]+1||1}}ut(t,e){let n=!1,r=!1;var i=e.exception&&e.exception.values;if(i)for(var s of(r=!0,i)){var o=s.mechanism;if(o&&!1===o.handled){n=!0;break}}var a="ok"===t.status;(a&&0===t.errors||a&&n)&&(zt(t,{...n&&{status:"crashed"},errors:t.errors||Number(r||n)}),this.captureSession(t))}st(t){return new _t((e=>{let n=0;var r=setInterval((()=>{0==this.V?(clearInterval(r),e(!0)):(n+=1,t&&n>=t&&(clearInterval(r),e(!1)))}),1)}))}it(){return!1!==this.getOptions().enabled&&void 0!==this.tt}ct(t,e,n){const{normalizeDepth:r=3,normalizeMaxBreadth:i=1e3}=this.getOptions();var s={...t,event_id:t.event_id||e.event_id||ot(),timestamp:t.timestamp||$t()};this.ht(s),this.ft(s);let o=n;e.captureContext&&(o=Xt.clone(o).update(e.captureContext));let a=yt(s);if(o){var u=[...e.attachments||[],...o.getAttachments()];u.length&&(e.attachments=u),a=o.applyToEvent(s,e)}return a.then((t=>(t&&(t.sdkProcessingMetadata={...t.sdkProcessingMetadata,normalizeDepth:`${dt(r)} (${typeof r})`}),"number"==typeof r&&r>0?this.lt(t,r,i):t)))}lt(t,e,n){if(!t)return null;var r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((t=>({...t,...t.data&&{data:dt(t.data,e,n)}})))},...t.user&&{user:dt(t.user,e,n)},...t.contexts&&{contexts:dt(t.contexts,e,n)},...t.extra&&{extra:dt(t.extra,e,n)}};return t.contexts&&t.contexts.trace&&(r.contexts.trace=t.contexts.trace),r.sdkProcessingMetadata={...r.sdkProcessingMetadata,baseClientNormalized:!0},r}ht(t){var e=this.getOptions();const{environment:n,release:r,dist:i,maxValueLength:s=250}=e;"environment"in t||(t.environment="environment"in e?n:"production"),void 0===t.release&&void 0!==r&&(t.release=r),void 0===t.dist&&void 0!==i&&(t.dist=i),t.message&&(t.message=k(t.message,s));var o=t.exception&&t.exception.values&&t.exception.values[0];o&&o.value&&(o.value=k(o.value,s));var a=t.request;a&&a.url&&(a.url=k(a.url,s))}ft(t){var e=Object.keys(this.G);e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}rt(t,e={},n){return this.dt(t,e,n).then((t=>t.event_id),(t=>{}))}dt(t,e,n){const{beforeSend:r,sampleRate:i}=this.getOptions();if(!this.it())return gt(new g("SDK not enabled, will not capture event."));var s="transaction"===t.type;return!s&&"number"==typeof i&&Math.random()>i?(this.recordDroppedEvent("sample_rate","error"),gt(new g(`Discarding event because it's not included in the random sample (sampling rate = ${i})`))):this.ct(t,e,n).then((n=>{if(null===n)throw this.recordDroppedEvent("event_processor",t.type||"error"),new g("An event processor returned null, will not send event.");return e.data&&!0===e.data.__sentry__||s||!r?n:function(t){var e="`beforeSend` method has to return `null` or a valid event.";if(d(t))return t.then((t=>{if(!f(t)&&null!==t)throw new g(e);return t}),(t=>{throw new g(`beforeSend rejected with ${t}`)}));if(!f(t)&&null!==t)throw new g(e);return t}(r(n,e))})).then((r=>{if(null===r)throw this.recordDroppedEvent("before_send",t.type||"error"),new g("`beforeSend` returned `null`, will not send event.");var i=n&&n.getSession();return!s&&i&&this.ut(i,r),this.sendEvent(r,e),r})).then(null,(t=>{if(t instanceof g)throw t;throw this.captureException(t,{data:{__sentry__:!0},originalException:t}),new g(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${t}`)}))}nt(t){this.V+=1,t.then((t=>(this.V-=1,t)),(t=>(this.V-=1,t)))}at(t){this.et&&this.tt&&this.et.send(t).then(null,(t=>{}))}vt(){var t=this.Y;return this.Y={},Object.keys(t).map((e=>{const[n,r]=e.split(":");return{reason:n,category:r,quantity:t[e]}}))}}function le(t,e,n=bt(t.bufferSize||30)){let r={};return{send:function(i){var s=[];if(Dt(i,((e,n)=>{var i=Nt(n);!function(t,e,n=Date.now()){return function(t,e){return t[e]||t.all||0}(t,e)>n}(r,i)?s.push(e):t.recordDroppedEvent("ratelimit_backoff",i)})),0===s.length)return yt();var o=Rt(i[0],s),a=e=>{Dt(o,((n,r)=>{t.recordDroppedEvent(e,Nt(r))}))};return n.add((()=>e({body:Lt(o,t.textEncoder)}).then((t=>{r=qt(r,t)}),(t=>{a("network_error")})))).then((t=>t),(t=>{if(t instanceof g)return a("queue_overflow"),yt();throw t}))},flush:t=>n.drain(t)}}var de="7.0.0";let ve;class pe{constructor(){pe.prototype.__init.call(this)}static __initStatic(){this.id="FunctionToString"}__init(){this.name=pe.id}setupOnce(){ve=Function.prototype.toString,Function.prototype.toString=function(...t){var e=L(this)||this;return ve.apply(e,t)}}}pe.__initStatic();var me=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/];class ye{static __initStatic(){this.id="InboundFilters"}__init(){this.name=ye.id}constructor(t={}){this.Z=t,ye.prototype.__init.call(this)}setupOnce(t,e){var n=t=>{var n=e();if(n){var r=n.getIntegration(ye);if(r){var i=n.getClient(),s=i?i.getOptions():{},o=function(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...me],ignoreInternal:void 0===t.ignoreInternal||t.ignoreInternal}}(r.Z,s);return function(t,e){if(e.ignoreInternal&&function(t){try{return"SentryError"===t.exception.values[0].type}catch(t){}return!1}(t))return!0;if(function(t,e){if(!e||!e.length)return!1;return function(t){if(t.message)return[t.message];if(t.exception)try{const{type:e="",value:n=""}=t.exception.values&&t.exception.values[0]||{};return[`${n}`,`${e}: ${n}`]}catch(t){return[]}return[]}(t).some((t=>e.some((e=>R(t,e)))))}(t,e.ignoreErrors))return!0;if(function(t,e){if(!e||!e.length)return!1;var n=ge(t);return!!n&&e.some((t=>R(n,t)))}(t,e.denyUrls))return!0;if(!function(t,e){if(!e||!e.length)return!0;var n=ge(t);return!n||e.some((t=>R(n,t)))}(t,e.allowUrls))return!0;return!1}(t,o)?null:t}}return t};n.id=this.name,t(n)}}function ge(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch(t){}return e?function(t=[]){for(let n=t.length-1;n>=0;n--){var e=t[n];if(e&&"<anonymous>"!==e.filename&&"[native code]"!==e.filename)return e.filename||null}return null}(e):null}catch(t){return null}}ye.__initStatic();var _e=Object.freeze({__proto__:null,FunctionToString:pe,InboundFilters:ye});function be(t,e){var n=xe(t,e),r={type:e&&e.name,value:Ee(e)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function we(t,e){return{exception:{values:[be(t,e)]}}}function xe(t,e){var n=e.stacktrace||e.stack||"",r=function(t){if(t){if("number"==typeof t.framesToPop)return t.framesToPop;if(Se.test(t.message))return 1}return 0}(e);try{return t(n,r)}catch(t){}return[]}var Se=/Minified React error #\d+;/i;function Ee(t){var e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function $e(t,e,n,r,i){let c;if(a(e)&&e.error)return we(t,e.error);if(u(e)||o(e,"DOMException")){var h=e;if("stack"in e)c=we(t,e);else{var d=h.name||(u(h)?"DOMError":"DOMException"),v=h.message?`${d}: ${h.message}`:d;c=Te(t,v,n,r),ht(c,v)}return"code"in h&&(c.tags={...c.tags,"DOMException.code":`${h.code}`}),c}return s(e)?we(t,e):f(e)||l(e)?(c=function(t,e,n,r){var i={exception:{values:[{type:l(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:`Non-Error ${r?"promise rejection":"exception"} captured with keys: ${q(e)}`}]},extra:{__serialized__:vt(e)}};if(n){var s=xe(t,n);s.length&&(i.exception.values[0].stacktrace={frames:s})}return i}(t,e,n,i),ft(c,{synthetic:!0}),c):(c=Te(t,e,n,r),ht(c,`${e}`,void 0),ft(c,{synthetic:!0}),c)}function Te(t,e,n,r){var i={message:e};if(r&&n){var s=xe(t,n);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]})}return i}var Oe="Breadcrumbs";class ke{static __initStatic(){this.id=Oe}__init(){this.name=ke.id}constructor(t){ke.prototype.__init.call(this),this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t}}setupOnce(){this.options.console&&V("console",je),this.options.dom&&V("dom",function(t){function e(e){let n,r="object"==typeof t?t.serializeAttribute:void 0;"string"==typeof r&&(r=[r]);try{n=e.event.target?m(e.event.target,r):m(e.event,r)}catch(t){n="<unknown>"}0!==n.length&&Yt().addBreadcrumb({category:`ui.${e.name}`,message:n},{event:e.event,name:e.name,global:e.global})}return e}(this.options.dom)),this.options.xhr&&V("xhr",Re),this.options.fetch&&V("fetch",Ce),this.options.history&&V("history",De)}}function je(t){var e,n={category:"console",data:{arguments:t.args,logger:"console"},level:(e=t.level,"warn"===e?"warning":wt.includes(e)?e:"log"),message:j(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${j(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}Yt().addBreadcrumb(n,{input:t.args,level:t.level})}function Re(t){if(t.endTimestamp){if(t.xhr.__sentry_own_request__)return;const{method:e,url:n,status_code:r,body:i}=t.xhr.__sentry_xhr__||{};Yt().addBreadcrumb({category:"xhr",data:{method:e,url:n,status_code:r},type:"http"},{xhr:t.xhr,input:i})}else;}function Ce(t){t.endTimestamp&&(t.fetchData.url.match(/sentry_key/)&&"POST"===t.fetchData.method||(t.error?Yt().addBreadcrumb({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args}):Yt().addBreadcrumb({category:"fetch",data:{...t.fetchData,status_code:t.response.status},type:"http"},{input:t.args,response:t.response})))}function De(t){var e=n();let r=t.from,i=t.to;var s=at(e.location.href);let o=at(r);var a=at(i);o.path||(o=s),s.protocol===a.protocol&&s.host===a.host&&(i=a.relative),s.protocol===o.protocol&&s.host===o.host&&(r=o.relative),Yt().addBreadcrumb({category:"navigation",data:{from:r,to:i}})}ke.__initStatic();var Ie=n();let Le;function Me(){if(Le)return Le;if(X(Ie.fetch))return Le=Ie.fetch.bind(Ie);var t=Ie.document;let e=Ie.fetch;if(t&&"function"==typeof t.createElement)try{var n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);var r=n.contentWindow;r&&r.fetch&&(e=r.fetch),t.head.removeChild(n)}catch(t){}return Le=e.bind(Ie)}var Ae=n();class Ne extends fe{constructor(t){t.ot=t.ot||{},t.ot.sdk=t.ot.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:de}],version:de},super(t),t.sendClientReports&&Ae.document&&Ae.document.addEventListener("visibilitychange",(()=>{"hidden"===Ae.document.visibilityState&&this.yt()}))}eventFromException(t,e){return function(t,e,n,r){var i=$e(t,e,n&&n.syntheticException||void 0,r);return ft(i),i.level="error",n&&n.event_id&&(i.event_id=n.event_id),yt(i)}(this.Z.stackParser,t,e,this.Z.attachStacktrace)}eventFromMessage(t,e="info",n){return function(t,e,n="info",r,i){var s=Te(t,e,r&&r.syntheticException||void 0,i);return s.level=n,r&&r.event_id&&(s.event_id=r.event_id),yt(s)}(this.Z.stackParser,t,e,n,this.Z.attachStacktrace)}sendEvent(t,e){var n=this.getIntegrationById(Oe);n&&n.options&&n.options.sentry&&Yt().addBreadcrumb({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:ct(t)},{event:t}),super.sendEvent(t,e)}ct(t,e,n){return t.platform=t.platform||"javascript",super.ct(t,e,n)}yt(){var t=this.vt();if(0!==t.length&&this.tt){var e,n,r,i=ie(this.tt,this.Z.tunnel),s=(e=t,Rt((n=this.Z.tunnel&&b(this.tt))?{dsn:n}:{},[[{type:"client_report"},{timestamp:r||$t(),discarded_events:e}]]));try{!function(t,e){"[object Navigator]"===Object.prototype.toString.call(Ie&&Ie.navigator)&&"function"==typeof Ie.navigator.sendBeacon?Ie.navigator.sendBeacon.bind(Ie.navigator)(t,e):z()&&Me()(t,{body:e,method:"POST",credentials:"omit",keepalive:!0}).then(null,(t=>T.error(t)))}(i,Lt(s))}catch(t){}}}}function qe(t,e=Me()){return le(t,(function(n){var r={body:n.body,method:"POST",referrerPolicy:"origin",headers:t.headers,...t.fetchOptions};return e(t.url,r).then((t=>({statusCode:t.status,headers:{"x-sentry-rate-limits":t.headers.get("X-Sentry-Rate-Limits"),"retry-after":t.headers.get("Retry-After")}})))}))}function Ue(t){return le(t,(function(e){return new _t(((n,r)=>{var i=new XMLHttpRequest;for(var s in i.onerror=r,i.onreadystatechange=()=>{4===i.readyState&&n({statusCode:i.status,headers:{"x-sentry-rate-limits":i.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":i.getResponseHeader("Retry-After")}})},i.open("POST",t.url),t.headers)Object.prototype.hasOwnProperty.call(t.headers,s)&&i.setRequestHeader(s,t.headers[s]);i.send(e.body)}))}))}var Fe="?";function Pe(t,e,n,r){var i={filename:t,function:e,in_app:!0};return void 0!==n&&(i.lineno=n),void 0!==r&&(i.colno=r),i}var Be=/^\s*at (?:(.*?) ?\((?:address at )?)?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,He=/\((\S*)(?::(\d+))(?::(\d+))\)/,ze=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Xe=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,We=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Je=P(...[[30,t=>{var e=Be.exec(t);if(e){if(e[2]&&0===e[2].indexOf("eval")){var n=He.exec(e[2]);n&&(e[2]=n[1],e[3]=n[2],e[4]=n[3])}const[t,r]=Ge(e[1]||Fe,e[2]);return Pe(r,t,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}}],[50,t=>{var e=ze.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){var n=Xe.exec(e[3]);n&&(e[1]=e[1]||"eval",e[3]=n[1],e[4]=n[2],e[5]="")}let t=e[3],r=e[1]||Fe;return[r,t]=Ge(r,t),Pe(t,r,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}}],[40,t=>{var e=We.exec(t);return e?Pe(e[2],e[1]||Fe,+e[3],e[4]?+e[4]:void 0):void 0}]]),Ge=(t,e)=>{var n=-1!==t.indexOf("safari-extension"),r=-1!==t.indexOf("safari-web-extension");return n||r?[-1!==t.indexOf("@")?t.split("@")[0]:Fe,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]};let Ke=0;function Ve(){return Ke>0}function Qe(){Ke+=1,setTimeout((()=>{Ke-=1}))}function Ye(t,e={},n){if("function"!=typeof t)return t;try{var r=t.__sentry_wrapped__;if(r)return r;if(L(t))return t}catch(e){return t}var sentryWrapped=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var i=r.map((t=>Ye(t,e)));return t.apply(this,i)}catch(t){throw Qe(),ee((n=>{n.addEventProcessor((t=>(e.mechanism&&(ht(t,void 0,void 0),ft(t,e.mechanism)),t.extra={...t.extra,arguments:r},t))),captureException(t)})),t}};try{for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(sentryWrapped[i]=t[i])}catch(t){}I(sentryWrapped,t),D(t,"__sentry_wrapped__",sentryWrapped);try{Object.getOwnPropertyDescriptor(sentryWrapped,"name").configurable&&Object.defineProperty(sentryWrapped,"name",{get:()=>t.name})}catch(t){}return sentryWrapped}class Ze{static __initStatic(){this.id="GlobalHandlers"}__init(){this.name=Ze.id}__init2(){this.gt={onerror:tn,onunhandledrejection:en}}constructor(t){Ze.prototype.__init.call(this),Ze.prototype.__init2.call(this),this.Z={onerror:!0,onunhandledrejection:!0,...t}}setupOnce(){Error.stackTraceLimit=50;var t=this.Z;for(var e in t){var n=this.gt[e];n&&t[e]&&(n(),this.gt[e]=void 0)}}}function tn(){V("error",(t=>{const[e,n,r]=sn();if(!e.getIntegration(Ze))return;const{msg:i,url:s,line:o,column:u,error:h}=t;if(!(Ve()||h&&h.__sentry_own_request__)){var f=void 0===h&&c(i)?function(t,e,n,r){var i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let s=a(t)?t.message:t,o="Error";var u=s.match(i);u&&(o=u[1],s=u[2]);return nn({exception:{values:[{type:o,value:s}]}},e,n,r)}(i,s,o,u):nn($e(n,h||i,void 0,r,!1),s,o,u);f.level="error",rn(e,h,f,"onerror")}}))}function en(){V("unhandledrejection",(t=>{const[e,n,r]=sn();if(!e.getIntegration(Ze))return;let i=t;try{"reason"in t?i=t.reason:"detail"in t&&"reason"in t.detail&&(i=t.detail.reason)}catch(t){}if(Ve()||i&&i.__sentry_own_request__)return!0;var s=h(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:$e(n,i,void 0,r,!0);s.level="error",rn(e,i,s,"onunhandledrejection")}))}function nn(t,e,r,i){var s=t.exception=t.exception||{},o=s.values=s.values||[],a=o[0]=o[0]||{},u=a.stacktrace=a.stacktrace||{},h=u.frames=u.frames||[],f=isNaN(parseInt(i,10))?void 0:i,l=isNaN(parseInt(r,10))?void 0:r,d=c(e)&&e.length>0?e:function(){var t=n();try{return t.document.location.href}catch(t){return""}}();return 0===h.length&&h.push({colno:f,filename:d,function:"?",in_app:!0,lineno:l}),t}function rn(t,e,n,r){ft(n,{handled:!1,type:r}),t.captureEvent(n,{originalException:e})}function sn(){var t=Yt(),e=t.getClient(),n=e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[t,n.stackParser,n.attachStacktrace]}Ze.__initStatic();var on=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class an{static __initStatic(){this.id="TryCatch"}__init(){this.name=an.id}constructor(t){an.prototype.__init.call(this),this.Z={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t}}setupOnce(){var t=n();this.Z.setTimeout&&C(t,"setTimeout",un),this.Z.setInterval&&C(t,"setInterval",un),this.Z.requestAnimationFrame&&C(t,"requestAnimationFrame",cn),this.Z.XMLHttpRequest&&"XMLHttpRequest"in t&&C(XMLHttpRequest.prototype,"send",hn);var e=this.Z.eventTarget;e&&(Array.isArray(e)?e:on).forEach(fn)}}function un(t){return function(...e){var n=e[0];return e[0]=Ye(n,{mechanism:{data:{function:H(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}}function cn(t){return function(e){return t.apply(this,[Ye(e,{mechanism:{data:{function:"requestAnimationFrame",handler:H(t)},handled:!0,type:"instrument"}})])}}function hn(t){return function(...e){var n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((t=>{t in n&&"function"==typeof n[t]&&C(n,t,(function(e){var n={mechanism:{data:{function:t,handler:H(e)},handled:!0,type:"instrument"}},r=L(e);return r&&(n.mechanism.data.handler=H(r)),Ye(e,n)}))})),t.apply(this,e)}}function fn(t){var e=n(),r=e[t]&&e[t].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(C(r,"addEventListener",(function(e){return function(n,r,i){try{"function"==typeof r.handleEvent&&(r.handleEvent=Ye(r.handleEvent,{mechanism:{data:{function:"handleEvent",handler:H(r),target:t},handled:!0,type:"instrument"}}))}catch(t){}return e.apply(this,[n,Ye(r,{mechanism:{data:{function:"addEventListener",handler:H(r),target:t},handled:!0,type:"instrument"}}),i])}})),C(r,"removeEventListener",(function(t){return function(e,n,r){var i=n;try{var s=i&&i.__sentry_wrapped__;s&&t.call(this,e,s,r)}catch(t){}return t.call(this,e,i,r)}})))}an.__initStatic();class ln{static __initStatic(){this.id="LinkedErrors"}__init(){this.name=ln.id}constructor(t={}){ln.prototype.__init.call(this),this._t=t.key||"cause",this.bt=t.limit||5}setupOnce(){var t=Yt().getClient();t&&Jt(((e,n)=>{var r=Yt().getIntegration(ln);return r?function(t,e,n,r,i){if(!(r.exception&&r.exception.values&&i&&p(i.originalException,Error)))return r;var s=dn(t,n,i.originalException,e);return r.exception.values=[...s,...r.exception.values],r}(t.getOptions().stackParser,r._t,r.bt,e,n):e}))}}function dn(t,e,n,r,i=[]){if(!p(n[r],Error)||i.length+1>=e)return i;var s=be(t,n[r]);return dn(t,e,n[r],r,[s,...i])}ln.__initStatic();var vn=n();class pn{constructor(){pn.prototype.__init.call(this)}static __initStatic(){this.id="HttpContext"}__init(){this.name=pn.id}setupOnce(){Jt((t=>{if(Yt().getIntegration(pn)){if(!vn.navigator&&!vn.location&&!vn.document)return t;var e=t.request&&t.request.url||vn.location&&vn.location.href;const{referrer:r}=vn.document||{},{userAgent:i}=vn.navigator||{};var n={...e&&{url:e},headers:{...t.request&&t.request.headers,...r&&{Referer:r},...i&&{"User-Agent":i}}};return{...t,request:n}}return t}))}}pn.__initStatic();class mn{constructor(){mn.prototype.__init.call(this)}static __initStatic(){this.id="Dedupe"}__init(){this.name=mn.id}setupOnce(t,e){var n=t=>{var n=e().getIntegration(mn);if(n){try{if(function(t,e){if(!e)return!1;if(function(t,e){var n=t.message,r=e.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!gn(t,e))return!1;if(!yn(t,e))return!1;return!0}(t,e))return!0;if(function(t,e){var n=_n(e),r=_n(t);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!gn(t,e))return!1;if(!yn(t,e))return!1;return!0}(t,e))return!0;return!1}(t,n.wt))return null}catch(e){return n.wt=t}return n.wt=t}return t};n.id=this.name,t(n)}}function yn(t,e){let n=bn(t),r=bn(e);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(n=n,r=r,r.length!==n.length)return!1;for(let t=0;t<r.length;t++){var i=r[t],s=n[t];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0}function gn(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return!(n.join("")!==r.join(""))}catch(t){return!1}}function _n(t){return t.exception&&t.exception.values&&t.exception.values[0]}function bn(t){var e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch(t){return}}mn.__initStatic();var wn=Object.freeze({__proto__:null,GlobalHandlers:Ze,TryCatch:an,Breadcrumbs:ke,LinkedErrors:ln,HttpContext:pn,Dedupe:mn}),xn=[new ye,new pe,new an,new ke,new Ze,new ln,new mn,new pn];function Sn(t){t.startSession({ignoreDuration:!0}),t.captureSession()}let En={};var $n=n();$n.Sentry&&$n.Sentry.Integrations&&(En=$n.Sentry.Integrations);var Tn={...En,..._e,...wn};function On(t){const e=Yt().getClient(),n=t||e&&e.getOptions();return!!n&&("tracesSampleRate"in n||"tracesSampler"in n)}function kn(t){const e=(t||Yt()).getScope();return e&&e.getTransaction()}function jn(t){return t/1e3}function Rn(){const t=kn();if(t){const e="internal_error";t.setStatus(e)}}function Cn(t,e){return null!=t?t:e()}class Dn{__init(){this.spans=[]}constructor(t=1e3){Dn.prototype.__init.call(this),this.xt=t}add(t){this.spans.length>this.xt?t.spanRecorder=void 0:this.spans.push(t)}}class In{__init2(){this.traceId=ot()}__init3(){this.spanId=ot().substring(16)}__init4(){this.startTimestamp=Ot()}__init5(){this.tags={}}__init6(){this.data={}}constructor(t){if(In.prototype.__init2.call(this),In.prototype.__init3.call(this),In.prototype.__init4.call(this),In.prototype.__init5.call(this),In.prototype.__init6.call(this),!t)return this;t.traceId&&(this.traceId=t.traceId),t.spanId&&(this.spanId=t.spanId),t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.data&&(this.data=t.data),t.tags&&(this.tags=t.tags),t.status&&(this.status=t.status),t.startTimestamp&&(this.startTimestamp=t.startTimestamp),t.endTimestamp&&(this.endTimestamp=t.endTimestamp)}startChild(t){const e=new In({...t,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});return e.spanRecorder=this.spanRecorder,e.spanRecorder&&e.spanRecorder.add(e),e.transaction=this.transaction,e}setTag(t,e){return this.tags={...this.tags,[t]:e},this}setData(t,e){return this.data={...this.data,[t]:e},this}setStatus(t){return this.status=t,this}setHttpStatus(t){this.setTag("http.status_code",String(t));const e=function(t){if(t<400&&t>=100)return"ok";if(t>=400&&t<500)switch(t){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(t>=500&&t<600)switch(t){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}(t);return"unknown_error"!==e&&this.setStatus(e),this}isSuccess(){return"ok"===this.status}finish(t){this.endTimestamp="number"==typeof t?t:Ot()}toTraceparent(){let t="";return void 0!==this.sampled&&(t=this.sampled?"-1":"-0"),`${this.traceId}-${this.spanId}${t}`}toContext(){return U({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(t){return this.data=Cn(t.data,(()=>({}))),this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=Cn(t.spanId,(()=>this.spanId)),this.startTimestamp=Cn(t.startTimestamp,(()=>this.startTimestamp)),this.status=t.status,this.tags=Cn(t.tags,(()=>({}))),this.traceId=Cn(t.traceId,(()=>this.traceId)),this}getTraceContext(){return U({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})}getBaggage(){return this.transaction&&this.transaction.metadata.baggage}toJSON(){return U({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})}}class Ln extends In{__init(){this.St={}}constructor(t,e){super(t),Ln.prototype.__init.call(this),this.Et=e||Yt(),this.name=t.name||"",this.metadata=t.metadata||{},this.$t=t.trimEnd,this.transaction=this}setName(t){this.name=t}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new Dn(t)),this.spanRecorder.add(this)}setMeasurement(t,e,n=""){this.St[t]={value:e,unit:n}}setMetadata(t){this.metadata={...this.metadata,...t}}finish(t){if(void 0!==this.endTimestamp)return;if(this.name||(this.name="<unlabeled transaction>"),super.finish(t),!0!==this.sampled){const t=this.Et.getClient();return void(t&&t.recordDroppedEvent("sample_rate","transaction"))}const e=this.spanRecorder?this.spanRecorder.spans.filter((t=>t!==this&&t.endTimestamp)):[];this.$t&&e.length>0&&(this.endTimestamp=e.reduce(((t,e)=>t.endTimestamp&&e.endTimestamp?t.endTimestamp>e.endTimestamp?t:e:t)).endTimestamp);const n={contexts:{trace:this.getTraceContext()},spans:e,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:this.metadata};return Object.keys(this.St).length>0&&(n.measurements=this.St),this.Et.captureEvent(n)}toContext(){return U({...super.toContext(),name:this.name,trimEnd:this.$t})}updateWithContext(t){var e,n;return super.updateWithContext(t),this.name=(e=t.name,n=()=>"",null!=e?e:n()),this.$t=t.trimEnd,this}}class Mn extends Dn{constructor(t,e,n,r){super(r),this.Tt=t,this.Ot=e,this.transactionSpanId=n}add(t){t.spanId!==this.transactionSpanId&&(t.finish=e=>{t.endTimestamp="number"==typeof e?e:Ot(),this.Ot(t.spanId)},void 0===t.endTimestamp&&this.Tt(t.spanId)),super.add(t)}}class An extends Ln{__init(){this.activities={}}__init2(){this.kt=0}__init3(){this.jt=!1}__init4(){this.Rt=[]}constructor(t,e,n=1e3,r=3e4,i=!1){super(t,e),this.Ct=e,this.Dt=n,this.It=r,this.Lt=i,An.prototype.__init.call(this),An.prototype.__init2.call(this),An.prototype.__init3.call(this),An.prototype.__init4.call(this),i&&(Nn(e),e.configureScope((t=>t.setSpan(this)))),this.Mt(),setTimeout((()=>{this.jt||(this.setStatus("deadline_exceeded"),this.finish())}),this.It)}finish(t=Ot()){if(this.jt=!0,this.activities={},this.spanRecorder){for(const e of this.Rt)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter((e=>{if(e.spanId===this.spanId)return!0;e.endTimestamp||(e.endTimestamp=t,e.setStatus("cancelled"));return e.startTimestamp<t}))}return this.Lt&&Nn(this.Ct),super.finish(t)}registerBeforeFinishCallback(t){this.Rt.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const e=t=>{this.jt||this.Tt(t)},n=t=>{this.jt||this.Ot(t)};this.spanRecorder=new Mn(e,n,this.spanId,t),this.At()}this.spanRecorder.add(this)}Nt(){this.qt&&(clearTimeout(this.qt),this.qt=void 0)}Mt(t){this.Nt(),this.qt=setTimeout((()=>{this.jt||0!==Object.keys(this.activities).length||this.finish(t)}),this.Dt)}Tt(t){this.Nt(),this.activities[t]=!0}Ot(t){if(this.activities[t]&&delete this.activities[t],0===Object.keys(this.activities).length){const t=Ot()+this.Dt/1e3;this.Mt(t)}}Ut(){if(this.jt)return;const t=Object.keys(this.activities).join("");t===this.Ft?this.kt+=1:this.kt=1,this.Ft=t,this.kt>=3?(this.setStatus("deadline_exceeded"),this.finish()):this.At()}At(){setTimeout((()=>{this.Ut()}),5e3)}}function Nn(t){const e=t.getScope();if(e){e.getTransaction()&&e.setSpan(void 0)}}function qn(){const t=this.getScope();if(t){const e=t.getSpan();if(e)return{"sentry-trace":e.toTraceparent()}}return{}}function Un(t,e,n){if(!On(e))return t.sampled=!1,t;if(void 0!==t.sampled)return t.setMetadata({transactionSampling:{method:"explicitly_set"}}),t;let r;return"function"==typeof e.tracesSampler?(r=e.tracesSampler(n),t.setMetadata({transactionSampling:{method:"client_sampler",rate:Number(r)}})):void 0!==n.parentSampled?(r=n.parentSampled,t.setMetadata({transactionSampling:{method:"inheritance"}})):(r=e.tracesSampleRate,t.setMetadata({transactionSampling:{method:"client_rate",rate:Number(r)}})),function(t){if(v(t)||"number"!=typeof t&&"boolean"!=typeof t)return!1;if(t<0||t>1)return!1;return!0}(r)&&r?(t.sampled=Math.random()<r,t.sampled,t):(t.sampled=!1,t)}function Fn(t,e){const n=this.getClient(),r=n&&n.getOptions()||{};let i=new Ln(t,this);return i=Un(i,r,{parentSampled:t.parentSampled,transactionContext:t,...e}),i.sampled&&i.initSpanRecorder(r._experiments&&r._experiments.maxSpans),i}function Pn(){!function(){const t=Vt();t.__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=Fn),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=qn))}(),V("error",Rn),V("unhandledrejection",Rn)}const Bn=n();const Hn=(t,e,n)=>{let r;return i=>{e.value>=0&&(i||n)&&(e.delta=e.value-(r||0),(e.delta||void 0===r)&&(r=e.value,t(e)))}};const zn=(t,e)=>{return{name:t,value:(n=e,r=()=>-1,null!=n?n:r()),delta:0,entries:[],id:`v2-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`};var n,r},Xn=(t,e)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){if("first-input"===t&&!("PerformanceEventTiming"in self))return;const n=new PerformanceObserver((t=>t.getEntries().map(e)));return n.observe({type:t,buffered:!0}),n}}catch(t){}},Wn=(t,e)=>{const r=i=>{"pagehide"!==i.type&&"hidden"!==n().document.visibilityState||(t(i),e&&(removeEventListener("visibilitychange",r,!0),removeEventListener("pagehide",r,!0)))};addEventListener("visibilitychange",r,!0),addEventListener("pagehide",r,!0)};let Jn=-1;const Gn=()=>(Jn<0&&(Jn="hidden"===n().document.visibilityState?0:1/0,Wn((({timeStamp:t})=>{Jn=t}),!0)),{get firstHiddenTime(){return Jn}}),Kn={};function Vn(t){return"number"==typeof t&&isFinite(t)}function Qn(t,{startTimestamp:e,...n}){return e&&t.startTimestamp>e&&(t.startTimestamp=e),t.startChild({startTimestamp:e,...n})}const Yn=n();function Zn(){return Yn&&Yn.document&&Yn.performance}let tr,er,nr=0,rr={};function ir(t=!1){const e=Zn();e&&kt&&(e.mark&&Yn.performance.mark("sentry-tracing-init"),((t,e)=>{const n=zn("CLS",0);let r,i=0,s=[];const o=t=>{if(t&&!t.hadRecentInput){const e=s[0],o=s[s.length-1];i&&0!==s.length&&t.startTime-o.startTime<1e3&&t.startTime-e.startTime<5e3?(i+=t.value,s.push(t)):(i=t.value,s=[t]),i>n.value&&(n.value=i,n.entries=s,r&&r())}},a=Xn("layout-shift",o);a&&(r=Hn(t,n,e),Wn((()=>{a.takeRecords().map(o),r(!0)})))})((t=>{const e=t.entries.pop();e&&(rr.cls={value:t.value,unit:"millisecond"},er=e)})),function(t){((t,e)=>{const n=Gn(),r=zn("LCP");let i;const s=t=>{const e=t.startTime;e<n.firstHiddenTime&&(r.value=e,r.entries.push(t)),i&&i()},o=Xn("largest-contentful-paint",s);if(o){i=Hn(t,r,e);const n=()=>{Kn[r.id]||(o.takeRecords().map(s),o.disconnect(),Kn[r.id]=!0,i(!0))};["keydown","click"].forEach((t=>{addEventListener(t,n,{once:!0,capture:!0})})),Wn(n,!0)}})((t=>{const e=t.entries.pop();if(!e)return;const n=jn(kt),r=jn(e.startTime);rr.lcp={value:t.value,unit:"millisecond"},rr["mark.lcp"]={value:n+r,unit:"second"},tr=e}),t)}(t),((t,e)=>{const n=Gn(),r=zn("FID");let i;const s=t=>{i&&t.startTime<n.firstHiddenTime&&(r.value=t.processingStart-t.startTime,r.entries.push(t),i(!0))},o=Xn("first-input",s);o&&(i=Hn(t,r,e),Wn((()=>{o.takeRecords().map(s),o.disconnect()}),!0))})((t=>{const e=t.entries.pop();if(!e)return;const n=jn(kt),r=jn(e.startTime);rr.fid={value:t.value,unit:"millisecond"},rr["mark.fid"]={value:n+r,unit:"second"}})))}function sr(t){const e=Zn();if(!e||!Yn.performance.getEntries||!kt)return;const n=jn(kt),r=e.getEntries();let i,s;r.slice(nr).forEach((e=>{const r=jn(e.startTime),o=jn(e.duration);if(!("navigation"===t.op&&n+r<t.startTimestamp))switch(e.entryType){case"navigation":!function(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{or(t,e,r,n)})),or(t,e,"secureConnection",n,"TLS/SSL","connectEnd"),or(t,e,"fetch",n,"cache","domainLookupStart"),or(t,e,"domainLookup",n,"DNS"),function(t,e,n){Qn(t,{op:"browser",description:"request",startTimestamp:n+jn(e.requestStart),endTimestamp:n+jn(e.responseEnd)}),Qn(t,{op:"browser",description:"response",startTimestamp:n+jn(e.responseStart),endTimestamp:n+jn(e.responseEnd)})}(t,e,n)}(t,e,n),i=n+jn(e.responseStart),s=n+jn(e.requestStart);break;case"mark":case"paint":case"measure":{const i=function(t,e,n,r,i){const s=i+n,o=s+r;return Qn(t,{description:e.name,endTimestamp:o,op:e.entryType,startTimestamp:s}),s}(t,e,r,o,n),s=Gn(),a=e.startTime<s.firstHiddenTime;"first-paint"===e.name&&a&&(rr.fp={value:e.startTime,unit:"millisecond"},rr["mark.fp"]={value:i,unit:"second"}),"first-contentful-paint"===e.name&&a&&(rr.fcp={value:e.startTime,unit:"millisecond"},rr["mark.fcp"]={value:i,unit:"second"});break}case"resource":{const i=e.name.replace(Yn.location.origin,"");!function(t,e,n,r,i,s){if("xmlhttprequest"===e.initiatorType||"fetch"===e.initiatorType)return;const o={};"transferSize"in e&&(o["Transfer Size"]=e.transferSize);"encodedBodySize"in e&&(o["Encoded Body Size"]=e.encodedBodySize);"decodedBodySize"in e&&(o["Decoded Body Size"]=e.decodedBodySize);const a=s+r;Qn(t,{description:n,endTimestamp:a+i,op:e.initiatorType?`resource.${e.initiatorType}`:"resource",startTimestamp:a,data:o})}(t,e,i,r,o,n);break}}})),nr=Math.max(r.length-1,0),function(t){const e=Yn.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setTag("effectiveConnectionType",n.effectiveType),n.type&&t.setTag("connectionType",n.type),Vn(n.rtt)&&(rr["connection.rtt"]={value:n.rtt,unit:"millisecond"}),Vn(n.downlink)&&(rr["connection.downlink"]={value:n.downlink,unit:""}));Vn(e.deviceMemory)&&t.setTag("deviceMemory",`${e.deviceMemory} GB`);Vn(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}(t),"pageload"===t.op&&("number"==typeof i&&(rr.ttfb={value:1e3*(i-t.startTimestamp),unit:"millisecond"},"number"==typeof s&&s<=i&&(rr["ttfb.requestTime"]={value:1e3*(i-s),unit:"second"})),["fcp","fp","lcp"].forEach((e=>{if(!rr[e]||n>=t.startTimestamp)return;const r=rr[e].value,i=n+jn(r),s=Math.abs(1e3*(i-t.startTimestamp));rr[e].value=s})),rr["mark.fid"]&&rr.fid&&Qn(t,{description:"first input delay",endTimestamp:rr["mark.fid"].value+jn(rr.fid.value),op:"web.vitals",startTimestamp:rr["mark.fid"].value}),"fcp"in rr||delete rr.cls,Object.keys(rr).forEach((e=>{t.setMeasurement(e,rr[e].value,rr[e].unit)})),function(t){tr&&(tr.element&&t.setTag("lcp.element",m(tr.element)),tr.id&&t.setTag("lcp.id",tr.id),tr.url&&t.setTag("lcp.url",tr.url.trim().slice(0,200)),t.setTag("lcp.size",tr.size));er&&er.sources&&er.sources.forEach(((e,n)=>t.setTag(`cls.source.${n+1}`,m(e.node))))}(t)),tr=void 0,er=void 0,rr={}}function or(t,e,n,r,i,s){const o=s?e[s]:e[`${n}End`],a=e[`${n}Start`];var u,c;a&&o&&Qn(t,{op:"browser",description:(u=i,c=()=>n,null!=u?u:c()),startTimestamp:r+jn(a),endTimestamp:r+jn(o)})}const ar={traceFetch:!0,traceXHR:!0,tracingOrigins:["localhost",/^\//]};function ur(t){const{traceFetch:e,traceXHR:n,tracingOrigins:r,shouldCreateSpanForRequest:i}={...ar,...t},s={},o=t=>{if(s[t])return s[t];const e=r;return s[t]=e.some((e=>R(t,e)))&&!R(t,"sentry_key"),s[t]};let a=o;"function"==typeof i&&(a=t=>o(t)&&i(t));const u={};e&&V("fetch",(t=>{!function(t,e,n){if(!On()||!t.fetchData||!e(t.fetchData.url))return;if(t.endTimestamp){const e=t.fetchData.__span;if(!e)return;const r=n[e];return void(r&&(t.response?r.setHttpStatus(t.response.status):t.error&&r.setStatus("internal_error"),r.finish(),delete n[e]))}const r=kn();if(r){const e=r.startChild({data:{...t.fetchData,type:"fetch"},description:`${t.fetchData.method} ${t.fetchData.url}`,op:"http.client"});t.fetchData.__span=e.spanId,n[e.spanId]=e;const i=t.args[0]=t.args[0],s=t.args[1]=t.args[1]||{};s.headers=function(t,e,n){let r=n.headers;p(t,Request)&&(r=t.headers);const i=e.getBaggage();if(r)if("function"==typeof r.append)r.append("sentry-trace",e.toTraceparent()),r.append(Ut,Bt(i,r.get(Ut)));else if(Array.isArray(r)){const[,t]=r.find((([t,e])=>t===Ut));r=[...r,["sentry-trace",e.toTraceparent()],[Ut,Bt(i,t)]]}else r={...r,"sentry-trace":e.toTraceparent(),baggage:Bt(i,r.baggage)};else r={"sentry-trace":e.toTraceparent(),baggage:Bt(i)};return r}(i,e,s)}}(t,a,u)})),n&&V("xhr",(t=>{!function(t,e,n){if(!On()||t.xhr&&t.xhr.__sentry_own_request__||!(t.xhr&&t.xhr.__sentry_xhr__&&e(t.xhr.__sentry_xhr__.url)))return;const r=t.xhr.__sentry_xhr__;if(t.endTimestamp){const e=t.xhr.__sentry_xhr_span_id__;if(!e)return;const i=n[e];return void(i&&(i.setHttpStatus(r.status_code),i.finish(),delete n[e]))}const i=kn();if(i){const e=i.startChild({data:{...r.data,type:"xhr",method:r.method,url:r.url},description:`${r.method} ${r.url}`,op:"http.client"});if(t.xhr.__sentry_xhr_span_id__=e.spanId,n[t.xhr.__sentry_xhr_span_id__]=e,t.xhr.setRequestHeader)try{t.xhr.setRequestHeader("sentry-trace",e.toTraceparent());const n=t.xhr.getRequestHeader&&t.xhr.getRequestHeader(Ut);t.xhr.setRequestHeader(Ut,Bt(e.getBaggage(),n))}catch(t){}}}(t,a,u)}))}const cr=n();const hr={idleTimeout:1e3,finalTimeout:3e4,markBackgroundTransactions:!0,routingInstrumentation:function(t,e=!0,n=!0){if(!cr||!cr.location)return;let r,i=cr.location.href;e&&(r=t({name:cr.location.pathname,op:"pageload"})),n&&V("history",(({to:e,from:n})=>{void 0===n&&i&&-1!==i.indexOf(e)?i=void 0:n!==e&&(i=void 0,r&&r.finish(),r=t({name:cr.location.pathname,op:"navigation"}))}))},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,...ar};class fr{__init(){this.name="BrowserTracing"}constructor(t){fr.prototype.__init.call(this);let e=ar.tracingOrigins;t&&t.tracingOrigins&&Array.isArray(t.tracingOrigins)&&0!==t.tracingOrigins.length&&(e=t.tracingOrigins),this.options={...hr,...t,tracingOrigins:e};const{Pt:n}=this.options;ir(n&&n.Bt)}setupOnce(t,e){this.Ht=e,this.zt;const{routingInstrumentation:n,startTransactionOnLocationChange:r,startTransactionOnPageLoad:i,markBackgroundTransactions:s,traceFetch:o,traceXHR:a,tracingOrigins:u,shouldCreateSpanForRequest:c}=this.options;n((t=>this.Xt(t)),i,r),s&&Bn&&Bn.document&&Bn.document.addEventListener("visibilitychange",(()=>{const t=kn();if(Bn.document.hidden&&t){const e="cancelled";t.status||t.setStatus(e),t.setTag("visibilitychange","document.hidden"),t.finish()}})),ur({traceFetch:o,traceXHR:a,tracingOrigins:u,shouldCreateSpanForRequest:c})}Xt(t){if(!this.Ht)return;const{beforeNavigate:e,idleTimeout:r,finalTimeout:i}=this.options,s="pageload"===t.op?function(){const t=lr("sentry-trace"),e=lr("baggage"),n=t?function(t){var e=t.match(jt);if(e){let t;return"1"===e[3]?t=!0:"0"===e[3]&&(t=!1),{traceId:e[1],parentSampled:t,parentSpanId:e[2]}}}(t):void 0,r=e?Pt(e):void 0;if(n||r)return{...n&&n,...r&&{metadata:{baggage:r}}};return}():void 0,o={...t,...s,trimEnd:!0},a="function"==typeof e?e(o):o,u=void 0===a?{...o,sampled:!1}:a;u.sampled;const c=this.Ht(),{location:h}=n(),f=function(t,e,n,r,i,s){const o=t.getClient(),a=o&&o.getOptions()||{};let u=new An(e,t,n,r,i);return u=Un(u,a,{parentSampled:e.parentSampled,transactionContext:e,...s}),u.sampled&&u.initSpanRecorder(a._experiments&&a._experiments.maxSpans),u}(c,u,r,i,!0,{location:h});return f.registerBeforeFinishCallback((t=>{sr(t),t.setTag("sentry_reportAllChanges",Boolean(this.options.Pt&&this.options.Pt.Bt))})),f}}function lr(t){const e=n();if(e.document&&e.document.querySelector){const n=e.document.querySelector(`meta[name=${t}]`);return n?n.getAttribute("content"):null}return null}let dr={};const vr=n();vr.Sentry&&vr.Sentry.Integrations&&(dr=vr.Sentry.Integrations);const pr={...dr,...Tn,BrowserTracing:fr};return Pn(),t.BrowserClient=Ne,t.BrowserTracing=fr,t.Hub=Kt,t.Integrations=pr,t.SDK_VERSION=de,t.Scope=Xt,t.Span=In,t.addBreadcrumb=function(t){Yt().addBreadcrumb(t)},t.addExtensionMethods=Pn,t.addGlobalEventProcessor=Jt,t.captureEvent=function(t,e){return Yt().captureEvent(t,e)},t.captureException=captureException,t.captureMessage=function(t,e){var n="string"==typeof e?e:void 0,r="string"!=typeof e?{captureContext:e}:void 0;return Yt().captureMessage(t,n,r)},t.close=function(t){var e=Yt().getClient();return e?e.close(t):yt(!1)},t.configureScope=function(t){Yt().configureScope(t)},t.defaultIntegrations=xn,t.flush=function(t){var e=Yt().getClient();return e?e.flush(t):yt(!1)},t.forceLoad=function(){},t.getCurrentHub=Yt,t.getHubFromCarrier=Zt,t.init=function(t={}){if(void 0===t.defaultIntegrations&&(t.defaultIntegrations=xn),void 0===t.release){var e=n();e.SENTRY_RELEASE&&e.SENTRY_RELEASE.id&&(t.release=e.SENTRY_RELEASE.id)}void 0===t.autoSessionTracking&&(t.autoSessionTracking=!0),void 0===t.sendClientReports&&(t.sendClientReports=!0);var r,i={...t,stackParser:(r=t.stackParser||Je,Array.isArray(r)?P(...r):r),integrations:he(t),transport:t.transport||(z()?qe:Ue)};!function(t,e){!0===e.debug&&console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.");var n=Yt(),r=n.getScope();r&&r.update(e.initialScope);var i=new t(e);n.bindClient(i)}(Ne,i),t.autoSessionTracking&&function(){if(void 0===n().document)return;var t=Yt();if(!t.captureSession)return;Sn(t),V("history",(({from:t,to:e})=>{void 0!==t&&t!==e&&Sn(Yt())}))}()},t.lastEventId=function(){return Yt().lastEventId()},t.makeFetchTransport=qe,t.makeXHRTransport=Ue,t.onLoad=function(t){t()},t.setContext=function(t,e){Yt().setContext(t,e)},t.setExtra=function(t,e){Yt().setExtra(t,e)},t.setExtras=function(t){Yt().setExtras(t)},t.setTag=function(t,e){Yt().setTag(t,e)},t.setTags=function(t){Yt().setTags(t)},t.setUser=function(t){Yt().setUser(t)},t.showReportDialog=function(t={},e=Yt()){var r=n();if(!r.document)return;const{client:i,scope:s}=e.getStackTop();var o=t.dsn||i&&i.getDsn();if(o){s&&(t.user={...s.getUser(),...t.user}),t.eventId||(t.eventId=e.lastEventId());var a=r.document.createElement("script");a.async=!0,a.src=function(t,e){var n=x(t),r=`${ne(n)}embed/error-page/`;let i=`dsn=${b(n)}`;for(var s in e)if("dsn"!==s)if("user"===s){var o=e.user;if(!o)continue;o.name&&(i+=`&name=${encodeURIComponent(o.name)}`),o.email&&(i+=`&email=${encodeURIComponent(o.email)}`)}else i+=`&${encodeURIComponent(s)}=${encodeURIComponent(e[s])}`;return`${r}?${i}`}(o,t),t.onLoad&&(a.onload=t.onLoad);var u=r.document.head||r.document.body;u&&u.appendChild(a)}},t.startTransaction=function(t,e){return Yt().startTransaction({...t},e)},t.withScope=ee,t.wrap=function(t){return Ye(t)()},t}({});
    //# sourceMappingURL=bundle.tracing.min.js.map</script><style>@keyframes plyr-progress{to{background-position:25px 0;background-position:var(--plyr-progress-loading-size,25px) 0}}@keyframes plyr-popup{0%{opacity:.5;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes plyr-fade-in{from{opacity:0}to{opacity:1}}.plyr{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;align-items:center;direction:ltr;display:flex;flex-direction:column;font-family:inherit;font-family:var(--plyr-font-family,inherit);font-variant-numeric:tabular-nums;font-weight:400;font-weight:var(--plyr-font-weight-regular,400);line-height:1.7;line-height:var(--plyr-line-height,1.7);max-width:100%;min-width:200px;position:relative;text-shadow:none;transition:box-shadow .3s ease;z-index:0}.plyr audio,.plyr iframe,.plyr video{display:block;height:100%;width:100%}.plyr button{font:inherit;line-height:inherit;width:auto}.plyr:focus{outline:0}.plyr--full-ui{box-sizing:border-box}.plyr--full-ui *,.plyr--full-ui ::after,.plyr--full-ui ::before{box-sizing:inherit}.plyr--full-ui a,.plyr--full-ui button,.plyr--full-ui input,.plyr--full-ui label{touch-action:manipulation}.plyr__badge{background:#4a5464;background:var(--plyr-badge-background,#4a5464);border-radius:2px;border-radius:var(--plyr-badge-border-radius,2px);color:#fff;color:var(--plyr-badge-text-color,#fff);font-size:9px;font-size:var(--plyr-font-size-badge,9px);line-height:1;padding:3px 4px}.plyr--full-ui ::-webkit-media-text-track-container{display:none}.plyr__captions{animation:plyr-fade-in .3s ease;bottom:0;display:none;font-size:13px;font-size:var(--plyr-font-size-small,13px);left:0;padding:10px;padding:var(--plyr-control-spacing,10px);position:absolute;text-align:center;transition:transform .4s ease-in-out;width:100%}.plyr__captions span:empty{display:none}@media (min-width:480px){.plyr__captions{font-size:15px;font-size:var(--plyr-font-size-base,15px);padding:calc(10px * 2);padding:calc(var(--plyr-control-spacing,10px) * 2)}}@media (min-width:768px){.plyr__captions{font-size:18px;font-size:var(--plyr-font-size-large,18px)}}.plyr--captions-active .plyr__captions{display:block}.plyr:not(.plyr--hide-controls) .plyr__controls:not(:empty)~.plyr__captions{transform:translateY(calc(10px * -4));transform:translateY(calc(var(--plyr-control-spacing,10px) * -4))}.plyr__caption{background:rgba(0,0,0,.8);background:var(--plyr-captions-background,rgba(0,0,0,.8));border-radius:2px;-webkit-box-decoration-break:clone;box-decoration-break:clone;color:#fff;color:var(--plyr-captions-text-color,#fff);line-height:185%;padding:.2em .5em;white-space:pre-wrap}.plyr__caption div{display:inline}.plyr__control{background:0 0;border:0;border-radius:3px;border-radius:var(--plyr-control-radius,3px);color:inherit;cursor:pointer;flex-shrink:0;overflow:visible;padding:calc(10px * .7);padding:calc(var(--plyr-control-spacing,10px) * .7);position:relative;transition:all .3s ease}.plyr__control svg{display:block;fill:currentColor;height:18px;height:var(--plyr-control-icon-size,18px);pointer-events:none;width:18px;width:var(--plyr-control-icon-size,18px)}.plyr__control:focus{outline:0}.plyr__control.plyr__tab-focus{outline-color:#00b3ff;outline-color:var(--plyr-tab-focus-color,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));outline-offset:2px;outline-style:dotted;outline-width:3px}a.plyr__control{text-decoration:none}a.plyr__control::after,a.plyr__control::before{display:none}.plyr__control.plyr__control--pressed .icon--not-pressed,.plyr__control.plyr__control--pressed .label--not-pressed,.plyr__control:not(.plyr__control--pressed) .icon--pressed,.plyr__control:not(.plyr__control--pressed) .label--pressed{display:none}.plyr--full-ui ::-webkit-media-controls{display:none}.plyr__controls{align-items:center;display:flex;justify-content:flex-end;text-align:center}.plyr__controls .plyr__progress__container{flex:1;min-width:0}.plyr__controls .plyr__controls__item{margin-left:calc(10px / 4);margin-left:calc(var(--plyr-control-spacing,10px)/ 4)}.plyr__controls .plyr__controls__item:first-child{margin-left:0;margin-right:auto}.plyr__controls .plyr__controls__item.plyr__progress__container{padding-left:calc(10px / 4);padding-left:calc(var(--plyr-control-spacing,10px)/ 4)}.plyr__controls .plyr__controls__item.plyr__time{padding:0 calc(10px / 2);padding:0 calc(var(--plyr-control-spacing,10px)/ 2)}.plyr__controls .plyr__controls__item.plyr__progress__container:first-child,.plyr__controls .plyr__controls__item.plyr__time+.plyr__time,.plyr__controls .plyr__controls__item.plyr__time:first-child{padding-left:0}.plyr__controls:empty{display:none}.plyr [data-plyr=airplay],.plyr [data-plyr=captions],.plyr [data-plyr=fullscreen],.plyr [data-plyr=pip]{display:none}.plyr--airplay-supported [data-plyr=airplay],.plyr--captions-enabled [data-plyr=captions],.plyr--fullscreen-enabled [data-plyr=fullscreen],.plyr--pip-supported [data-plyr=pip]{display:inline-block}.plyr__menu{display:flex;position:relative}.plyr__menu .plyr__control svg{transition:transform .3s ease}.plyr__menu .plyr__control[aria-expanded=true] svg{transform:rotate(90deg)}.plyr__menu .plyr__control[aria-expanded=true] .plyr__tooltip{display:none}.plyr__menu__container{animation:plyr-popup .2s ease;background:rgba(255,255,255,.9);background:var(--plyr-menu-background,rgba(255,255,255,.9));border-radius:4px;bottom:100%;box-shadow:0 1px 2px rgba(0,0,0,.15);box-shadow:var(--plyr-menu-shadow,0 1px 2px rgba(0,0,0,.15));color:#4a5464;color:var(--plyr-menu-color,#4a5464);font-size:15px;font-size:var(--plyr-font-size-base,15px);margin-bottom:10px;position:absolute;right:-3px;text-align:left;white-space:nowrap;z-index:3}.plyr__menu__container>div{overflow:hidden;transition:height .35s cubic-bezier(.4,0,.2,1),width .35s cubic-bezier(.4,0,.2,1)}.plyr__menu__container::after{border:4px solid transparent;border:var(--plyr-menu-arrow-size,4px) solid transparent;border-top-color:rgba(255,255,255,.9);border-top-color:var(--plyr-menu-background,rgba(255,255,255,.9));content:'';height:0;position:absolute;right:calc(((18px / 2) + calc(10px * .7)) - (4px / 2));right:calc(((var(--plyr-control-icon-size,18px)/ 2) + calc(var(--plyr-control-spacing,10px) * .7)) - (var(--plyr-menu-arrow-size,4px)/ 2));top:100%;width:0}.plyr__menu__container [role=menu]{padding:calc(10px * .7);padding:calc(var(--plyr-control-spacing,10px) * .7)}.plyr__menu__container [role=menuitem],.plyr__menu__container [role=menuitemradio]{margin-top:2px}.plyr__menu__container [role=menuitem]:first-child,.plyr__menu__container [role=menuitemradio]:first-child{margin-top:0}.plyr__menu__container .plyr__control{align-items:center;color:#4a5464;color:var(--plyr-menu-color,#4a5464);display:flex;font-size:13px;font-size:var(--plyr-font-size-menu,var(--plyr-font-size-small,13px));padding-bottom:calc(calc(10px * .7)/ 1.5);padding-bottom:calc(calc(var(--plyr-control-spacing,10px) * .7)/ 1.5);padding-left:calc(calc(10px * .7) * 1.5);padding-left:calc(calc(var(--plyr-control-spacing,10px) * .7) * 1.5);padding-right:calc(calc(10px * .7) * 1.5);padding-right:calc(calc(var(--plyr-control-spacing,10px) * .7) * 1.5);padding-top:calc(calc(10px * .7)/ 1.5);padding-top:calc(calc(var(--plyr-control-spacing,10px) * .7)/ 1.5);-webkit-user-select:none;-ms-user-select:none;user-select:none;width:100%}.plyr__menu__container .plyr__control>span{align-items:inherit;display:flex;width:100%}.plyr__menu__container .plyr__control::after{border:4px solid transparent;border:var(--plyr-menu-item-arrow-size,4px) solid transparent;content:'';position:absolute;top:50%;transform:translateY(-50%)}.plyr__menu__container .plyr__control--forward{padding-right:calc(calc(10px * .7) * 4);padding-right:calc(calc(var(--plyr-control-spacing,10px) * .7) * 4)}.plyr__menu__container .plyr__control--forward::after{border-left-color:#728197;border-left-color:var(--plyr-menu-arrow-color,#728197);right:calc((calc(10px * .7) * 1.5) - 4px);right:calc((calc(var(--plyr-control-spacing,10px) * .7) * 1.5) - var(--plyr-menu-item-arrow-size,4px))}.plyr__menu__container .plyr__control--forward.plyr__tab-focus::after,.plyr__menu__container .plyr__control--forward:hover::after{border-left-color:currentColor}.plyr__menu__container .plyr__control--back{font-weight:400;font-weight:var(--plyr-font-weight-regular,400);margin:calc(10px * .7);margin:calc(var(--plyr-control-spacing,10px) * .7);margin-bottom:calc(calc(10px * .7)/ 2);margin-bottom:calc(calc(var(--plyr-control-spacing,10px) * .7)/ 2);padding-left:calc(calc(10px * .7) * 4);padding-left:calc(calc(var(--plyr-control-spacing,10px) * .7) * 4);position:relative;width:calc(100% - (calc(10px * .7) * 2));width:calc(100% - (calc(var(--plyr-control-spacing,10px) * .7) * 2))}.plyr__menu__container .plyr__control--back::after{border-right-color:#728197;border-right-color:var(--plyr-menu-arrow-color,#728197);left:calc((calc(10px * .7) * 1.5) - 4px);left:calc((calc(var(--plyr-control-spacing,10px) * .7) * 1.5) - var(--plyr-menu-item-arrow-size,4px))}.plyr__menu__container .plyr__control--back::before{background:#dcdfe5;background:var(--plyr-menu-back-border-color,#dcdfe5);box-shadow:0 1px 0 #fff;box-shadow:0 1px 0 var(--plyr-menu-back-border-shadow-color,#fff);content:'';height:1px;left:0;margin-top:calc(calc(10px * .7)/ 2);margin-top:calc(calc(var(--plyr-control-spacing,10px) * .7)/ 2);overflow:hidden;position:absolute;right:0;top:100%}.plyr__menu__container .plyr__control--back.plyr__tab-focus::after,.plyr__menu__container .plyr__control--back:hover::after{border-right-color:currentColor}.plyr__menu__container .plyr__control[role=menuitemradio]{padding-left:calc(10px * .7);padding-left:calc(var(--plyr-control-spacing,10px) * .7)}.plyr__menu__container .plyr__control[role=menuitemradio]::after,.plyr__menu__container .plyr__control[role=menuitemradio]::before{border-radius:100%}.plyr__menu__container .plyr__control[role=menuitemradio]::before{background:rgba(0,0,0,.1);content:'';display:block;flex-shrink:0;height:16px;margin-right:10px;margin-right:var(--plyr-control-spacing,10px);transition:all .3s ease;width:16px}.plyr__menu__container .plyr__control[role=menuitemradio]::after{background:#fff;border:0;height:6px;left:12px;opacity:0;top:50%;transform:translateY(-50%) scale(0);transition:transform .3s ease,opacity .3s ease;width:6px}.plyr__menu__container .plyr__control[role=menuitemradio][aria-checked=true]::before{background:#00b3ff;background:var(--plyr-control-toggle-checked-background,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)))}.plyr__menu__container .plyr__control[role=menuitemradio][aria-checked=true]::after{opacity:1;transform:translateY(-50%) scale(1)}.plyr__menu__container .plyr__control[role=menuitemradio].plyr__tab-focus::before,.plyr__menu__container .plyr__control[role=menuitemradio]:hover::before{background:rgba(35,40,47,.1)}.plyr__menu__container .plyr__menu__value{align-items:center;display:flex;margin-left:auto;margin-right:calc((calc(10px * .7) - 2) * -1);margin-right:calc((calc(var(--plyr-control-spacing,10px) * .7) - 2) * -1);overflow:hidden;padding-left:calc(calc(10px * .7) * 3.5);padding-left:calc(calc(var(--plyr-control-spacing,10px) * .7) * 3.5);pointer-events:none}.plyr--full-ui input[type=range]{-webkit-appearance:none;background:0 0;border:0;border-radius:calc(13px * 2);border-radius:calc(var(--plyr-range-thumb-height,13px) * 2);color:#00b3ff;color:var(--plyr-range-fill-background,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));display:block;height:calc((3px * 2) + 13px);height:calc((var(--plyr-range-thumb-active-shadow-width,3px) * 2) + var(--plyr-range-thumb-height,13px));margin:0;min-width:0;padding:0;transition:box-shadow .3s ease;width:100%}.plyr--full-ui input[type=range]::-webkit-slider-runnable-track{background:0 0;border:0;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px);-webkit-transition:box-shadow .3s ease;transition:box-shadow .3s ease;-webkit-user-select:none;user-select:none;background-image:linear-gradient(to right,currentColor 0,transparent 0);background-image:linear-gradient(to right,currentColor var(--value,0),transparent var(--value,0))}.plyr--full-ui input[type=range]::-webkit-slider-thumb{background:#fff;background:var(--plyr-range-thumb-background,#fff);border:0;border-radius:100%;box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2));height:13px;height:var(--plyr-range-thumb-height,13px);position:relative;-webkit-transition:all .2s ease;transition:all .2s ease;width:13px;width:var(--plyr-range-thumb-height,13px);-webkit-appearance:none;margin-top:calc(((13px - 5px)/ 2) * -1);margin-top:calc(((var(--plyr-range-thumb-height,13px) - var(--plyr-range-track-height,5px))/ 2) * -1)}.plyr--full-ui input[type=range]::-moz-range-track{background:0 0;border:0;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px);-moz-transition:box-shadow .3s ease;transition:box-shadow .3s ease;user-select:none}.plyr--full-ui input[type=range]::-moz-range-thumb{background:#fff;background:var(--plyr-range-thumb-background,#fff);border:0;border-radius:100%;box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2));height:13px;height:var(--plyr-range-thumb-height,13px);position:relative;-moz-transition:all .2s ease;transition:all .2s ease;width:13px;width:var(--plyr-range-thumb-height,13px)}.plyr--full-ui input[type=range]::-moz-range-progress{background:currentColor;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px)}.plyr--full-ui input[type=range]::-ms-track{background:0 0;border:0;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px);-ms-transition:box-shadow .3s ease;transition:box-shadow .3s ease;-ms-user-select:none;user-select:none;color:transparent}.plyr--full-ui input[type=range]::-ms-fill-upper{background:0 0;border:0;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px);-ms-transition:box-shadow .3s ease;transition:box-shadow .3s ease;-ms-user-select:none;user-select:none}.plyr--full-ui input[type=range]::-ms-fill-lower{background:0 0;border:0;border-radius:calc(5px / 2);border-radius:calc(var(--plyr-range-track-height,5px)/ 2);height:5px;height:var(--plyr-range-track-height,5px);-ms-transition:box-shadow .3s ease;transition:box-shadow .3s ease;-ms-user-select:none;user-select:none;background:currentColor}.plyr--full-ui input[type=range]::-ms-thumb{background:#fff;background:var(--plyr-range-thumb-background,#fff);border:0;border-radius:100%;box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2));height:13px;height:var(--plyr-range-thumb-height,13px);position:relative;-ms-transition:all .2s ease;transition:all .2s ease;width:13px;width:var(--plyr-range-thumb-height,13px);margin-top:0}.plyr--full-ui input[type=range]::-ms-tooltip{display:none}.plyr--full-ui input[type=range]:focus{outline:0}.plyr--full-ui input[type=range]::-moz-focus-outer{border:0}.plyr--full-ui input[type=range].plyr__tab-focus::-webkit-slider-runnable-track{outline-color:#00b3ff;outline-color:var(--plyr-tab-focus-color,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));outline-offset:2px;outline-style:dotted;outline-width:3px}.plyr--full-ui input[type=range].plyr__tab-focus::-moz-range-track{outline-color:#00b3ff;outline-color:var(--plyr-tab-focus-color,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));outline-offset:2px;outline-style:dotted;outline-width:3px}.plyr--full-ui input[type=range].plyr__tab-focus::-ms-track{outline-color:#00b3ff;outline-color:var(--plyr-tab-focus-color,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));outline-offset:2px;outline-style:dotted;outline-width:3px}.plyr__poster{background-color:#000;background-position:50% 50%;background-repeat:no-repeat;background-size:contain;height:100%;left:0;opacity:0;position:absolute;top:0;transition:opacity .2s ease;width:100%;z-index:1}.plyr--stopped.plyr__poster-enabled .plyr__poster{opacity:1}.plyr__time{font-size:13px;font-size:var(--plyr-font-size-time,var(--plyr-font-size-small,13px))}.plyr__time+.plyr__time::before{content:'\2044';margin-right:10px;margin-right:var(--plyr-control-spacing,10px)}@media (max-width:calc(768px - 1px)){.plyr__time+.plyr__time{display:none}}.plyr__tooltip{background:rgba(255,255,255,.9);background:var(--plyr-tooltip-background,rgba(255,255,255,.9));border-radius:3px;border-radius:var(--plyr-tooltip-radius,3px);bottom:100%;box-shadow:0 1px 2px rgba(0,0,0,.15);box-shadow:var(--plyr-tooltip-shadow,0 1px 2px rgba(0,0,0,.15));color:#4a5464;color:var(--plyr-tooltip-color,#4a5464);font-size:13px;font-size:var(--plyr-font-size-small,13px);font-weight:400;font-weight:var(--plyr-font-weight-regular,400);left:50%;line-height:1.3;margin-bottom:calc(calc(10px / 2) * 2);margin-bottom:calc(calc(var(--plyr-control-spacing,10px)/ 2) * 2);opacity:0;padding:calc(10px / 2) calc(calc(10px / 2) * 1.5);padding:calc(var(--plyr-control-spacing,10px)/ 2) calc(calc(var(--plyr-control-spacing,10px)/ 2) * 1.5);pointer-events:none;position:absolute;transform:translate(-50%,10px) scale(.8);transform-origin:50% 100%;transition:transform .2s .1s ease,opacity .2s .1s ease;white-space:nowrap;z-index:2}.plyr__tooltip::before{border-left:4px solid transparent;border-left:var(--plyr-tooltip-arrow-size,4px) solid transparent;border-right:4px solid transparent;border-right:var(--plyr-tooltip-arrow-size,4px) solid transparent;border-top:4px solid rgba(255,255,255,.9);border-top:var(--plyr-tooltip-arrow-size,4px) solid var(--plyr-tooltip-background,rgba(255,255,255,.9));bottom:calc(4px * -1);bottom:calc(var(--plyr-tooltip-arrow-size,4px) * -1);content:'';height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;z-index:2}.plyr .plyr__control.plyr__tab-focus .plyr__tooltip,.plyr .plyr__control:hover .plyr__tooltip,.plyr__tooltip--visible{opacity:1;transform:translate(-50%,0) scale(1)}.plyr .plyr__control:hover .plyr__tooltip{z-index:3}.plyr__controls>.plyr__control:first-child .plyr__tooltip,.plyr__controls>.plyr__control:first-child+.plyr__control .plyr__tooltip{left:0;transform:translate(0,10px) scale(.8);transform-origin:0 100%}.plyr__controls>.plyr__control:first-child .plyr__tooltip::before,.plyr__controls>.plyr__control:first-child+.plyr__control .plyr__tooltip::before{left:calc((18px / 2) + calc(10px * .7));left:calc((var(--plyr-control-icon-size,18px)/ 2) + calc(var(--plyr-control-spacing,10px) * .7))}.plyr__controls>.plyr__control:last-child .plyr__tooltip{left:auto;right:0;transform:translate(0,10px) scale(.8);transform-origin:100% 100%}.plyr__controls>.plyr__control:last-child .plyr__tooltip::before{left:auto;right:calc((18px / 2) + calc(10px * .7));right:calc((var(--plyr-control-icon-size,18px)/ 2) + calc(var(--plyr-control-spacing,10px) * .7));transform:translateX(50%)}.plyr__controls>.plyr__control:first-child .plyr__tooltip--visible,.plyr__controls>.plyr__control:first-child+.plyr__control .plyr__tooltip--visible,.plyr__controls>.plyr__control:first-child+.plyr__control.plyr__tab-focus .plyr__tooltip,.plyr__controls>.plyr__control:first-child+.plyr__control:hover .plyr__tooltip,.plyr__controls>.plyr__control:first-child.plyr__tab-focus .plyr__tooltip,.plyr__controls>.plyr__control:first-child:hover .plyr__tooltip,.plyr__controls>.plyr__control:last-child .plyr__tooltip--visible,.plyr__controls>.plyr__control:last-child.plyr__tab-focus .plyr__tooltip,.plyr__controls>.plyr__control:last-child:hover .plyr__tooltip{transform:translate(0,0) scale(1)}.plyr__progress{left:calc(13px * .5);left:calc(var(--plyr-range-thumb-height,13px) * .5);margin-right:13px;margin-right:var(--plyr-range-thumb-height,13px);position:relative}.plyr__progress input[type=range],.plyr__progress__buffer{margin-left:calc(13px * -.5);margin-left:calc(var(--plyr-range-thumb-height,13px) * -.5);margin-right:calc(13px * -.5);margin-right:calc(var(--plyr-range-thumb-height,13px) * -.5);width:calc(100% + 13px);width:calc(100% + var(--plyr-range-thumb-height,13px))}.plyr__progress input[type=range]{position:relative;z-index:2}.plyr__progress .plyr__tooltip{font-size:13px;font-size:var(--plyr-font-size-time,var(--plyr-font-size-small,13px));left:0}.plyr__progress__buffer{-webkit-appearance:none;background:0 0;border:0;border-radius:100px;height:5px;height:var(--plyr-range-track-height,5px);left:0;margin-top:calc((5px / 2) * -1);margin-top:calc((var(--plyr-range-track-height,5px)/ 2) * -1);padding:0;position:absolute;top:50%}.plyr__progress__buffer::-webkit-progress-bar{background:0 0}.plyr__progress__buffer::-webkit-progress-value{background:currentColor;border-radius:100px;min-width:5px;min-width:var(--plyr-range-track-height,5px);-webkit-transition:width .2s ease;transition:width .2s ease}.plyr__progress__buffer::-moz-progress-bar{background:currentColor;border-radius:100px;min-width:5px;min-width:var(--plyr-range-track-height,5px);-moz-transition:width .2s ease;transition:width .2s ease}.plyr__progress__buffer::-ms-fill{border-radius:100px;-ms-transition:width .2s ease;transition:width .2s ease}.plyr--loading .plyr__progress__buffer{animation:plyr-progress 1s linear infinite;background-image:linear-gradient(-45deg,rgba(35,40,47,.6) 25%,transparent 25%,transparent 50%,rgba(35,40,47,.6) 50%,rgba(35,40,47,.6) 75%,transparent 75%,transparent);background-image:linear-gradient(-45deg,var(--plyr-progress-loading-background,rgba(35,40,47,.6)) 25%,transparent 25%,transparent 50%,var(--plyr-progress-loading-background,rgba(35,40,47,.6)) 50%,var(--plyr-progress-loading-background,rgba(35,40,47,.6)) 75%,transparent 75%,transparent);background-repeat:repeat-x;background-size:25px 25px;background-size:var(--plyr-progress-loading-size,25px) var(--plyr-progress-loading-size,25px);color:transparent}.plyr--video.plyr--loading .plyr__progress__buffer{background-color:rgba(255,255,255,.25);background-color:var(--plyr-video-progress-buffered-background,rgba(255,255,255,.25))}.plyr--audio.plyr--loading .plyr__progress__buffer{background-color:rgba(193,200,209,.6);background-color:var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6))}.plyr__volume{align-items:center;display:flex;max-width:110px;min-width:80px;position:relative;width:20%}.plyr__volume input[type=range]{margin-left:calc(10px / 2);margin-left:calc(var(--plyr-control-spacing,10px)/ 2);margin-right:calc(10px / 2);margin-right:calc(var(--plyr-control-spacing,10px)/ 2);position:relative;z-index:2}.plyr--is-ios .plyr__volume{min-width:0;width:auto}.plyr--audio{display:block}.plyr--audio .plyr__controls{background:#fff;background:var(--plyr-audio-controls-background,#fff);border-radius:inherit;color:#4a5464;color:var(--plyr-audio-control-color,#4a5464);padding:10px;padding:var(--plyr-control-spacing,10px)}.plyr--audio .plyr__control.plyr__tab-focus,.plyr--audio .plyr__control:hover,.plyr--audio .plyr__control[aria-expanded=true]{background:#00b3ff;background:var(--plyr-audio-control-background-hover,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));color:#fff;color:var(--plyr-audio-control-color-hover,#fff)}.plyr--full-ui.plyr--audio input[type=range]::-webkit-slider-runnable-track{background-color:rgba(193,200,209,.6);background-color:var(--plyr-audio-range-track-background,var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6)))}.plyr--full-ui.plyr--audio input[type=range]::-moz-range-track{background-color:rgba(193,200,209,.6);background-color:var(--plyr-audio-range-track-background,var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6)))}.plyr--full-ui.plyr--audio input[type=range]::-ms-track{background-color:rgba(193,200,209,.6);background-color:var(--plyr-audio-range-track-background,var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6)))}.plyr--full-ui.plyr--audio input[type=range]:active::-webkit-slider-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(35,40,47,.1);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(35,40,47,.1))}.plyr--full-ui.plyr--audio input[type=range]:active::-moz-range-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(35,40,47,.1);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(35,40,47,.1))}.plyr--full-ui.plyr--audio input[type=range]:active::-ms-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(35,40,47,.1);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(35,40,47,.1))}.plyr--audio .plyr__progress__buffer{color:rgba(193,200,209,.6);color:var(--plyr-audio-progress-buffered-background,rgba(193,200,209,.6))}.plyr--video{background:#000;overflow:hidden}.plyr--video.plyr--menu-open{overflow:visible}.plyr__video-wrapper{background:#000;height:100%;margin:auto;overflow:hidden;position:relative;width:100%}.plyr__video-embed,.plyr__video-wrapper--fixed-ratio{height:0;padding-bottom:56.25%}.plyr__video-embed iframe,.plyr__video-wrapper--fixed-ratio video{border:0;left:0;position:absolute;top:0}.plyr--full-ui .plyr__video-embed>.plyr__video-embed__container{padding-bottom:240%;position:relative;transform:translateY(-38.28125%)}.plyr--video .plyr__controls{background:linear-gradient(rgba(0,0,0,0),rgba(0,0,0,.75));background:var(--plyr-video-controls-background,linear-gradient(rgba(0,0,0,0),rgba(0,0,0,.75)));border-bottom-left-radius:inherit;border-bottom-right-radius:inherit;bottom:0;color:#fff;color:var(--plyr-video-control-color,#fff);left:0;padding:calc(10px / 2);padding:calc(var(--plyr-control-spacing,10px)/ 2);padding-top:calc(10px * 2);padding-top:calc(var(--plyr-control-spacing,10px) * 2);position:absolute;right:0;transition:opacity .4s ease-in-out,transform .4s ease-in-out;z-index:3}@media (min-width:480px){.plyr--video .plyr__controls{padding:10px;padding:var(--plyr-control-spacing,10px);padding-top:calc(10px * 3.5);padding-top:calc(var(--plyr-control-spacing,10px) * 3.5)}}.plyr--video.plyr--hide-controls .plyr__controls{opacity:0;pointer-events:none;transform:translateY(100%)}.plyr--video .plyr__control.plyr__tab-focus,.plyr--video .plyr__control:hover,.plyr--video .plyr__control[aria-expanded=true]{background:#00b3ff;background:var(--plyr-video-control-background-hover,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));color:#fff;color:var(--plyr-video-control-color-hover,#fff)}.plyr__control--overlaid{background:#00b3ff;background:var(--plyr-video-control-background-hover,var(--plyr-color-main,var(--plyr-color-main,#00b3ff)));border:0;border-radius:100%;color:#fff;color:var(--plyr-video-control-color,#fff);display:none;left:50%;opacity:.9;padding:calc(10px * 1.5);padding:calc(var(--plyr-control-spacing,10px) * 1.5);position:absolute;top:50%;transform:translate(-50%,-50%);transition:.3s;z-index:2}.plyr__control--overlaid svg{left:2px;position:relative}.plyr__control--overlaid:focus,.plyr__control--overlaid:hover{opacity:1}.plyr--playing .plyr__control--overlaid{opacity:0;visibility:hidden}.plyr--full-ui.plyr--video .plyr__control--overlaid{display:block}.plyr--full-ui.plyr--video input[type=range]::-webkit-slider-runnable-track{background-color:rgba(255,255,255,.25);background-color:var(--plyr-video-range-track-background,var(--plyr-video-progress-buffered-background,rgba(255,255,255,.25)))}.plyr--full-ui.plyr--video input[type=range]::-moz-range-track{background-color:rgba(255,255,255,.25);background-color:var(--plyr-video-range-track-background,var(--plyr-video-progress-buffered-background,rgba(255,255,255,.25)))}.plyr--full-ui.plyr--video input[type=range]::-ms-track{background-color:rgba(255,255,255,.25);background-color:var(--plyr-video-range-track-background,var(--plyr-video-progress-buffered-background,rgba(255,255,255,.25)))}.plyr--full-ui.plyr--video input[type=range]:active::-webkit-slider-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(255,255,255,.5);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(255,255,255,.5))}.plyr--full-ui.plyr--video input[type=range]:active::-moz-range-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(255,255,255,.5);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(255,255,255,.5))}.plyr--full-ui.plyr--video input[type=range]:active::-ms-thumb{box-shadow:0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2),0 0 0 3px rgba(255,255,255,.5);box-shadow:var(--plyr-range-thumb-shadow,0 1px 1px rgba(35,40,47,.15),0 0 0 1px rgba(35,40,47,.2)),0 0 0 var(--plyr-range-thumb-active-shadow-width,3px) var(--plyr-audio-range-thumb-active-shadow-color,rgba(255,255,255,.5))}.plyr--video .plyr__progress__buffer{color:rgba(255,255,255,.25);color:var(--plyr-video-progress-buffered-background,rgba(255,255,255,.25))}.plyr:-webkit-full-screen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-ms-fullscreen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:fullscreen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-webkit-full-screen video{height:100%}.plyr:-ms-fullscreen video{height:100%}.plyr:fullscreen video{height:100%}.plyr:-webkit-full-screen .plyr__video-wrapper{height:100%;position:static}.plyr:-ms-fullscreen .plyr__video-wrapper{height:100%;position:static}.plyr:fullscreen .plyr__video-wrapper{height:100%;position:static}.plyr:-webkit-full-screen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:-ms-fullscreen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:fullscreen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:-webkit-full-screen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-ms-fullscreen .plyr__control .icon--exit-fullscreen{display:block}.plyr:fullscreen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-webkit-full-screen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-ms-fullscreen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:fullscreen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-webkit-full-screen.plyr--hide-controls{cursor:none}.plyr:-ms-fullscreen.plyr--hide-controls{cursor:none}.plyr:fullscreen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:-webkit-full-screen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}.plyr:-ms-fullscreen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}.plyr:fullscreen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr:-webkit-full-screen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-webkit-full-screen video{height:100%}.plyr:-webkit-full-screen .plyr__video-wrapper{height:100%;position:static}.plyr:-webkit-full-screen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:-webkit-full-screen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-webkit-full-screen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-webkit-full-screen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:-webkit-full-screen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr:-moz-full-screen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-moz-full-screen video{height:100%}.plyr:-moz-full-screen .plyr__video-wrapper{height:100%;position:static}.plyr:-moz-full-screen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:-moz-full-screen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-moz-full-screen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-moz-full-screen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:-moz-full-screen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr:-ms-fullscreen{background:#000;border-radius:0!important;height:100%;margin:0;width:100%}.plyr:-ms-fullscreen video{height:100%}.plyr:-ms-fullscreen .plyr__video-wrapper{height:100%;position:static}.plyr:-ms-fullscreen.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr:-ms-fullscreen .plyr__control .icon--exit-fullscreen{display:block}.plyr:-ms-fullscreen .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr:-ms-fullscreen.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr:-ms-fullscreen .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr--fullscreen-fallback{background:#000;border-radius:0!important;height:100%;margin:0;width:100%;bottom:0;display:block;left:0;position:fixed;right:0;top:0;z-index:10000000}.plyr--fullscreen-fallback video{height:100%}.plyr--fullscreen-fallback .plyr__video-wrapper{height:100%;position:static}.plyr--fullscreen-fallback.plyr--vimeo .plyr__video-wrapper{height:0;position:relative}.plyr--fullscreen-fallback .plyr__control .icon--exit-fullscreen{display:block}.plyr--fullscreen-fallback .plyr__control .icon--exit-fullscreen+svg{display:none}.plyr--fullscreen-fallback.plyr--hide-controls{cursor:none}@media (min-width:1024px){.plyr--fullscreen-fallback .plyr__captions{font-size:21px;font-size:var(--plyr-font-size-xlarge,21px)}}.plyr__ads{border-radius:inherit;bottom:0;cursor:pointer;left:0;overflow:hidden;position:absolute;right:0;top:0;z-index:-1}.plyr__ads>div,.plyr__ads>div iframe{height:100%;position:absolute;width:100%}.plyr__ads::after{background:#23282f;border-radius:2px;bottom:10px;bottom:var(--plyr-control-spacing,10px);color:#fff;content:attr(data-badge-text);font-size:11px;padding:2px 6px;pointer-events:none;position:absolute;right:10px;right:var(--plyr-control-spacing,10px);z-index:3}.plyr__ads::after:empty{display:none}.plyr__cues{background:currentColor;display:block;height:5px;height:var(--plyr-range-track-height,5px);left:0;margin:-var(--plyr-range-track-height,5px)/2 0 0;opacity:.8;position:absolute;top:50%;width:3px;z-index:3}.plyr__preview-thumb{background-color:rgba(255,255,255,.9);background-color:var(--plyr-tooltip-background,rgba(255,255,255,.9));border-radius:3px;bottom:100%;box-shadow:0 1px 2px rgba(0,0,0,.15);box-shadow:var(--plyr-tooltip-shadow,0 1px 2px rgba(0,0,0,.15));margin-bottom:calc(calc(10px / 2) * 2);margin-bottom:calc(calc(var(--plyr-control-spacing,10px)/ 2) * 2);opacity:0;padding:3px;padding:var(--plyr-tooltip-radius,3px);pointer-events:none;position:absolute;transform:translate(0,10px) scale(.8);transform-origin:50% 100%;transition:transform .2s .1s ease,opacity .2s .1s ease;z-index:2}.plyr__preview-thumb--is-shown{opacity:1;transform:translate(0,0) scale(1)}.plyr__preview-thumb::before{border-left:4px solid transparent;border-left:var(--plyr-tooltip-arrow-size,4px) solid transparent;border-right:4px solid transparent;border-right:var(--plyr-tooltip-arrow-size,4px) solid transparent;border-top:4px solid rgba(255,255,255,.9);border-top:var(--plyr-tooltip-arrow-size,4px) solid var(--plyr-tooltip-background,rgba(255,255,255,.9));bottom:calc(4px * -1);bottom:calc(var(--plyr-tooltip-arrow-size,4px) * -1);content:'';height:0;left:50%;position:absolute;transform:translateX(-50%);width:0;z-index:2}.plyr__preview-thumb__image-container{background:#c1c8d1;border-radius:calc(3px - 1px);border-radius:calc(var(--plyr-tooltip-radius,3px) - 1px);overflow:hidden;position:relative;z-index:0}.plyr__preview-thumb__image-container img{height:100%;left:0;max-height:none;max-width:none;position:absolute;top:0;width:100%}.plyr__preview-thumb__time-container{bottom:6px;left:0;position:absolute;right:0;white-space:nowrap;z-index:3}.plyr__preview-thumb__time-container span{background-color:rgba(0,0,0,.55);border-radius:calc(3px - 1px);border-radius:calc(var(--plyr-tooltip-radius,3px) - 1px);color:#fff;font-size:13px;font-size:var(--plyr-font-size-time,var(--plyr-font-size-small,13px));padding:3px 6px}.plyr__preview-scrubbing{bottom:0;filter:blur(1px);height:100%;left:0;margin:auto;opacity:0;overflow:hidden;pointer-events:none;position:absolute;right:0;top:0;transition:opacity .3s ease;width:100%;z-index:1}.plyr__preview-scrubbing--is-shown{opacity:1}.plyr__preview-scrubbing img{height:100%;left:0;max-height:none;max-width:none;object-fit:contain;position:absolute;top:0;width:100%}.plyr--no-transition{transition:none!important}.plyr__sr-only{clip:rect(1px,1px,1px,1px);overflow:hidden;border:0!important;height:1px!important;padding:0!important;position:absolute!important;width:1px!important}.plyr [hidden]{display:none!important}</style><style>html,
            body {
                margin: 0;
                padding: 0;
                overflow: hidden;
                width: 100%;
                height: 100%;
                display: flex;
                background: transparent;
                align-items: center;
                justify-content: center;
                font-family: 'Rubik', sans-serif;

            }
            .in-page-container{
                height: auto !important;
                margin: 0 !important;
            }
            :root{
                --max-height: 100vh;
                --muted-indicator-border-size: 2px;
            }

            .container {
                width: 100%;
                height: 100%;
                display: table;
            }

            video {
                width: 100%;
                height: 100%;
                visibility: hidden;
            }
            .plyr__poster {
                background-size: cover;
                opacity: 1;
            }
            .panda-forward-wrapper{
                width: 100%;
                height: 100%;
                display: flex;
                justify-content: space-between;
                position: absolute;
                top: 0;
                left: 0;
            }
            .panda-forward-wrapper div{
                width: 50%;
                height: 100%;
            }

            .plyr__captions {
                font-size: 20px;
                z-index: 4;
            }

            .plyr--video .plyr__controls {
                z-index: 5;
            }
            
            @media (min-width: 480px) {
                .plyr__captions {
                    font-size: 18px;
                }
            }
            .play-cta{
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                display: flex;
            }

            @media (max-width: 350px) {
                .plyr__volume>input[type=range] {
                    display: none;
                }

                .plyr__volume {
                    min-width: 30px;
                    width: 30px;
                }
            }
            @media (max-width: 480px) {
                .plyr__captions {
                    font-size: 14px;
                }
            }

            @media (min-width: 768px) {
                .plyr__captions {
                    font-size: 23px;
                }
            }

            @media (min-width: 1024px) {
                .plyr__captions {
                    font-size: 26px;
                }
            }

            #live-time-indicator{
                background: none;
                outline: 0;
                border: 0;
                color: var(--live-indicator-color);
                display: flex;
                align-items: center;
                cursor: pointer;
            }
            #live-time-indicator div{
                width: 8px;
                height: 8px;
                border-radius: 5px;
                background: var(--live-indicator-color);
                margin-right: 4px;
            }
            .not-realtime{
                opacity: 0.5;
            }
            .hide-slyder-badge::-webkit-slider-thumb {
                opacity: 0;
            }

            .plyr audio,
            .plyr iframe,
            .plyr video {
                max-height: 100vh;
            }
            .end-cta{
                width: 100%;
                height: 100%;
            }
            .panda-branding-link {
                height: 32px;
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 0 4px;
                padding-bottom: 2px;
                margin-left: 2px;
                border-radius: 3px;
                transition: background .3s;
            }

            .panda-branding-link:hover {
                background: var(--plyr-color-main)
            }

            .plyr--video {
                height: 100%
            }

            .container-drm {
                height: 100%;
                width: 100%;
                display: table-cell;
                text-align: center;
                vertical-align: middle;
            }

            #drm-question {
                color: white;
                font-size: 1.8rem;
                margin: 0;
                margin-bottom: 20px;
                text-shadow: 0px 0 1px black;
            }

            #drm-answer {
                height: 33px;
                font-size: 1rem;
                margin-bottom: 15px;
                width: 50%;
                padding: 10px 15px;
                display: inline-block;
                border: .5px solid #ccc !important;
                border-radius: 4px;
                box-sizing: border-box;
            }

            #drm-answer:focus {
                outline: none;
            }

            #drm-button {
                position: absolute;
                height: 33px;
                width: 33px;
                border: none;
                border-top-right-radius: 4px;
                border-bottom-right-radius: 4px;
                margin-left: -32px;
            }

            .drm-search-icon svg {
                width: 30px;
                height: 30px;
                margin-left: -3px;
            }

            .drm-loading-icon svg {
                height: 40px;
                width: 40px;
                position: absolute;
                left: -2px;
                top: -3px;
            }

            .disabled {
                display: none  !important;
            }

            .panda-live-indicator {
                position: absolute;
                right: 20px;
                top: 5px;
                padding: 2px 16px;
                border-radius: 4px;
                font-weight: bold;
                background-color: var(--live-indicator-color);
                color: #fff;
                opacity: 0.85;
            }

            #error-indicator{
                width: 100%;
                height: 100%;
                position: absolute;
                top: 0;
                left: 0;
                z-index: 1000;
                padding: 30px;
                line-height: 2em;
                background: rgba(0,0,0,0.6);
            }

            .panda-title-wrapper {
                position: absolute;
                top: calc(-100vh + 75px);
                left: 0;
                width: 100%;
                transition: transform .01s;
                height: 80px;
                background: var(--plyr-video-controls-background, linear-gradient(rgba(0, 0, 0, .85), rgba(0, 0, 0, 0)));
            }

            .plyr-controls-fix-index {
                z-index: 12 !important;
            }
            @media (max-width: 550px) {
                .plyr__controls .panda-branding-link {
                    display: none;
                }

                .panda-title-wrapper {
                    position: absolute;
                    top: calc(-100vh + 55px);
                    left: 0;
                    width: 100%;
                    transition: transform .01s;
                    height: 80px;
                    background: var(--plyr-video-controls-background, linear-gradient(rgba(0, 0, 0, .85), rgba(0, 0, 0, 0)));
                }
            }

            .plyr--video.plyr--hide-controls .plyr__controls {
                transform: translateY(0) !important;
            }

            .panda-title-wrapper p {
                color: var(--plyr-video-control-color);
                padding: 10px 20px;
                margin: 0;
                font-size: 18px;
                font-weight: bold;
                text-align: start;
            }

            .loading-icon svg {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translateX(-50%) translateY(-50%);
                -webkit-transform: translateX(-50%) translateY(-50%);
                -o-transform: translateX(-50%) translateY(-50%);
                width: 30%;
                height: 30%;
            }
            .live-offline-badge{
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                height: 100%;
                background: #040814;
                color: #fff;
                display: flex;
                align-items: center;
                justify-content: center;
                flex-direction: column;
            }
            @keyframes pulsateLogo {
                0% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.1);
                }
                100% {
                    transform: scale(1);
                }
            }
            .live-offline-badge img{
                width: 40%;
                max-width: 500px;
                animation: pulsateLogo 3s ease-in-out infinite;
            }

            .live-offline-badge p{
                font-size: 1rem;
                margin-top: 10px;
                font-weight: bold;
            }

            .live-thumb{
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
            }
            .live-thumb img{
                width: 100%;
                height: 100%;
            }
            .alternative-progress-wrapper{
                width: 100%;
                height: 20px;
                position: absolute;
                display: flex;
                align-items: flex-end;
                bottom: 0;
                left: 0;
                transition: width .1s;
            }
            .alternative-progress{
                --value-progress: 0%;
                background: var(--plyr-color-main);
                height: 100%;
                width: var(--value-progress);
                transition: width 0.7s;
                z-index: 100000;
            }
            @media (max-width: 550px) {
                .alternative-progress-wrapper{
                    height: 20px;
                }
            }
            button[data-plyr="play"].plyr__control--overlaid{
                z-index: 5;
            }
            @media (max-width: 450px) {
                .alternative-progress-wrapper{
                    height: 14px;
                }
            }
            @media (max-width: 380px) {
                .alternative-progress-wrapper{
                    height: 10px;
                }
            }
            @media (max-width: 490px){
                button[data-plyr="rewind"]{
                    display: none;
                }
                button[data-plyr="fast-forward"]{
                    display: none;
                }
                .no-progress button[data-plyr="play"].plyr__controls__item, .no-progress div.plyr__time--current,.no-progress  div.plyr__time{
                    position: static !important;
                }
                .panda-bookmarks-div{
                    position: relative;
                }
            }
            .panda-bookmarks-list-title{
                width: calc(100% - 20px);
                text-align: start;
                padding: 5px 10px;
                border-bottom: 1px solid #ccc;
                margin: 3px 10px;
                font-size: 13px;
            }
            .panda-bookmarks-list-wrapper{
                animation: plyr-popup .2s ease;
                position: absolute;
                bottom: 50px;
                right: 0px;
                color: var(--plyr-menu-color,#4a5464);
                background: var(--plyr-menu-background,rgba(255,255,255,.9));
                border-radius: 4px;
                opacity: 0.9;
            }

            .panda-bookmarks-list{ 
                list-style-type: none;
                padding: 5px 10px;
                padding-top: 0;
                max-height: calc(var(--max-height) - 110px);
                overflow-y: auto;
                margin-top: 0;
            }
            .panda-bookmarks-list::-webkit-scrollbar {
                width: 5px;
            }
            .panda-bookmarks-list::-webkit-scrollbar-track {
                background: var(--plyr-menu-background,rgba(255,255,255,.9));
                border-radius: 5px;
            }
            .panda-bookmarks-list::-webkit-scrollbar-thumb {
                background: #ccc; 
                border-radius: 5px;
            }
            .panda-bookmarks-list li {
                display: flex;
                padding: 3px 10px;
                min-width: 130px;
                max-width: 220px;
                text-align: start;
                cursor: pointer;
                border-radius: 2px;
            }
            .panda-bookmarks-list li:hover{
                background: var(--plyr-color-main);
                color: var(--plyr-video-control-color);
            }
            .panda-bookmarks-list  li span{
                font-size: 13px;
                font-weight: normal;
                line-height: 18px;
            }
            .panda-bookmarks-button{
                height: 32px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 3px;
                margin-left: 2px;
                transition: background .3s;
                border: 0;
                background: none;
            }
            .active-bookmark {
                background: var(--plyr-color-main);
            }
            .panda-bookmarks-button:hover {
                background: var(--plyr-color-main)
            }
            .panda-bookmark-progress-dot{
                width: 5px;
                height: 5px;
                border-radius: 50%;
                background: var(--plyr-video-control-color);
                position: absolute;
                top: 7px;
                left: calc(var(--dot-percent) - 6px);
                z-index: 20;
            }
            .plyr__menu__container > div > div{
                max-height: calc(var(--max-height) - 50px);
                overflow-y: auto;
            }
            .plyr__menu__container > div > div::-webkit-scrollbar {
                width: 5px;
            }
            .plyr__menu__container > div > div::-webkit-scrollbar-track {
                background: var(--plyr-menu-background,rgba(255,255,255,.9));
                border-radius: 5px;
            }
            .plyr__menu__container > div > div::-webkit-scrollbar-thumb {
                background: #ccc; 
                border-radius: 5px;
            }

            .cta-overlay{
                position: fixed;
                top: 0;
                left: 0;
                z-index: 1;
                width: 100%;
                height: 100%;
                outline: 0;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .cta-overlay iframe{
                outline: 0;
                border: 0;
            } 
            .cta-skip-button{
                position: absolute;
                bottom: 0;
                right: 0;
                padding: 10px;
                cursor: pointer;
                background: rgba(255,255,255,0.4);
                border: 0;
                outline: 0;
            }
            .cta-container{
                position: absolute;
                display: flex;
                flex-direction: column;
                z-index: 1000;
            }
            .panda-resume-screen-wrapper{
                position: absolute;
                width: 100%;
                height: 100%;
                top: 0;
                left: 0;
                background: var(--plyr-color-main);
                z-index: 15;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                font-size: 1rem;
            }
            .panda-resume-screen-wrapper p{
                color: var(--plyr-video-control-color);
                font-size: 1.4em;
                font-weight: bold;
            }
            .panda-resume-screen-buttons{
                display: flex;
                flex-direction: row;
            }
            .panda-resume-screen-buttons button{
                background: none;
                border: 0;
                outline: 0;
                display: flex;
                align-items: center;
                padding: 10px 20px;
                cursor: pointer;
                color: var(--plyr-video-control-color);
                font-size: 1.1em;
            }
            .panda-resume-screen-buttons button svg{
                width: 1.9em;
                height: 1.9em;
            }
            .panda-resume-screen-buttons button span{
                padding-left: 4px;
            }
            @media (max-width: 450px) {
                .panda-resume-screen-wrapper{
                    font-size: 0.8rem;
                }
            }
            @media (max-width: 350px) {
                .panda-resume-screen-wrapper{
                    font-size: 0.7rem;
                }
            }
            @media (max-width: 275px) {
                .panda-resume-screen-wrapper{
                    font-size: 0.6rem;
                }
            }
            @media (max-width: 230px) {
                .panda-resume-screen-wrapper{
                    font-size: 0.5rem;
                }
            }
            .plyr--full-ui.fullscreen ::-webkit-media-text-track-container {
                display:block !important;
            }
            @keyframes plyr-popup{
                0%{
                    opacity: 0;
                    transform: translateY(10px);
                }
                100%{
                    opacity: 1;
                    transform: translateY(0px);
                }
            }
            #context-menu{
                position: absolute;
                display: flex;
                width: 170px;
                background: rgba(255,255,255,0.8);
                border-radius: 3px;
                z-index: 100;
            }
            #context-menu ul{
                display: flex;
                flex-direction: column;
                align-items: start;
                justify-content: space-around;
                padding: 0;
                width: 100%;
                height: 100%;
                margin: 0;
            }
            #context-menu ul li{
                list-style: none;
                display: flex;
                width: 100%;
            }
            #context-menu ul li:hover{
                opacity: 0.8;
                background: var(--plyr-color-main);
            }
            #context-menu ul li *:hover{
                color: var(--plyr-video-control-color);
            }
            #context-menu ul li a{
                text-decoration: none;
                color: #333;
                font-size: 0.8rem;
                padding: 10px;
                cursor: pointer;
                width: 100%;
            }
            #context-menu ul li button{
                color: #333;
                background: 0;
                outline: 0;
                border: 0;
                font-size: 0.8rem;
                cursor: pointer;
                width: 100%;
                text-align: start;
                padding: 10px;
            }
            #report-problem-dialog {
                display: flex;
                align-items: center;
                justify-content: center;
                width: 100%;
                height: 100%;
                position: absolute;
                top: 0;
                left: 0;
            }
            #copy-paste{
                display: flex;
                flex-direction: column;
                width: 520px;
                height: 300px;
                z-index: 100;
                background-color: #1b1b4b;
                border-radius: 5px;
            }
            .report-problem-text{
                display: flex;
                color: #fff;
                justify-content: center;
                align-items: center;
                font-weight: 600;
                font-size: 15px;
            }
            #copy-paste #report-first-step section {
                display: flex;
                flex-direction: column; 
                align-items: flex-start;
                margin: 10px 30px 0px 30px;
                color: #ccc;
                font-size: 16px;
            }
            #copy-paste #report-first-step section div {
                margin: 0 0 12px 0;
            }
            #copy-paste #report-first-step footer {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            .report-problem-dialog-button {
                display: flex;
                align-items: center;
                justify-content: center;
                background-color: #a6a2ec;
                border-radius: 6px;
                border-style: none;
                box-sizing: border-box;
                color: #FFFFFF;
                cursor: pointer;
                height: 35px;
                line-height: 20px;
                margin: 0;
                outline: none;
                padding: 10px 0px;
                position: relative;
                text-align: center;
                text-decoration: none;
                transition: color 100ms;
                vertical-align: baseline;
                user-select: none;
                -webkit-user-select: none;
                touch-action: manipulation;
                width: 140px;
                font-size: 0.8rem;
            }
            #copy-paste #report-first-step footer button:hover,
            #copy-paste #report-first-step footer button:focus {
                background-color: #bab7eb;
            }
            #copy-paste #report-first-step footer > :first-child {
                margin-right: 20px;
            }
            .other-input {
                width: 100%;
                padding: 10px 20px;
                margin: 0px 0px 8px 0px;
                display: inline-block;
                border: .5px solid #ccc !important;
                border-radius: 4px;
                box-sizing: border-box;
            }
            #copy-paste #report-second-step {
                display: flex;
                align-items: center;
                justify-content: center;
                flex-direction: column;
                color: #fff;
                font-size: 16px;
                font-weight: 600;
                text-align: center;
                line-height: 1.3rem;
            }
            #copy-paste #report-second-step header {
                margin-top: 10px;
            }
            #copy-paste #report-second-step #second-step-text {
                margin-top: -10px;
            }
            #copy-paste #report-second-step #loading-div {
                width: 120px;
            }
            #copy-paste #report-third-step {
                display: flex;
                align-items: center;
                justify-content: center;
                flex-direction: column;
                color: #fff;
                font-size: 16px;
                font-weight: 600;
                text-align: center;
                line-height: 1.3rem;
            }
            #copy-paste #report-third-step.alone {
                margin-top: 40px;
            }
            #copy-paste #report-third-step header {
                margin-top: 15px;
                margin-bottom: 5px;
            }
            #copy-paste #report-third-step footer {
                margin-top: 15px;
            }
            .report-textfield-card {
                height: 40px;
                width: 97%;
                padding-left: 5px;
            }
            @media (max-width: 450px) {
                #copy-paste {
                    width: 300px;
                    height: 180px;
                }
                #copy-paste header p {
                    margin: 5px 0px 0px 0px;
                }
                .report-problem-text {
                    font-size: 9px;
                }
                .report-textfield-card {
                    height: 32px;
                    width: 94%;
                    padding-left: 2px;
                }
                .report-problem-dialog-button {
                    height: 20px;
                    line-height: 14px;
                    padding: 2px 0px;
                    width: 80px;
                    font-size: .5rem;
                }
                #copy-paste #report-first-step section div {
                    margin: 0 0 2.4px 4px;
                }
                #copy-paste #report-first-step section {
                    margin: 2px 4px 0px 2px;
                    font-size: 10px;
                }
                #copy-paste #report-second-step #second-step-text {
                    font-size: 12px;
                }
                #copy-paste #report-third-step footer {
                    margin-top: 5px;
                }
                #panda-last-step-img {
                    width: 50%;
                }
                .other-input {
                    width: 100%;
                    padding: 4px 8px;
                    margin: 5px 0px;
                    display: inline-block;
                    border: .25px solid #ccc;
                    border-radius: 4px;
                    box-sizing: border-box;
                    font-size: 10px;
                }
            }
            .customSettingsBtn {
                --max-height: 100vh;
                --plyr-captions-text-color: #FFF;
                --plyr-captions-background: #000;
                --plyr-video-control-color: #FFFFFFFF;
                --plyr-video-control-color-hover: #FFFFFFFF;
                --plyr-menu-color: #4a5464;
                --live-indicator-color: #fc2d2d;
                -webkit-font-smoothing: antialiased;
                direction: ltr;
                white-space: nowrap;
                box-sizing: inherit;
                background: 0 0;
                border: 0;
                border-radius: 3px;
                cursor: pointer;
                flex-shrink: 0;
                overflow: visible;
                position: relative;
                transition: all .3s ease;
                font: inherit;
                line-height: inherit;
                touch-action: manipulation;
                margin-top: 2px;
                align-items: center;
                color: var(--plyr-menu-color, #4a5464);
                display: flex;
                font-size: 13px !important;
                padding-bottom: calc(calc(10px * .7)/ 1.5);
                padding-left: calc(calc(10px * .7) * 1.5);
                padding-top: calc(calc(10px * .7)/ 1.5);
                user-select: none;
                width: 100% !important;
                padding-right: calc(calc(10px * .7) * 4);
            }

            .customSettingsBtn:hover {
            color: #fff;
            }
            .small-muted-icon {
                width: 200px;
                position: absolute;
                top: 10px;
                left: 10px;
                background-color: var(--plyr-color-main);
                opacity: 0.8;
                display: flex;
                color: var(--plyr-video-control-color);
                align-items: center;
                border: 1px solid var(--plyr-video-control-color);
                border-radius: 3px;
            }
            button.small-muted-icon:after {
                display: block;
                width: 99999px;
                height: 99999px;
                position: absolute;
                content: '';
            }
            .small-muted-icon svg {
                width: 50px;
                height: 50px;
            }
            .small-muted-icon span{
                padding: 0 10px;
                font-weight: bold;
            }

            .blur {
                visibility: visible;
                position: absolute;
                top: 0;
                z-index: -1;
                filter: blur(4px);
                -webkit-filter: blur(4px);
            }

            button.panda-muted-indicator {
                position: absolute;
                top: 50%;
                left: 50%;
                width: 80%;
                max-width: 400px;
                height: auto;
                border-radius: 10px;
                background-color: var(--muted-indicator-background);
                border: var(--muted-indicator-border-size) solid var(--muted-indicator-text);
                padding: 0.5em;
                text-align: center;
                transform: translate(-50%, -50%);
                z-index: 9999999;
                outline: none;
                cursor: pointer;
            }
            button.panda-muted-indicator:after {
                content: '';
                position: absolute;
                display: block;
                width: 99999px;
                height: 99999px;
            }
            button.panda-muted-indicator span {
                display: block;
                width: 100%;
                padding: 0.5em 0;
                box-sizing: border-box;
                font-family: Arial, Helvetica, sans-serif;
                font-size: 24px;
                font-weight: 700;
                text-align: center;
                color: var(--muted-indicator-text);
                white-space: normal;
                line-height: 1.1em;
            }
            button.panda-muted-indicator-big-text span {
                font-size: 22px;
            }
            button.panda-muted-indicator svg {
                width: 36%;
                height: auto;
            }
            button.panda-muted-indicator svg,
            button.panda-muted-indicator svg path,
            button.panda-muted-indicator svg polygon {
                fill: var(--muted-indicator-text);
            }
            button.panda-muted-indicator.medium {
                transform: translate(-50%, -50%) scale(1.35);
                transform-origin: center;
            }
            button.panda-muted-indicator.large {
                width: 100%;
                max-width: 100%;
                height: 100%;
                border-radius: 0;
            }
            button.panda-muted-indicator.large svg {
                width: 24%;
            }
            button.panda-muted-indicator.large span {
                font-size: 250%;
            }
            @media(max-width: 680px) {
                button.panda-muted-indicator svg {
                    width: 30%;
                }
                button.panda-muted-indicator span,
                button.panda-muted-indicator.large span {
                    font-size: 20px;
                }
                button.panda-muted-indicator-big-text span,
                button.panda-muted-indicator-big-text.large span {
                    font-size: 16px;
                    line-height: 1em;
                }
            }
            @media(max-width: 380px) {
                button.panda-muted-indicator svg {
                    width: 25%;
                }
                button.panda-muted-indicator span,
                button.panda-muted-indicator.large span {
                    font-size: 16px;
                    line-height: 1em;
                }
                button.panda-muted-indicator-big-text span,
                button.panda-muted-indicator-big-text.large span {
                    font-size: 12px;
                    line-height: 1em;
                }
            }

            button.panda-muted-indicator-impact-wrapper {
                --size-width: 80%;
                --size-height: 218px;
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                z-index: 9999999;
                display: flex;
                width: 100%;
                height: 100%;
                padding: 0;
                border: none;
                background: rgba(0, 0, 0, 0);			
                flex-direction: column;
                align-items: center;
                justify-content: center;
                outline: none;
                cursor: pointer;
                overflow: hidden;
            }
            button.panda-muted-indicator-impact-wrapper:after {
                content: '';
                position: absolute;
                display: block;
                width: 100%;
                height: 100%;
            }
            button.panda-muted-indicator-impact-wrapper .text {
                position: absolute;
                display: block;
                width: calc(80% - 0.5em);
                max-width: calc(400px - 0.5em);
                padding: 0.5em 0;
                box-sizing: border-box;
                font-family: Arial, Helvetica, sans-serif;
                font-size: 24px;
                font-weight: 700;
                text-align: center;
                color: var(--muted-indicator-text);
                white-space: normal;
                line-height: 1.1em;
            }
            button.panda-muted-indicator-impact-wrapper-big-text .text {
                font-size: 22px;
            }
            button.panda-muted-indicator-item .text.small-text {
                padding: 0.7em 0;
            }
            button.panda-muted-indicator-item .text.large-text {
                padding: 0;
            }
            button.panda-muted-indicator-item span.small-text {
                padding: 10px 0;
            }
            button.panda-muted-indicator-item span.large-text {
                padding: 8px 0;
            }
            button.panda-muted-indicator-impact-wrapper .text.top,
            button.panda-muted-indicator-impact-wrapper-big-text .text.top {
                top: calc((50% - var(--size-height) / 2) + 0.5em - var(--muted-indicator-border-size));
            }
            button.panda-muted-indicator-impact-wrapper .text.bottom,
            button.panda-muted-indicator-impact-wrapper-big-text .text.bottom {
                bottom: calc((50% - var(--size-height) / 2) + 0.5em - var(--muted-indicator-border-size));
            }
            button.panda-muted-indicator-impact-wrapper .panda-muted-indicator-impact-wrapper-canvas {
                position: absolute;
                top: 50%;
                left: 50%;
                z-index: -1;
                width: 80%;
                max-width: 400px;
                height: var(--size-height);
                background-color: var(--muted-indicator-background);
                border-radius: 10px;
                box-sizing: border-box;
                border: var(--muted-indicator-border-size) solid var(--muted-indicator-text);
                transform: translate(-50%, -50%);
                transform-origin: center;
            }
            button.panda-muted-indicator-impact-wrapper svg {
                position: absolute;
                width:var(--size-width);
                max-width: 400px;
            }
            button.panda-muted-indicator-impact-wrapper.medium {
                transform: scale(1.35);
            }
            button.panda-muted-indicator-impact-wrapper.large .panda-muted-indicator-impact-wrapper-canvas {
                --size-width: 100%;
                --size-height: 100%;
                width: 100%;
                max-width: 100%;
                border-radius: 0;
            }
            button.panda-muted-indicator-impact-wrapper.large {
                --size-width: 65%;
            }
            button.panda-muted-indicator-impact-wrapper.large svg {
                max-width: 500px;
            }
            button.panda-muted-indicator-impact-wrapper.large .text {
                font-size: 225%;
                width: 90%;
            }
            button.panda-muted-indicator-impact-wrapper.large .text.top {
                top: calc((var(--size-width) / 3) - 0.5em);
            }
            button.panda-muted-indicator-impact-wrapper.large .text.bottom {
                bottom: calc((var(--size-width) / 3) - 0.5em);
            }
            @media(max-width: 680px) {
                button.panda-muted-indicator-impact-wrapper {
                    --size-height: 185px;
                }
                button.panda-muted-indicator-impact-wrapper svg {
                    --size-width: 65%;
                }
                button.panda-muted-indicator-impact-wrapper.medium {
                    transform: scale(1.15);
                }
                button.panda-muted-indicator-impact-wrapper .text,
                button.panda-muted-indicator-impact-wrapper.large .text {
                    font-size: 20px;
                }
                button.panda-muted-indicator-impact-wrapper-big-text .text,
                button.panda-muted-indicator-impact-wrapper-big-text.large .text {
                    font-size: 16px;
                    line-height: 1em;
                }
            }
            @media(max-width: 380px) {
                button.panda-muted-indicator-impact-wrapper {
                    --size-height: 140px;
                }
                button.panda-muted-indicator-impact-wrapper svg {
                    --size-width: 52.5%;
                }
                button.panda-muted-indicator-impact-wrapper.medium {
                    transform: initial;
                }
                button.panda-muted-indicator-impact-wrapper .text,
                button.panda-muted-indicator-impact-wrapper.large .text {
                    font-size: 16px;
                    line-height: 1em;
                }
                button.panda-muted-indicator-impact-wrapper-big-text .text,
                button.panda-muted-indicator-impact-wrapper-big-text.large .text {
                    font-size: 12px;
                    line-height: 1em;
                }
            }
            .panda-muted-indicator-custom{
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                border: none;
                z-index: 999;
                outline: 0;
            }
            #trial-warning{
                position: absolute;
                bottom: 50px;
                right: 30px;
                color: white;
                text-align: center;
                background: rgba(0,0,0,0.5);
                opacity: 0.7;
                font-size: 0.8rem;
                padding: 5px 10px;
            }
            @media(max-width: 680px) {
                #trial-warning{
                    font-size: 0.7rem;
                }
            }
            @media(max-width: 380px) {
                #trial-warning{
                    font-size: 0.5rem;
                }
            }</style><title>Panda Video - Hospedagem de video</title><style><br>        .plyr__captions {<br>            font-size: 20px;<br>        }<br><br>        @media (min-width: 480px) {<br>            .plyr__captions {<br>                font-size: 20px;<br>            }<br>        }<br><br>        @media (max-width: 480px) {<br>            .plyr__captions {<br>                font-size: 20px;<br>            }<br>        }<br><br>        @media (max-width: 460px) {<br>            .plyr__captions {<br>                font-size: 14px;<br>            }<br>        }<br><br>        @media (min-width: 768px) {<br>            .plyr__captions {<br>                font-size: 23px;<br>            }<br>        }<br><br>        @media (min-width: 1024px) {<br>            .plyr:-webkit-full-screen .plyr__captions, .plyr:fullscreen .plyr__captions, .plyr__captions {<br>                font-size: 26px;<br>            }<br>        }<br>    </style></head><body id="body" class="vsc-initialized"><script>/*! For license information please see main.1172.bundle.js.LICENSE.txt */
(()=>{var e={500:(e,t,n)=>{var r={"./en.json":700,"./es.json":980,"./pt.json":193};function o(e){var t=a(e);return n(t)}function a(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=a,e.exports=o,o.id=500},700:e=>{"use strict";e.exports=JSON.parse('{"restart":"Restart","rewind":"Rewind {seektime}s","play":"Play","pause":"Pause","fastForward":"Forward {seektime}s","seek":"Search","seekLabel":"{currentTime} of {duration}","played":"Played","buffered":"Buffered","currentTime":"Current time","duration":"Duration","volume":"Volume","mute":"No sound","unmute":"With sound","enableCaptions":"Enable Captions","disableCaptions":"Disable Captions","download":"Transfer","enterFullscreen":"Enter fullscreen mode","exitFullscreen":"Exit full screen mode","frameTitle":"Reader for {title}","captions":"Subtitles","settings":"Settings","pip":"PIP","menuBack":"Back to previous menu","speed":"Speed","normal":"Normal","quality":"Quality","loop":"Repeat","start":"Start","end":"End","all":"All","reset":"Reset","disabled":"Disabled","enabled":"Enabled","advertisement":"Advertisement","qualityBadge":{"480":"SD","576":"SD","720":"HD","1080":"HD","1440":"HD","2160":"4K"},"keepWatching":"Continue watching","reportModalTitle":"Report error","reportModalOption1":"Video does not load even with good internet connection","reportModalOption2":"The video content does not match the description","reportModalOption3":"Video is low quality or pixelated","reportModalOption4":"Other","reportModalField":"Describe your problem...","reportModalAction1":"Submit","reportModalAction2":"Cancel","reportModalText1":"Please wait a moment, your feedback","reportModalText2":"is being sent.","reportModalText3":"Thanks for helping us improve!","chapters":"Chapters","aboutPanda":"About Panda Video","aboutPandaLink":"https://pandavideo.com/","waitingForLive":"WAITING FOR LIVE STREAM","activateSound":"ACTIVATE SOUND","watermark_question":"Enter your access key","trialWarning":"Panda Video trial mode.<br>Start billing to remove this message."}')},980:e=>{"use strict";e.exports=JSON.parse('{"restart":"Reiniciar","rewind":"Rebobinar {seektime}s","play":"Tocar","pause":"Pausa","fastForward":"Adelante {seektime}s","seek":"Buscar","seekLabel":"{currentTime} de {duration}","played":"Reproducido","buffered":"Buffered","currentTime":"Hora actual","duration":"Duración","volume":"Volumen","mute":"Sin sonido","unmute":"Con sonido","enableCaptions":"Habilitar subtítulos","disableCaptions":"Deshabilitar subtítulos","download":"Transferir","enterFullscreen":"Entrar en modo de pantalla completa","exitFullscreen":"Salir del modo de pantalla completa","frameTitle":"Lector de {title}","captions":"Subtítulos","settings":"Configuraciones","pip":"PIP","menuBack":"Volver al menú anterior","speed":"Velocidad","normal":"normal","quality":"Calidad","loop":"Repetir","start":"Inicio","end":"Fin","all":"Todos","reset":"Restablecer","disabled":"Deshabilitado","enabled":"Habilitado","advertisement":"Anuncio","qualityBadge":{"480":"SD","576":"SD","720":"HD","1080":"HD","1440":"HD","2160":"4K"},"keepWatching":"Continuar viendo","reportModalTitle":"Informe de error","reportModalOption1":"El video no se carga incluso con una buena conexión a Internet","reportModalOption2":"El contenido del video no coincide con la descripción","reportModalOption3":"El video es de baja calidad o está pixelado","reportModalOption4":"Otro","reportModalField":"Describe tu problema...","reportModalAction1":"Enviar","reportModalAction2":"Cancelar","reportModalText1":"Por favor, espere un momento, sus comentarios","reportModalText2":"se está enviando.","reportModalText3":"¡Gracias por ayudarnos a mejorar!","chapters":"Capítulos","aboutPanda":"Acerca del Panda Video","aboutPandaLink":"https://pandavideo.com/","waitingForLive":"ESPERANDO TRANSMISIÓN EN VIVO","activateSound":"ACTIVAR SONIDO","watermark_question":"Ingrese su clave de acceso","trialWarning":"Modo de prueba de video de Panda.<br>Comience la facturación para eliminar este mensaje."}')},193:e=>{"use strict";e.exports=JSON.parse('{"restart":"Reiniciar","rewind":"Recuar {seektime}s","play":"Reproduzir","pause":"Pausar","fastForward":"Avançar {seektime}s","seek":"Procurar","seekLabel":"{currentTime} de {duration}","played":"Reproduzido","buffered":"Colocado na memória intermédia","currentTime":"Tempo atual","duration":"Duração","volume":"Volume","mute":"Sem som","unmute":"Com som","enableCaptions":"Ativar legendas","disableCaptions":"Desativar legendas","download":"Transferir","enterFullscreen":"Entrar no modo de ecrã inteiro","exitFullscreen":"Sair do modo de ecrã inteiro","frameTitle":"Leitor para {title}","captions":"Legendas","settings":"Definições","pip":"PIP","menuBack":"Voltar ao menu anterior","speed":"Velocidade","normal":"Normal","quality":"Qualidade","loop":"Repetir","start":"Início","end":"Fim","all":"Tudo","reset":"Repor","disabled":"Desativado","enabled":"Ativado","advertisement":"Anúncio","qualityBadge":{"480":"SD","576":"SD","720":"HD","1080":"HD","1440":"HD","2160":"4K"},"keepWatching":"Continuar assistindo","reportModalTitle":"Reportar erro","reportModalOption1":"O vídeo não carrega, mesmo com boa conexão de internet","reportModalOption2":"O conteúdo do vídeo não corresponde com a descrição","reportModalOption3":"O vídeo está em baixa qualidade ou pixelado","reportModalOption4":"Outro","reportModalField":"Descreva seu problema...","reportModalAction1":"Enviar","reportModalAction2":"Cancelar","reportModalText1":"Aguarde um momento, seu feedback","reportModalText2":"está sendo enviado.","reportModalText3":"Obrigado por nos ajudar a melhorar!","chapters":"Capítulos","aboutPanda":"Sobre a Panda Video","aboutPandaLink":"https://pandavideo.com.br/","waitingForLive":"AGUARDANDO LIVE STREAM","activateSound":"ATIVAR SOM","watermark_question":"Digite sua chave de acesso","trialWarning":"Panda Video período de teste.<br>Inicie o plano para remover esta mensagem."}')}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(){"use strict";i=function(){return t};var t={},n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function d(e,t,n,r){var o=t&&t.prototype instanceof m?t:m,a=Object.create(o.prototype),i=new E(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return{value:void 0,done:!0}}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=C(i,n);if(c){if(c===u)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=p(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(e,n,i),a}function p(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=d;var u={};function m(){}function f(){}function y(){}var g={};s(g,a,(function(){return this}));var v=Object.getPrototypeOf,h=v&&v(v(I([])));h&&h!==n&&r.call(h,a)&&(g=h);var b=y.prototype=m.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(t,n){function o(a,i,c,l){var s=p(t[a],t,i);if("throw"!==s.type){var d=s.arg,u=d.value;return u&&"object"==e(u)&&r.call(u,"__await")?n.resolve(u.__await).then((function(e){o("next",e,c,l)}),(function(e){o("throw",e,c,l)})):n.resolve(u).then((function(e){d.value=e,c(d)}),(function(e){return o("throw",e,c,l)}))}l(s.arg)}var a;this._invoke=function(e,t){function r(){return new n((function(n,r){o(e,t,n,r)}))}return a=a?a.then(r,r):r()}}function C(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,C(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=p(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function I(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return f.prototype=y,s(b,"constructor",y),s(y,"constructor",f),f.displayName=s(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},w(_.prototype),s(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new _(d(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},w(b),s(b,l,"Generator"),s(b,a,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=I,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return i.type="throw",i.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;k(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}function c(e,t,n,r,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){c(a,r,o,i,l,"next",e)}function l(e){c(a,r,o,i,l,"throw",e)}i(void 0)}))}}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function d(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}window.pandaLoad=window.pandaLoad||{};try{Sentry.init({dsn:"https://2352194d4d5041f997f5c3204c13c862@o1279024.ingest.sentry.io/6479348",release:"player@1172",integrations:[new Sentry.BrowserTracing],tracesSampleRate:0,beforeSend:function(e,t){if(t.originalException){var n=t.originalException.message;return n&&["this.enter is not a function","Not 2xx response","Failed to fetch","The play() request was interrupted by a call to pause(). https://goo.gl/LdLk22","The play() request was interrupted by a new load request. https://goo.gl/LdLk22","play() failed because the user didn't interact with the document first","The request is not allowed by the user agent or the platform in the current context, possibly because the user denied permission.","play() can only be initiated by a user gesture.","Load failed","play() can only be initiated by a user gesture.","play() failed because the user didn't interact with the document first. https://goo.gl/xX8pDD","AbortError: The operation was aborted.","NetworkError when attempting to fetch resource.","fetch(...).then(...).then(...).catch(...).finally is not a function","Failed to execute 'exitFullscreen' on 'Document': Document not active","Permissions check failed","fullscreen error","The play method is not allowed by the user agent or the platform","The play() request was interrupted because video-only","The operation was aborted","AbortError:"].find((function(e){return-1!==n.indexOf(e)}))?null:e}}})}catch(e){}var u,m;function f(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t}function y(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=Number(e.charCodeAt(n)).toString(16);t.push(o)}return t.join("")}void 0!==document.hidden?(u="hidden",m="visibilitychange"):void 0!==document.msHidden?(u="msHidden",m="msvisibilitychange"):void 0!==document.webkitHidden&&(u="webkitHidden",m="webkitvisibilitychange");var g=new URL(location.href),v="https://api-v2.pandavideo.com.br",h="https://config.tv.pandavideo.com.br",b="https://thumbs.tv.pandavideo.com.br",w=Hls&&Hls.isSupported(),_=[".cdn1.pandavideo.com",".b-cdn.net"],C=["fragLoadError","fragLoadTimeOut","fragParsingError"],x=!1,k=0,E=g.searchParams.get("v"),I=!1,T=g.searchParams.get("l"),L=g.searchParams.get("j"),M=!1,P="true"===g.searchParams.get("isLive");E&&-1!==E.indexOf(y("live"))&&(P=!0),E&&-1!==E.indexOf(y("comp"))&&(M=E,E=null);var S=!1,B=!1,A=!0,O="true"===g.searchParams.get("isDashboard"),N=g.searchParams.get("title"),z=g.searchParams.get("refreshConfig"),q=!document[u],D="false"!==g.searchParams.get("preload"),F=!0;"false"===g.searchParams.get("preloadUserAgentChecker")&&(F=!1),F&&["Kwai_Pro"].some((function(e){return-1!==navigator.userAgent.indexOf(e)}))&&(D=!1),q||(D=!1);var H,j,R,V=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),W=/(iPhone|iPod|iPad)/i.test(navigator.platform),G=!1,U=g.searchParams.get("watermark"),Y=g.searchParams.get("drm_group_id"),K="NOT_LIVE",Z=!1,J=(g.searchParams.get("liveBadge"),[]),X=document.querySelector(":root"),$=!1,Q=!1,ee=!1,te=!1,ne="https://hit-video.pandavideo.com:6443",re=f(),oe=[],ae=function(){var e=location.host,t="pt";try{e.match(/.com$/)&&(t="en")}catch(e){}return t}(),ie=n(500),ce={},le=s(ie.keys());try{for(le.s();!(H=le.n()).done;){var se=H.value,de=se.match(/([A-Za-z0-9-_]+)\./i);if(de&&de.length>1){var pe=(j=de,R=2,function(e){if(Array.isArray(e))return e}(j)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(j,R)||d(j,R)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[1];ce[pe]=ie(se)}}}catch(e){le.e(e)}finally{le.f()}var ue,me=[],fe={fullscreen:{enabled:!0,fallback:!0,iosNative:!0},hideControls:!0,captions:{active:!0,language:"",update:!0},controls:["play-large","play","progress","current-time","duration","mute","volume","settings","pip","fullscreen"],keyboard:{focused:!0,global:!1},i18n:ce[ae],iconUrl:"./icons/plyr.svg",thumbnail:{enabled:!1,pic_num:0,width:300,height:168,col:6,row:6,offsetX:0,offsetY:0,urls:[]}},ye=(g.host,(ue=new RegExp("^player-(.+).tv.pandavideo.com")).test(g.host)?ue.exec(g.host)[1]:null);ye&&(T=ye);var ge,ve,he="";try{ge=localStorage.getItem("playerUser")}catch(e){}if(ge)he=ge;else{he="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}));try{localStorage.setItem("playerUser",he)}catch(e){}}function be(){try{nt(document.getElementById("copy-paste"),"disabled"),document.getElementById("report-close-dialog-btn").onclick=Ce,document.getElementById("radio-section").addEventListener("click",(function(e){e.target&&e.target.matches("input[type='radio']")&&("report-other"===document.querySelector('input[name="issue-reported"]:checked').value?(nt(document.getElementById("other-input-wrapper"),"disabled"),document.getElementById("other-input").focus()):tt(document.getElementById("other-input-wrapper"),"disabled"))})),document.getElementById("report-second-step-btn").onclick=l(i().mark((function e(){var t,n,r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,tt(document.getElementById("report-first-step"),"disabled"),nt(document.getElementById("report-second-step"),"disabled"),t=document.querySelector('input[name="issue-reported"]:checked').value,n=ke(t),r="player-"+t,e.next=8,we();case 8:if(o=e.sent,n+="latencies: ".concat(JSON.stringify(o),"\n"),a="","report-other"===t)try{a=document.getElementById("other-input").value}catch(e){}Sentry.withScope((function(e){e.setTag("section","".concat(r)),e.setLevel("error"),Sentry.addBreadcrumb({category:"user/player info",message:"".concat(n),level:"info"}),Sentry.captureException(new Error("USER PLAYER REPORT ".concat(a)))})),xe(),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})))}catch(e){xe()}}function we(){return _e.apply(this,arguments)}function _e(){return _e=l(i().mark((function e(){var t,n,r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],n=["BR","RJ"],r=i().mark((function e(){var n,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return zone=a[o],n=(new Date).valueOf(),r="https://edgezone-"+zone.toLowerCase()+".bunnyinfra.net/500b.jpg",e.next=5,fetch(r).then(function(){var e=l(i().mark((function e(o){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(new Date).valueOf(),e.next=3,fetch(r).then(function(){var e=l(i().mark((function e(r){var o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(new Date).valueOf(),a=o-n,e.next=4,fetch("https://video-91.bunnycdn.com/.metrics/track-performance?zone="+zone+"&latency="+a);case 4:t.push({zone:zone.toLowerCase(),latency:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){}));case 5:case"end":return e.stop()}}),e)})),o=0,a=n;case 4:if(!(o<a.length)){e.next=9;break}return e.delegateYield(r(),"t0",6);case 6:o++,e.next=4;break;case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)}))),_e.apply(this,arguments)}function Ce(){try{tt(document.getElementById("copy-paste"),"disabled"),nt(document.getElementById("report-first-step"),"disabled"),tt(document.getElementById("report-second-step"),"disabled"),tt(document.getElementById("report-third-step"),"disabled"),tt(document.getElementById("other-input-wrapper"),"disabled"),document.getElementById("other-input-wrapper").value="",document.getElementById("report-not-loading").checked=!0}catch(e){console.log("e",e)}}function xe(){try{document.getElementById("report-ok-btn").onclick=Ce,tt(document.getElementById("report-second-step"),"disabled"),nt(document.getElementById("report-third-step"),"disabled")}catch(e){}}function ke(e){var t={timestamp:(new Date).toISOString()};if(t.option=e,"report-other"===e)try{var n=document.getElementById("other-input").value;t.reasoning=n}catch(e){}try{t.autoplay=window.player.autoplay}catch(e){}try{t.videoId=E}catch(e){}try{t.libraryId=T}catch(e){}try{t.currentTime=window.player.currentTime}catch(e){}try{t.duration=window.player.duration}catch(e){}try{t.volume=window.player.volume}catch(e){}try{t.config=JSON.stringify(window.player_configs)}catch(e){}try{t.playerUser=localStorage.getItem("playerUser")}catch(e){}var r="";for(var o in t)r+="".concat(o,": ").concat(t[o],"\n");return r}function Ee(e){e&&window.player_configs.troubleshootDialog&&(e.addEventListener("contextmenu",Ie,!1),e.addEventListener("click",Te,!1))}function Ie(e){if(!e.target.closest("#report-problem-dialog")){e.preventDefault();var t=document.getElementById("context-menu");t&&(nt(t,"disabled"),window.innerWidth-e.clientX<175?t.style.left=e.clientX-175+"px":t.style.left=e.clientX+"px",window.innerHeight-e.clientY<75?t.style.top=e.clientY-75+"px":t.style.top=e.clientY+"px")}}function Te(){tt(document.getElementById("context-menu"),"disabled")}if(function(){var e="https://b-"+T+".tv.pandavideo.com.br/"+E+"/playlist.m3u8";U&&(e+=".beta?watermark="+U),P&&(e+=".live",O&&(e+="?live_without_cdn=1"));var t='src="'+e+'"';(L||M)&&(t="");var n="true"===g.searchParams.get("autoplay");document.write('\n        <div class="container" id="video-container">\n            \x3c!-- Loading indicator --\x3e\n            <div id="error-indicator" class="disabled">\n\n            </div>\n            <div class="loading-icon">\n                <svg x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve">\n                    <path fill="#4874F1"\n                        d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">\n                        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s"\n                            from="0 50 50" to="360 50 50" repeatCount="indefinite" />\n                    </path>\n                </svg>\n            </div>\n\n            \x3c!-- Live --\x3e\n            <div class="live-offline-badge disabled">\n\n                <img src="icons/panda-icon.svg" alt="">\n                <p id="live-subtitle">AGUARDANDO LIVE STREAM</p>\n                <p id="live-title"></p>\n            </div>\n            <div class="live-thumb disabled">\n                <img src="#" alt="Live Offline">\n            </div>\n        </div>\n    '),document.addEventListener("DOMContentLoaded",(function(){L||M||(window.pandatag?window.pandatag("videoHtmlLoaded",!0):window.pandaLoad.videoHtmlLoaded=!0)}));var r=(new DOMParser).parseFromString('<video controls crossorigin preload="auto" '.concat(n?"autoplay muted":"",' playsinline ><source type="application/x-mpegURL" ').concat(t,"></video>"),"text/html").body.firstChild,o=document.getElementById("video-container");o.insertBefore(r,o.getElementsByTagName("div")[0]),function(){!function(){try{var e=document.getElementById("context-menu");e&&e.remove()}catch(e){}}();try{if(!f()){var e=document.createElement("div");e.id="context-menu",tt(e,"disabled"),e.innerHTML='<ul> <li> <a href="'.concat(ce[ae].aboutPandaLink,'" target="_blank" id="about-panda">').concat(ce[ae].aboutPanda,'</a> </li><li> <button id="report-problem">').concat(ce[ae].reportModalTitle,"</button> </li></ul>"),document.getElementById("video-container").insertAdjacentElement("beforeend",e),document.getElementById("report-problem").onclick=function(){window.postMessage({type:"pause"},"*"),be(),Te()}}}catch(e){}}()}(),!function(){try{return window.self!==window.top}catch(e){return!0}}()){var Le=document.getElementById("video-container");Le&&(tt(Le,"in-page-container"),document.getElementById("body").style.backgroundColor="#000")}function Me(e,t){var n=document.getElementsByClassName("plyr__controls")[0];if(player_configs.controls.includes("fullscreen")&&t){var r=n.childNodes;n.insertBefore(e,r[r.length-1])}else n.appendChild(e)}function Pe(){for(var e=document.querySelector(".plyr__menu__container div").children,t=null,n=0;n<e.length;n++)if(/quality/.test(e[n].id)){t=e[n];break}if(t){var r=t.querySelector('div button[value="0"] span'),o=t.querySelector('div button[value="10"] span');r&&(r.innerText="Auto"),o&&(o.innerText="Source")}for(var a=null,i=0;i<e.length;i++)if(/home/.test(e[i].id)){a=e[i];break}var c=a.querySelector("div button:nth-child(2) .plyr__menu__value");c&&"10p"===c.innerText&&(c.innerText="Source")}function Se(){var e=document.querySelector(".small-muted-icon");e&&tt(e,"disabled")}function Be(){var e=document.querySelector(".panda-muted-indicator-item");if(e){if(te=!0,player_configs.mutedIndicatorClickRestart){var t=0;try{t=parseInt(localStorage.getItem("panda_video:"+E))}catch(e){}isNaN(t)&&(t=0),window.postMessage({type:"currentTime",parameter:t},"*")}window.postMessage({type:"increaseVolume",parameter:1},"*"),window.postMessage({type:"play"},"*"),e.style.display="none";try{$e({mutedIndicator:!0})}catch(e){}var n=document.getElementById("wrapper-progress");n&&nt(n,"disabled"),player_configs.playOpensFullscreenNative?window.player.fullscreen.enter():window.parent.postMessage({message:"panda_open_window_fullscreen",video:E},"*")}}function Ae(){var e=window.player_configs.mutedIndicatorTextTop,t=window.player_configs.mutedIndicatorTextBottom;if(0!==document.getElementsByClassName("plyr--full-ui").length){var n=document.getElementsByClassName("plyr--full-ui")[0],r=document.createElement("button"),o='<svg class="impact" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 200" xml:space="preserve"><style>.fg-color{fill:var(--muted-indicator-text)}.bg-color{fill:var(--muted-indicator-background)}.line,.volume,.wave{transform:scale(1);transform-box:fill-box;transform-origin:center;}</style><filter id="panda-muted-indicator-impact-wrapper-highlight"><feDropShadow dx="0" dy="0" stdDeviation="1" flood-color="var(--muted-indicator-text)"/></filter><g class="adjustable fg" style="--darkreader-inline-fill:#ffffff"><path class="volume fg-color" d="M169.8 85.5h-23c-1.9 0-3.1 1.2-3.1 3.1v26.5c0 1.9 1.2 3.1 3.1 3.1h23l19.3 18.4V68.7c.3 0-19.3 16.8-19.3 16.8z"/><path class="wave fg-color" d="M205.9 127.8c-1.2-1.2-.9-3.4.3-5 9.6-12.1 9.6-29.3 0-41.1-1.2-1.6-1.2-3.7-.3-5 1.2-1.2 3.7-.9 5 .9 11.5 14.3 11.5 34.9 0 48.9-1.4 2.6-3.8 2.6-5 1.3z"/><path class="wave fg-color" d="M223.9 138.4c-1.2-1.2-.9-3.4.3-5 14.6-17.1 14.6-42.3 0-59.4-1.2-1.6-1.6-3.7-.3-5 1.2-1.2 3.4-.9 5 .9 16.5 19.3 16.5 48.2 0 67.5-1.5 2.2-3.8 2.6-5 1z"/><path class="wave fg-color" d="M241.6 149.3c-1.2-1.2-.9-3.4.3-5 21.2-24 21.2-60.1 0-84-1.2-1.2-1.6-3.1-.3-4.4 1.2-1.2 3.4-.9 5 .6 23.3 26.1 23.3 66 0 92.1-1.2 1.9-3.7 2.2-5 .7z"/><path class="line bg-color" d="M274 141.2c-.3-1.6-1.2-3.1-2.8-4L135.6 50.6c-.9-.6-2.2-.9-3.4-.9-2.2 0-4 .9-5.3 2.8-.9 1.6-1.2 3.1-.9 4.7.3 1.6 1.2 3.1 2.8 4l135.4 86.2c.9.6 2.2.9 3.4.9 2.2 0 4-.9 5.3-2.8 1.1-.9 1.4-2.7 1.1-4.3z"/><path class="line fg-color" d="M267.8 145.9c-.6 0-1.2-.3-1.6-.6L130.9 58.4c-1.6-.9-1.9-2.8-.9-4 .9-1.6 2.8-1.9 4-.9l135.4 86.2c1.6.9 1.9 2.8.9 4.4-.7.8-1.5 1.8-2.5 1.8z"/></g></svg>';o+='<svg class="blink" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 200" xml:space="preserve"><style>.fg-color{fill:var(--muted-indicator-text)}.bg-color{fill:var(--muted-indicator-background)}.line,.volume,.wave{transform:scale(1);transform-box:fill-box;transform-origin:center;}</style><g class="adjustable fg" style="--darkreader-inline-fill:#ffffff"><path class="volume fg-color" d="M189.1 68.7c.2 0-5.4 4.8-10.6 9.3l10.6 6.8V68.7z"/><path class="volume fg-color" d="M146.8 85.5c-1.9 0-3.1 1.2-3.1 3.1v26.5c0 1.9 1.2 3.1 3.1 3.1h23l19.3 18.4v-37L167 85.5h-20.2z"/><path class="wave blink_impact_1 fg-color" d="M206.2 122.8c-1.2 1.6-1.5 3.8-.3 5 1.2 1.3 3.6 1.3 5-1.3 2.4-2.9 4.3-6.1 5.7-9.4l-5.3-3.4c-1.2 3.2-2.9 6.3-5.1 9.1z"/><path class="wave blink_impact_1 fg-color" d="M210.9 77.6c-1.3-1.8-3.8-2.1-5-.9-.9 1.3-.9 3.4.3 5 4.4 5.4 6.7 11.9 7.1 18.5l6.1 3.9c.5-9.3-2.3-18.8-8.5-26.5z"/><path class="wave blink_impact_2 fg-color" d="M224.2 133.4c-1.2 1.6-1.5 3.8-.3 5 1.2 1.6 3.5 1.2 5-1 2.3-2.7 4.3-5.6 6-8.7l-5.2-3.3c-1.5 2.8-3.4 5.5-5.5 8z"/><path class="wave blink_impact_2 fg-color" d="M228.9 69.9c-1.6-1.8-3.8-2.1-5-.9-1.3 1.3-.9 3.4.3 5 9.6 11.2 12.9 25.9 9.9 39.5l5.5 3.5c4.2-16.1.6-33.9-10.7-47.1z"/><path class="wave blink_impact_3 fg-color" d="M241.9 144.3c-1.2 1.6-1.5 3.8-.3 5 1.3 1.5 3.8 1.2 5-.7 2.4-2.6 4.5-5.4 6.4-8.4l-5.4-3.4c-1.7 2.6-3.6 5.1-5.7 7.5z"/><path class="wave blink_impact_3 fg-color" d="M246.6 56.5c-1.6-1.5-3.8-1.8-5-.6-1.3 1.3-.9 3.2.3 4.4 16.2 18.3 20 43.8 11.4 65.5l5.5 3.5c9.9-24 5.9-52.6-12.2-72.8z"/><path class="line fg-color" d="m269.4 139.7-11.9-7.6-5.4-3.5-13.4-8.5-5.4-3.4-14.1-9-5.8-3.7-24.2-15.4-13.2-8.4-42-26.7c-1.2-1-3.1-.7-4 .9-1 1.2-.7 3.1.9 4l40.3 25.9 17.9 11.5 23.2 14.9 5.4 3.4 13.4 8.6 5.2 3.4 12.9 8.3 5.4 3.5 11.7 7.5c.4.3 1 .6 1.6.6 1 0 1.8-1 2.5-1.8.9-1.7.6-3.6-1-4.5z"/></g></svg>',(e.length>18||t.length>18)&&tt(r,"panda-muted-indicator-impact-wrapper-big-text"),o='<span class="panda-muted-indicator-impact-wrapper-canvas"></span>'+o,e&&(o='<span class="text top">'+e+"</span>"+o),t&&(o=o+'<span class="text bottom">'+t+"</span>"),r.innerHTML=o,tt(r,"panda-muted-indicator-impact-wrapper"),tt(r,"panda-muted-indicator-item"),tt(r,"animate"),tt(r,player_configs.mutedIndicatorSize);var a=player_configs.controls.filter((function(e){return"play-large"!==e}));W&&a.length&&player.on("controlsshown",(function(){te||Be()})),r.onclick=function(){Be()};var i=document.querySelector('button[data-plyr="play"].plyr__control--overlaid');i&&tt(i,"disabled");var c=function(e){return 100*e/(1e3*d)+"%"},l=function(e,t){return"IMPACT_"+e+"{0%{opacity:0;transform:scale(4);}"+c(850*t/1e3)+"{opacity:1;}"+c(t)+",100%{opacity:1;transform:scale(1);}}"},s=window.player_configs.mutedIndicatorLoop,d=window.player_configs.mutedIndicatorLoopDuration,p=document.createElement("style"),u="        @keyframes BLINK_IMPACT{0%,100%{opacity:0;}33%,66%{opacity:1;}}        @keyframes HIGHLIGHT{0%,100%{filter:url(#panda-muted-indicator-impact-wrapper-highlight);}}        @keyframes OPACITY_0{0%,100%{opacity:0;}}        @keyframes OPACITY_1{0%,100%{opacity:1;}}        @keyframes SVG_WRAPPER{0%{width:100%;max-width:100%;}100%{width:var(--size-width);max-width:400px;}}        @keyframes IMPACT{0%{opacity:0;transform:scale(3);}85%{opacity:1;}100%{transform:scale(1);}}        @keyframes IMPACT_CENTER{0%{opacity:0;transform:translate(-50%, -50%) scale(3);}85%{opacity:1;}100%{transform:translate(-50%, -50%) scale(1);}}        button.panda-muted-indicator-impact-wrapper.animate svg.impact {            animation: SVG_WRAPPER 750ms cubic-bezier(.76,.05,.86,.06), OPACITY_0 10s linear infinite 850ms;        }        button.panda-muted-indicator-impact-wrapper.animate .text.bottom {            animation: IMPACT 262ms cubic-bezier(.76,.05,.86,.06);        }        button.panda-muted-indicator-impact-wrapper.animate svg.impact .line.fg-color {            animation: HIGHLIGHT 262ms cubic-bezier(.76,.05,.86,.06), IMPACT 262ms cubic-bezier(.76,.05,.86,.06) 131ms;        }        button.panda-muted-indicator-impact-wrapper.animate svg.impact .line.bg-color {            animation: IMPACT 314ms cubic-bezier(.76,.05,.86,.06) 236ms;            opacity: 0;        }        button.panda-muted-indicator-impact-wrapper.animate svg.impact .wave {            animation: IMPACT 314ms cubic-bezier(.76,.05,.86,.06) 340ms;            opacity: 0;        }        button.panda-muted-indicator-impact-wrapper.animate svg.impact .volume {            animation: IMPACT 288ms cubic-bezier(.76,.05,.86,.06) 471ms, OPACITY_0 471ms cubic-bezier(.76,.05,.86,.06) 0s;        }        button.panda-muted-indicator-impact-wrapper.animate .panda-muted-indicator-impact-wrapper-canvas {            animation: IMPACT_CENTER 471ms cubic-bezier(.76,.05,.86,.06) 602ms, OPACITY_0 602ms cubic-bezier(.76,.05,.86,.06) 0s;        }        button.panda-muted-indicator-impact-wrapper.animate .text.top {            animation: IMPACT 250ms linear 550ms, OPACITY_0 550ms cubic-bezier(.76,.05,.86,.06) 0s;        }        button.panda-muted-indicator-impact-wrapper.animate svg.blink .line,        button.panda-muted-indicator-impact-wrapper.animate svg.blink .volume {            animation: OPACITY_0 850ms linear 0s;        }        button.panda-muted-indicator-impact-wrapper.animate svg.blink .blink_impact_1 {            animation: BLINK_IMPACT 2s infinite 950ms, OPACITY_0 850ms linear 0s;            opacity: 0;        }        button.panda-muted-indicator-impact-wrapper.animate svg.blink .blink_impact_2 {            animation: BLINK_IMPACT 2s infinite 1250ms, OPACITY_0 850ms linear 0s;            opacity: 0;        }        button.panda-muted-indicator-impact-wrapper.animate svg.blink .blink_impact_3 {            animation: BLINK_IMPACT 2s infinite 1550ms, OPACITY_0 850ms linear 0s;            opacity: 0;        }    ";s&&(u="            @keyframes BLINK_IMPACT{0%,100%{opacity:0;}33%,66%{opacity:1;}}            @keyframes HIGHLIGHT{0%{filter:url(#panda-muted-indicator-impact-wrapper-highlight);}"+c(315)+",100%{filter:initial;}}            @keyframes OPACITY_0{"+c(850)+","+c(9150)+"{opacity:0;}}            @keyframes OPACITY_1{"+c(850)+","+c(9150)+"{opacity:1;}}            @keyframes SVG_WRAPPER{0%{width:100%;}"+c(470)+",100%{width:var(--size-width);}}            @keyframes "+l("P2",262)+"            @keyframes "+l("LINE_FG",262)+"            @keyframes "+l("LINE_BG",314)+"            @keyframes "+l("BLINK",314)+"            @keyframes "+l("VOLUME",288)+"            @keyframes IMPACT_CANVAS{0%{opacity:0;transform:translate(-50%,-50%) scale(4);}"+c(850*471/1e3)+"{opacity:1;}"+c(471)+",100%{opacity:1;transform:translate(-50%,-50%) scale(1);}}            @keyframes "+l("P1",250)+"                        button.panda-muted-indicator-impact-wrapper.animate svg.impact {                animation: SVG_WRAPPER "+d+"s cubic-bezier(.76, .05, .86, .06) infinite, OPACITY_0 "+d+"s linear infinite 850ms;            }            button.panda-muted-indicator-impact-wrapper.animate .text.bottom {                animation: IMPACT_P2 "+d+"s cubic-bezier(.76,.05,.86,.06) infinite;            }            button.panda-muted-indicator-impact-wrapper.animate svg.impact .line.fg-color {                animation: HIGHLIGHT "+d+"s cubic-bezier(.76,.05,.86,.06) infinite 131ms, IMPACT_LINE_FG "+d+"s cubic-bezier(.76,.05,.86,.06) infinite 131ms;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate svg.impact .line.bg-color {                animation: IMPACT_LINE_BG "+d+"s cubic-bezier(.76,.05,.86,.06) infinite 236ms;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate svg.impact .wave {                animation: IMPACT_BLINK "+d+"s cubic-bezier(.76,.05,.86,.06) infinite 340ms;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate svg.impact .volume {                animation: IMPACT_VOLUME "+d+"s cubic-bezier(.76,.05,.86,.06) infinite 471ms, OPACITY_0 "+d+"s cubic-bezier(.76,.05,.86,.06) infinite 0s;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate .panda-muted-indicator-impact-wrapper-canvas {                animation: IMPACT_CANVAS "+d+"s cubic-bezier(.76,.05,.86,.06) infinite 602ms;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate .text.top {                animation: IMPACT_P1 "+d+"s linear infinite 550ms;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate svg.blink .line,            button.panda-muted-indicator-impact-wrapper.animate svg.blink .volume {                animation: OPACITY_1 "+d+"s linear infinite 425ms;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate svg.blink .blink_impact_1 {                animation: BLINK_IMPACT 2s linear infinite 950ms;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate svg.blink .blink_impact_2 {                animation: BLINK_IMPACT 2s linear infinite 1250ms;                opacity: 0;            }            button.panda-muted-indicator-impact-wrapper.animate svg.blink .blink_impact_3 {                animation: BLINK_IMPACT 2s linear infinite 1550ms;                opacity: 0;            }        "),p.innerHTML=u,document.getElementsByTagName("head")[0].appendChild(p),n.appendChild(r),te=!1}}function Oe(){var e=window.player_configs.mutedIndicatorTextTop,t=window.player_configs.mutedIndicatorTextBottom;if(0!==document.getElementsByClassName("plyr--full-ui").length){var n=document.getElementsByClassName("plyr--full-ui")[0],r=document.createElement("button"),o='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="7.999 9.062 46.75 32.563" enable-background="new 7.999 9.062 46.75 32.563" xml:space="preserve"> <style>@keyframes BLINK{0%{opacity: 0;}33%{opacity: 1;}66%{opacity: 1;}100%{opacity: 0;}}.blink_1{animation: BLINK 2s infinite; opacity: 0;}.blink_2{animation: BLINK 2s infinite .3s; opacity: 0;}.blink_3{animation: BLINK 2s infinite .6s; opacity: 0;}</style><style class="darkreader darkreader--sync" media="screen"></style> <g class="adjustable fg" style="fill: rgb(255, 255, 255); --darkreader-inline-fill:#ffffff;" data-darkreader-inline-fill=""> <path d="M53.249,39.616c-0.186,0-0.371-0.051-0.537-0.157l-43.5-27.75c-0.466-0.297-0.603-0.916-0.306-1.381c0.298-0.466,0.917-0.601,1.381-0.306l43.5,27.75c0.467,0.297,0.604,0.916,0.307,1.381C53.901,39.453,53.579,39.616,53.249,39.616z"></path> <path class="blink_3" d="M48.896,33.467l1.699,1.085c3.497-7.791,2.073-17.271-4.313-23.659c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414C50.581,18.019,51.913,26.463,48.896,33.467z"></path> <path class="blink_3" d="M46.926,36.956c-0.612,0.863-1.286,1.695-2.059,2.469c-0.392,0.391-0.392,1.023,0,1.414c0.194,0.195,0.45,0.293,0.707,0.293c0.256,0,0.512-0.098,0.706-0.293c0.878-0.878,1.642-1.824,2.333-2.807L46.926,36.956z"></path> <path class="blink_2" d="M42.543,29.415l1.777,1.135c1.545-5.315,0.229-11.293-3.953-15.476c-0.392-0.391-1.023-0.391-1.414,0c-0.392,0.391-0.392,1.023,0,1.414C42.454,19.987,43.639,24.925,42.543,29.415z"></path> <path class="blink_2" d="M41,33.174c-0.563,0.94-1.235,1.837-2.047,2.646c-0.391,0.392-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293c0.916-0.914,1.676-1.924,2.317-2.984L41,33.174z"></path> <path class="blink_1" d="M35.771,25.094l2.003,1.277c0.012-0.203,0.029-0.404,0.029-0.609c0-3.079-1.2-5.974-3.381-8.153c-0.391-0.391-1.022-0.391-1.414,0c-0.391,0.391-0.391,1.023,0,1.414C34.652,20.666,35.613,22.802,35.771,25.094z"></path> <path class="blink_1" d="M35.084,29.401c-0.474,1.145-1.172,2.197-2.076,3.1c-0.391,0.391-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293c0.257,0,0.513-0.098,0.707-0.293c1.008-1.006,1.795-2.17,2.361-3.43L35.084,29.401z"></path> <polygon points="28.124,20.215 28.124,14.991 24.635,17.99 "></polygon> <path d="M20.921,20.366h-6.423c-0.553,0-1,0.508-1,1.135v8.229c0,0.627,0.447,1.135,1,1.135h7.375l6.25,5.875V24.96L20.921,20.366z"></path> </g> </svg>';(e.length>18||t.length>18)&&tt(r,"panda-muted-indicator-big-text"),o=e?"<span>"+e+"</span>"+o:"<span> </span>"+o,t?o=o+"<span>"+t+"</span>":o+="<span> </span>",r.innerHTML=o,tt(r,"panda-muted-indicator"),tt(r,"panda-muted-indicator-item"),tt(r,player_configs.mutedIndicatorSize);var a=player_configs.controls.filter((function(e){return"play-large"!==e}));W&&a.length&&player.on("controlsshown",(function(){te||Be()})),r.onclick=function(){Be()};var i=document.querySelector('button[data-plyr="play"].plyr__control--overlaid');i&&tt(i,"disabled"),n.appendChild(r),te=!1}}function Ne(){var e=document.getElementById("custom_muted_indicator_iframe");e&&e.remove(),player_configs.customMutedIndicatorData.deleted&&(player_configs.mutedIndicatorAnimation="default",ze());var t=document.getElementsByClassName("plyr--full-ui")[0],n=document.createElement("iframe");n.id="custom_muted_indicator_iframe",tt(n,"panda-muted-indicator-custom"),tt(n,"panda-muted-indicator-item"),n.onload=function(){Ee(n.contentWindow.document.body);var e=document.getElementById("custom_muted_indicator_iframe"),t=/<script>(.|\n)*?<\/script>/gm;if(player_configs.customMutedIndicatorData.script){var r=player_configs.customMutedIndicatorData.script.match(t),o=player_configs.customMutedIndicatorData.script.replace(t,"");if(r&&r.length){var a=r[0].replace("<script>","").replace("<\/script>",""),i=document.createElement("script");i.type="text/javascript",i.innerHTML=a,e.contentWindow.document.body.innerHTML="".concat(o),e.contentWindow.document.body.appendChild(i)}else e.contentWindow.document.body.innerHTML="".concat(o);var c=document.createElement("script");c.type="text/javascript",c.innerHTML="document.getElementsByTagName('body')[0].onclick = function(){\n            window.parent.postMessage({\n                type: 'muted_indicator_play',\n            }, '*')\n        }",e.contentWindow.document.body.appendChild(c),e.contentWindow.document.body.style="padding:0;margin:0;overflow:hidden;"}};var r=player_configs.controls.filter((function(e){return"play-large"!==e}));W&&r.length&&player.on("controlsshown",(function(){te||Be()})),n.onclick=function(){Be()};var o=document.querySelector('button[data-plyr="play"].plyr__control--overlaid');o&&tt(o,"disabled"),t.appendChild(n),te=!1}function ze(){if(""!==player_configs.mutedIndicatorBackgroundColor)X.style.setProperty("--muted-indicator-background",player_configs.mutedIndicatorBackgroundColor);else{var e=(t=player_configs.primaryColor.replace("#","").replace("%23","").substring(0,6).match(/.{1,2}/g),[parseInt(t[0],16),parseInt(t[1],16),parseInt(t[2],16)]);e.push(player_configs.mutedIndicatorOpacity),X.style.setProperty("--muted-indicator-background","rgba(".concat(e.join(","),")"))}var t;""!==player_configs.mutedIndicatorTextColor?X.style.setProperty("--muted-indicator-text",player_configs.mutedIndicatorTextColor):X.style.setProperty("--muted-indicator-text",player_configs.controlsColor),X.style.setProperty("--muted-indicator-border-size",player_configs.mutedIndicatorBorderSize+"px"),{default:Oe,impact:Ae,custom:Ne}[window.player_configs.mutedIndicatorAnimation]()}function qe(){var e;L?(e=!1,fetch(v+"/sharelock?j="+L,{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(t){t&&t.status?(E=t.video_external_id,e=!0):(E="cd676325-3f2d-4ad5-b95c-c2a683d7b0cc",T="vz-ded14ebd-85a")})).catch((function(e){E="cd676325-3f2d-4ad5-b95c-c2a683d7b0cc",T="vz-ded14ebd-85a"})).finally((function(){document.querySelector("video > source").src="https://b-".concat(T,".tv.pandavideo.com.br/").concat(E,"/playlist.m3u8").concat(e?"?sharelock="+L+"version"+Date.now():""),window.pandatag("videoHtmlLoaded",!0),Ve()}))):M?fetch("".concat(h,"/").concat(T,"/comparison/").concat(M,".json"),{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(e){if("COMPLETED"===e.status)E=e.winner_video_id;else{var t=e.videos,n=Math.floor(window.crypto.getRandomValues(new Uint32Array(1))[0]/(Math.pow(2,32)-1)*t.length);E=t[n]}})).catch((function(e){E="cd676325-3f2d-4ad5-b95c-c2a683d7b0cc",T="vz-ded14ebd-85a"})).finally((function(){document.querySelector("video > source").src="https://b-"+T+".tv.pandavideo.com.br/"+E+"/playlist.m3u8",window.pandatag("videoHtmlLoaded",!0),Ve()})):Ve();var t=h+"/"+T+"/config.json";"true"===z&&(t+="?date="+(new Date).getTime()),fetch(t,{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(e){var t=e;Object.keys(player_configs).forEach((function(e){if(Object.keys(t).includes(e)){if("controls"===e){var n=t.controls.findIndex((function(e){return"volume"===e}));-1!==n&&t.controls.splice(n,0,"mute")}"fbPixel"===e&&"string"==typeof t.fbPixel&&(t.fbPixel=[t.fbPixel]),player_configs[e]=t[e]}}))})).finally((function(){pandatag("applyColors",(function(){g.searchParams.get("color")&&("#"===g.searchParams.get("color").charAt(0)?player_configs.primaryColor=g.searchParams.get("color"):player_configs.primaryColor="#"+g.searchParams.get("color")),X.style.setProperty("--plyr-color-main",player_configs.primaryColor),X.style.setProperty("--plyr-captions-text-color",player_configs.captionsColor),X.style.setProperty("--plyr-captions-background",player_configs.captionsBackgroundColor),X.style.setProperty("--plyr-video-control-color",player_configs.controlsColor),X.style.setProperty("--plyr-video-control-color-hover",player_configs.controlsColor),X.style.setProperty("--plyr-menu-color",player_configs.menuColor),X.style.setProperty("--live-indicator-color",player_configs.liveColor)})),pandatag("setupControls",(function(){if("online"===K){var e=["current-time","duration","captions","rewind","fast-forward"];Z||e.push("progress"),ee||e.push("settings");var t=player_configs.controls.filter((function(t){return!e.includes(t)}));player_configs.controls=t}if(player_configs.alternativeProgress){var n=["progress"];player_configs.controls=player_configs.controls.filter((function(e){return!n.includes(e)}))}fe.controls=player_configs.controls})),pandatag("configLibraryLoaded",!0)}))}function De(){fetch("https://config-live.tv.pandavideo.com.br/"+T+"/"+E+"-live.json?nocache="+Date.now(),{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(e){if(K=e.status,Z=!!e.active_dvr,tt(document.getElementsByClassName("loading-icon")[0],"disabled"),e.thumb){var t=document.getElementsByClassName("live-thumb")[0];t.getElementsByTagName("img")[0].src=b+"/"+T+"/"+e.thumb,nt(t,"disabled")}else{var n=document.getElementsByClassName("live-offline-badge")[0],r=document.getElementById("live-subtitle");r&&(r.innerHTML=ce[ae].waitingForLive),document.getElementById("live-title").innerHTML=e.title,nt(n,"disabled")}"online"===e.status?function t(){var n="https://b-"+T+".tv.pandavideo.com.br/"+E+"/playlist.m3u8.live?nocache="+(new Date).getTime()+(O?"&live_without_cdn=1":"");fetch(n,{method:"GET"}).then((function(t){if(!t.ok)throw new Error("Not 2xx response");window.player_configs.muted=!0,window.player_configs.autoplay=!0,window.player_configs.saveProgress=!1;var n=document.getElementsByClassName("live-thumb")[0];n&&tt(n,"disabled");var r=document.getElementsByClassName("live-offline-badge")[0];r&&tt(r,"disabled"),e.bitrate&&(ee=!0,J=e.bitrate.map((function(e){return parseInt(e.replace("p",""))}))),qe()})).catch((function(){setTimeout(t,2e3)}))}():"finished"===e.status||"finished_imported"===e.status?(tt(document.getElementsByClassName("live-thumb")[0],"disabled"),tt(document.getElementsByClassName("live-offline-badge")[0],"disabled"),qe()):setTimeout(De,5e3)})).catch((function(){setTimeout(De,5e3)}))}function Fe(e){var t=[];t=e?document.getElementById(e)?[document.getElementById(e)]:document.getElementsByClassName(e):document.getElementsByClassName("cta-element");for(var n=0;n<t.length;n++)t[n]&&t[n].parentNode&&t[n].parentNode.removeChild(t[n])}function He(){var e=document.getElementsByClassName("plyr--html5")[0];Fe("pause-cta");var t,n=s(player_configs.ctas.filter((function(e){return"pause"===e.type})));try{var r=function(){var n=t.value,r=document.createElement("div");tt(r,"pause-cta"),tt(r,"cta-overlay"),tt(r,"disabled"),tt(r,"cta-element"),r.style="z-index: 5;",r.id=n.id;var o=document.createElement("iframe");if(o.id="".concat(n.id,"_iframe"),o.onload=function(){Ee(o.contentWindow.document.body);var e=document.getElementById("".concat(n.id,"_iframe")),t=/<script>(.|\n)*?<\/script>/gm,r=n.script.match(t),a=n.script.replace(t,"");if(r&&r.length){var i=r[0].replace("<script>","").replace("<\/script>",""),c=document.createElement("script");c.type="text/javascript",c.innerHTML=i,e.contentWindow.document.body.innerHTML="".concat(a),e.contentWindow.document.body.appendChild(c)}else e.contentWindow.document.body.innerHTML="".concat(a);e.contentWindow.document.body.style="padding:0;margin:0"},r.appendChild(o),n.skipButton){var a=document.createElement("button");a.style="z-index: 6;",a.innerHTML=ce[ae].keepWatching,tt(a,"cta-skip-button"),a.onclick=function(){window.postMessage({type:"play"},"*")},r.appendChild(a)}var i=document.querySelector('button[data-plyr="play"].plyr__control--overlaid');i&&(i.style.zIndex=10),tt(r,"disabled"),e.appendChild(r)};for(n.s();!(t=n.n()).done;)r()}catch(e){n.e(e)}finally{n.f()}}function je(){var e=document.getElementsByClassName("plyr--html5")[0];Fe("end-cta");var t=player_configs.ctas.find((function(e){return"end"===e.type}));if(t){var n=document.createElement("div");n.id="end-cta",tt(n,"cta-overlay"),tt(n,"disabled"),tt(n,"cta-element"),n.style="z-index: 5;";var r=document.createElement("iframe");r.id="".concat(t.id,"_iframe"),r.onload=function(){Ee(r.contentWindow.document.body);var e=document.getElementById("".concat(t.id,"_iframe")),n=/<script>(.|\n)*?<\/script>/gm,o=t.script.match(n),a=t.script.replace(n,"");if(o&&o.length){var i=o[0].replace("<script>","").replace("<\/script>",""),c=document.createElement("script");c.type="text/javascript",c.innerText=i,e.contentWindow.document.body.innerHTML="".concat(a),e.contentWindow.document.body.appendChild(c)}else e.contentWindow.document.body.innerHTML="".concat(a);e.contentWindow.document.body.style="padding:0;margin:0"},n.appendChild(r);var o=document.querySelector('button[data-plyr="play"].plyr__control--overlaid');o&&(o.style.zIndex=10),tt(n,"disabled"),e.appendChild(n),window.onEnd=function(){nt(n,"disabled")}}}function Re(){var e=document.getElementById("bookmarks-container");e&&e.parentNode.removeChild(e);var t='<svg style="width:24px;height:24px" fill="white" viewBox="0 0 24 24"><path fill="white" d="M7,5H21V7H7V5M7,13V11H21V13H7M4,4.5A1.5,1.5 0 0,1 5.5,6A1.5,1.5 0 0,1 4,7.5A1.5,1.5 0 0,1 2.5,6A1.5,1.5 0 0,1 4,4.5M4,10.5A1.5,1.5 0 0,1 5.5,12A1.5,1.5 0 0,1 4,13.5A1.5,1.5 0 0,1 2.5,12A1.5,1.5 0 0,1 4,10.5M7,19V17H21V19H7M4,16.5A1.5,1.5 0 0,1 5.5,18A1.5,1.5 0 0,1 4,19.5A1.5,1.5 0 0,1 2.5,18A1.5,1.5 0 0,1 4,16.5Z" /></svg>',n=document.createElement("div");n.id="bookmarks-container",tt(n,"panda-bookmarks-div");var r=document.createElement("div");tt(r,"panda-bookmarks-list-wrapper"),tt(r,"disabled"),r.innerHTML='<div class="panda-bookmarks-list-title">'.concat(ce[ae].chapters,"</div>");var o=document.createElement("ul");tt(o,"panda-bookmarks-list"),player_configs.bookMarks.sort((function(e,t){return e.time-t.time})).forEach((function(e,t){var n,r,a,i,c=document.createElement("li"),l=document.createElement("span"),s="index"===window.player_configs.bookmarksLabel?t+1:(i=(n=e.time)-3600*(r=Math.floor(n/3600))-60*(a=Math.floor((n-3600*r)/60)),r<10&&(r="0"+r),a<10&&(a="0"+a),i<10&&(i="0"+i),"00"==r?a+":"+i:r+":"+a+":"+i);l.innerHTML="<strong>"+s+"</strong> "+e.title,c.appendChild(l),c.onclick=function(){window.postMessage({type:"currentTime",parameter:e.time},"*"),window.postMessage({type:"play"},"*")},o.appendChild(c)}));var a=document.createElement("button");a.setAttribute("class","panda-bookmarks-button"),t=t.replace(/white/gm,"var(--plyr-video-control-color)"),a.innerHTML=t,r.appendChild(o),n.appendChild(a);var i=document.querySelector(".plyr__menu button");i&&(i.onclick=function(e){tt(r,"disabled"),nt(a,"active-bookmark"),$=!1}),a.onclick=function(){($=!$)?(nt(r,"disabled"),tt(a,"active-bookmark")):(tt(r,"disabled"),nt(a,"active-bookmark"))},document.addEventListener("click",(function(e){a.contains(e.target)||(tt(r,"disabled"),nt(a,"active-bookmark"),$=!1)})),n.appendChild(r),Me(n,1)}function Ve(){var e;Ge(),e=h+"/"+T+"/"+E+".json","true"===z&&(e+="?date="+(new Date).getTime()),fetch(e,{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(e){var t,n;e.profile?(window.player_configs.profile=e.profile,t=e.profile,n=h+"/"+T+"/profiles/"+t+".json","true"===z&&(n+="?date="+(new Date).getTime()),fetch(n,{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];if("controls"===r){if(!e[r])continue;var a=e.controls.findIndex((function(e){return"volume"===e}));-1!==a&&e.controls.splice(a,0,"mute");var i=e.controls.findIndex((function(e){return"current-time"===e}));-1!==i&&e.controls.splice(i+1,0,"duration"),player_configs[r]=e[r]}else"vsl"===r||"colors"===r||"saveProgress"===r||"general"===r?(""==e[r].fbPixel&&delete e[r].fbPixel,""==e[r].gtagIds&&delete e[r].gtagIds,Object.hasOwnProperty.call(e[r],"trialWarning")&&delete e[r].trialWarning,window.player_configs=o(o({},window.player_configs),e[r])):"hideControlsOnStart"===r&&(window.player_configs.hideControlsOnStart=e[r]);window.player_configs.autoplay&&(document.querySelector("video").autoplay=!0),window.player_configs.mutedIndicatorIcon&&(player_configs.muted=!0)}})).catch((function(e){console.log("Error: falied to fetch video profile")})).finally((function(){pandatag("configProfileLoaded",!0),function(e){if(e){var t=h+"/"+T+"/tmi/"+e+".json";"true"===z&&(t+="?date="+(new Date).getTime()),fetch(t,{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(e){player_configs.customMutedIndicatorData=e})).catch((function(e){console.log("Error: falied to fetch video muted indicator")})).finally((function(){pandatag("configMutedIndicatorLoaded",!0)}))}else pandatag("configMutedIndicatorLoaded",!0)}(player_configs.customMutedIndicatorId)}))):(pandatag("configMutedIndicatorLoaded",!0),pandatag("configProfileLoaded",!0)),pandatag("setupThumb",(function(){var t=document.querySelector("video"),n=g.searchParams.get("thumbnail");n?t.setAttribute("poster",n):e.thumb&&""!==e.thumb?z?t.setAttribute("poster",b+"/"+T+"/"+e.thumb+"?date="+(new Date).getTime()):t.setAttribute("poster",b+"/"+T+"/"+e.thumb):t.setAttribute("poster","https://b-"+T+".tv.pandavideo.com.br/"+E+"/thumbnail.jpg")})),pandatag("setupSubtitles",(function(){var t=document.querySelector("video");e.subtitles&&e.subtitles.forEach((function(e){var n=document.createElement("track");n.kind="captions",n.label=e.label,n.srclang=e.srclang.replace("-","").toLowerCase(),n.src="https://subtitles.tv.pandavideo.com.br/"+T+"/"+E+"/"+e.srclang+".vtt",t.appendChild(n)})),e.bookMarks&&(player_configs.bookMarks=e.bookMarks),e.ctas&&(player_configs.ctas=e.ctas)})),e.defaultSubtitle&&(player_configs.defaultSubtitle=e.defaultSubtitle),e.customPixels&&(player_configs.customPixels=e.customPixels)})).catch((function(){pandatag("configProfileLoaded",!0),pandatag("configMutedIndicatorLoaded",!0),pandatag("setupThumb",(function(){if("online"!==K){var e=document.querySelector("video"),t=g.searchParams.get("thumbnail");if(t)return void e.setAttribute("data-poster",t);e.setAttribute("data-poster","https://b-"+T+".tv.pandavideo.com.br/"+E+"/thumbnail.jpg")}})),pandatag("setupSubtitles",(function(){}))})).finally((function(){pandatag("configVideoLoaded",!0)})),function(){var e=document.querySelector("video"),n=null,r=e.getElementsByTagName("source")[0].src;if(w&&q){var o=new Hls({maxBufferSize:10});o.loadSource(r);var a=document.querySelector("video"),i=0;o.on(Hls.Events.ERROR,(function(e,t){var n;if("hlsFragParsingMetadata"!=="".concat(t.event)||"internalException"!=="".concat(t.details))if(console.log("=> QUALITY HLS ERROR",t),401!=(null===(n=t.response)||void 0===n?void 0:n.code))if(t.response&&403===t.response.code&&i<3){if(3==++i){var a=o.streamController.levels.map((function(e){return e.height})),c=o.streamController.levels[o.streamController.level].height,l=a.sort((function(e,t){return t-e})).find((function(e){return e!==c}));Ue(l),i=0,window.player.quality=l}}else"online"!==K&&(Je(o)&&C.includes("".concat(t.details))?Ze(o):o.recoverMediaError(),window.parent.postMessage({message:"panda_error",video:g.searchParams.get("v"),errorMsg:U?"error playback m3u8 with invalid watermark":"error playback m3u8"},"*"));else fetch(r,{method:"GET"}).then((function(e){var t=e.headers.get("drm-group-id");Y&&(t=Y),function(e){e||document.write("Unauthorized"),fetch("https://config-drm.tv.pandavideo.com.br/"+T+"/"+e+"-drm.json?nocache="+Date.now(),{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(t){var n;pandaLoad.setupThumb();var r=ce[ae].watermark_question;t&&null!==(n=t.config_player)&&void 0!==n&&n.watermark_question&&(r=t.config_player.watermark_question);var o=document.querySelector("video");tt(o,"blur");var a=document.getElementsByClassName("loading-icon")[0];tt(a,"disabled");var i="<form class=container-drm><h2 id=drm-question "+(player_configs.controlsColor?'style="color: '+player_configs.controlsColor+'"':"")+">"+r.replace(/<\/?[^>]+(>|$)/g,"")+"</h2><input id=drm-answer /><button id=drm-button "+(player_configs.primaryColor?'style="background-color: '+player_configs.primaryColor+'"':"")+'><div class="drm-search-icon"><svg viewBox="-112 0 512 512" '+(player_configs.controlsColor?'fill="'+player_configs.controlsColor+'"':"")+' ><path d="M64 352L160 256 64 160 96 128 224 256 96 384 64 352Z" /></svg></div><div class="drm-loading-icon disabled"><svg x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve"><path '+(player_configs.controlsColor?'fill="'+player_configs.controlsColor+'"':"")+' d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50"><animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="0 50 50" to="360 50 50" repeatCount="indefinite" /></path></svg></div></button></form>';!function(e,t){var n=document.createElement("div");for(n.innerHTML=t;n.children.length>0;)e.appendChild(n.children[0])}(document.getElementById("video-container"),i);var c,l=document.querySelector("form");function s(t){var n=document.getElementById("drm-answer"),r=document.getElementsByClassName("drm-search-icon")[0],i=document.getElementsByClassName("drm-loading-icon")[0];t.preventDefault(),nt(i,"disabled"),tt(r,"disabled"),fetch(v+"/drm/token/?jwt=1&key="+n.value.trim()+"&drm_group_id="+e,{method:"GET"}).then((function(e){if(e.ok)return e.json();throw new Error("Not 2xx response")})).then((function(t){U=t.jwt,nt(i,"disabled"),l.remove(),nt(a,"disabled"),nt(o,"blur");try{localStorage.setItem(e,n.value.trim())}catch(e){}document.querySelector("video > source").src="https://b-"+T+".tv.pandavideo.com.br/"+E+"/playlist.m3u8?watermark="+U,window.pandatag("videoHtmlLoaded",!0),Ve()})).catch((function(t){tt(i,"disabled"),nt(r,"disabled"),n.focus();try{localStorage.removeItem(e)}catch(e){}}))}l.onsubmit=s.bind(l);try{c=localStorage.getItem(e)}catch(e){}c&&(document.getElementById("drm-answer").value=c,s({preventDefault:function(){}})),setTimeout((function(){document.getElementById("drm-answer").focus()}),500)}))}(t)}))})),o.on(Hls.Events.MANIFEST_PARSED,(function(e,n){["2ebc6248-a625-4cd3-80dc-2c8005673f03","fb89e577-43c8-4d87-bffd-aa6f9c4bc8ee","f7c58675-0eb9-4cb2-b8d8-25e30534f20e","48af5a59-3ac4-480e-abff-905690d94567","0b6c2224-68ae-49b0-bdd3-502bb767162a","52d6ada4-1491-4d57-81f7-2a71e136eadc","1a35c982-a452-4cee-b09b-f426bb1d0869","b3c06045-859c-4d4f-9f20-44b101f0fd66"].find((function(e){return JSON.stringify(n).includes(e)}))&&(A=!1),me=o.levels.map((function(e){return e.height})),"online"===K&&ee&&(me=t(new Set([].concat(t(me),t(J.reverse()))))),me.unshift(0),"online"===K&&(player_configs.showPreviewThumbs=!1),player_configs.controls.includes("progress")&&player_configs.showPreviewThumbs?(o.attachMedia(a),a.addEventListener("durationchange",(function(e){if(a.duration+""!="NaN"){a.removeEventListener("durationchange",arguments.callee);for(var t=Math.ceil(a.duration/2),n=[],r=0;r<t;r+=36)n.push("https://b-"+T+".tv.pandavideo.com.br/"+E+"/seek/_"+n.length+".jpg");fe.thumbnail={enabled:!0,pic_num:t,width:300,height:168,col:6,row:6,offsetX:0,offsetY:0,urls:n},c(me),o.destroy()}}))):(o.destroy(),c(me))}))}else c();function c(t){fe.quality=w?{default:0,options:t,forced:!0,onChange:function(e){Ue(e)}}:{default:480,options:[240,320,480,720],forced:!0,onChange:function(e){Ue(e)}},pandatag("setupPlayer",(function(t){player_configs.disableSeeking&&(t.listeners={seek:function(e){return e.preventDefault(),!1}}),n=new Plyr(e,t),tt(document.getElementsByClassName("loading-icon")[0],"disabled"),window.player=n,function(){try{var t=document.getElementsByTagName("video")[0];t.addEventListener("webkitbeginfullscreen",(function(){tt(document.querySelector("div.plyr"),"fullscreen")}),!1),t.addEventListener("webkitendfullscreen",(function(){nt(document.querySelector("div.plyr"),"fullscreen")}),!1)}catch(e){}var r=["progress","ready","play","pause","timeupdate","seeking","seeked","ended","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","canplay","error"],o={};r.forEach((function(e){n.on(e,(function(){var t=(new Date).getTime();(!o[e]||t-o[e]>30)&&(o[e]=t,window.parent.postMessage({message:"panda_"+e,video:E,currentTime:n.currentTime,isMutedIndicator:!(!player_configs.mutedIndicatorIcon||te)},"*"))}))})),M&&window.parent.postMessage({message:"panda_ready_comparison",video:M,video_external_id:E},"*"),(player_configs.playOpensFullscreen||player_configs.playOpensFullscreenNative)&&(n.on("play",(function(){player_configs.mutedIndicatorIcon&&!te||(player_configs.playOpensFullscreenNative?n.fullscreen.enter():window.parent.postMessage({message:"panda_open_window_fullscreen",video:E},"*"))})),n.on("pause",(function(){player_configs.playOpensFullscreenNative?n.fullscreen.exit():window.parent.postMessage({message:"panda_close_window_fullscreen",video:E},"*")}))),player_configs.disablePause&&n.on("pause",(function(){n.duration!==n.currentTime&&n.play().catch((function(){}))}));var a=n.speed;function i(e){n.currentTime=e}function c(){if(!player_configs.mutedIndicatorIcon||te){var e=parseInt(n.currentTime.toFixed(0)),t=player_configs.ctas.find((function(t){return!document.getElementById(t.id)&&t.time<=e&&t.time+t.duration>=e&&"video"===t.type}));if(t){var r,o,a=document.getElementsByClassName("plyr--html5")[0],i=(document.getElementsByClassName("plyr__controls"),document.createElement("div"));i.onmouseenter=function(){var e=document.getElementsByClassName("plyr--hide-controls");e&&e[0]&&nt(e[0],"plyr--hide-controls")},i.id=t.id,tt(i,"cta-overlay"),tt(i,"cta-element");var c=document.createElement("iframe");if(null!=t&&null!==(r=t.metadata)&&void 0!==r&&r.isMiniTrigger&&(i.style.opacity=0,i.style.transition="opacity ".concat(t.metadata.fadeConfigs.fadeInMs,"ms")),null!=t&&null!==(o=t.metadata)&&void 0!==o&&o.selectedButtonSize&&(i.style.zIndex=3),t.height&&t.width){var l=function(){var e=window.innerWidth,n=window.innerHeight,r={topLeft:function(){c.style.top="30px",c.style.left="30px"},topCenter:function(){var t=parseInt(c.style.width.replace("px",""),10);c.style.top="30px",c.style.left=e/2-t/2+"px"},topRight:function(){c.style.top="30px",c.style.right="30px"},midLeft:function(){var e=parseInt(c.style.height.replace("px",""),10);c.style.top=n/2-e/2+"px",c.style.left="30px"},midCenter:function(){var t=parseInt(c.style.height.replace("px",""),10),r=parseInt(c.style.width.replace("px",""),10);c.style.top=n/2-t/2+"px",c.style.left=e/2-r/2+"px"},midRight:function(){var e=parseInt(c.style.height.replace("px",""),10);c.style.top=n/2-e/2+"px",c.style.right="30px"},bottomLeft:function(){c.style.bottom="70px",c.style.left="30px"},bottomCenter:function(){c.style.bottom="70px";var t=parseInt(c.style.width.replace("px",""),10);c.style.left=e/2-t/2+"px"},bottomRight:function(){c.style.bottom="70px",c.style.right="30px"}};e>=450&&(c.style.height=t.height.large+"px",c.style.width=t.width.large+"px"),e<450&&e>300&&(c.style.height=t.height.medium+"px",c.style.width=t.width.medium+"px"),e<=300&&(c.style.height=t.height.small+"px",c.style.width=t.width.small+"px"),t.position&&r[t.position]()};c.style.position="absolute",c.style.zIndex=999,l(),window.onresize=l}if(c.id="".concat(t.id,"_iframe"),c.onload=function(){Ee(c.contentWindow.document.body);var e=document.getElementById("".concat(t.id,"_iframe")),n=/<script>(.|\n)*?<\/script>/gm,r=t.script.match(n),o=t.script.replace(n,"");if(r&&r.length){var a=r[0].replace("<script>","").replace("<\/script>",""),i=document.createElement("script");i.type="text/javascript",i.innerHTML=a,e.contentWindow.document.body.innerHTML="".concat(o),e.contentWindow.document.body.appendChild(i)}else e.contentWindow.document.body.innerHTML="".concat(o);e.contentWindow.document.body.style="padding:0;margin:0"},i.appendChild(c),t.skipButton){var s=document.createElement("button");s.innerHTML="Continuar assistindo",tt(s,"cta-skip-button"),s.onclick=function(){window.postMessage({type:"play"},"*")},i.appendChild(s)}a.appendChild(i),i.style.opacity=1}var d=player_configs.ctas.find((function(t){return!!document.getElementById(t.id)&&(t.time+t.duration<e||t.time>e)}));if(d){var p,u=document.getElementById(d.id);u&&(null!=d&&null!==(p=d.metadata)&&void 0!==p&&p.isMiniTrigger?(u.style.transition="opacity ".concat(d.metadata.fadeConfigs.fadeOutMs,"ms"),u.style.opacity=0,setTimeout((function(){u.remove()}),d.metadata.fadeConfigs.fadeOutMs)):u.remove())}}}function l(){"http"===player_configs.endThumbnail.substr(0,4)&&(player_configs.ctas=player_configs.ctas.filter((function(e){return"end"!==e.type})),player_configs.ctas.push({type:"end",id:"endThumb",script:"<img src='".concat(player_configs.endThumbnail,"' style='object-fit:cover; width:100%; height:100%;'><script>document.querySelector('img').onclick=function() { window.parent.postMessage({type: 'cta_play',}, '*') }</scr")+"ipt>"})),"http"===player_configs.pauseThumbnail.substr(0,4)&&(player_configs.ctas||(player_configs.ctas=[]),player_configs.ctas=player_configs.ctas.filter((function(e){return"pause"!==e.type})),player_configs.ctas.push({type:"pause",id:"pauseThumb",script:"<img src='".concat(player_configs.pauseThumbnail,"' style='object-fit:cover; width:100%; height:100%;'><script>document.querySelector('img').onclick=function() { window.parent.postMessage({type: 'cta_play',}, '*') }</scri")+"pt>"})),player_configs.ctas&&player_configs.ctas.length>0&&(n.on("play",(function(){var e=document.getElementById("end-cta");e&&tt(e,"disabled");var t,n=s(document.getElementsByClassName("pause-cta"));try{for(n.s();!(t=n.n()).done;)tt(t.value,"disabled")}catch(e){n.e(e)}finally{n.f()}})),n.on("pause",(function(){var e=parseInt(n.currentTime,10),t=parseInt(n.duration,10);if(!n.seeking&&e!==t){var r=player_configs.ctas.find((function(t){return"pause"===t.type&&(void 0===t.startTime||void 0===t.endTime||t.startTime<e&&t.endTime>e)}));if(!r)return;var o=document.getElementById(r.id);o&&nt(o,"disabled")}})),n.on("ended",(function(){window.onEnd&&window.onEnd()})),n.on("timeupdate",c))}setInterval((function(){n.speed!==a&&(a=n.speed,_(),window.parent.postMessage({message:"panda_speed_update",video:E,speed:n.speed},"*"))}),50),n.on("timeupdate",(function(e){var t=parseInt(n.currentTime,10);t%5==k%5&&k!==t&&Xe({}),n.currentTime>0&&oe.length&&(oe.forEach((function(e){"currentTime"===e.type&&n.playing&&(n.currentTime=e.value)})),oe=[])})),n.on("play",(function(){oe.length&&(oe.forEach((function(e){"currentTime"===e.type&&n.playing&&(n.currentTime=e.value)})),oe=[])})),player_configs.restartAfterEnd&&(player_configs.onlyLoopMuted?n.muted&&n.on("ended",(function(){i(0),n.play().catch((function(){}))})):n.on("ended",(function(){i(0),n.play().catch((function(){}))}))),l();var d=!0;function p(){var e=parseInt(n.currentTime.toFixed(0),10);if(parseInt(n.duration.toFixed(0),10)-e>30){var t=document.getElementById("live-time-indicator");t&&tt(t,"not-realtime"),d=!1}else{d=!0;var r=document.querySelector(".plyr__progress input");r&&(tt(r,"hide-slyder-badge"),r.style="--value: 100%;"),nt(document.getElementById("live-time-indicator"),"not-realtime")}if(!d){var o=document.querySelector(".plyr__progress input");o&&nt(o,"hide-slyder-badge")}}if(player_configs.alternativeProgress&&n.on("timeupdate",(function(){var e,t=parseFloat(n.currentTime.toFixed(3),10),r=parseFloat(n.duration.toFixed(3),10),o=document.querySelector(".alternative-progress");if(player_configs.alternativeProgressDefaultVelocity){var a=t/r;e=100*Math.sqrt(1-(a-=1)*a)}else{var i=player_configs.alternativeProgress2xLimit,c=player_configs.alternativeProgressVelocity,l=i/100/c;e=t<r*l?(e=100*t/r*c).toFixed(2):i+(t-r*l)*(100-i)/(r*(1-l))}o&&e&&(o.style="--value-progress: "+e+"%;"),player_configs.alternativeProgressHeight&&o&&(o.style="--value-progress: "+e+"%;height: "+player_configs.alternativeProgressHeight+"px;")})),"boolean"==typeof player_configs.hideControlsOnStart&&player_configs.hideControlsOnStart||"string"==typeof player_configs.hideControlsOnStart&&"true"==player_configs.hideControlsOnStart.toLowerCase()){var u=document.querySelector(".plyr__controls");u&&tt(u,"disabled"),n.on("play",(function(e){var t=document.querySelector(".plyr__controls");t&&nt(t,"disabled")}))}function m(){for(var e=document.getElementsByClassName("panda-bookmark-progress-dot"),t=0;t<e.length;t++)e[t].remove();if(window.player_configs.bookMarks&&window.player_configs.bookMarks.length)for(var r=0;r<window.player_configs.bookMarks.length;r++){var o=0;window.player_configs.bookMarks[r].time>0&&(o=100*window.player_configs.bookMarks[r].time/n.duration);var a=document.createElement("div");tt(a,"panda-bookmark-progress-dot");var i=document.querySelector(".plyr__progress");a.style="--dot-percent: "+o+"%",i&&i.appendChild(a)}}P&&"online"===K&&(n.on("timeupdate",p),n.on("seeking",(function(){nt(document.querySelector(".plyr__progress input"),"hide-slyder-badge"),p()})),n.on("seeked",(function(){var e=parseInt(n.currentTime.toFixed(0),10),t=parseInt(n.duration.toFixed(0),10);t-e>10&&t-e<30&&window.postMessage({type:"currentTime",parameter:-1},"*")}))),player_configs.saveProgress&&n.on("timeupdate",(function(){var e=parseInt(n.currentTime.toFixed(0),10),t=parseInt(n.duration.toFixed(0),10);if(0!=e&&te)if(100*e/t>90)try{localStorage.removeItem("panda_video:"+E)}catch(e){}else try{localStorage.setItem("panda_video:"+E,e)}catch(e){}}));var f=0,y=[],v=[];function h(t){if(player_configs.saveProgressScreen){var r=document.querySelector('button[data-plyr="play"].plyr__control--overlaid');player_configs.autoplay?(n.muted=!0,n.play()):(n.pause(),tt(r,"disabled")),e.style.visibility="hidden";var o=document.querySelector(".container"),a=document.createElement("div");tt(a,"panda-resume-screen-wrapper"),a.style="opacity: "+player_configs.saveProgressBackgroundOpacity+";";var i=document.createElement("p");i.innerText=player_configs.saveProgressTitle;var c=document.createElement("div");tt(c,"panda-resume-screen-buttons");var l='<svg viewBox="0 0 24 24">\n                                  <path fill="var(--plyr-video-control-color)" d="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M10,16.5L16,12L10,7.5V16.5Z" />\n                              </svg>',s=document.createElement("button");s.innerHTML=l+"<span>"+player_configs.saveProgressButton1Title+"</span>",s.onclick=function(){D?(n.currentTime=t-1,m()):(window.onLoadVideoWithoutPreload||(window.onLoadVideoWithoutPreload=[]),window.onLoadVideoWithoutPreload.push((function(){n.currentTime=t,m()})),window.onLoadVideoWithoutPreload.forEach((function(e){return e()}))),$e({})};var d='<svg viewBox="0 0 24 24">\n                                  <path fill="var(--plyr-video-control-color)" d="M12,4C14.1,4 16.1,4.8 17.6,6.3C20.7,9.4 20.7,14.5 17.6,17.6C15.8,19.5 13.3,20.2 10.9,19.9L11.4,17.9C13.1,18.1 14.9,17.5 16.2,16.2C18.5,13.9 18.5,10.1 16.2,7.7C15.1,6.6 13.5,6 12,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15 3.3,11 5.1,7.9L6.6,9.4C5.5,11.6 5.9,14.4 7.8,16.2C8.3,16.7 8.9,17.1 9.6,17.4L9,19.4C8,19 7.1,18.4 6.3,17.6Z" />\n                              </svg>',p=document.createElement("button");p.innerHTML=d+"<span>"+player_configs.saveProgressButton2Title+"<span>",p.onclick=function(){n.currentTime=0,m()},c.appendChild(s),c.appendChild(p),a.appendChild(i),a.appendChild(c),o.appendChild(a)}function u(){var e=document.getElementById("wrapper-progress");e&&nt(e,"disabled")}function m(){setTimeout((function(){try{try{n.play().catch((function(){})),te=!0}catch(e){}}catch(e){}}),0),nt(r,"disabled"),u(),tt(a,"disabled"),e.style.visibility="visible",n.volume=1,$e({})}}n.on("timeupdate",(function(){var e=parseInt(n.currentTime.toFixed(0),10),t=parseInt(n.duration.toFixed(0),10);if(0!==e&&!1===n.muted){var r=parseInt(100*e/t,10);if(!y.includes(r)){var o,a=player_configs.customPixels.filter((function(e){return"percentage"===e.conditionType&&e.conditionValue===r})),i=s(a);try{for(i.s();!(o=i.n()).done;){var c=o.value,l=new Function(c.script);try{l()}catch(e){}}}catch(e){i.e(e)}finally{i.f()}y.push(r)}if(!v.includes(e)){var d,p=player_configs.customPixels.filter((function(t){return"absolute"===t.conditionType&&t.conditionValue===e})),u=s(p);try{for(u.s();!(d=u.n()).done;){var m=d.value,g=new Function(m.script);try{g()}catch(e){}}}catch(e){u.e(e)}finally{u.f()}v.push(e)}if(r%10!=0||r===f)return;if(f=r,player_configs.fbPixel.length>0)try{fbq("track","pandavideo_watchtime",{percent:r,video_id:E,library_id:"b-"+T,duration:t,current_time:e})}catch(e){}if(player_configs.gtagIds.length>0)try{gtag("event","pandavideo_watchtime",{percent:r,video_id:E,library_id:"b-"+T,duration:t,current_time:e})}catch(e){}}})),n.once("play",(function(e){if(!player_configs.autoplay){try{player_configs.controls.includes("volume")||(n.volume=1),$e({})}catch(e){}te=!0}var t=document.querySelector('button[data-plyr="play"].plyr__control--overlaid');if(t&&nt(t,"disabled"),tt(document.getElementsByClassName("loading-icon")[0],"disabled"),tt(document.querySelector("div.plyr__poster"),"disabled"),player_configs.initSubtitle){var r=document.querySelector(".plyr__controls");r&&nt(r,"disabled")}D||S||Ke()})),n.once("canplay",(function(){var t;player_configs.bookMarks.length>0&&m();try{t=localStorage.getItem("panda_video:"+E)}catch(e){}n.speed=player_configs.defaultSpeed,t&&player_configs.saveProgressScreen||!player_configs.autoplay||te?(n.volume<.5||n.muted)&&(n.muted=!1,n.volume=1):player_configs.smartAutoplay?(n.muted=!1,n.volume=1,n.play().then((function(){Be(),Se()})).catch((function(e){"NotAllowedError"===e.name&&(n.muted=!0,n.play())})),e.autoplay=""):(n.muted=!0,n.play()),player_configs.saveProgressScreen&&t&&player_configs.autoplay?(n.muted=!0,n.play()):player_configs.saveProgressScreen&&t&&!player_configs.autoplay?n.pause():t&&player_configs.saveProgress&&i(parseInt(t)),g.searchParams.get("startTime")&&i(parseInt(g.searchParams.get("startTime"),10)),D||window.onLoadVideoWithoutPreload&&window.onLoadVideoWithoutPreload.forEach((function(e){return e()}))})),n.on("ready",(function(t){if(function(){!function(){try{var e=document.getElementById("copy-paste");e&&e.remove()}catch(e){}}();try{var e=document.createElement("div");e.id="report-problem-dialog",e.innerHTML='<div id="copy-paste" class="disabled"><header> <p class="report-problem-text">'.concat(ce[ae].reportModalTitle,'</p></header> <div id="report-first-step"> <section id="radio-section"> <div> <input type="radio" id="report-not-loading" name="issue-reported" value="report-not-loading" checked> <label for="report-not-loading">').concat(ce[ae].reportModalOption1,'</label><br></div><div> <input type="radio" id="report-unmatch-description" name="issue-reported" value="report-unmatch-description"> <label for="report-unmatch-description">').concat(ce[ae].reportModalOption2,'</label> </div><div> <input type="radio" id="report-low-quality" name="issue-reported" value="report-low-quality"> <label for="report-low-quality">').concat(ce[ae].reportModalOption3,'</label> </div><div> <input type="radio" id="report-other" name="issue-reported" value="report-other"> <label for="report-other">').concat(ce[ae].reportModalOption4,'</label><br></div><div class="report-textfield-card"> <div id="other-input-wrapper" class="disabled"> <input class="other-input" type="text" id="other-input" name="other" placeholder="').concat(ce[ae].reportModalField,'"> </div></div></section> <footer> <button id="report-second-step-btn" class="report-problem-dialog-button">').concat(ce[ae].reportModalAction1,'</button> <button id="report-close-dialog-btn" class="report-problem-dialog-button">').concat(ce[ae].reportModalAction2,'</button> </footer> </div><div id="report-second-step" class="disabled"> <div id="loading-div"> <svg viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve"> <path fill="#4874F1" d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50"> <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="0 50 50" to="360 50 50" repeatCount="indefinite"/> </path> </svg> </div><p id="second-step-text">').concat(ce[ae].reportModalText1," <br/> ").concat(ce[ae].reportModalText2,'</p></div><div id="report-third-step" class="disabled ').concat(I?"":"alone",'"> <header> ').concat(I?'<img id="panda-last-step-img" src="./icons/pandacheck.svg"/>':"",' </header> <p class="report-problem-text">').concat(ce[ae].reportModalText3,'</p><footer> <button id="report-ok-btn" class="report-problem-dialog-button">OK</button> </footer> </div></div>'),document.getElementById("video-container").insertAdjacentElement("afterbegin",e)}catch(e){}!function(){try{var e=document.getElementsByClassName("plyr__control plyr__control--forward")[0].parentElement,t=document.createElement("button"),n=window.getComputedStyle(document.body,null).getPropertyValue("--plyr-color-main");t.textContent=ce[ae].reportModalTitle,t.classList.add("customSettingsBtn"),t.id="custom-plyr-btn",t.setAttribute("data-plyr","settings"),t.setAttribute("type","button"),t.setAttribute("role","menuitem"),t.setAttribute("aria-haspopup","true"),e.appendChild(t),document.getElementById("custom-plyr-btn").addEventListener("click",(function(){be(),document.getElementsByClassName("plyr__controls__item plyr__menu")[0].click()})),t.onmouseover=function(){t.style.backgroundColor=n},t.onmouseleave=function(){t.style.removeProperty("background-color")};var r=document.getElementById("video-container"),o=document.querySelector(".plyr__menu button");r&&(r.onclick=function(e){if(o){var t=document.getElementsByClassName("plyr__controls")[0];try{nt(t,"plyr-controls-fix-index")}catch(e){}}}),o&&(o.onclick=function(){var e=document.getElementsByClassName("plyr__controls")[0];e&&("true"===o.getAttribute("aria-expanded")?tt(e,"plyr-controls-fix-index"):nt(e,"plyr-controls-fix-index"))})}catch(e){}}()}(),n.media.load(),player_configs.ctas.length>0&&c(),player_configs.saveProgress){var r;try{r=localStorage.getItem("panda_video:"+E)}catch(e){}player_configs.saveProgressScreen&&r?"online"!==K&&h(parseInt(r,10)):player_configs.mutedIndicatorIcon&&ze()}var o,a,i;player_configs.captionsFontSize&&(o=Number(player_configs.captionsFontSize),a="\n        .plyr__captions {\n            font-size: ".concat(o,"px;\n        }\n\n        @media (min-width: 480px) {\n            .plyr__captions {\n                font-size: ").concat(o>34?o-8:o,"px;\n            }\n        }\n\n        @media (max-width: 480px) {\n            .plyr__captions {\n                font-size: ").concat(o>=26?o-12:o,"px;\n            }\n        }\n\n        @media (max-width: 460px) {\n            .plyr__captions {\n                font-size: 14px;\n            }\n        }\n\n        @media (min-width: 768px) {\n            .plyr__captions {\n                font-size: ").concat(o+3,"px;\n            }\n        }\n\n        @media (min-width: 1024px) {\n            .plyr:-webkit-full-screen .plyr__captions, .plyr:fullscreen .plyr__captions, .plyr__captions {\n                font-size: ").concat(o+6,"px;\n            }\n        }\n    "),(i=document.createElement("style")).innerText=a,document.head.appendChild(i)),player_configs.defaultSubtitle&&(window.player.toggleCaptions(!0),window.player.language=player_configs.defaultSubtitle.toLowerCase().replace("-","")),e.style.visibility="visible",D&&w&&Ye({abrEwmaDefaultEstimate:5e6,maxBufferLength:20,autoStartLoad:!0,fragLoadingTimeOut:15e3}),P&&setInterval((function(){fetch("https://hit-realtime.pandavideo.com/icon.gif?u="+he+"&v="+E)}),5e3)}));var b=!1;function _(){var e;try{e=localStorage.getItem("panda_video:"+E)}catch(e){}var t=n.currentTime;e&&0===t&&(t=parseFloat(e));var r=X.style.getPropertyValue("--plyr-color-main"),o=X.style.getPropertyValue("--plyr-captions-text-color"),a=X.style.getPropertyValue("--plyr-captions-background"),i=X.style.getPropertyValue("--plyr-video-control-color"),c=X.style.getPropertyValue("--plyr-menu-color"),l=b?n.duration:0,s={paused:n.paused,hasAudio:n.hasAudio,muted:n.muted,pip:n.pip,volume:n.volume,speed:n.config.speed,captions:n.captions,currentTime:t,duration:l,fullscreen:n.fullscreen.active,colors:{primaryColor:r,captionsColor:o,captionsBackgroundColor:a,controlsColor:i,menuColor:c}};window.parent.postMessage({message:"panda_allData",video:g.searchParams.get("v"),playerData:JSON.parse(JSON.stringify(s))},"*")}n.on("loadedmetadata",(function(e){b=!0})),r.forEach((function(e){n.on(e,_)})),window.onmessage=function(e){var t=e.data,r=document.querySelector(":root");if("currentTime"!==t.type){if("muted_indicator_play"===t.type&&Be(),"cta_play"===t.type&&n.play().catch((function(){})),"volume"===t.type)return n.volume=t.parameter,void(!te&&t.parameter>0&&$e({}));if("speed"!==t.type)if("play_toggle"!==t.type){if("colors"===t.type){var o=t.parameter.colors;return o.primaryColor&&r.style.setProperty("--plyr-color-main",o.primaryColor),o.captionsColor&&r.style.setProperty("--plyr-captions-text-color",o.captionsColor),o.captionsBackgroundColor&&r.style.setProperty("--plyr-captions-background",o.captionsBackgroundColor),o.controlsColor&&(r.style.setProperty("--plyr-video-control-color",o.controlsColor),r.style.setProperty("--plyr-video-control-color-hover",o.controlsColor)),o.menuColor&&r.style.setProperty("--plyr-menu-color",o.menuColor),o.mutedIndicatorBackgroundColor&&r.style.setProperty("--muted-indicator-background",o.mutedIndicatorBackgroundColor),void(o.mutedIndicatorTextColor&&r.style.setProperty("--muted-indicator-text",o.mutedIndicatorTextColor))}if("ctas"===t.type){var a=t.parameter.ctas;return Fe(),0===player_configs.ctas.length?(player_configs.ctas=a,He(),je(),l()):(player_configs.ctas=a,je(),He()),void c()}if("remove_cta"===t.type){var s=t.parameter,d=document.getElementById(s);player_configs.ctas=player_configs.ctas.filter((function(e){return e.id!==s})),d&&d.remove()}if("custom_muted_indicator"===t.type&&(player_configs.customMutedIndicatorData=t.parameter,player_configs.mutedIndicatorAnimation="custom",Ne()),"disable_control"===t.type){var p=t.parameter;("play"===p?document.querySelector('[data-plyr="play"]:not(.plyr__control--overlaid'):"play-large"===p?document.querySelector('[data-plyr="play"].plyr__control--overlaid'):document.querySelector('[data-plyr="'.concat(p,'"]'))).style.display="none"}if("enable_control"===t.type){var u=t.parameter;"play"===u?document.querySelector('[data-plyr="play"]:not(.plyr__control--overlaid').style.display="":"play-large"===u?document.querySelector('[data-plyr="play"].plyr__control--overlaid').style.display="flex":document.querySelector('[data-plyr="'.concat(u,'"]')).style.display=""}if("enable_all_controls"===t.type){var f=document.querySelector('[data-plyr="play"].plyr__control--overlaid');f&&(f.style.display="flex");var y=document.querySelector(".plyr__controls");y&&nt(y,"disabled");var g=document.getElementById("wrapper-progress");g&&nt(g,"disabled")}if("disable_all_controls"===t.type){var v=document.querySelector('[data-plyr="play"].plyr__control--overlaid');v&&(v.style.display="none");var h=document.querySelector(".plyr__controls");h&&tt(h,"disabled")}if("bookMarks"===t.type){var b=t.parameter.bookMarks;return player_configs.bookMarks=b,m(),void Re()}"fullscreen.toggle"!==t.type?"fullscreen.exit"!==t.type?null!=t.parameter?n[t.type]&&n[t.type](t.parameter):n[t.type]&&n[t.type]():n.fullscreen.exit():n.fullscreen.toggle()}else n.paused?n.play().catch((function(){})):n.pause();else n.speed=t.parameter}else-1===t.parameter?i(n.duration-2):i(t.parameter)}}()})),pandatag("playerLoaded",!0)}}()}function We(){if(player_configs.fbPixel&&player_configs.fbPixel.length){try{player_configs.fbPixel,function(e,t,n,r,o,a,i){e.fbq||(o=e.fbq=function(){o.callMethod?o.callMethod.apply(o,arguments):o.queue.push(arguments)},e._fbq||(e._fbq=o),o.push=o,o.loaded=!0,o.version="2.0",o.queue=[],(a=t.createElement(n)).async=!0,a.src="https://connect.facebook.net/en_US/fbevents.js",(i=t.getElementsByTagName(n)[0]).parentNode.insertBefore(a,i))}(window,document,"script")}catch(e){console.log("Error in fbp init",e)}var e,t=s(player_configs.fbPixel);try{for(t.s();!(e=t.n()).done;){var n=e.value;try{fbq("init",n),fbq("track","PageView")}catch(e){}}}catch(e){t.e(e)}finally{t.f()}}if(player_configs.gtagIds&&player_configs.gtagIds.length)try{!function(){if(!document.getElementById("gtag-script")){var e=document.createElement("script");e.id="gtag-script",e.src="https://www.googletagmanager.com/gtag/js?id="+player_configs.gtagIds[0],e.async=!0,document.head.appendChild(e)}window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date);var t,n=s(player_configs.gtagIds);try{for(n.s();!(t=n.n()).done;){var r=t.value;gtag("config",r)}}catch(e){n.e(e)}finally{n.f()}gtag("event","page_view",{video_id:E,library_id:"b-"+T})}()}catch(e){console.log("Error in gtag init",e)}var r,o=player_configs.customPixels.filter((function(e){return"view"===e.conditionType})),a=s(o);try{for(a.s();!(r=a.n()).done;){var i=r.value,c=new Function(i.script);try{c()}catch(e){}}}catch(e){a.e(e)}finally{a.f()}}function Ge(){for(var e=0,t=Object.keys(player_configs);e<t.length;e++){var n=t[e],r=g.searchParams.get(n);if(r){if("trialWarning"===n)continue;if("controls"===n){player_configs[n]=r.split(",");var o=player_configs.controls.findIndex((function(e){return"volume"===e}));-1!==o&&player_configs.controls.splice(o,0,"mute");var a=player_configs.controls.findIndex((function(e){return"current-time"===e}));-1!==a&&player_configs.controls.splice(a+1,0,"duration")}else"boolean"==typeof player_configs[n]?"true"!==r&&"false"!==r||(player_configs[n]="true"===r):"number"==typeof player_configs[n]?player_configs[n]=parseFloat(r):Array.isArray(player_configs[n])?player_configs[n]=r.split(","):player_configs[n]=r}}}function Ue(e){try{if(0===e)window.hls.currentLevel=-1;else{if("online"===K){var t=J.indexOf(e);t>=0&&(window.hls.currentLevel=t),setTimeout(Pe,10)}window.hls.levels.forEach((function(t,n){t.height===e&&(window.hls.currentLevel=n)}))}}catch(e){}}function Ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{recoverFromError:!1};t.recoverFromError&&window.hls&&window.hls.destroy();var n=new Hls(e),r=document.querySelector("video"),o=r.getElementsByTagName("source")[0].src;n.loadSource(o),n.attachMedia(r),n.on(Hls.Events.MANIFEST_PARSED,(function(){try{Ue(JSON.parse(localStorage.getItem("plyr")).quality)}catch(e){}t.recoverFromError?(t.isPlaying&&r.play(),r.currentTime=t.currentTime,r.speed=t.speed,r.volume=t.volume):D||(player_configs.autoplay?player_configs.smartAutoplay?(r.volume=1,r.play()):(r.volume=0,r.play()):r.play())})),n.on(Hls.Events.LEVEL_SWITCHED,(function(e,t){var r=document.querySelector(".plyr__controls [data-plyr='quality'][value='0'] span");if(null!=r)if(n.autoLevelEnabled){var o=n.levels[t.level].height;r.innerHTML="Auto ("+o+"p)"}else r.innerHTML="Auto"}));var a=function(){var e=n.streamController.levels.map((function(e){return e.height})),t=n.streamController.levels[n.streamController.level].height,r=e.sort((function(e,t){return t-e})).find((function(e){return e!==t}));Ue(r),window.player.quality=r},i=0;n.on(Hls.Events.ERROR,(function(t,o){"hlsFragParsingMetadata"==="".concat(o.event)&&"internalException"==="".concat(o.details)||(console.log("=> PANDA HLS ERROR DELECTED\nPRELOAD="+D+"\n",t,o),o.response&&404===o.response.code?a():o.response&&403===o.response.code&&i<3?3==++i&&(a(),i=0):o.fatal?Ye(e,{recoverFromError:!0,currentTime:window.player.currentTime,speed:window.player.currentTime,volume:r.volume,isPlaying:!r.paused}):"online"!==K&&(Je(n)&&C.includes("".concat(o.details))?Ze(n):[Hls.ErrorDetails.BUFFER_STALLED_ERROR,Hls.ErrorDetails.BUFFER_NUDGE_ON_STALL,Hls.ErrorDetails.BUFFER_FULL_ERROR].includes(o.details)?n.startLoad():(console.log("Recovering media error"),Ye(e,{recoverFromError:!0,currentTime:window.player.currentTime,speed:window.player.currentTime,volume:window.player.volume,isPlaying:!r.paused}))))})),window.hls=n,-1==window.hls.currentLevel&&"online"!==K&&"finished"!==K&&"NOT_LIVE"!==K&&(window.hls.currentLevel=2)}function Ke(){w&&Ye({abrEwmaDefaultEstimate:5e6,maxBufferLength:20,autoStartLoad:!0,fragLoadingTimeOut:15e3}),S=!0}function Ze(e){var t=e.abrController.fragCurrent.url;x=_.find((function(e){return!t.includes(e)}));var n,r=s(e.streamController.levels);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.details&&o.details.fragments){var a,i=s(o.details.fragments);try{var c=function(){var e=a.value,t=e.url,n=_.find((function(e){return t.includes(e)})),r=t.replace(n,x);e.url=r};for(i.s();!(a=i.n()).done;)c()}catch(e){i.e(e)}finally{i.f()}}}}catch(e){r.e(e)}finally{r.f()}console.log("Recovering to",_.findIndex((function(e){return e===x})))}function Je(e){try{var t,n=e.abrController.fragCurrent.url,r=_.find((function(e){return n.includes(e)})),o=s(e.streamController.levels);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.details&&a.details.fragments){var i,c=s(a.details.fragments);try{for(c.s();!(i=c.n()).done;)if(!i.value.url.includes(r))return!0}catch(e){c.e(e)}finally{c.f()}}}}catch(e){o.e(e)}finally{o.f()}}catch(e){}return!1}function Xe(e){var t=e.force,n=e.time,r=parseInt(player.currentTime,10);A&&(void 0!==n&&(r=n),(t||!player.muted&&te&&!player.paused&&!O)&&(navigator.sendBeacon(ne+"/icon.gif?type=check&v="+E+"&u="+he+"&p="+T+"&current_time="+r+"&referrer="+encodeURIComponent(document.referrer)+"&visibily="+!document[u]),k=r))}function $e(e){var t=e.mutedIndicator;if(!O&&!B&&A){try{navigator.sendBeacon(ne+"/icon.gif?type=play&v="+E+"&u="+he+"&p="+T+"&referrer="+encodeURIComponent(document.referrer)+"&visibily="+!document[u])}catch(e){}try{gtag("event","play",{video_id:E,library_id:"b-"+T})}catch(e){}try{fbq("track","play",{video_id:E,library_id:"b-"+T})}catch(e){}var n,r=player_configs.customPixels.filter((function(e){return"play"===e.conditionType})),o=s(r);try{for(o.s();!(n=o.n()).done;){var a=n.value,i=new Function(a.script);try{i()}catch(e){}}}catch(e){o.e(e)}finally{o.f()}Xe({force:!0,time:t?0:void 0}),B=!0}}function Qe(){var e=document.getElementById("body"),t=document.getElementById("video-container"),n=t.offsetHeight,r=e.offsetHeight;t.style.marginTop=(r-n)/2+"px"}function et(e,t){return!!e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}function tt(e,t){e&&(et(e,t)||(e.className+=" "+t))}function nt(e,t){if(e&&et(e,t)){var n=new RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(n," ")}}((E||L||M)&&T||(document.write("Missing videoID (v) or libID (l)"),0))&&(window.player_configs=(a(ve={controls:["play-large","play","progress","current-time","duration","mute","volume","captions","settings","pip","fullscreen"],captionsBackgroundColor:"#000",primaryColor:"#4874F1",captionsColor:"#FFF",menuColor:"#4a5464",initDisabledControls:!1,controlsColor:"#FFF",pandaBranding:!0,refCode:"",fbPixel:[],customPixels:[],mutedIndicatorIcon:!1,mutedIndicatorTextTop:"",mutedIndicatorTextBottom:"",mutedIndicatorSize:"small",mutedIndicatorOpacity:.8,muted:!1,autoplay:!1,disablePause:!1,initQuality:0,alternativeProgress:!1,alternativeProgress2xLimit:20,alternativeProgressDefaultVelocity:!1,mutedIndicatorClickRestart:!0,alternativeProgressVelocity:5,alternativeProgressHeight:0,liveColor:"#fc2d2d",bookMarks:[]},"customPixels",[]),a(ve,"bookmarksLabel","index"),a(ve,"ctas",[]),a(ve,"availableSpeeds",[.5,.75,1,1.25,1.5,2]),a(ve,"defaultSpeed",1),a(ve,"saveProgress",!0),a(ve,"saveProgressScreen",!1),a(ve,"saveProgressTitle","Você já começou a assistir esse vídeo"),a(ve,"saveProgressBackgroundOpacity",1),a(ve,"saveProgressButton1Title","Continuar assistindo"),a(ve,"saveProgressButton2Title","Voltar ao início"),a(ve,"hideControlsOnStart",!1),a(ve,"defaultSubtitle",null),a(ve,"restartAfterEnd",!1),a(ve,"onlyLoopMuted",!1),a(ve,"realtimeAnalytics",!1),a(ve,"troubleshootDialog",!0),a(ve,"disableForward",!1),a(ve,"playOpensFullscreen",!1),a(ve,"playOpensFullscreenNative",!1),a(ve,"gtagIds",[]),a(ve,"showPreviewThumbs",!0),a(ve,"smartAutoplay",!1),a(ve,"disableSeeking",!1),a(ve,"mutedIndicatorAnimation","default"),a(ve,"mutedIndicatorLoop",!1),a(ve,"mutedIndicatorLoopDuration",5),a(ve,"mutedIndicatorFontSize",22),a(ve,"captionsFontSize",20),a(ve,"smallMutedIcon",!0),a(ve,"bigPlayButtonSize",55),a(ve,"bigPlayButtonIconSize",18),a(ve,"mutedIndicatorBackgroundColor",""),a(ve,"mutedIndicatorTextColor",""),a(ve,"mutedIndicatorBorderSize",2),a(ve,"customMutedIndicatorData",""),a(ve,"customMutedIndicatorId",""),a(ve,"pauseThumbnail",""),a(ve,"endThumbnail",""),a(ve,"defaultLanguage",""),a(ve,"trialWarning",!1),ve),window.pandatag=function(e,t){if(window.pandaLoad[e]=t,pandaLoad=window.pandaLoad,pandaLoad.videoHtmlLoaded&&pandaLoad.configLibraryLoaded&&pandaLoad.configVideoLoaded&&pandaLoad.configProfileLoaded&&pandaLoad.configMutedIndicatorLoaded&&pandaLoad.playerLoaded&&!Q){Ge();var n=null;try{n=localStorage.getItem("panda_video:"+E)}catch(e){}player_configs.mutedIndicatorClickRestart&&player_configs.saveProgress&&!player_configs.saveProgressScreen&&n&&(player_configs.mutedIndicatorClickRestart=!1),pandaLoad.applyColors(),pandaLoad.setupControls(),pandaLoad.setupThumb(),pandaLoad.setupSubtitles(),window.player_configs.defaultLanguage&&(ae=window.player_configs.defaultLanguage,fe.i18n=ce[ae]),fe.speed={selected:player_configs.defaultSpeed,options:player_configs.availableSpeeds.map((function(e){return parseFloat(e)}))},player_configs.autoplay&&(player_configs.muted=!0,fe.muted=!0,fe.autoplay=!0),player_configs.disableForward&&(fe.keyboard.global=!1,fe.keyboard.focused=!1),V&&(fe.controls=fe.controls.filter((function(e){return"pip"!==e}))),pandaLoad.setupPlayer(fe),q?!O&&A&&(We(),navigator.sendBeacon(ne+"/icon.gif?type=view&v="+E+"&u="+he+"&p="+T+"&referrer="+encodeURIComponent(document.referrer)+"&visibily="+!document[u])):document.addEventListener(m,(function(){q||S||Ke(),G||O||!A||(We(),navigator.sendBeacon(ne+"/icon.gif?type=view&v="+E+"&u="+he+"&p="+T+"&referrer="+encodeURIComponent(document.referrer)+"&visibily="+!document[u]),G=!0)}),!1),Ee(document),function(){if(player_configs.controls.includes("rewind")){var e=document.querySelectorAll('[data-plyr="rewind"]')[0];e&&(e.innerHTML='\n              <svg style="width:24px;height:24px" viewBox="0 0 50 50">\n                  <path fill="currentColor" d="M 7.984375 1.9863281 A 1.0001 1.0001 0 0 0 7 3 L 7 13 L 17 13 A 1.0001 1.0001 0 1 0 17 11 L 10.761719 11 C 14.363419 7.3233218 19.405802 5.0234375 25 5.0234375 C 36.109434 5.0234375 45 13.914004 45 25.023438 C 45 36.13287 36.109434 45.023438 25 45.023438 C 13.890566 45.023438 5 36.13287 5 25.023438 A 1.0001 1.0001 0 1 0 3 25.023438 C 3 37.204003 12.819434 47.023438 25 47.023438 C 37.180566 47.023438 47 37.204003 47 25.023438 C 47 12.842871 37.180566 3.0234375 25 3.0234375 C 18.685898 3.0234375 12.985264 5.693158 9 9.9414062 L 9 3 A 1.0001 1.0001 0 0 0 7.984375 1.9863281 z M 29.5 17 C 24.5 17 24.300781 21.7 24.300781 25 C 24.300781 27.5 24.1 33 29.5 33 C 34.4 33 34.699219 28.2 34.699219 25 C 34.699219 21.7 34.4 17 29.5 17 z M 19.5 17.099609 C 19.1 19.499609 17.4 19.999609 15 20.099609 L 15 21.599609 L 19.099609 21.599609 L 19.099609 32.900391 L 21 32.900391 L 21 17.099609 L 19.5 17.099609 z M 29.5 18.800781 C 33.4 18.800781 32.800781 24.699609 32.800781 25.099609 C 32.800781 28.399609 32.2 31.400391 29.5 31.400391 C 25.8 31.400391 26.199219 25.599609 26.199219 25.099609 C 26.199219 24.799609 25.6 18.800781 29.5 18.800781 z"/>\n              </svg>')}if(player_configs.controls.includes("fast-forward")){var t=document.querySelectorAll('[data-plyr="fast-forward"]')[0];t&&(t.innerHTML='<svg style="width:24px;height:24px" viewBox="0 0 50 50">\n              <path fill="currentColor" d="M 41.984375 1.9863281 A 1.0001 1.0001 0 0 0 41 3 L 41 9.9414062 C 37.014556 5.692295 31.313104 3.0234375 25 3.0234375 C 12.819434 3.0234375 3 12.842871 3 25.023438 C 3 37.204003 12.819434 47.023438 25 47.023438 C 37.180566 47.023438 47 37.204003 47 25.023438 A 1.0001 1.0001 0 1 0 45 25.023438 C 45 36.13287 36.109434 45.023438 25 45.023438 C 13.890566 45.023438 5 36.13287 5 25.023438 C 5 13.914003 13.890566 5.0234375 25 5.0234375 C 30.593333 5.0234375 35.63652 7.322796 39.238281 11 L 33 11 A 1.0001 1.0001 0 1 0 33 13 L 43 13 L 43 3 A 1.0001 1.0001 0 0 0 41.984375 1.9863281 z M 29.5 17 C 24.5 17 24.300781 21.7 24.300781 25 C 24.300781 27.5 24.1 33 29.5 33 C 34.4 33 34.699219 28.2 34.699219 25 C 34.699219 21.7 34.4 17 29.5 17 z M 19.5 17.099609 C 19.1 19.499609 17.4 19.999609 15 20.099609 L 15 21.599609 L 19.099609 21.599609 L 19.099609 32.900391 L 21 32.900391 L 21 17.099609 L 19.5 17.099609 z M 29.5 18.800781 C 33.4 18.800781 32.800781 24.699609 32.800781 25.099609 C 32.800781 28.399609 32.2 31.400391 29.5 31.400391 C 25.8 31.400391 26.199219 25.599609 26.199219 25.099609 C 26.199219 24.799609 25.6 18.800781 29.5 18.800781 z"/>\n          </svg>')}}(),function(){var e=document.querySelector(".plyr__menu__container > div");e&&(e.style="max-height: calc(100vh - 50px);");var t=document.querySelector("video");window.innerWidth<400&&(t.onclick=function(){window.postMessage({type:"play_toggle"},"*")})}(),function(){if(!player_configs.controls.includes("progress")){var e=document.querySelector(".plyr__controls");e&&tt(e,"no-progress")}}(),player_configs.trialWarning&&(f=document.getElementsByClassName("plyr--full-ui")[0],(y=document.createElement("div")).id="trial-warning",y.innerHTML=ce[ae].trialWarning,f.appendChild(y)),!player_configs.disableForward&&re?function(){var e=document.querySelector(".plyr__video-wrapper"),t=document.createElement("div");t.classList.add("panda-forward-wrapper");var n=document.createElement("div");n.id="forward_touch";var r=function(e){"forward_touch"!==e.target.id&&"backward_touch"!==e.target.id||window.player.toggleControls(!0)};n.ondblclick=function(){window.player.forward()};var o=document.createElement("div");o.id="backward_touch",o.ondblclick=function(){window.player.rewind()},window.player_configs.controls.includes("play")?(n.onclick=r,o.onclick=r):(n.onclick=function(){window.player.togglePlay()},o.onclick=function(){window.player.togglePlay()}),t.appendChild(o),t.appendChild(n),e.appendChild(t)}():re&&(player_configs.controls.includes("play")||(document.querySelector("video").onclick=function(){window.player.togglePlay()})),(p=document.querySelector(".plyr__poster"))&&(p.onclick=function(){window.postMessage({type:"play",parameter:1},"*")}),player_configs.controls.includes("play-large")&&function(){var e=document.querySelector('button[data-plyr="play"].plyr__control--overlaid');if(e){e.style.width="".concat(player_configs.bigPlayButtonSize,"px"),e.style.height="".concat(player_configs.bigPlayButtonSize,"px"),e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center";var t=e.querySelector("svg");t&&(t.style.width="".concat(player_configs.bigPlayButtonIconSize,"px"),t.style.height="".concat(player_configs.bigPlayButtonIconSize,"px"),t.style.display="flex",player_configs.bigPlayButtonIconSize>50&&(t.style.paddingLeft="3px"),t.style.alignItems="center")}}(),D&&!player_configs.muted||!player_configs.mutedIndicatorIcon||player_configs.saveProgress?player_configs.initDisabledControls||!player_configs.muted||player_configs.mutedIndicatorIcon||player_configs.saveProgressScreen||!player_configs.smallMutedIcon||function(){if(0!==document.getElementsByClassName("plyr--full-ui").length){var e=document.getElementsByClassName("plyr--full-ui")[0],t=document.createElement("button"),n='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="7.999 9.062 46.75 32.563" enable-background="new 7.999 9.062 46.75 32.563" xml:space="preserve"> <style>@keyframes BLINK{0%{opacity: 0;}33%{opacity: 1;}66%{opacity: 1;}100%{opacity: 0;}}.blink_1{animation: BLINK 2s infinite; opacity: 0;}.blink_2{animation: BLINK 2s infinite .3s; opacity: 0;}.blink_3{animation: BLINK 2s infinite .6s; opacity: 0;}</style><style class="darkreader darkreader--sync" media="screen"></style> <g class="adjustable fg" style="fill: rgb(255, 255, 255); --darkreader-inline-fill:#ffffff;" data-darkreader-inline-fill=""> <path d="M53.249,39.616c-0.186,0-0.371-0.051-0.537-0.157l-43.5-27.75c-0.466-0.297-0.603-0.916-0.306-1.381c0.298-0.466,0.917-0.601,1.381-0.306l43.5,27.75c0.467,0.297,0.604,0.916,0.307,1.381C53.901,39.453,53.579,39.616,53.249,39.616z"></path> <path class="blink_3" d="M48.896,33.467l1.699,1.085c3.497-7.791,2.073-17.271-4.313-23.659c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414C50.581,18.019,51.913,26.463,48.896,33.467z"></path> <path class="blink_3" d="M46.926,36.956c-0.612,0.863-1.286,1.695-2.059,2.469c-0.392,0.391-0.392,1.023,0,1.414c0.194,0.195,0.45,0.293,0.707,0.293c0.256,0,0.512-0.098,0.706-0.293c0.878-0.878,1.642-1.824,2.333-2.807L46.926,36.956z"></path> <path class="blink_2" d="M42.543,29.415l1.777,1.135c1.545-5.315,0.229-11.293-3.953-15.476c-0.392-0.391-1.023-0.391-1.414,0c-0.392,0.391-0.392,1.023,0,1.414C42.454,19.987,43.639,24.925,42.543,29.415z"></path> <path class="blink_2" d="M41,33.174c-0.563,0.94-1.235,1.837-2.047,2.646c-0.391,0.392-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293s0.512-0.098,0.707-0.293c0.916-0.914,1.676-1.924,2.317-2.984L41,33.174z"></path> <path class="blink_1" d="M35.771,25.094l2.003,1.277c0.012-0.203,0.029-0.404,0.029-0.609c0-3.079-1.2-5.974-3.381-8.153c-0.391-0.391-1.022-0.391-1.414,0c-0.391,0.391-0.391,1.023,0,1.414C34.652,20.666,35.613,22.802,35.771,25.094z"></path> <path class="blink_1" d="M35.084,29.401c-0.474,1.145-1.172,2.197-2.076,3.1c-0.391,0.391-0.391,1.023,0,1.414c0.195,0.195,0.451,0.293,0.707,0.293c0.257,0,0.513-0.098,0.707-0.293c1.008-1.006,1.795-2.17,2.361-3.43L35.084,29.401z"></path> <polygon points="28.124,20.215 28.124,14.991 24.635,17.99 "></polygon> <path d="M20.921,20.366h-6.423c-0.553,0-1,0.508-1,1.135v8.229c0,0.627,0.447,1.135,1,1.135h7.375l6.25,5.875V24.96L20.921,20.366z"></path> </g> </svg>';n=n+"<span>"+ce[ae].activateSound+"</span>",t.innerHTML=n,t.onclick=function(){window.postMessage({type:"increaseVolume",parameter:1},"*"),window.postMessage({type:"play",parameter:1},"*"),$e({}),Se(),te=!0},tt(t,"small-muted-icon"),e.appendChild(t),te=!1}}():ze(),player_configs.mutedIndicatorFontSize&&function(){var e,t=document.querySelectorAll("button.panda-muted-indicator-item span");if(t.length){var n=(e=player_configs.mutedIndicatorFontSize)<=21?"small-text":e>=22&&e<=27?"normal-text":e>=28?"large-text":void 0,r={"small-text":[4,4],"normal-text":[6,4],"large-text":[6,8]},o="\n    button.panda-muted-indicator-item span.".concat(n," {\n        font-size: ").concat(player_configs.mutedIndicatorFontSize,"px;\n    }");player_configs.mutedIndicatorFontSize>18&&(o+="\n        @media(max-width: 680px) {\n            button.panda-muted-indicator-item span.".concat(n," {\n                font-size: ").concat(player_configs.mutedIndicatorFontSize-r[n][0],"px;\n            }\n        }\n        @media(max-width: 380px) {\n            button.panda-muted-indicator-item span.").concat(n," {\n                font-size: ").concat(player_configs.mutedIndicatorFontSize-r[n][0]-r[n][1],"px;\n            }\n        }\n        "));var a=document.createElement("style");a.innerText=o,document.head.appendChild(a),t.forEach((function(e){e.classList.add(n)}))}}();var r=player_configs.controls.filter((function(e){return"play"!==e&&"play-large"!==e}));N&&(l=N,s=document.createElement("div"),(d=document.createElement("p")).innerText=l,s.setAttribute("class","panda-title-wrapper"),s.appendChild(d),Me(s)),(!r||r&&!r.length)&&(document.querySelector(".plyr__controls").style.background="none"),player_configs.alternativeProgress&&function(){var e=document.createElement("div");e.id="wrapper-progress",tt(e,"alternative-progress-wrapper");var t=document.createElement("div");tt(t,"alternative-progress"),e.appendChild(t);var n=document.querySelector(".plyr__controls");n&&(n.style="padding-bottom: "+(player_configs.alternativeProgressHeight+5)+"px");var r=document.getElementsByClassName("plyr--html5")[0];player_configs.mutedIndicatorIcon&&tt(e,"disabled"),r.appendChild(e)}(),function(){if(player_configs.initDisabledControls){var e=document.querySelector('[data-plyr="play"].plyr__control--overlaid');e&&(e.style.display="none");var t=document.querySelector(".plyr__controls");t&&tt(t,"disabled");var n=document.getElementById("wrapper-progress");n&&tt(n,"disabled")}}(),"online"===K&&ee&&Pe(),player_configs.bookMarks&&player_configs.bookMarks.length>0&&Re(),player_configs.ctas&&player_configs.ctas.length>0&&(He(),je()),!player_configs.pandaBranding||player_configs.alternativeProgress||player_configs.mutedIndicatorIcon||(i='<svg width="100" height="20" viewBox="0 0 523 116" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3.84 106.728V50.664C3.84 49.192 3.872 48.104 3.936 47.4C4.064 46.696 4.352 45.896 4.8 45C5.696 43.272 7.84 42.408 11.232 42.408C14.624 42.408 16.896 42.856 18.048 43.752C19.264 44.584 19.968 45.832 20.16 47.496C22.592 44.168 26.4 42.504 31.584 42.504C36.832 42.504 41.792 44.968 46.464 49.896C51.136 54.824 53.472 60.552 53.472 67.08C53.472 73.608 51.136 79.336 46.464 84.264C41.856 89.192 36.928 91.656 31.68 91.656C26.432 91.656 22.624 90.184 20.256 87.24V106.632C20.256 108.104 20.192 109.192 20.064 109.896C20 110.6 19.712 111.4 19.2 112.296C18.752 113.256 17.952 113.928 16.8 114.312C15.648 114.696 14.08 114.888 12.096 114.888C10.112 114.888 8.512 114.696 7.296 114.312C6.144 113.928 5.312 113.288 4.8 112.392C4.352 111.496 4.064 110.696 3.936 109.992C3.872 109.288 3.84 108.2 3.84 106.728ZM22.848 61.512C21.376 63.24 20.64 65.128 20.64 67.176C20.64 69.224 21.376 71.112 22.848 72.84C24.384 74.504 26.304 75.336 28.608 75.336C30.976 75.336 32.96 74.504 34.56 72.84C36.224 71.176 37.056 69.288 37.056 67.176C37.056 65.064 36.288 63.176 34.752 61.512C33.216 59.784 31.2 58.92 28.704 58.92C26.272 58.92 24.32 59.784 22.848 61.512ZM88.227 47.784C88.611 44.2 91.139 42.408 95.811 42.408C98.307 42.408 100.163 42.6 101.379 42.984C102.595 43.368 103.427 44.04 103.875 45C104.387 45.96 104.675 46.824 104.739 47.592C104.867 48.296 104.931 49.384 104.931 50.856V84.456C104.931 85.928 104.867 87.048 104.739 87.816C104.675 88.52 104.419 89.352 103.971 90.312C103.075 91.976 100.867 92.808 97.347 92.808C93.891 92.808 91.555 92.392 90.339 91.56C89.187 90.664 88.515 89.384 88.323 87.72C85.955 91.112 81.987 92.808 76.419 92.808C70.915 92.808 65.795 90.28 61.059 85.224C56.323 80.168 53.955 74.312 53.955 67.656C53.955 60.936 56.323 55.08 61.059 50.088C65.859 45.032 71.107 42.504 76.803 42.504C78.979 42.504 80.963 42.888 82.755 43.656C84.547 44.424 85.795 45.16 86.499 45.864C87.203 46.504 87.779 47.144 88.227 47.784ZM70.755 67.752C70.755 69.864 71.587 71.784 73.251 73.512C74.915 75.176 76.931 76.008 79.299 76.008C81.667 76.008 83.619 75.144 85.155 73.416C86.755 71.688 87.555 69.8 87.555 67.752C87.555 65.64 86.787 63.688 85.251 61.896C83.779 60.104 81.763 59.208 79.203 59.208C76.707 59.208 74.659 60.104 73.059 61.896C71.523 63.688 70.755 65.64 70.755 67.752ZM136.391 42.408C142.791 42.408 148.103 44.872 152.327 49.8C156.615 54.664 158.759 60.616 158.759 67.656V84.552C158.759 86.024 158.695 87.144 158.567 87.912C158.503 88.616 158.247 89.416 157.799 90.312C156.903 92.04 154.407 92.904 150.311 92.904C145.767 92.904 143.143 91.72 142.439 89.352C142.055 88.264 141.863 86.632 141.863 84.456V67.56C141.863 64.936 141.095 62.888 139.559 61.416C138.087 59.944 136.071 59.208 133.511 59.208C131.015 59.208 128.967 59.976 127.367 61.512C125.831 63.048 125.063 65.064 125.063 67.56V84.552C125.063 86.024 124.999 87.144 124.871 87.912C124.807 88.616 124.519 89.416 124.007 90.312C123.175 92.04 120.711 92.904 116.615 92.904C112.583 92.904 110.119 92.04 109.223 90.312C108.775 89.352 108.487 88.52 108.359 87.816C108.295 87.048 108.263 85.928 108.263 84.456V50.472C108.263 49.064 108.295 48.008 108.359 47.304C108.487 46.536 108.807 45.704 109.319 44.808C110.215 43.208 112.679 42.408 116.711 42.408C120.615 42.408 123.015 43.144 123.911 44.616C124.551 45.704 124.871 47.016 124.871 48.552C125.127 48.104 125.703 47.464 126.599 46.632C127.495 45.8 128.359 45.128 129.191 44.616C131.367 43.144 133.767 42.408 136.391 42.408ZM196.049 21.384C196.561 20.424 197.425 19.752 198.641 19.368C199.857 18.984 201.457 18.792 203.441 18.792C205.489 18.792 207.121 18.984 208.337 19.368C209.553 19.752 210.385 20.424 210.833 21.384C211.345 22.344 211.633 23.208 211.697 23.976C211.825 24.68 211.889 25.768 211.889 27.24V84.552C211.889 86.024 211.825 87.144 211.697 87.912C211.633 88.616 211.345 89.416 210.833 90.312C209.873 92.04 207.153 92.904 202.673 92.904C198.257 92.904 195.793 91.336 195.281 88.2C192.593 91.272 188.849 92.808 184.049 92.808C178.289 92.808 173.041 90.312 168.305 85.32C163.569 80.264 161.201 74.408 161.201 67.752C161.201 61.032 163.569 55.144 168.305 50.088C173.105 45.032 178.353 42.504 184.049 42.504C188.785 42.504 192.465 44.104 195.089 47.304V27.144C195.089 25.672 195.121 24.584 195.185 23.88C195.313 23.112 195.601 22.28 196.049 21.384ZM180.497 73.512C182.161 75.24 184.177 76.104 186.545 76.104C188.913 76.104 190.865 75.24 192.401 73.512C194.001 71.784 194.801 69.896 194.801 67.848C194.801 65.736 194.033 63.784 192.497 61.992C191.025 60.2 189.009 59.304 186.449 59.304C183.889 59.304 181.841 60.2 180.305 61.992C178.769 63.72 178.001 65.64 178.001 67.752C178.001 69.864 178.833 71.784 180.497 73.512ZM248.048 47.784C248.432 44.2 250.96 42.408 255.632 42.408C258.128 42.408 259.984 42.6 261.2 42.984C262.416 43.368 263.248 44.04 263.696 45C264.208 45.96 264.496 46.824 264.56 47.592C264.688 48.296 264.752 49.384 264.752 50.856V84.456C264.752 85.928 264.688 87.048 264.56 87.816C264.496 88.52 264.24 89.352 263.792 90.312C262.896 91.976 260.688 92.808 257.168 92.808C253.712 92.808 251.376 92.392 250.16 91.56C249.008 90.664 248.336 89.384 248.144 87.72C245.776 91.112 241.808 92.808 236.24 92.808C230.736 92.808 225.616 90.28 220.88 85.224C216.144 80.168 213.776 74.312 213.776 67.656C213.776 60.936 216.144 55.08 220.88 50.088C225.68 45.032 230.928 42.504 236.624 42.504C238.8 42.504 240.784 42.888 242.576 43.656C244.368 44.424 245.616 45.16 246.32 45.864C247.024 46.504 247.6 47.144 248.048 47.784ZM230.576 67.752C230.576 69.864 231.408 71.784 233.072 73.512C234.736 75.176 236.752 76.008 239.12 76.008C241.488 76.008 243.44 75.144 244.976 73.416C246.576 71.688 247.376 69.8 247.376 67.752C247.376 65.64 246.608 63.688 245.072 61.896C243.6 60.104 241.584 59.208 239.024 59.208C236.528 59.208 234.48 60.104 232.88 61.896C231.344 63.688 230.576 65.64 230.576 67.752ZM339.021 43.56C342.349 45.544 344.013 47.656 344.013 49.896C344.013 51.176 343.373 52.936 342.093 55.176L322.221 89.256C321.581 90.344 320.557 91.336 319.149 92.232C317.741 93.064 316.333 93.48 314.925 93.48C313.581 93.48 312.269 93.16 310.989 92.52C309.773 91.816 308.909 91.112 308.397 90.408L307.533 89.352L287.565 55.176C286.285 53.064 285.645 51.336 285.645 49.992C285.645 47.688 287.309 45.544 290.637 43.56C293.069 42.152 294.989 41.448 296.397 41.448C297.805 41.448 298.893 41.896 299.661 42.792C300.493 43.624 301.357 44.904 302.253 46.632L314.829 70.824L327.405 46.632C328.109 45.416 328.621 44.552 328.941 44.04C329.325 43.464 329.901 42.92 330.669 42.408C331.437 41.832 332.461 41.544 333.741 41.544C335.021 41.544 336.781 42.216 339.021 43.56ZM344.944 50.856C344.944 49.384 344.976 48.296 345.04 47.592C345.168 46.824 345.456 45.96 345.904 45C346.8 43.336 349.296 42.504 353.392 42.504C356.464 42.504 358.64 43.048 359.92 44.136C361.008 45.032 361.584 46.408 361.648 48.264C361.712 48.904 361.744 49.832 361.744 51.048V84.648C361.744 86.12 361.68 87.24 361.552 88.008C361.488 88.712 361.2 89.544 360.688 90.504C359.856 92.168 357.392 93 353.296 93C349.264 93 346.8 92.136 345.904 90.408C345.456 89.448 345.168 88.616 345.04 87.912C344.976 87.208 344.944 86.088 344.944 84.552V50.856ZM360.688 33.096C360.24 33.992 359.408 34.632 358.192 35.016C356.976 35.4 355.344 35.592 353.296 35.592C351.312 35.592 349.712 35.4 348.496 35.016C347.28 34.632 346.416 33.96 345.904 33C345.456 32.04 345.168 31.208 345.04 30.504C344.976 29.736 344.944 28.616 344.944 27.144C344.944 25.672 344.976 24.584 345.04 23.88C345.168 23.112 345.456 22.28 345.904 21.384C346.8 19.656 349.296 18.792 353.392 18.792C357.424 18.792 359.856 19.656 360.688 21.384C361.2 22.344 361.488 23.208 361.552 23.976C361.68 24.68 361.744 25.768 361.744 27.24C361.744 28.712 361.68 29.832 361.552 30.6C361.488 31.304 361.2 32.136 360.688 33.096ZM398.981 21.384C399.493 20.424 400.357 19.752 401.573 19.368C402.789 18.984 404.389 18.792 406.373 18.792C408.421 18.792 410.053 18.984 411.269 19.368C412.485 19.752 413.317 20.424 413.765 21.384C414.277 22.344 414.565 23.208 414.629 23.976C414.757 24.68 414.821 25.768 414.821 27.24V84.552C414.821 86.024 414.757 87.144 414.629 87.912C414.565 88.616 414.277 89.416 413.765 90.312C412.805 92.04 410.085 92.904 405.605 92.904C401.189 92.904 398.725 91.336 398.213 88.2C395.525 91.272 391.781 92.808 386.981 92.808C381.221 92.808 375.973 90.312 371.237 85.32C366.501 80.264 364.133 74.408 364.133 67.752C364.133 61.032 366.501 55.144 371.237 50.088C376.037 45.032 381.285 42.504 386.981 42.504C391.717 42.504 395.397 44.104 398.021 47.304V27.144C398.021 25.672 398.053 24.584 398.117 23.88C398.245 23.112 398.533 22.28 398.981 21.384ZM383.429 73.512C385.093 75.24 387.109 76.104 389.477 76.104C391.845 76.104 393.797 75.24 395.333 73.512C396.933 71.784 397.733 69.896 397.733 67.848C397.733 65.736 396.965 63.784 395.429 61.992C393.957 60.2 391.941 59.304 389.381 59.304C386.821 59.304 384.773 60.2 383.237 61.992C381.701 63.72 380.933 65.64 380.933 67.752C380.933 69.864 381.765 71.784 383.429 73.512ZM466.915 61.704C466.915 65.608 465.923 68.52 463.939 70.44C462.019 72.296 459.875 73.224 457.507 73.224H434.755C434.755 75.016 435.811 76.52 437.923 77.736C440.035 78.952 442.147 79.56 444.259 79.56C447.971 79.56 450.883 79.176 452.995 78.408L454.051 78.024C455.587 77.32 456.867 76.968 457.891 76.968C459.939 76.968 461.699 78.408 463.171 81.288C464.003 83.016 464.419 84.488 464.419 85.704C464.419 91.4 457.603 94.248 443.971 94.248C439.235 94.248 435.011 93.448 431.299 91.848C427.651 90.184 424.803 88.008 422.755 85.32C418.723 80.136 416.707 74.344 416.707 67.944C416.707 59.88 419.299 53.448 424.483 48.648C429.731 43.784 436.259 41.352 444.067 41.352C452.963 41.352 459.491 44.488 463.651 50.76C465.827 54.088 466.915 57.736 466.915 61.704ZM446.659 64.488C449.091 64.488 450.307 63.464 450.307 61.416C450.307 59.944 449.731 58.76 448.579 57.864C447.491 56.968 445.891 56.52 443.779 56.52C441.731 56.52 439.683 57.384 437.635 59.112C435.587 60.776 434.563 62.568 434.563 64.488H446.659ZM467.419 67.752C467.419 60.072 470.107 53.736 475.483 48.744C480.859 43.752 487.003 41.256 493.915 41.256C500.827 41.256 506.939 43.752 512.251 48.744C517.563 53.672 520.219 59.976 520.219 67.656C520.219 72.968 518.843 77.704 516.091 81.864C513.339 85.96 509.979 89 506.011 90.984C502.107 92.904 498.043 93.864 493.819 93.864C489.595 93.864 485.499 92.84 481.531 90.792C477.563 88.68 474.203 85.608 471.451 81.576C468.763 77.48 467.419 72.872 467.419 67.752ZM487.483 74.664C489.531 76.2 491.611 76.968 493.723 76.968C495.835 76.968 497.947 76.168 500.059 74.568C502.171 72.968 503.227 70.6 503.227 67.464C503.227 64.328 502.235 61.992 500.251 60.456C498.267 58.92 496.123 58.152 493.819 58.152C491.515 58.152 489.371 58.952 487.387 60.552C485.403 62.152 484.411 64.52 484.411 67.656C484.411 70.728 485.435 73.064 487.483 74.664Z" fill="white"/></svg>',(c=document.createElement("a")).setAttribute("target","_blank"),c.setAttribute("class","panda-branding-link"),player_configs.refCode&&""!==player_configs.refCode?c.setAttribute("href","https://pandavideo.com.br/?ref="+player_configs.refCode):c.setAttribute("href","https://pandavideo.com.br/"),i=i.replace(/white/gm,"var(--plyr-video-control-color)"),c.innerHTML=i,Me(c),I=!0),"online"===K&&(o=document.getElementsByClassName("plyr__controls")[0],(a=document.createElement("button")).setAttribute("id","live-time-indicator"),a.onclick=function(){window.postMessage({type:"currentTime",parameter:-1},"*")},a.innerHTML="<div></div> LIVE",o.insertBefore(a,o.childNodes[1])),Q=!0,window.liveAttempts=0}var o,a,i,c,l,s,d,p,f,y},P?De():qe(),document.getElementsByTagName("head")[0],document.createElement("script").type="text/javascript"),Qe(),window.addEventListener("resize",Qe),document.onkeydown=function(e){27==(e=e||window.event).keyCode&&(player_configs.playOpensFullscreen?window.parent.postMessage({message:"panda_close_window_fullscreen",video:E},"*"):player_configs.playOpensFullscreenNative&&window.postMessage({type:"fullscreen.exit"},"*"))}})()})();</script>
        <div class="container" id="video-container" style="margin-top: 0px;"><div id="report-problem-dialog"><div id="copy-paste" class="disabled"><header> <p class="report-problem-text">Reportar erro</p></header> <div id="report-first-step"> <section id="radio-section"> <div> <input type="radio" id="report-not-loading" name="issue-reported" value="report-not-loading" checked=""> <label for="report-not-loading">O vídeo não carrega, mesmo com boa conexão de internet</label><br></div><div> <input type="radio" id="report-unmatch-description" name="issue-reported" value="report-unmatch-description"> <label for="report-unmatch-description">O conteúdo do vídeo não corresponde com a descrição</label> </div><div> <input type="radio" id="report-low-quality" name="issue-reported" value="report-low-quality"> <label for="report-low-quality">O vídeo está em baixa qualidade ou pixelado</label> </div><div> <input type="radio" id="report-other" name="issue-reported" value="report-other"> <label for="report-other">Outro</label><br></div><div class="report-textfield-card"> <div id="other-input-wrapper" class="disabled"> <input class="other-input" type="text" id="other-input" name="other" placeholder="Descreva seu problema..."> </div></div></section> <footer> <button id="report-second-step-btn" class="report-problem-dialog-button">Enviar</button> <button id="report-close-dialog-btn" class="report-problem-dialog-button">Cancelar</button> </footer> </div><div id="report-second-step" class="disabled"> <div id="loading-div"> <svg viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve"> <path fill="#4874F1" d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50"> <animatetransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="0 50 50" to="360 50 50" repeatCount="indefinite"></animatetransform> </path> </svg> </div><p id="second-step-text">Aguarde um momento, seu feedback <br> está sendo enviado.</p></div><div id="report-third-step" class="disabled alone"> <header>  </header> <p class="report-problem-text">Obrigado por nos ajudar a melhorar!</p><footer> <button id="report-ok-btn" class="report-problem-dialog-button">OK</button> </footer> </div></div></div>
            <!-- Loading indicator -->
            <div tabindex="0" class="plyr plyr--full-ui plyr--video plyr--html5 plyr--fullscreen-enabled plyr--paused plyr--stopped plyr--pip-supported plyr__poster-enabled"><div class="plyr__controls"><button class="plyr__controls__item plyr__control" type="button" data-plyr="play" aria-label="Reproduzir"><svg class="icon--pressed" aria-hidden="true" focusable="false"><use href="./icons/plyr.svg#plyr-pause"></use></svg><svg class="icon--not-pressed" aria-hidden="true" focusable="false"><use href="./icons/plyr.svg#plyr-play"></use></svg><span class="label--pressed plyr__sr-only">Pausar</span><span class="label--not-pressed plyr__sr-only">Reproduzir</span></button><div class="plyr__controls__item plyr__progress__container"><div class="plyr__progress"><input data-plyr="seek" type="range" min="0" max="100" step="0.01" value="0" autocomplete="off" role="slider" aria-label="Procurar" aria-valuemin="0" aria-valuemax="1699.366667" aria-valuenow="0" id="plyr-seek-6724" aria-valuetext="00:00 de 00:00" style="--value: 0%;"><progress class="plyr__progress__buffer" min="0" max="100" value="5.8839175171369895" role="progressbar" aria-hidden="true">% colocado na memória intermédia</progress><span class="plyr__tooltip" hidden="">00:00</span><div class="plyr__preview-thumb"><div class="plyr__preview-thumb__image-container"></div><div class="plyr__preview-thumb__time-container"><span>00:00</span></div></div></div></div><div class="plyr__controls__item plyr__time--current plyr__time" aria-label="Tempo atual">28:19</div><div class="plyr__controls__item plyr__volume"><button type="button" class="plyr__control" data-plyr="mute"><svg class="icon--pressed" aria-hidden="true" focusable="false"><use href="./icons/plyr.svg#plyr-muted"></use></svg><svg class="icon--not-pressed" aria-hidden="true" focusable="false"><use href="./icons/plyr.svg#plyr-volume"></use></svg><span class="label--pressed plyr__sr-only">Com som</span><span class="label--not-pressed plyr__sr-only">Sem som</span></button><input data-plyr="volume" type="range" min="0" max="1" step="0.05" value="1" autocomplete="off" role="slider" aria-label="Volume" aria-valuemin="0" aria-valuemax="100" aria-valuenow="100" id="plyr-volume-6724" aria-valuetext="100.0%" style="--value: 100%;"></div><div class="plyr__controls__item plyr__menu"><button aria-haspopup="true" aria-controls="plyr-settings-6724" aria-expanded="false" type="button" class="plyr__control" data-plyr="settings"><svg aria-hidden="true" focusable="false"><use href="./icons/plyr.svg#plyr-settings"></use></svg><span class="plyr__sr-only">Definições</span></button><div class="plyr__menu__container" id="plyr-settings-6724" hidden=""><div style="max-height: calc(100vh - 50px);"><div id="plyr-settings-6724-home"><div role="menu"><button data-plyr="settings" type="button" class="plyr__control plyr__control--forward" role="menuitem" aria-haspopup="true" hidden=""><span>Legendas<span class="plyr__menu__value">Desativado</span></span></button><button data-plyr="settings" type="button" class="plyr__control plyr__control--forward" role="menuitem" aria-haspopup="true"><span>Qualidade<span class="plyr__menu__value">Auto</span></span></button><button data-plyr="settings" type="button" class="plyr__control plyr__control--forward" role="menuitem" aria-haspopup="true"><span>Velocidade<span class="plyr__menu__value">Normal</span></span></button><button class="customSettingsBtn" id="custom-plyr-btn" data-plyr="settings" type="button" role="menuitem" aria-haspopup="true">Reportar erro</button></div></div><div id="plyr-settings-6724-captions" hidden=""><button type="button" class="plyr__control plyr__control--back"><span aria-hidden="true">Legendas</span><span class="plyr__sr-only">Voltar ao menu anterior</span></button><div role="menu"></div></div><div id="plyr-settings-6724-quality" hidden=""><button type="button" class="plyr__control plyr__control--back"><span aria-hidden="true">Qualidade</span><span class="plyr__sr-only">Voltar ao menu anterior</span></button><div role="menu"><button data-plyr="quality" type="button" role="menuitemradio" class="plyr__control" aria-checked="true" value="0"><span>Auto (720p)</span></button><button data-plyr="quality" type="button" role="menuitemradio" class="plyr__control" aria-checked="false" value="720"><span>720p<span class="plyr__menu__value"><span class="plyr__badge">HD</span></span></span></button><button data-plyr="quality" type="button" role="menuitemradio" class="plyr__control" aria-checked="false" value="1080"><span>1080p<span class="plyr__menu__value"><span class="plyr__badge">HD</span></span></span></button></div></div><div id="plyr-settings-6724-speed" hidden=""><button type="button" class="plyr__control plyr__control--back"><span aria-hidden="true">Velocidade</span><span class="plyr__sr-only">Voltar ao menu anterior</span></button><div role="menu"><button data-plyr="speed" type="button" role="menuitemradio" class="plyr__control" aria-checked="false" value="0.5"><span>0.5×</span></button><button data-plyr="speed" type="button" role="menuitemradio" class="plyr__control" aria-checked="false" value="0.75"><span>0.75×</span></button><button data-plyr="speed" type="button" role="menuitemradio" class="plyr__control" aria-checked="true" value="1"><span>Normal</span></button><button data-plyr="speed" type="button" role="menuitemradio" class="plyr__control" aria-checked="false" value="1.25"><span>1.25×</span></button><button data-plyr="speed" type="button" role="menuitemradio" class="plyr__control" aria-checked="false" value="1.5"><span>1.5×</span></button><button data-plyr="speed" type="button" role="menuitemradio" class="plyr__control" aria-checked="false" value="2"><span>2×</span></button></div></div></div></div></div><button class="plyr__controls__item plyr__control" type="button" data-plyr="pip"><svg aria-hidden="true" focusable="false"><use href="./icons/plyr.svg#plyr-pip"></use></svg><span class="plyr__sr-only">PIP</span></button><button class="plyr__controls__item plyr__control" type="button" data-plyr="fullscreen"><svg class="icon--pressed" aria-hidden="true" focusable="false"><use href="./icons/plyr.svg#plyr-exit-fullscreen"></use></svg><svg class="icon--not-pressed" aria-hidden="true" focusable="false"><use href="./icons/plyr.svg#plyr-enter-fullscreen"></use></svg><span class="label--pressed plyr__sr-only">Sair do modo de ecrã inteiro</span><span class="label--not-pressed plyr__sr-only">Entrar no modo de ecrã inteiro</span></button></div><div class="plyr__video-wrapper"><div class="vsc-controller"><template shadowrootmode="open">
        <style>
          @import "chrome-extension://gaiceihehajjahakcglkhmdbbdclbnlf/css/shade.css";
        </style>

        <div id="controller" style="top:0px; left:0px; opacity:0.3">
          <span data-action="drag" class="draggable">1.00</span>
          <span id="controls">
            <button data-action="rewind" class="rw">«</button>
            <button data-action="slower">−</button>
            <button data-action="faster">+</button>
            <button data-action="advance" class="rw">»</button>
            <button data-action="display" class="hideButton">×</button>
          </span>
        </div>
      </template></div><video crossorigin="" preload="auto" playsinline="" poster="https://thumbs.tv.pandavideo.com.br/vz-59817ca7-33e/9dfce931-6179-4e60-80a6-1101958958f2.application/octet-stream" data-poster="https://thumbs.tv.pandavideo.com.br/vz-59817ca7-33e/9dfce931-6179-4e60-80a6-1101958958f2.application/octet-stream" src="blob:https://player-vz-59817ca7-33e.tv.pandavideo.com.br/ac43ad6c-c022-49fb-bca1-7762648cf323" style="visibility: visible;"><source type="application/x-mpegURL" src="https://b-vz-59817ca7-33e.tv.pandavideo.com.br/7f92473a-26d6-4036-b65d-8941ce90ea14/playlist.m3u8"></video><div class="plyr__poster" style="background-image: url(&quot;https://thumbs.tv.pandavideo.com.br/vz-59817ca7-33e/9dfce931-6179-4e60-80a6-1101958958f2.application/octet-stream&quot;);"></div><div class="plyr__preview-scrubbing"></div></div><div class="plyr__captions"></div><button type="button" class="plyr__control plyr__control--overlaid" data-plyr="play" aria-label="Reproduzir" style="width: 55px; height: 55px; display: flex; justify-content: center; align-items: center;"><svg aria-hidden="true" focusable="false" style="width: 18px; height: 18px; display: flex; align-items: center;"><use href="./icons/plyr.svg#plyr-play"></use></svg><span class="plyr__sr-only">Reproduzir</span></button></div><div id="error-indicator" class="disabled">

            </div>
            <div class="loading-icon disabled">
                <svg x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve">
                    <path fill="#4874F1" d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">
                        <animatetransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="0 50 50" to="360 50 50" repeatCount="indefinite"></animatetransform>
                    </path>
                </svg>
            </div>

            <!-- Live -->
            <div class="live-offline-badge disabled">

                <img src="./panda-icon.svg" alt="">
                <p id="live-subtitle">AGUARDANDO LIVE STREAM</p>
                <p id="live-title"></p>
            </div>
            <div class="live-thumb disabled">
                <img src="./saved_resource" alt="Live Offline">
            </div>
        <div id="context-menu" class=" disabled"><ul> <li> <a href="https://pandavideo.com.br/" target="_blank" id="about-panda">Sobre a Panda Video</a> </li><li> <button id="report-problem">Reportar erro</button> </li></ul></div></div>
    </body></html>